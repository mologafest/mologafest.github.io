(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const O of document.querySelectorAll('link[rel="modulepreload"]'))C(O);new MutationObserver(O=>{for(const A of O)if(A.type==="childList")for(const B of A.addedNodes)B.tagName==="LINK"&&B.rel==="modulepreload"&&C(B)}).observe(document,{childList:!0,subtree:!0});function x(O){const A={};return O.integrity&&(A.integrity=O.integrity),O.referrerPolicy&&(A.referrerPolicy=O.referrerPolicy),O.crossOrigin==="use-credentials"?A.credentials="include":O.crossOrigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function C(O){if(O.ep)return;O.ep=!0;const A=x(O);fetch(O.href,A)}})();function mo(u,o){const x=Object.create(null),C=u.split(",");for(let O=0;O<C.length;O++)x[C[O]]=!0;return o?O=>!!x[O.toLowerCase()]:O=>!!x[O]}const Nt={},Ti=[],Se=()=>{},Vc=()=>!1,Gc=/^on[^a-z]/,or=u=>Gc.test(u),yo=u=>u.startsWith("onUpdate:"),Jt=Object.assign,bo=(u,o)=>{const x=u.indexOf(o);x>-1&&u.splice(x,1)},Kc=Object.prototype.hasOwnProperty,Lt=(u,o)=>Kc.call(u,o),It=Array.isArray,on=u=>sr(u)==="[object Map]",qc=u=>sr(u)==="[object Set]",Ft=u=>typeof u=="function",Qt=u=>typeof u=="string",_o=u=>typeof u=="symbol",Kt=u=>u!==null&&typeof u=="object",ha=u=>Kt(u)&&Ft(u.then)&&Ft(u.catch),Jc=Object.prototype.toString,sr=u=>Jc.call(u),Qc=u=>sr(u).slice(8,-1),$c=u=>sr(u)==="[object Object]",xo=u=>Qt(u)&&u!=="NaN"&&u[0]!=="-"&&""+parseInt(u,10)===u,qn=mo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ar=u=>{const o=Object.create(null);return x=>o[x]||(o[x]=u(x))},Zc=/-(\w)/g,Ei=ar(u=>u.replace(Zc,(o,x)=>x?x.toUpperCase():"")),tu=/\B([A-Z])/g,Di=ar(u=>u.replace(tu,"-$1").toLowerCase()),da=ar(u=>u.charAt(0).toUpperCase()+u.slice(1)),qr=ar(u=>u?`on${da(u)}`:""),cn=(u,o)=>!Object.is(u,o),Jr=(u,o)=>{for(let x=0;x<u.length;x++)u[x](o)},tr=(u,o,x)=>{Object.defineProperty(u,o,{configurable:!0,enumerable:!1,value:x})},eu=u=>{const o=parseFloat(u);return isNaN(o)?u:o};let Fs;const no=()=>Fs||(Fs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function lr(u){if(It(u)){const o={};for(let x=0;x<u.length;x++){const C=u[x],O=Qt(C)?ou(C):lr(C);if(O)for(const A in O)o[A]=O[A]}return o}else{if(Qt(u))return u;if(Kt(u))return u}}const iu=/;(?![^(]*\))/g,nu=/:([^]+)/,ru=/\/\*[^]*?\*\//g;function ou(u){const o={};return u.replace(ru,"").split(iu).forEach(x=>{if(x){const C=x.split(nu);C.length>1&&(o[C[0].trim()]=C[1].trim())}}),o}function cr(u){let o="";if(Qt(u))o=u;else if(It(u))for(let x=0;x<u.length;x++){const C=cr(u[x]);C&&(o+=C+" ")}else if(Kt(u))for(const x in u)u[x]&&(o+=x+" ");return o.trim()}const su="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",au=mo(su);function pa(u){return!!u||u===""}let _e;class lu{constructor(o=!1){this.detached=o,this._active=!0,this.effects=[],this.cleanups=[],this.parent=_e,!o&&_e&&(this.index=(_e.scopes||(_e.scopes=[])).push(this)-1)}get active(){return this._active}run(o){if(this._active){const x=_e;try{return _e=this,o()}finally{_e=x}}}on(){_e=this}off(){_e=this.parent}stop(o){if(this._active){let x,C;for(x=0,C=this.effects.length;x<C;x++)this.effects[x].stop();for(x=0,C=this.cleanups.length;x<C;x++)this.cleanups[x]();if(this.scopes)for(x=0,C=this.scopes.length;x<C;x++)this.scopes[x].stop(!0);if(!this.detached&&this.parent&&!o){const O=this.parent.scopes.pop();O&&O!==this&&(this.parent.scopes[this.index]=O,O.index=this.index)}this.parent=void 0,this._active=!1}}}function cu(u,o=_e){o&&o.active&&o.effects.push(u)}function uu(){return _e}const Co=u=>{const o=new Set(u);return o.w=0,o.n=0,o},ga=u=>(u.w&$e)>0,va=u=>(u.n&$e)>0,fu=({deps:u})=>{if(u.length)for(let o=0;o<u.length;o++)u[o].w|=$e},hu=u=>{const{deps:o}=u;if(o.length){let x=0;for(let C=0;C<o.length;C++){const O=o[C];ga(O)&&!va(O)?O.delete(u):o[x++]=O,O.w&=~$e,O.n&=~$e}o.length=x}},ro=new WeakMap;let en=0,$e=1;const oo=30;let xe;const di=Symbol(""),so=Symbol("");class wo{constructor(o,x=null,C){this.fn=o,this.scheduler=x,this.active=!0,this.deps=[],this.parent=void 0,cu(this,C)}run(){if(!this.active)return this.fn();let o=xe,x=Je;for(;o;){if(o===this)return;o=o.parent}try{return this.parent=xe,xe=this,Je=!0,$e=1<<++en,en<=oo?fu(this):Rs(this),this.fn()}finally{en<=oo&&hu(this),$e=1<<--en,xe=this.parent,Je=x,this.parent=void 0,this.deferStop&&this.stop()}}stop(){xe===this?this.deferStop=!0:this.active&&(Rs(this),this.onStop&&this.onStop(),this.active=!1)}}function Rs(u){const{deps:o}=u;if(o.length){for(let x=0;x<o.length;x++)o[x].delete(u);o.length=0}}let Je=!0;const ma=[];function Ii(){ma.push(Je),Je=!1}function ji(){const u=ma.pop();Je=u===void 0?!0:u}function de(u,o,x){if(Je&&xe){let C=ro.get(u);C||ro.set(u,C=new Map);let O=C.get(x);O||C.set(x,O=Co()),ya(O)}}function ya(u,o){let x=!1;en<=oo?va(u)||(u.n|=$e,x=!ga(u)):x=!u.has(xe),x&&(u.add(xe),xe.deps.push(u))}function ze(u,o,x,C,O,A){const B=ro.get(u);if(!B)return;let f=[];if(o==="clear")f=[...B.values()];else if(x==="length"&&It(u)){const i=Number(C);B.forEach((l,c)=>{(c==="length"||c>=i)&&f.push(l)})}else switch(x!==void 0&&f.push(B.get(x)),o){case"add":It(u)?xo(x)&&f.push(B.get("length")):(f.push(B.get(di)),on(u)&&f.push(B.get(so)));break;case"delete":It(u)||(f.push(B.get(di)),on(u)&&f.push(B.get(so)));break;case"set":on(u)&&f.push(B.get(di));break}if(f.length===1)f[0]&&ao(f[0]);else{const i=[];for(const l of f)l&&i.push(...l);ao(Co(i))}}function ao(u,o){const x=It(u)?u:[...u];for(const C of x)C.computed&&Ls(C);for(const C of x)C.computed||Ls(C)}function Ls(u,o){(u!==xe||u.allowRecurse)&&(u.scheduler?u.scheduler():u.run())}const du=mo("__proto__,__v_isRef,__isVue"),ba=new Set(Object.getOwnPropertyNames(Symbol).filter(u=>u!=="arguments"&&u!=="caller").map(u=>Symbol[u]).filter(_o)),pu=So(),gu=So(!1,!0),vu=So(!0),Bs=mu();function mu(){const u={};return["includes","indexOf","lastIndexOf"].forEach(o=>{u[o]=function(...x){const C=Xt(this);for(let A=0,B=this.length;A<B;A++)de(C,"get",A+"");const O=C[o](...x);return O===-1||O===!1?C[o](...x.map(Xt)):O}}),["push","pop","shift","unshift","splice"].forEach(o=>{u[o]=function(...x){Ii();const C=Xt(this)[o].apply(this,x);return ji(),C}}),u}function yu(u){const o=Xt(this);return de(o,"has",u),o.hasOwnProperty(u)}function So(u=!1,o=!1){return function(C,O,A){if(O==="__v_isReactive")return!u;if(O==="__v_isReadonly")return u;if(O==="__v_isShallow")return o;if(O==="__v_raw"&&A===(u?o?ju:Sa:o?wa:Ca).get(C))return C;const B=It(C);if(!u){if(B&&Lt(Bs,O))return Reflect.get(Bs,O,A);if(O==="hasOwnProperty")return yu}const f=Reflect.get(C,O,A);return(_o(O)?ba.has(O):du(O))||(u||de(C,"get",O),o)?f:ae(f)?B&&xo(O)?f:f.value:Kt(f)?u?Ta(f):Po(f):f}}const bu=_a(),_u=_a(!0);function _a(u=!1){return function(x,C,O,A){let B=x[C];if(Ai(B)&&ae(B)&&!ae(O))return!1;if(!u&&(!er(O)&&!Ai(O)&&(B=Xt(B),O=Xt(O)),!It(x)&&ae(B)&&!ae(O)))return B.value=O,!0;const f=It(x)&&xo(C)?Number(C)<x.length:Lt(x,C),i=Reflect.set(x,C,O,A);return x===Xt(A)&&(f?cn(O,B)&&ze(x,"set",C,O):ze(x,"add",C,O)),i}}function xu(u,o){const x=Lt(u,o);u[o];const C=Reflect.deleteProperty(u,o);return C&&x&&ze(u,"delete",o,void 0),C}function Cu(u,o){const x=Reflect.has(u,o);return(!_o(o)||!ba.has(o))&&de(u,"has",o),x}function wu(u){return de(u,"iterate",It(u)?"length":di),Reflect.ownKeys(u)}const xa={get:pu,set:bu,deleteProperty:xu,has:Cu,ownKeys:wu},Su={get:vu,set(u,o){return!0},deleteProperty(u,o){return!0}},Tu=Jt({},xa,{get:gu,set:_u}),To=u=>u,ur=u=>Reflect.getPrototypeOf(u);function Hn(u,o,x=!1,C=!1){u=u.__v_raw;const O=Xt(u),A=Xt(o);x||(o!==A&&de(O,"get",o),de(O,"get",A));const{has:B}=ur(O),f=C?To:x?Ao:un;if(B.call(O,o))return f(u.get(o));if(B.call(O,A))return f(u.get(A));u!==O&&u.get(o)}function Un(u,o=!1){const x=this.__v_raw,C=Xt(x),O=Xt(u);return o||(u!==O&&de(C,"has",u),de(C,"has",O)),u===O?x.has(u):x.has(u)||x.has(O)}function Nn(u,o=!1){return u=u.__v_raw,!o&&de(Xt(u),"iterate",di),Reflect.get(u,"size",u)}function Xs(u){u=Xt(u);const o=Xt(this);return ur(o).has.call(o,u)||(o.add(u),ze(o,"add",u,u)),this}function zs(u,o){o=Xt(o);const x=Xt(this),{has:C,get:O}=ur(x);let A=C.call(x,u);A||(u=Xt(u),A=C.call(x,u));const B=O.call(x,u);return x.set(u,o),A?cn(o,B)&&ze(x,"set",u,o):ze(x,"add",u,o),this}function Ys(u){const o=Xt(this),{has:x,get:C}=ur(o);let O=x.call(o,u);O||(u=Xt(u),O=x.call(o,u)),C&&C.call(o,u);const A=o.delete(u);return O&&ze(o,"delete",u,void 0),A}function Ws(){const u=Xt(this),o=u.size!==0,x=u.clear();return o&&ze(u,"clear",void 0,void 0),x}function Vn(u,o){return function(C,O){const A=this,B=A.__v_raw,f=Xt(B),i=o?To:u?Ao:un;return!u&&de(f,"iterate",di),B.forEach((l,c)=>C.call(O,i(l),i(c),A))}}function Gn(u,o,x){return function(...C){const O=this.__v_raw,A=Xt(O),B=on(A),f=u==="entries"||u===Symbol.iterator&&B,i=u==="keys"&&B,l=O[u](...C),c=x?To:o?Ao:un;return!o&&de(A,"iterate",i?so:di),{next(){const{value:e,done:n}=l.next();return n?{value:e,done:n}:{value:f?[c(e[0]),c(e[1])]:c(e),done:n}},[Symbol.iterator](){return this}}}}function Ge(u){return function(...o){return u==="delete"?!1:this}}function Ou(){const u={get(A){return Hn(this,A)},get size(){return Nn(this)},has:Un,add:Xs,set:zs,delete:Ys,clear:Ws,forEach:Vn(!1,!1)},o={get(A){return Hn(this,A,!1,!0)},get size(){return Nn(this)},has:Un,add:Xs,set:zs,delete:Ys,clear:Ws,forEach:Vn(!1,!0)},x={get(A){return Hn(this,A,!0)},get size(){return Nn(this,!0)},has(A){return Un.call(this,A,!0)},add:Ge("add"),set:Ge("set"),delete:Ge("delete"),clear:Ge("clear"),forEach:Vn(!0,!1)},C={get(A){return Hn(this,A,!0,!0)},get size(){return Nn(this,!0)},has(A){return Un.call(this,A,!0)},add:Ge("add"),set:Ge("set"),delete:Ge("delete"),clear:Ge("clear"),forEach:Vn(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(A=>{u[A]=Gn(A,!1,!1),x[A]=Gn(A,!0,!1),o[A]=Gn(A,!1,!0),C[A]=Gn(A,!0,!0)}),[u,x,o,C]}const[Pu,Eu,Au,Mu]=Ou();function Oo(u,o){const x=o?u?Mu:Au:u?Eu:Pu;return(C,O,A)=>O==="__v_isReactive"?!u:O==="__v_isReadonly"?u:O==="__v_raw"?C:Reflect.get(Lt(x,O)&&O in C?x:C,O,A)}const ku={get:Oo(!1,!1)},Du={get:Oo(!1,!0)},Iu={get:Oo(!0,!1)},Ca=new WeakMap,wa=new WeakMap,Sa=new WeakMap,ju=new WeakMap;function Fu(u){switch(u){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ru(u){return u.__v_skip||!Object.isExtensible(u)?0:Fu(Qc(u))}function Po(u){return Ai(u)?u:Eo(u,!1,xa,ku,Ca)}function Lu(u){return Eo(u,!1,Tu,Du,wa)}function Ta(u){return Eo(u,!0,Su,Iu,Sa)}function Eo(u,o,x,C,O){if(!Kt(u)||u.__v_raw&&!(o&&u.__v_isReactive))return u;const A=O.get(u);if(A)return A;const B=Ru(u);if(B===0)return u;const f=new Proxy(u,B===2?C:x);return O.set(u,f),f}function Oi(u){return Ai(u)?Oi(u.__v_raw):!!(u&&u.__v_isReactive)}function Ai(u){return!!(u&&u.__v_isReadonly)}function er(u){return!!(u&&u.__v_isShallow)}function Oa(u){return Oi(u)||Ai(u)}function Xt(u){const o=u&&u.__v_raw;return o?Xt(o):u}function Pa(u){return tr(u,"__v_skip",!0),u}const un=u=>Kt(u)?Po(u):u,Ao=u=>Kt(u)?Ta(u):u;function Ea(u){Je&&xe&&(u=Xt(u),ya(u.dep||(u.dep=Co())))}function Aa(u,o){u=Xt(u);const x=u.dep;x&&ao(x)}function ae(u){return!!(u&&u.__v_isRef===!0)}function he(u){return Bu(u,!1)}function Bu(u,o){return ae(u)?u:new Xu(u,o)}class Xu{constructor(o,x){this.__v_isShallow=x,this.dep=void 0,this.__v_isRef=!0,this._rawValue=x?o:Xt(o),this._value=x?o:un(o)}get value(){return Ea(this),this._value}set value(o){const x=this.__v_isShallow||er(o)||Ai(o);o=x?o:Xt(o),cn(o,this._rawValue)&&(this._rawValue=o,this._value=x?o:un(o),Aa(this))}}function Ma(u){return ae(u)?u.value:u}const zu={get:(u,o,x)=>Ma(Reflect.get(u,o,x)),set:(u,o,x,C)=>{const O=u[o];return ae(O)&&!ae(x)?(O.value=x,!0):Reflect.set(u,o,x,C)}};function ka(u){return Oi(u)?u:new Proxy(u,zu)}class Yu{constructor(o,x,C,O){this._setter=x,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new wo(o,()=>{this._dirty||(this._dirty=!0,Aa(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!O,this.__v_isReadonly=C}get value(){const o=Xt(this);return Ea(o),(o._dirty||!o._cacheable)&&(o._dirty=!1,o._value=o.effect.run()),o._value}set value(o){this._setter(o)}}function Wu(u,o,x=!1){let C,O;const A=Ft(u);return A?(C=u,O=Se):(C=u.get,O=u.set),new Yu(C,O,A||!O,x)}function Qe(u,o,x,C){let O;try{O=C?u(...C):u()}catch(A){fr(A,o,x)}return O}function Te(u,o,x,C){if(Ft(u)){const A=Qe(u,o,x,C);return A&&ha(A)&&A.catch(B=>{fr(B,o,x)}),A}const O=[];for(let A=0;A<u.length;A++)O.push(Te(u[A],o,x,C));return O}function fr(u,o,x,C=!0){const O=o?o.vnode:null;if(o){let A=o.parent;const B=o.proxy,f=x;for(;A;){const l=A.ec;if(l){for(let c=0;c<l.length;c++)if(l[c](u,B,f)===!1)return}A=A.parent}const i=o.appContext.config.errorHandler;if(i){Qe(i,null,10,[u,B,f]);return}}Hu(u,x,O,C)}function Hu(u,o,x,C=!0){console.error(u)}let fn=!1,lo=!1;const oe=[];let ke=0;const Pi=[];let Xe=null,ui=0;const Da=Promise.resolve();let Mo=null;function Ia(u){const o=Mo||Da;return u?o.then(this?u.bind(this):u):o}function Uu(u){let o=ke+1,x=oe.length;for(;o<x;){const C=o+x>>>1;hn(oe[C])<u?o=C+1:x=C}return o}function ko(u){(!oe.length||!oe.includes(u,fn&&u.allowRecurse?ke+1:ke))&&(u.id==null?oe.push(u):oe.splice(Uu(u.id),0,u),ja())}function ja(){!fn&&!lo&&(lo=!0,Mo=Da.then(Ra))}function Nu(u){const o=oe.indexOf(u);o>ke&&oe.splice(o,1)}function Vu(u){It(u)?Pi.push(...u):(!Xe||!Xe.includes(u,u.allowRecurse?ui+1:ui))&&Pi.push(u),ja()}function Hs(u,o=fn?ke+1:0){for(;o<oe.length;o++){const x=oe[o];x&&x.pre&&(oe.splice(o,1),o--,x())}}function Fa(u){if(Pi.length){const o=[...new Set(Pi)];if(Pi.length=0,Xe){Xe.push(...o);return}for(Xe=o,Xe.sort((x,C)=>hn(x)-hn(C)),ui=0;ui<Xe.length;ui++)Xe[ui]();Xe=null,ui=0}}const hn=u=>u.id==null?1/0:u.id,Gu=(u,o)=>{const x=hn(u)-hn(o);if(x===0){if(u.pre&&!o.pre)return-1;if(o.pre&&!u.pre)return 1}return x};function Ra(u){lo=!1,fn=!0,oe.sort(Gu);const o=Se;try{for(ke=0;ke<oe.length;ke++){const x=oe[ke];x&&x.active!==!1&&Qe(x,null,14)}}finally{ke=0,oe.length=0,Fa(),fn=!1,Mo=null,(oe.length||Pi.length)&&Ra()}}function Ku(u,o,...x){if(u.isUnmounted)return;const C=u.vnode.props||Nt;let O=x;const A=o.startsWith("update:"),B=A&&o.slice(7);if(B&&B in C){const c=`${B==="modelValue"?"model":B}Modifiers`,{number:e,trim:n}=C[c]||Nt;n&&(O=x.map(t=>Qt(t)?t.trim():t)),e&&(O=x.map(eu))}let f,i=C[f=qr(o)]||C[f=qr(Ei(o))];!i&&A&&(i=C[f=qr(Di(o))]),i&&Te(i,u,6,O);const l=C[f+"Once"];if(l){if(!u.emitted)u.emitted={};else if(u.emitted[f])return;u.emitted[f]=!0,Te(l,u,6,O)}}function La(u,o,x=!1){const C=o.emitsCache,O=C.get(u);if(O!==void 0)return O;const A=u.emits;let B={},f=!1;if(!Ft(u)){const i=l=>{const c=La(l,o,!0);c&&(f=!0,Jt(B,c))};!x&&o.mixins.length&&o.mixins.forEach(i),u.extends&&i(u.extends),u.mixins&&u.mixins.forEach(i)}return!A&&!f?(Kt(u)&&C.set(u,null),null):(It(A)?A.forEach(i=>B[i]=null):Jt(B,A),Kt(u)&&C.set(u,B),B)}function hr(u,o){return!u||!or(o)?!1:(o=o.slice(2).replace(/Once$/,""),Lt(u,o[0].toLowerCase()+o.slice(1))||Lt(u,Di(o))||Lt(u,o))}let Ce=null,dr=null;function ir(u){const o=Ce;return Ce=u,dr=u&&u.type.__scopeId||null,o}function qu(u){dr=u}function Ju(){dr=null}function Qu(u,o=Ce,x){if(!o||u._n)return u;const C=(...O)=>{C._d&&Zs(-1);const A=ir(o);let B;try{B=u(...O)}finally{ir(A),C._d&&Zs(1)}return B};return C._n=!0,C._c=!0,C._d=!0,C}function Qr(u){const{type:o,vnode:x,proxy:C,withProxy:O,props:A,propsOptions:[B],slots:f,attrs:i,emit:l,render:c,renderCache:e,data:n,setupState:t,ctx:s,inheritAttrs:h}=u;let r,d;const m=ir(u);try{if(x.shapeFlag&4){const b=O||C;r=Me(c.call(b,b,e,A,t,n,s)),d=i}else{const b=o;r=Me(b.length>1?b(A,{attrs:i,slots:f,emit:l}):b(A,null)),d=o.props?i:$u(i)}}catch(b){an.length=0,fr(b,u,1),r=De(gi)}let y=r;if(d&&h!==!1){const b=Object.keys(d),{shapeFlag:T}=y;b.length&&T&7&&(B&&b.some(yo)&&(d=Zu(d,B)),y=Mi(y,d))}return x.dirs&&(y=Mi(y),y.dirs=y.dirs?y.dirs.concat(x.dirs):x.dirs),x.transition&&(y.transition=x.transition),r=y,ir(m),r}const $u=u=>{let o;for(const x in u)(x==="class"||x==="style"||or(x))&&((o||(o={}))[x]=u[x]);return o},Zu=(u,o)=>{const x={};for(const C in u)(!yo(C)||!(C.slice(9)in o))&&(x[C]=u[C]);return x};function tf(u,o,x){const{props:C,children:O,component:A}=u,{props:B,children:f,patchFlag:i}=o,l=A.emitsOptions;if(o.dirs||o.transition)return!0;if(x&&i>=0){if(i&1024)return!0;if(i&16)return C?Us(C,B,l):!!B;if(i&8){const c=o.dynamicProps;for(let e=0;e<c.length;e++){const n=c[e];if(B[n]!==C[n]&&!hr(l,n))return!0}}}else return(O||f)&&(!f||!f.$stable)?!0:C===B?!1:C?B?Us(C,B,l):!0:!!B;return!1}function Us(u,o,x){const C=Object.keys(o);if(C.length!==Object.keys(u).length)return!0;for(let O=0;O<C.length;O++){const A=C[O];if(o[A]!==u[A]&&!hr(x,A))return!0}return!1}function ef({vnode:u,parent:o},x){for(;o&&o.subTree===u;)(u=o.vnode).el=x,o=o.parent}const nf=u=>u.__isSuspense;function rf(u,o){o&&o.pendingBranch?It(u)?o.effects.push(...u):o.effects.push(u):Vu(u)}const Kn={};function Jn(u,o,x){return Ba(u,o,x)}function Ba(u,o,{immediate:x,deep:C,flush:O,onTrack:A,onTrigger:B}=Nt){var f;const i=uu()===((f=se)==null?void 0:f.scope)?se:null;let l,c=!1,e=!1;if(ae(u)?(l=()=>u.value,c=er(u)):Oi(u)?(l=()=>u,C=!0):It(u)?(e=!0,c=u.some(b=>Oi(b)||er(b)),l=()=>u.map(b=>{if(ae(b))return b.value;if(Oi(b))return hi(b);if(Ft(b))return Qe(b,i,2)})):Ft(u)?o?l=()=>Qe(u,i,2):l=()=>{if(!(i&&i.isUnmounted))return n&&n(),Te(u,i,3,[t])}:l=Se,o&&C){const b=l;l=()=>hi(b())}let n,t=b=>{n=m.onStop=()=>{Qe(b,i,4)}},s;if(pn)if(t=Se,o?x&&Te(o,i,3,[l(),e?[]:void 0,t]):l(),O==="sync"){const b=Zf();s=b.__watcherHandles||(b.__watcherHandles=[])}else return Se;let h=e?new Array(u.length).fill(Kn):Kn;const r=()=>{if(m.active)if(o){const b=m.run();(C||c||(e?b.some((T,M)=>cn(T,h[M])):cn(b,h)))&&(n&&n(),Te(o,i,3,[b,h===Kn?void 0:e&&h[0]===Kn?[]:h,t]),h=b)}else m.run()};r.allowRecurse=!!o;let d;O==="sync"?d=r:O==="post"?d=()=>fe(r,i&&i.suspense):(r.pre=!0,i&&(r.id=i.uid),d=()=>ko(r));const m=new wo(l,d);o?x?r():h=m.run():O==="post"?fe(m.run.bind(m),i&&i.suspense):m.run();const y=()=>{m.stop(),i&&i.scope&&bo(i.scope.effects,m)};return s&&s.push(y),y}function of(u,o,x){const C=this.proxy,O=Qt(u)?u.includes(".")?Xa(C,u):()=>C[u]:u.bind(C,C);let A;Ft(o)?A=o:(A=o.handler,x=o);const B=se;ki(this);const f=Ba(O,A.bind(C),x);return B?ki(B):pi(),f}function Xa(u,o){const x=o.split(".");return()=>{let C=u;for(let O=0;O<x.length&&C;O++)C=C[x[O]];return C}}function hi(u,o){if(!Kt(u)||u.__v_skip||(o=o||new Set,o.has(u)))return u;if(o.add(u),ae(u))hi(u.value,o);else if(It(u))for(let x=0;x<u.length;x++)hi(u[x],o);else if(qc(u)||on(u))u.forEach(x=>{hi(x,o)});else if($c(u))for(const x in u)hi(u[x],o);return u}function za(u,o){const x=Ce;if(x===null)return u;const C=mr(x)||x.proxy,O=u.dirs||(u.dirs=[]);for(let A=0;A<o.length;A++){let[B,f,i,l=Nt]=o[A];B&&(Ft(B)&&(B={mounted:B,updated:B}),B.deep&&hi(f),O.push({dir:B,instance:C,value:f,oldValue:void 0,arg:i,modifiers:l}))}return u}function li(u,o,x,C){const O=u.dirs,A=o&&o.dirs;for(let B=0;B<O.length;B++){const f=O[B];A&&(f.oldValue=A[B].value);let i=f.dir[C];i&&(Ii(),Te(i,x,8,[u.el,f,u,o]),ji())}}function Do(u,o){return Ft(u)?(()=>Jt({name:u.name},o,{setup:u}))():u}const Qn=u=>!!u.type.__asyncLoader,Ya=u=>u.type.__isKeepAlive;function sf(u,o){Wa(u,"a",o)}function af(u,o){Wa(u,"da",o)}function Wa(u,o,x=se){const C=u.__wdc||(u.__wdc=()=>{let O=x;for(;O;){if(O.isDeactivated)return;O=O.parent}return u()});if(pr(o,C,x),x){let O=x.parent;for(;O&&O.parent;)Ya(O.parent.vnode)&&lf(C,o,x,O),O=O.parent}}function lf(u,o,x,C){const O=pr(o,u,C,!0);Ha(()=>{bo(C[o],O)},x)}function pr(u,o,x=se,C=!1){if(x){const O=x[u]||(x[u]=[]),A=o.__weh||(o.__weh=(...B)=>{if(x.isUnmounted)return;Ii(),ki(x);const f=Te(o,x,u,B);return pi(),ji(),f});return C?O.unshift(A):O.push(A),A}}const Ye=u=>(o,x=se)=>(!pn||u==="sp")&&pr(u,(...C)=>o(...C),x),cf=Ye("bm"),uf=Ye("m"),ff=Ye("bu"),hf=Ye("u"),df=Ye("bum"),Ha=Ye("um"),pf=Ye("sp"),gf=Ye("rtg"),vf=Ye("rtc");function mf(u,o=se){pr("ec",u,o)}const yf=Symbol.for("v-ndc");function bf(u,o,x,C){let O;const A=x&&x[C];if(It(u)||Qt(u)){O=new Array(u.length);for(let B=0,f=u.length;B<f;B++)O[B]=o(u[B],B,void 0,A&&A[B])}else if(typeof u=="number"){O=new Array(u);for(let B=0;B<u;B++)O[B]=o(B+1,B,void 0,A&&A[B])}else if(Kt(u))if(u[Symbol.iterator])O=Array.from(u,(B,f)=>o(B,f,void 0,A&&A[f]));else{const B=Object.keys(u);O=new Array(B.length);for(let f=0,i=B.length;f<i;f++){const l=B[f];O[f]=o(u[l],l,f,A&&A[f])}}else O=[];return x&&(x[C]=O),O}const co=u=>u?il(u)?mr(u)||u.proxy:co(u.parent):null,sn=Jt(Object.create(null),{$:u=>u,$el:u=>u.vnode.el,$data:u=>u.data,$props:u=>u.props,$attrs:u=>u.attrs,$slots:u=>u.slots,$refs:u=>u.refs,$parent:u=>co(u.parent),$root:u=>co(u.root),$emit:u=>u.emit,$options:u=>Io(u),$forceUpdate:u=>u.f||(u.f=()=>ko(u.update)),$nextTick:u=>u.n||(u.n=Ia.bind(u.proxy)),$watch:u=>of.bind(u)}),$r=(u,o)=>u!==Nt&&!u.__isScriptSetup&&Lt(u,o),_f={get({_:u},o){const{ctx:x,setupState:C,data:O,props:A,accessCache:B,type:f,appContext:i}=u;let l;if(o[0]!=="$"){const t=B[o];if(t!==void 0)switch(t){case 1:return C[o];case 2:return O[o];case 4:return x[o];case 3:return A[o]}else{if($r(C,o))return B[o]=1,C[o];if(O!==Nt&&Lt(O,o))return B[o]=2,O[o];if((l=u.propsOptions[0])&&Lt(l,o))return B[o]=3,A[o];if(x!==Nt&&Lt(x,o))return B[o]=4,x[o];uo&&(B[o]=0)}}const c=sn[o];let e,n;if(c)return o==="$attrs"&&de(u,"get",o),c(u);if((e=f.__cssModules)&&(e=e[o]))return e;if(x!==Nt&&Lt(x,o))return B[o]=4,x[o];if(n=i.config.globalProperties,Lt(n,o))return n[o]},set({_:u},o,x){const{data:C,setupState:O,ctx:A}=u;return $r(O,o)?(O[o]=x,!0):C!==Nt&&Lt(C,o)?(C[o]=x,!0):Lt(u.props,o)||o[0]==="$"&&o.slice(1)in u?!1:(A[o]=x,!0)},has({_:{data:u,setupState:o,accessCache:x,ctx:C,appContext:O,propsOptions:A}},B){let f;return!!x[B]||u!==Nt&&Lt(u,B)||$r(o,B)||(f=A[0])&&Lt(f,B)||Lt(C,B)||Lt(sn,B)||Lt(O.config.globalProperties,B)},defineProperty(u,o,x){return x.get!=null?u._.accessCache[o]=0:Lt(x,"value")&&this.set(u,o,x.value,null),Reflect.defineProperty(u,o,x)}};function Ns(u){return It(u)?u.reduce((o,x)=>(o[x]=null,o),{}):u}let uo=!0;function xf(u){const o=Io(u),x=u.proxy,C=u.ctx;uo=!1,o.beforeCreate&&Vs(o.beforeCreate,u,"bc");const{data:O,computed:A,methods:B,watch:f,provide:i,inject:l,created:c,beforeMount:e,mounted:n,beforeUpdate:t,updated:s,activated:h,deactivated:r,beforeDestroy:d,beforeUnmount:m,destroyed:y,unmounted:b,render:T,renderTracked:M,renderTriggered:X,errorCaptured:z,serverPrefetch:st,expose:ft,inheritAttrs:vt,components:xt,directives:St,filters:_t}=o;if(l&&Cf(l,C,null),B)for(const wt in B){const bt=B[wt];Ft(bt)&&(C[wt]=bt.bind(x))}if(O){const wt=O.call(x,x);Kt(wt)&&(u.data=Po(wt))}if(uo=!0,A)for(const wt in A){const bt=A[wt],k=Ft(bt)?bt.bind(x,x):Ft(bt.get)?bt.get.bind(x,x):Se,U=!Ft(bt)&&Ft(bt.set)?bt.set.bind(x):Se,N=Lo({get:k,set:U});Object.defineProperty(C,wt,{enumerable:!0,configurable:!0,get:()=>N.value,set:H=>N.value=H})}if(f)for(const wt in f)Ua(f[wt],C,x,wt);if(i){const wt=Ft(i)?i.call(x):i;Reflect.ownKeys(wt).forEach(bt=>{Ef(bt,wt[bt])})}c&&Vs(c,u,"c");function pt(wt,bt){It(bt)?bt.forEach(k=>wt(k.bind(x))):bt&&wt(bt.bind(x))}if(pt(cf,e),pt(uf,n),pt(ff,t),pt(hf,s),pt(sf,h),pt(af,r),pt(mf,z),pt(vf,M),pt(gf,X),pt(df,m),pt(Ha,b),pt(pf,st),It(ft))if(ft.length){const wt=u.exposed||(u.exposed={});ft.forEach(bt=>{Object.defineProperty(wt,bt,{get:()=>x[bt],set:k=>x[bt]=k})})}else u.exposed||(u.exposed={});T&&u.render===Se&&(u.render=T),vt!=null&&(u.inheritAttrs=vt),xt&&(u.components=xt),St&&(u.directives=St)}function Cf(u,o,x=Se){It(u)&&(u=fo(u));for(const C in u){const O=u[C];let A;Kt(O)?"default"in O?A=$n(O.from||C,O.default,!0):A=$n(O.from||C):A=$n(O),ae(A)?Object.defineProperty(o,C,{enumerable:!0,configurable:!0,get:()=>A.value,set:B=>A.value=B}):o[C]=A}}function Vs(u,o,x){Te(It(u)?u.map(C=>C.bind(o.proxy)):u.bind(o.proxy),o,x)}function Ua(u,o,x,C){const O=C.includes(".")?Xa(x,C):()=>x[C];if(Qt(u)){const A=o[u];Ft(A)&&Jn(O,A)}else if(Ft(u))Jn(O,u.bind(x));else if(Kt(u))if(It(u))u.forEach(A=>Ua(A,o,x,C));else{const A=Ft(u.handler)?u.handler.bind(x):o[u.handler];Ft(A)&&Jn(O,A,u)}}function Io(u){const o=u.type,{mixins:x,extends:C}=o,{mixins:O,optionsCache:A,config:{optionMergeStrategies:B}}=u.appContext,f=A.get(o);let i;return f?i=f:!O.length&&!x&&!C?i=o:(i={},O.length&&O.forEach(l=>nr(i,l,B,!0)),nr(i,o,B)),Kt(o)&&A.set(o,i),i}function nr(u,o,x,C=!1){const{mixins:O,extends:A}=o;A&&nr(u,A,x,!0),O&&O.forEach(B=>nr(u,B,x,!0));for(const B in o)if(!(C&&B==="expose")){const f=wf[B]||x&&x[B];u[B]=f?f(u[B],o[B]):o[B]}return u}const wf={data:Gs,props:Ks,emits:Ks,methods:nn,computed:nn,beforeCreate:ce,created:ce,beforeMount:ce,mounted:ce,beforeUpdate:ce,updated:ce,beforeDestroy:ce,beforeUnmount:ce,destroyed:ce,unmounted:ce,activated:ce,deactivated:ce,errorCaptured:ce,serverPrefetch:ce,components:nn,directives:nn,watch:Tf,provide:Gs,inject:Sf};function Gs(u,o){return o?u?function(){return Jt(Ft(u)?u.call(this,this):u,Ft(o)?o.call(this,this):o)}:o:u}function Sf(u,o){return nn(fo(u),fo(o))}function fo(u){if(It(u)){const o={};for(let x=0;x<u.length;x++)o[u[x]]=u[x];return o}return u}function ce(u,o){return u?[...new Set([].concat(u,o))]:o}function nn(u,o){return u?Jt(Object.create(null),u,o):o}function Ks(u,o){return u?It(u)&&It(o)?[...new Set([...u,...o])]:Jt(Object.create(null),Ns(u),Ns(o??{})):o}function Tf(u,o){if(!u)return o;if(!o)return u;const x=Jt(Object.create(null),u);for(const C in o)x[C]=ce(u[C],o[C]);return x}function Na(){return{app:null,config:{isNativeTag:Vc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Of=0;function Pf(u,o){return function(C,O=null){Ft(C)||(C=Jt({},C)),O!=null&&!Kt(O)&&(O=null);const A=Na(),B=new Set;let f=!1;const i=A.app={_uid:Of++,_component:C,_props:O,_container:null,_context:A,_instance:null,version:th,get config(){return A.config},set config(l){},use(l,...c){return B.has(l)||(l&&Ft(l.install)?(B.add(l),l.install(i,...c)):Ft(l)&&(B.add(l),l(i,...c))),i},mixin(l){return A.mixins.includes(l)||A.mixins.push(l),i},component(l,c){return c?(A.components[l]=c,i):A.components[l]},directive(l,c){return c?(A.directives[l]=c,i):A.directives[l]},mount(l,c,e){if(!f){const n=De(C,O);return n.appContext=A,c&&o?o(n,l):u(n,l,e),f=!0,i._container=l,l.__vue_app__=i,mr(n.component)||n.component.proxy}},unmount(){f&&(u(null,i._container),delete i._container.__vue_app__)},provide(l,c){return A.provides[l]=c,i},runWithContext(l){rr=i;try{return l()}finally{rr=null}}};return i}}let rr=null;function Ef(u,o){if(se){let x=se.provides;const C=se.parent&&se.parent.provides;C===x&&(x=se.provides=Object.create(C)),x[u]=o}}function $n(u,o,x=!1){const C=se||Ce;if(C||rr){const O=C?C.parent==null?C.vnode.appContext&&C.vnode.appContext.provides:C.parent.provides:rr._context.provides;if(O&&u in O)return O[u];if(arguments.length>1)return x&&Ft(o)?o.call(C&&C.proxy):o}}function Af(u,o,x,C=!1){const O={},A={};tr(A,vr,1),u.propsDefaults=Object.create(null),Va(u,o,O,A);for(const B in u.propsOptions[0])B in O||(O[B]=void 0);x?u.props=C?O:Lu(O):u.type.props?u.props=O:u.props=A,u.attrs=A}function Mf(u,o,x,C){const{props:O,attrs:A,vnode:{patchFlag:B}}=u,f=Xt(O),[i]=u.propsOptions;let l=!1;if((C||B>0)&&!(B&16)){if(B&8){const c=u.vnode.dynamicProps;for(let e=0;e<c.length;e++){let n=c[e];if(hr(u.emitsOptions,n))continue;const t=o[n];if(i)if(Lt(A,n))t!==A[n]&&(A[n]=t,l=!0);else{const s=Ei(n);O[s]=ho(i,f,s,t,u,!1)}else t!==A[n]&&(A[n]=t,l=!0)}}}else{Va(u,o,O,A)&&(l=!0);let c;for(const e in f)(!o||!Lt(o,e)&&((c=Di(e))===e||!Lt(o,c)))&&(i?x&&(x[e]!==void 0||x[c]!==void 0)&&(O[e]=ho(i,f,e,void 0,u,!0)):delete O[e]);if(A!==f)for(const e in A)(!o||!Lt(o,e))&&(delete A[e],l=!0)}l&&ze(u,"set","$attrs")}function Va(u,o,x,C){const[O,A]=u.propsOptions;let B=!1,f;if(o)for(let i in o){if(qn(i))continue;const l=o[i];let c;O&&Lt(O,c=Ei(i))?!A||!A.includes(c)?x[c]=l:(f||(f={}))[c]=l:hr(u.emitsOptions,i)||(!(i in C)||l!==C[i])&&(C[i]=l,B=!0)}if(A){const i=Xt(x),l=f||Nt;for(let c=0;c<A.length;c++){const e=A[c];x[e]=ho(O,i,e,l[e],u,!Lt(l,e))}}return B}function ho(u,o,x,C,O,A){const B=u[x];if(B!=null){const f=Lt(B,"default");if(f&&C===void 0){const i=B.default;if(B.type!==Function&&!B.skipFactory&&Ft(i)){const{propsDefaults:l}=O;x in l?C=l[x]:(ki(O),C=l[x]=i.call(null,o),pi())}else C=i}B[0]&&(A&&!f?C=!1:B[1]&&(C===""||C===Di(x))&&(C=!0))}return C}function Ga(u,o,x=!1){const C=o.propsCache,O=C.get(u);if(O)return O;const A=u.props,B={},f=[];let i=!1;if(!Ft(u)){const c=e=>{i=!0;const[n,t]=Ga(e,o,!0);Jt(B,n),t&&f.push(...t)};!x&&o.mixins.length&&o.mixins.forEach(c),u.extends&&c(u.extends),u.mixins&&u.mixins.forEach(c)}if(!A&&!i)return Kt(u)&&C.set(u,Ti),Ti;if(It(A))for(let c=0;c<A.length;c++){const e=Ei(A[c]);qs(e)&&(B[e]=Nt)}else if(A)for(const c in A){const e=Ei(c);if(qs(e)){const n=A[c],t=B[e]=It(n)||Ft(n)?{type:n}:Jt({},n);if(t){const s=$s(Boolean,t.type),h=$s(String,t.type);t[0]=s>-1,t[1]=h<0||s<h,(s>-1||Lt(t,"default"))&&f.push(e)}}}const l=[B,f];return Kt(u)&&C.set(u,l),l}function qs(u){return u[0]!=="$"}function Js(u){const o=u&&u.toString().match(/^\s*(function|class) (\w+)/);return o?o[2]:u===null?"null":""}function Qs(u,o){return Js(u)===Js(o)}function $s(u,o){return It(o)?o.findIndex(x=>Qs(x,u)):Ft(o)&&Qs(o,u)?0:-1}const Ka=u=>u[0]==="_"||u==="$stable",jo=u=>It(u)?u.map(Me):[Me(u)],kf=(u,o,x)=>{if(o._n)return o;const C=Qu((...O)=>jo(o(...O)),x);return C._c=!1,C},qa=(u,o,x)=>{const C=u._ctx;for(const O in u){if(Ka(O))continue;const A=u[O];if(Ft(A))o[O]=kf(O,A,C);else if(A!=null){const B=jo(A);o[O]=()=>B}}},Ja=(u,o)=>{const x=jo(o);u.slots.default=()=>x},Df=(u,o)=>{if(u.vnode.shapeFlag&32){const x=o._;x?(u.slots=Xt(o),tr(o,"_",x)):qa(o,u.slots={})}else u.slots={},o&&Ja(u,o);tr(u.slots,vr,1)},If=(u,o,x)=>{const{vnode:C,slots:O}=u;let A=!0,B=Nt;if(C.shapeFlag&32){const f=o._;f?x&&f===1?A=!1:(Jt(O,o),!x&&f===1&&delete O._):(A=!o.$stable,qa(o,O)),B=o}else o&&(Ja(u,o),B={default:1});if(A)for(const f in O)!Ka(f)&&!(f in B)&&delete O[f]};function po(u,o,x,C,O=!1){if(It(u)){u.forEach((n,t)=>po(n,o&&(It(o)?o[t]:o),x,C,O));return}if(Qn(C)&&!O)return;const A=C.shapeFlag&4?mr(C.component)||C.component.proxy:C.el,B=O?null:A,{i:f,r:i}=u,l=o&&o.r,c=f.refs===Nt?f.refs={}:f.refs,e=f.setupState;if(l!=null&&l!==i&&(Qt(l)?(c[l]=null,Lt(e,l)&&(e[l]=null)):ae(l)&&(l.value=null)),Ft(i))Qe(i,f,12,[B,c]);else{const n=Qt(i),t=ae(i);if(n||t){const s=()=>{if(u.f){const h=n?Lt(e,i)?e[i]:c[i]:i.value;O?It(h)&&bo(h,A):It(h)?h.includes(A)||h.push(A):n?(c[i]=[A],Lt(e,i)&&(e[i]=c[i])):(i.value=[A],u.k&&(c[u.k]=i.value))}else n?(c[i]=B,Lt(e,i)&&(e[i]=B)):t&&(i.value=B,u.k&&(c[u.k]=B))};B?(s.id=-1,fe(s,x)):s()}}}const fe=rf;function jf(u){return Ff(u)}function Ff(u,o){const x=no();x.__VUE__=!0;const{insert:C,remove:O,patchProp:A,createElement:B,createText:f,createComment:i,setText:l,setElementText:c,parentNode:e,nextSibling:n,setScopeId:t=Se,insertStaticContent:s}=u,h=(F,D,R,Y=null,V=null,G=null,J=!1,Z=null,lt=!!D.dynamicChildren)=>{if(F===D)return;F&&!Zi(F,D)&&(Y=$(F),H(F,V,G,!0),F=null),D.patchFlag===-2&&(lt=!1,D.dynamicChildren=null);const{type:et,ref:Q,shapeFlag:ct}=D;switch(et){case gr:r(F,D,R,Y);break;case gi:d(F,D,R,Y);break;case Zr:F==null&&m(D,R,Y,J);break;case ye:xt(F,D,R,Y,V,G,J,Z,lt);break;default:ct&1?T(F,D,R,Y,V,G,J,Z,lt):ct&6?St(F,D,R,Y,V,G,J,Z,lt):(ct&64||ct&128)&&et.process(F,D,R,Y,V,G,J,Z,lt,it)}Q!=null&&V&&po(Q,F&&F.ref,G,D||F,!D)},r=(F,D,R,Y)=>{if(F==null)C(D.el=f(D.children),R,Y);else{const V=D.el=F.el;D.children!==F.children&&l(V,D.children)}},d=(F,D,R,Y)=>{F==null?C(D.el=i(D.children||""),R,Y):D.el=F.el},m=(F,D,R,Y)=>{[F.el,F.anchor]=s(F.children,D,R,Y,F.el,F.anchor)},y=({el:F,anchor:D},R,Y)=>{let V;for(;F&&F!==D;)V=n(F),C(F,R,Y),F=V;C(D,R,Y)},b=({el:F,anchor:D})=>{let R;for(;F&&F!==D;)R=n(F),O(F),F=R;O(D)},T=(F,D,R,Y,V,G,J,Z,lt)=>{J=J||D.type==="svg",F==null?M(D,R,Y,V,G,J,Z,lt):st(F,D,V,G,J,Z,lt)},M=(F,D,R,Y,V,G,J,Z)=>{let lt,et;const{type:Q,props:ct,shapeFlag:gt,transition:Ct,dirs:Ot}=F;if(lt=F.el=B(F.type,G,ct&&ct.is,ct),gt&8?c(lt,F.children):gt&16&&z(F.children,lt,null,Y,V,G&&Q!=="foreignObject",J,Z),Ot&&li(F,null,Y,"created"),X(lt,F,F.scopeId,J,Y),ct){for(const Mt in ct)Mt!=="value"&&!qn(Mt)&&A(lt,Mt,null,ct[Mt],G,F.children,Y,V,q);"value"in ct&&A(lt,"value",null,ct.value),(et=ct.onVnodeBeforeMount)&&Ee(et,Y,F)}Ot&&li(F,null,Y,"beforeMount");const Pt=(!V||V&&!V.pendingBranch)&&Ct&&!Ct.persisted;Pt&&Ct.beforeEnter(lt),C(lt,D,R),((et=ct&&ct.onVnodeMounted)||Pt||Ot)&&fe(()=>{et&&Ee(et,Y,F),Pt&&Ct.enter(lt),Ot&&li(F,null,Y,"mounted")},V)},X=(F,D,R,Y,V)=>{if(R&&t(F,R),Y)for(let G=0;G<Y.length;G++)t(F,Y[G]);if(V){let G=V.subTree;if(D===G){const J=V.vnode;X(F,J,J.scopeId,J.slotScopeIds,V.parent)}}},z=(F,D,R,Y,V,G,J,Z,lt=0)=>{for(let et=lt;et<F.length;et++){const Q=F[et]=Z?Ke(F[et]):Me(F[et]);h(null,Q,D,R,Y,V,G,J,Z)}},st=(F,D,R,Y,V,G,J)=>{const Z=D.el=F.el;let{patchFlag:lt,dynamicChildren:et,dirs:Q}=D;lt|=F.patchFlag&16;const ct=F.props||Nt,gt=D.props||Nt;let Ct;R&&ci(R,!1),(Ct=gt.onVnodeBeforeUpdate)&&Ee(Ct,R,D,F),Q&&li(D,F,R,"beforeUpdate"),R&&ci(R,!0);const Ot=V&&D.type!=="foreignObject";if(et?ft(F.dynamicChildren,et,Z,R,Y,Ot,G):J||bt(F,D,Z,null,R,Y,Ot,G,!1),lt>0){if(lt&16)vt(Z,D,ct,gt,R,Y,V);else if(lt&2&&ct.class!==gt.class&&A(Z,"class",null,gt.class,V),lt&4&&A(Z,"style",ct.style,gt.style,V),lt&8){const Pt=D.dynamicProps;for(let Mt=0;Mt<Pt.length;Mt++){const Dt=Pt[Mt],Gt=ct[Dt],re=gt[Dt];(re!==Gt||Dt==="value")&&A(Z,Dt,Gt,re,V,F.children,R,Y,q)}}lt&1&&F.children!==D.children&&c(Z,D.children)}else!J&&et==null&&vt(Z,D,ct,gt,R,Y,V);((Ct=gt.onVnodeUpdated)||Q)&&fe(()=>{Ct&&Ee(Ct,R,D,F),Q&&li(D,F,R,"updated")},Y)},ft=(F,D,R,Y,V,G,J)=>{for(let Z=0;Z<D.length;Z++){const lt=F[Z],et=D[Z],Q=lt.el&&(lt.type===ye||!Zi(lt,et)||lt.shapeFlag&70)?e(lt.el):R;h(lt,et,Q,null,Y,V,G,J,!0)}},vt=(F,D,R,Y,V,G,J)=>{if(R!==Y){if(R!==Nt)for(const Z in R)!qn(Z)&&!(Z in Y)&&A(F,Z,R[Z],null,J,D.children,V,G,q);for(const Z in Y){if(qn(Z))continue;const lt=Y[Z],et=R[Z];lt!==et&&Z!=="value"&&A(F,Z,et,lt,J,D.children,V,G,q)}"value"in Y&&A(F,"value",R.value,Y.value)}},xt=(F,D,R,Y,V,G,J,Z,lt)=>{const et=D.el=F?F.el:f(""),Q=D.anchor=F?F.anchor:f("");let{patchFlag:ct,dynamicChildren:gt,slotScopeIds:Ct}=D;Ct&&(Z=Z?Z.concat(Ct):Ct),F==null?(C(et,R,Y),C(Q,R,Y),z(D.children,R,Q,V,G,J,Z,lt)):ct>0&&ct&64&&gt&&F.dynamicChildren?(ft(F.dynamicChildren,gt,R,V,G,J,Z),(D.key!=null||V&&D===V.subTree)&&Qa(F,D,!0)):bt(F,D,R,Q,V,G,J,Z,lt)},St=(F,D,R,Y,V,G,J,Z,lt)=>{D.slotScopeIds=Z,F==null?D.shapeFlag&512?V.ctx.activate(D,R,Y,J,lt):_t(D,R,Y,V,G,J,lt):ot(F,D,lt)},_t=(F,D,R,Y,V,G,J)=>{const Z=F.component=Vf(F,Y,V);if(Ya(F)&&(Z.ctx.renderer=it),Gf(Z),Z.asyncDep){if(V&&V.registerDep(Z,pt),!F.el){const lt=Z.subTree=De(gi);d(null,lt,D,R)}return}pt(Z,F,D,R,V,G,J)},ot=(F,D,R)=>{const Y=D.component=F.component;if(tf(F,D,R))if(Y.asyncDep&&!Y.asyncResolved){wt(Y,D,R);return}else Y.next=D,Nu(Y.update),Y.update();else D.el=F.el,Y.vnode=D},pt=(F,D,R,Y,V,G,J)=>{const Z=()=>{if(F.isMounted){let{next:Q,bu:ct,u:gt,parent:Ct,vnode:Ot}=F,Pt=Q,Mt;ci(F,!1),Q?(Q.el=Ot.el,wt(F,Q,J)):Q=Ot,ct&&Jr(ct),(Mt=Q.props&&Q.props.onVnodeBeforeUpdate)&&Ee(Mt,Ct,Q,Ot),ci(F,!0);const Dt=Qr(F),Gt=F.subTree;F.subTree=Dt,h(Gt,Dt,e(Gt.el),$(Gt),F,V,G),Q.el=Dt.el,Pt===null&&ef(F,Dt.el),gt&&fe(gt,V),(Mt=Q.props&&Q.props.onVnodeUpdated)&&fe(()=>Ee(Mt,Ct,Q,Ot),V)}else{let Q;const{el:ct,props:gt}=D,{bm:Ct,m:Ot,parent:Pt}=F,Mt=Qn(D);if(ci(F,!1),Ct&&Jr(Ct),!Mt&&(Q=gt&&gt.onVnodeBeforeMount)&&Ee(Q,Pt,D),ci(F,!0),ct&&dt){const Dt=()=>{F.subTree=Qr(F),dt(ct,F.subTree,F,V,null)};Mt?D.type.__asyncLoader().then(()=>!F.isUnmounted&&Dt()):Dt()}else{const Dt=F.subTree=Qr(F);h(null,Dt,R,Y,F,V,G),D.el=Dt.el}if(Ot&&fe(Ot,V),!Mt&&(Q=gt&&gt.onVnodeMounted)){const Dt=D;fe(()=>Ee(Q,Pt,Dt),V)}(D.shapeFlag&256||Pt&&Qn(Pt.vnode)&&Pt.vnode.shapeFlag&256)&&F.a&&fe(F.a,V),F.isMounted=!0,D=R=Y=null}},lt=F.effect=new wo(Z,()=>ko(et),F.scope),et=F.update=()=>lt.run();et.id=F.uid,ci(F,!0),et()},wt=(F,D,R)=>{D.component=F;const Y=F.vnode.props;F.vnode=D,F.next=null,Mf(F,D.props,Y,R),If(F,D.children,R),Ii(),Hs(),ji()},bt=(F,D,R,Y,V,G,J,Z,lt=!1)=>{const et=F&&F.children,Q=F?F.shapeFlag:0,ct=D.children,{patchFlag:gt,shapeFlag:Ct}=D;if(gt>0){if(gt&128){U(et,ct,R,Y,V,G,J,Z,lt);return}else if(gt&256){k(et,ct,R,Y,V,G,J,Z,lt);return}}Ct&8?(Q&16&&q(et,V,G),ct!==et&&c(R,ct)):Q&16?Ct&16?U(et,ct,R,Y,V,G,J,Z,lt):q(et,V,G,!0):(Q&8&&c(R,""),Ct&16&&z(ct,R,Y,V,G,J,Z,lt))},k=(F,D,R,Y,V,G,J,Z,lt)=>{F=F||Ti,D=D||Ti;const et=F.length,Q=D.length,ct=Math.min(et,Q);let gt;for(gt=0;gt<ct;gt++){const Ct=D[gt]=lt?Ke(D[gt]):Me(D[gt]);h(F[gt],Ct,R,null,V,G,J,Z,lt)}et>Q?q(F,V,G,!0,!1,ct):z(D,R,Y,V,G,J,Z,lt,ct)},U=(F,D,R,Y,V,G,J,Z,lt)=>{let et=0;const Q=D.length;let ct=F.length-1,gt=Q-1;for(;et<=ct&&et<=gt;){const Ct=F[et],Ot=D[et]=lt?Ke(D[et]):Me(D[et]);if(Zi(Ct,Ot))h(Ct,Ot,R,null,V,G,J,Z,lt);else break;et++}for(;et<=ct&&et<=gt;){const Ct=F[ct],Ot=D[gt]=lt?Ke(D[gt]):Me(D[gt]);if(Zi(Ct,Ot))h(Ct,Ot,R,null,V,G,J,Z,lt);else break;ct--,gt--}if(et>ct){if(et<=gt){const Ct=gt+1,Ot=Ct<Q?D[Ct].el:Y;for(;et<=gt;)h(null,D[et]=lt?Ke(D[et]):Me(D[et]),R,Ot,V,G,J,Z,lt),et++}}else if(et>gt)for(;et<=ct;)H(F[et],V,G,!0),et++;else{const Ct=et,Ot=et,Pt=new Map;for(et=Ot;et<=gt;et++){const Zt=D[et]=lt?Ke(D[et]):Me(D[et]);Zt.key!=null&&Pt.set(Zt.key,et)}let Mt,Dt=0;const Gt=gt-Ot+1;let re=!1,$t=0;const Oe=new Array(Gt);for(et=0;et<Gt;et++)Oe[et]=0;for(et=Ct;et<=ct;et++){const Zt=F[et];if(Dt>=Gt){H(Zt,V,G,!0);continue}let te;if(Zt.key!=null)te=Pt.get(Zt.key);else for(Mt=Ot;Mt<=gt;Mt++)if(Oe[Mt-Ot]===0&&Zi(Zt,D[Mt])){te=Mt;break}te===void 0?H(Zt,V,G,!0):(Oe[te-Ot]=et+1,te>=$t?$t=te:re=!0,h(Zt,D[te],R,null,V,G,J,Z,lt),Dt++)}const We=re?Rf(Oe):Ti;for(Mt=We.length-1,et=Gt-1;et>=0;et--){const Zt=Ot+et,te=D[Zt],vi=Zt+1<Q?D[Zt+1].el:Y;Oe[et]===0?h(null,te,R,vi,V,G,J,Z,lt):re&&(Mt<0||et!==We[Mt]?N(te,R,vi,2):Mt--)}}},N=(F,D,R,Y,V=null)=>{const{el:G,type:J,transition:Z,children:lt,shapeFlag:et}=F;if(et&6){N(F.component.subTree,D,R,Y);return}if(et&128){F.suspense.move(D,R,Y);return}if(et&64){J.move(F,D,R,it);return}if(J===ye){C(G,D,R);for(let ct=0;ct<lt.length;ct++)N(lt[ct],D,R,Y);C(F.anchor,D,R);return}if(J===Zr){y(F,D,R);return}if(Y!==2&&et&1&&Z)if(Y===0)Z.beforeEnter(G),C(G,D,R),fe(()=>Z.enter(G),V);else{const{leave:ct,delayLeave:gt,afterLeave:Ct}=Z,Ot=()=>C(G,D,R),Pt=()=>{ct(G,()=>{Ot(),Ct&&Ct()})};gt?gt(G,Ot,Pt):Pt()}else C(G,D,R)},H=(F,D,R,Y=!1,V=!1)=>{const{type:G,props:J,ref:Z,children:lt,dynamicChildren:et,shapeFlag:Q,patchFlag:ct,dirs:gt}=F;if(Z!=null&&po(Z,null,R,F,!0),Q&256){D.ctx.deactivate(F);return}const Ct=Q&1&&gt,Ot=!Qn(F);let Pt;if(Ot&&(Pt=J&&J.onVnodeBeforeUnmount)&&Ee(Pt,D,F),Q&6)I(F.component,R,Y);else{if(Q&128){F.suspense.unmount(R,Y);return}Ct&&li(F,null,D,"beforeUnmount"),Q&64?F.type.remove(F,D,R,V,it,Y):et&&(G!==ye||ct>0&&ct&64)?q(et,D,R,!1,!0):(G===ye&&ct&384||!V&&Q&16)&&q(lt,D,R),Y&&nt(F)}(Ot&&(Pt=J&&J.onVnodeUnmounted)||Ct)&&fe(()=>{Pt&&Ee(Pt,D,F),Ct&&li(F,null,D,"unmounted")},R)},nt=F=>{const{type:D,el:R,anchor:Y,transition:V}=F;if(D===ye){j(R,Y);return}if(D===Zr){b(F);return}const G=()=>{O(R),V&&!V.persisted&&V.afterLeave&&V.afterLeave()};if(F.shapeFlag&1&&V&&!V.persisted){const{leave:J,delayLeave:Z}=V,lt=()=>J(R,G);Z?Z(F.el,G,lt):lt()}else G()},j=(F,D)=>{let R;for(;F!==D;)R=n(F),O(F),F=R;O(D)},I=(F,D,R)=>{const{bum:Y,scope:V,update:G,subTree:J,um:Z}=F;Y&&Jr(Y),V.stop(),G&&(G.active=!1,H(J,F,D,R)),Z&&fe(Z,D),fe(()=>{F.isUnmounted=!0},D),D&&D.pendingBranch&&!D.isUnmounted&&F.asyncDep&&!F.asyncResolved&&F.suspenseId===D.pendingId&&(D.deps--,D.deps===0&&D.resolve())},q=(F,D,R,Y=!1,V=!1,G=0)=>{for(let J=G;J<F.length;J++)H(F[J],D,R,Y,V)},$=F=>F.shapeFlag&6?$(F.component.subTree):F.shapeFlag&128?F.suspense.next():n(F.anchor||F.el),at=(F,D,R)=>{F==null?D._vnode&&H(D._vnode,null,null,!0):h(D._vnode||null,F,D,null,null,null,R),Hs(),Fa(),D._vnode=F},it={p:h,um:H,m:N,r:nt,mt:_t,mc:z,pc:bt,pbc:ft,n:$,o:u};let ht,dt;return o&&([ht,dt]=o(it)),{render:at,hydrate:ht,createApp:Pf(at,ht)}}function ci({effect:u,update:o},x){u.allowRecurse=o.allowRecurse=x}function Qa(u,o,x=!1){const C=u.children,O=o.children;if(It(C)&&It(O))for(let A=0;A<C.length;A++){const B=C[A];let f=O[A];f.shapeFlag&1&&!f.dynamicChildren&&((f.patchFlag<=0||f.patchFlag===32)&&(f=O[A]=Ke(O[A]),f.el=B.el),x||Qa(B,f)),f.type===gr&&(f.el=B.el)}}function Rf(u){const o=u.slice(),x=[0];let C,O,A,B,f;const i=u.length;for(C=0;C<i;C++){const l=u[C];if(l!==0){if(O=x[x.length-1],u[O]<l){o[C]=O,x.push(C);continue}for(A=0,B=x.length-1;A<B;)f=A+B>>1,u[x[f]]<l?A=f+1:B=f;l<u[x[A]]&&(A>0&&(o[C]=x[A-1]),x[A]=C)}}for(A=x.length,B=x[A-1];A-- >0;)x[A]=B,B=o[B];return x}const Lf=u=>u.__isTeleport,ye=Symbol.for("v-fgt"),gr=Symbol.for("v-txt"),gi=Symbol.for("v-cmt"),Zr=Symbol.for("v-stc"),an=[];let we=null;function me(u=!1){an.push(we=u?null:[])}function Bf(){an.pop(),we=an[an.length-1]||null}let dn=1;function Zs(u){dn+=u}function $a(u){return u.dynamicChildren=dn>0?we||Ti:null,Bf(),dn>0&&we&&we.push(u),u}function Ae(u,o,x,C,O,A){return $a(Ut(u,o,x,C,O,A,!0))}function Za(u,o,x,C,O){return $a(De(u,o,x,C,O,!0))}function Xf(u){return u?u.__v_isVNode===!0:!1}function Zi(u,o){return u.type===o.type&&u.key===o.key}const vr="__vInternal",tl=({key:u})=>u??null,Zn=({ref:u,ref_key:o,ref_for:x})=>(typeof u=="number"&&(u=""+u),u!=null?Qt(u)||ae(u)||Ft(u)?{i:Ce,r:u,k:o,f:!!x}:u:null);function Ut(u,o=null,x=null,C=0,O=null,A=u===ye?0:1,B=!1,f=!1){const i={__v_isVNode:!0,__v_skip:!0,type:u,props:o,key:o&&tl(o),ref:o&&Zn(o),scopeId:dr,slotScopeIds:null,children:x,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:A,patchFlag:C,dynamicProps:O,dynamicChildren:null,appContext:null,ctx:Ce};return f?(Fo(i,x),A&128&&u.normalize(i)):x&&(i.shapeFlag|=Qt(x)?8:16),dn>0&&!B&&we&&(i.patchFlag>0||A&6)&&i.patchFlag!==32&&we.push(i),i}const De=zf;function zf(u,o=null,x=null,C=0,O=null,A=!1){if((!u||u===yf)&&(u=gi),Xf(u)){const f=Mi(u,o,!0);return x&&Fo(f,x),dn>0&&!A&&we&&(f.shapeFlag&6?we[we.indexOf(u)]=f:we.push(f)),f.patchFlag|=-2,f}if(Qf(u)&&(u=u.__vccOpts),o){o=Yf(o);let{class:f,style:i}=o;f&&!Qt(f)&&(o.class=cr(f)),Kt(i)&&(Oa(i)&&!It(i)&&(i=Jt({},i)),o.style=lr(i))}const B=Qt(u)?1:nf(u)?128:Lf(u)?64:Kt(u)?4:Ft(u)?2:0;return Ut(u,o,x,C,O,B,A,!0)}function Yf(u){return u?Oa(u)||vr in u?Jt({},u):u:null}function Mi(u,o,x=!1){const{props:C,ref:O,patchFlag:A,children:B}=u,f=o?Hf(C||{},o):C;return{__v_isVNode:!0,__v_skip:!0,type:u.type,props:f,key:f&&tl(f),ref:o&&o.ref?x&&O?It(O)?O.concat(Zn(o)):[O,Zn(o)]:Zn(o):O,scopeId:u.scopeId,slotScopeIds:u.slotScopeIds,children:B,target:u.target,targetAnchor:u.targetAnchor,staticCount:u.staticCount,shapeFlag:u.shapeFlag,patchFlag:o&&u.type!==ye?A===-1?16:A|16:A,dynamicProps:u.dynamicProps,dynamicChildren:u.dynamicChildren,appContext:u.appContext,dirs:u.dirs,transition:u.transition,component:u.component,suspense:u.suspense,ssContent:u.ssContent&&Mi(u.ssContent),ssFallback:u.ssFallback&&Mi(u.ssFallback),el:u.el,anchor:u.anchor,ctx:u.ctx,ce:u.ce}}function Wf(u=" ",o=0){return De(gr,null,u,o)}function el(u="",o=!1){return o?(me(),Za(gi,null,u)):De(gi,null,u)}function Me(u){return u==null||typeof u=="boolean"?De(gi):It(u)?De(ye,null,u.slice()):typeof u=="object"?Ke(u):De(gr,null,String(u))}function Ke(u){return u.el===null&&u.patchFlag!==-1||u.memo?u:Mi(u)}function Fo(u,o){let x=0;const{shapeFlag:C}=u;if(o==null)o=null;else if(It(o))x=16;else if(typeof o=="object")if(C&65){const O=o.default;O&&(O._c&&(O._d=!1),Fo(u,O()),O._c&&(O._d=!0));return}else{x=32;const O=o._;!O&&!(vr in o)?o._ctx=Ce:O===3&&Ce&&(Ce.slots._===1?o._=1:(o._=2,u.patchFlag|=1024))}else Ft(o)?(o={default:o,_ctx:Ce},x=32):(o=String(o),C&64?(x=16,o=[Wf(o)]):x=8);u.children=o,u.shapeFlag|=x}function Hf(...u){const o={};for(let x=0;x<u.length;x++){const C=u[x];for(const O in C)if(O==="class")o.class!==C.class&&(o.class=cr([o.class,C.class]));else if(O==="style")o.style=lr([o.style,C.style]);else if(or(O)){const A=o[O],B=C[O];B&&A!==B&&!(It(A)&&A.includes(B))&&(o[O]=A?[].concat(A,B):B)}else O!==""&&(o[O]=C[O])}return o}function Ee(u,o,x,C=null){Te(u,o,7,[x,C])}const Uf=Na();let Nf=0;function Vf(u,o,x){const C=u.type,O=(o?o.appContext:u.appContext)||Uf,A={uid:Nf++,vnode:u,type:C,parent:o,appContext:O,root:null,next:null,subTree:null,effect:null,update:null,scope:new lu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:o?o.provides:Object.create(O.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ga(C,O),emitsOptions:La(C,O),emit:null,emitted:null,propsDefaults:Nt,inheritAttrs:C.inheritAttrs,ctx:Nt,data:Nt,props:Nt,attrs:Nt,slots:Nt,refs:Nt,setupState:Nt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:x,suspenseId:x?x.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return A.ctx={_:A},A.root=o?o.root:A,A.emit=Ku.bind(null,A),u.ce&&u.ce(A),A}let se=null,Ro,Si,ta="__VUE_INSTANCE_SETTERS__";(Si=no()[ta])||(Si=no()[ta]=[]),Si.push(u=>se=u),Ro=u=>{Si.length>1?Si.forEach(o=>o(u)):Si[0](u)};const ki=u=>{Ro(u),u.scope.on()},pi=()=>{se&&se.scope.off(),Ro(null)};function il(u){return u.vnode.shapeFlag&4}let pn=!1;function Gf(u,o=!1){pn=o;const{props:x,children:C}=u.vnode,O=il(u);Af(u,x,O,o),Df(u,C);const A=O?Kf(u,o):void 0;return pn=!1,A}function Kf(u,o){const x=u.type;u.accessCache=Object.create(null),u.proxy=Pa(new Proxy(u.ctx,_f));const{setup:C}=x;if(C){const O=u.setupContext=C.length>1?Jf(u):null;ki(u),Ii();const A=Qe(C,u,0,[u.props,O]);if(ji(),pi(),ha(A)){if(A.then(pi,pi),o)return A.then(B=>{ea(u,B,o)}).catch(B=>{fr(B,u,0)});u.asyncDep=A}else ea(u,A,o)}else nl(u,o)}function ea(u,o,x){Ft(o)?u.type.__ssrInlineRender?u.ssrRender=o:u.render=o:Kt(o)&&(u.setupState=ka(o)),nl(u,x)}let ia;function nl(u,o,x){const C=u.type;if(!u.render){if(!o&&ia&&!C.render){const O=C.template||Io(u).template;if(O){const{isCustomElement:A,compilerOptions:B}=u.appContext.config,{delimiters:f,compilerOptions:i}=C,l=Jt(Jt({isCustomElement:A,delimiters:f},B),i);C.render=ia(O,l)}}u.render=C.render||Se}ki(u),Ii(),xf(u),ji(),pi()}function qf(u){return u.attrsProxy||(u.attrsProxy=new Proxy(u.attrs,{get(o,x){return de(u,"get","$attrs"),o[x]}}))}function Jf(u){const o=x=>{u.exposed=x||{}};return{get attrs(){return qf(u)},slots:u.slots,emit:u.emit,expose:o}}function mr(u){if(u.exposed)return u.exposeProxy||(u.exposeProxy=new Proxy(ka(Pa(u.exposed)),{get(o,x){if(x in o)return o[x];if(x in sn)return sn[x](u)},has(o,x){return x in o||x in sn}}))}function Qf(u){return Ft(u)&&"__vccOpts"in u}const Lo=(u,o)=>Wu(u,o,pn),$f=Symbol.for("v-scx"),Zf=()=>$n($f),th="3.3.4",eh="http://www.w3.org/2000/svg",fi=typeof document<"u"?document:null,na=fi&&fi.createElement("template"),ih={insert:(u,o,x)=>{o.insertBefore(u,x||null)},remove:u=>{const o=u.parentNode;o&&o.removeChild(u)},createElement:(u,o,x,C)=>{const O=o?fi.createElementNS(eh,u):fi.createElement(u,x?{is:x}:void 0);return u==="select"&&C&&C.multiple!=null&&O.setAttribute("multiple",C.multiple),O},createText:u=>fi.createTextNode(u),createComment:u=>fi.createComment(u),setText:(u,o)=>{u.nodeValue=o},setElementText:(u,o)=>{u.textContent=o},parentNode:u=>u.parentNode,nextSibling:u=>u.nextSibling,querySelector:u=>fi.querySelector(u),setScopeId(u,o){u.setAttribute(o,"")},insertStaticContent(u,o,x,C,O,A){const B=x?x.previousSibling:o.lastChild;if(O&&(O===A||O.nextSibling))for(;o.insertBefore(O.cloneNode(!0),x),!(O===A||!(O=O.nextSibling)););else{na.innerHTML=C?`<svg>${u}</svg>`:u;const f=na.content;if(C){const i=f.firstChild;for(;i.firstChild;)f.appendChild(i.firstChild);f.removeChild(i)}o.insertBefore(f,x)}return[B?B.nextSibling:o.firstChild,x?x.previousSibling:o.lastChild]}};function nh(u,o,x){const C=u._vtc;C&&(o=(o?[o,...C]:[...C]).join(" ")),o==null?u.removeAttribute("class"):x?u.setAttribute("class",o):u.className=o}function rh(u,o,x){const C=u.style,O=Qt(x);if(x&&!O){if(o&&!Qt(o))for(const A in o)x[A]==null&&go(C,A,"");for(const A in x)go(C,A,x[A])}else{const A=C.display;O?o!==x&&(C.cssText=x):o&&u.removeAttribute("style"),"_vod"in u&&(C.display=A)}}const ra=/\s*!important$/;function go(u,o,x){if(It(x))x.forEach(C=>go(u,o,C));else if(x==null&&(x=""),o.startsWith("--"))u.setProperty(o,x);else{const C=oh(u,o);ra.test(x)?u.setProperty(Di(C),x.replace(ra,""),"important"):u[C]=x}}const oa=["Webkit","Moz","ms"],to={};function oh(u,o){const x=to[o];if(x)return x;let C=Ei(o);if(C!=="filter"&&C in u)return to[o]=C;C=da(C);for(let O=0;O<oa.length;O++){const A=oa[O]+C;if(A in u)return to[o]=A}return o}const sa="http://www.w3.org/1999/xlink";function sh(u,o,x,C,O){if(C&&o.startsWith("xlink:"))x==null?u.removeAttributeNS(sa,o.slice(6,o.length)):u.setAttributeNS(sa,o,x);else{const A=au(o);x==null||A&&!pa(x)?u.removeAttribute(o):u.setAttribute(o,A?"":x)}}function ah(u,o,x,C,O,A,B){if(o==="innerHTML"||o==="textContent"){C&&B(C,O,A),u[o]=x??"";return}const f=u.tagName;if(o==="value"&&f!=="PROGRESS"&&!f.includes("-")){u._value=x;const l=f==="OPTION"?u.getAttribute("value"):u.value,c=x??"";l!==c&&(u.value=c),x==null&&u.removeAttribute(o);return}let i=!1;if(x===""||x==null){const l=typeof u[o];l==="boolean"?x=pa(x):x==null&&l==="string"?(x="",i=!0):l==="number"&&(x=0,i=!0)}try{u[o]=x}catch{}i&&u.removeAttribute(o)}function lh(u,o,x,C){u.addEventListener(o,x,C)}function ch(u,o,x,C){u.removeEventListener(o,x,C)}function uh(u,o,x,C,O=null){const A=u._vei||(u._vei={}),B=A[o];if(C&&B)B.value=C;else{const[f,i]=fh(o);if(C){const l=A[o]=ph(C,O);lh(u,f,l,i)}else B&&(ch(u,f,B,i),A[o]=void 0)}}const aa=/(?:Once|Passive|Capture)$/;function fh(u){let o;if(aa.test(u)){o={};let C;for(;C=u.match(aa);)u=u.slice(0,u.length-C[0].length),o[C[0].toLowerCase()]=!0}return[u[2]===":"?u.slice(3):Di(u.slice(2)),o]}let eo=0;const hh=Promise.resolve(),dh=()=>eo||(hh.then(()=>eo=0),eo=Date.now());function ph(u,o){const x=C=>{if(!C._vts)C._vts=Date.now();else if(C._vts<=x.attached)return;Te(gh(C,x.value),o,5,[C])};return x.value=u,x.attached=dh(),x}function gh(u,o){if(It(o)){const x=u.stopImmediatePropagation;return u.stopImmediatePropagation=()=>{x.call(u),u._stopped=!0},o.map(C=>O=>!O._stopped&&C&&C(O))}else return o}const la=/^on[a-z]/,vh=(u,o,x,C,O=!1,A,B,f,i)=>{o==="class"?nh(u,C,O):o==="style"?rh(u,x,C):or(o)?yo(o)||uh(u,o,x,C,B):(o[0]==="."?(o=o.slice(1),!0):o[0]==="^"?(o=o.slice(1),!1):mh(u,o,C,O))?ah(u,o,C,A,B,f,i):(o==="true-value"?u._trueValue=C:o==="false-value"&&(u._falseValue=C),sh(u,o,C,O))};function mh(u,o,x,C){return C?!!(o==="innerHTML"||o==="textContent"||o in u&&la.test(o)&&Ft(x)):o==="spellcheck"||o==="draggable"||o==="translate"||o==="form"||o==="list"&&u.tagName==="INPUT"||o==="type"&&u.tagName==="TEXTAREA"||la.test(o)&&Qt(x)?!1:o in u}const yh=["ctrl","shift","alt","meta"],bh={stop:u=>u.stopPropagation(),prevent:u=>u.preventDefault(),self:u=>u.target!==u.currentTarget,ctrl:u=>!u.ctrlKey,shift:u=>!u.shiftKey,alt:u=>!u.altKey,meta:u=>!u.metaKey,left:u=>"button"in u&&u.button!==0,middle:u=>"button"in u&&u.button!==1,right:u=>"button"in u&&u.button!==2,exact:(u,o)=>yh.some(x=>u[`${x}Key`]&&!o.includes(x))},rn=(u,o)=>(x,...C)=>{for(let O=0;O<o.length;O++){const A=bh[o[O]];if(A&&A(x,o))return}return u(x,...C)},rl={beforeMount(u,{value:o},{transition:x}){u._vod=u.style.display==="none"?"":u.style.display,x&&o?x.beforeEnter(u):tn(u,o)},mounted(u,{value:o},{transition:x}){x&&o&&x.enter(u)},updated(u,{value:o,oldValue:x},{transition:C}){!o!=!x&&(C?o?(C.beforeEnter(u),tn(u,!0),C.enter(u)):C.leave(u,()=>{tn(u,!1)}):tn(u,o))},beforeUnmount(u,{value:o}){tn(u,o)}};function tn(u,o){u.style.display=o?u._vod:"none"}const _h=Jt({patchProp:vh},ih);let ca;function xh(){return ca||(ca=jf(_h))}const Ch=(...u)=>{const o=xh().createApp(...u),{mount:x}=o;return o.mount=C=>{const O=wh(C);if(!O)return;const A=o._component;!Ft(A)&&!A.render&&!A.template&&(A.template=O.innerHTML),O.innerHTML="";const B=x(O,!1,O instanceof SVGElement);return O instanceof Element&&(O.removeAttribute("v-cloak"),O.setAttribute("data-v-app","")),B},o};function wh(u){return Qt(u)?document.querySelector(u):u}var Sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Th(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}function Oh(u){if(u.__esModule)return u;var o=u.default;if(typeof o=="function"){var x=function C(){return this instanceof C?Reflect.construct(o,arguments,this.constructor):o.apply(this,arguments)};x.prototype=o.prototype}else x={};return Object.defineProperty(x,"__esModule",{value:!0}),Object.keys(u).forEach(function(C){var O=Object.getOwnPropertyDescriptor(u,C);Object.defineProperty(x,C,O.get?O:{enumerable:!0,get:function(){return u[C]}})}),x}var ln={};const Ph={},Eh=Object.freeze(Object.defineProperty({__proto__:null,default:Ph},Symbol.toStringTag,{value:"Module"})),io=Oh(Eh);(function(u){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var o=o||{version:"5.3.0"};if(u.fabric=o,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?o.document=document:o.document=document.implementation.createHTMLDocument(""),o.window=window;else{var x=io,C=new x.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;o.document=C.document,o.jsdomImplForWrapper=io.implForWrapper,o.nodeCanvas=io.Canvas,o.window=C,DOMParser=o.window.DOMParser}o.isTouchSupported="ontouchstart"in o.window||"ontouchstart"in o.document||o.window&&o.window.navigator&&o.window.navigator.maxTouchPoints>0,o.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",o.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],o.DPI=96,o.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",o.commaWsp="(?:\\s+,?\\s*|,\\s*)",o.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,o.reNonWord=/[ \n\.,;!\?\-]/,o.fontPaths={},o.iMatrix=[1,0,0,1,0,0],o.svgNS="http://www.w3.org/2000/svg",o.perfLimitSizeTotal=2097152,o.maxCacheSideLimit=4096,o.minCacheSideLimit=256,o.charWidthsCache={},o.textureSize=2048,o.disableStyleCopyPaste=!1,o.enableGLFiltering=!0,o.devicePixelRatio=o.window.devicePixelRatio||o.window.webkitDevicePixelRatio||o.window.mozDevicePixelRatio||1,o.browserShadowBlurConstant=1,o.arcToSegmentsCache={},o.boundsOfCurveCache={},o.cachesBoundsOfCurve=!0,o.forceGLPutImageData=!1,o.initFilterBackend=function(){if(o.enableGLFiltering&&o.isWebglSupported&&o.isWebglSupported(o.textureSize))return console.log("max texture size: "+o.maxTextureSize),new o.WebglFilterBackend({tileSize:o.textureSize});if(o.Canvas2dFilterBackend)return new o.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=o),function(){function f(t,s){if(this.__eventListeners[t]){var h=this.__eventListeners[t];s?h[h.indexOf(s)]=!1:o.util.array.fill(h,!1)}}function i(t,s){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var h in t)this.on(h,t[h]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(s);return this}function l(t,s){var h=(function(){s.apply(this,arguments),this.off(t,h)}).bind(this);this.on(t,h)}function c(t,s){if(arguments.length===1)for(var h in t)l.call(this,h,t[h]);else l.call(this,t,s);return this}function e(t,s){if(!this.__eventListeners)return this;if(arguments.length===0)for(t in this.__eventListeners)f.call(this,t);else if(arguments.length===1&&typeof arguments[0]=="object")for(var h in t)f.call(this,h,t[h]);else f.call(this,t,s);return this}function n(t,s){if(!this.__eventListeners)return this;var h=this.__eventListeners[t];if(!h)return this;for(var r=0,d=h.length;r<d;r++)h[r]&&h[r].call(this,s||{});return this.__eventListeners[t]=h.filter(function(m){return m!==!1}),this}o.Observable={fire:n,on:i,once:c,off:e}}(),o.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var f=0,i=arguments.length;f<i;f++)this._onObjectAdded(arguments[f]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(f,i,l){var c=this._objects;return l?c[i]=f:c.splice(i,0,f),this._onObjectAdded&&this._onObjectAdded(f),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var f=this._objects,i,l=!1,c=0,e=arguments.length;c<e;c++)i=f.indexOf(arguments[c]),i!==-1&&(l=!0,f.splice(i,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[c]));return this.renderOnAddRemove&&l&&this.requestRenderAll(),this},forEachObject:function(f,i){for(var l=this.getObjects(),c=0,e=l.length;c<e;c++)f.call(i,l[c],c,l);return this},getObjects:function(f){return typeof f>"u"?this._objects.concat():this._objects.filter(function(i){return i.type===f})},item:function(f){return this._objects[f]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(f,i){return this._objects.indexOf(f)>-1?!0:i?this._objects.some(function(l){return typeof l.contains=="function"&&l.contains(f,!0)}):!1},complexity:function(){return this._objects.reduce(function(f,i){return f+=i.complexity?i.complexity():0,f},0)}},o.CommonMethods={_setOptions:function(f){for(var i in f)this.set(i,f[i])},_initGradient:function(f,i){f&&f.colorStops&&!(f instanceof o.Gradient)&&this.set(i,new o.Gradient(f))},_initPattern:function(f,i,l){f&&f.source&&!(f instanceof o.Pattern)?this.set(i,new o.Pattern(f,l)):l&&l()},_setObject:function(f){for(var i in f)this._set(i,f[i])},set:function(f,i){return typeof f=="object"?this._setObject(f):this._set(f,i),this},_set:function(f,i){this[f]=i},toggle:function(f){var i=this.get(f);return typeof i=="boolean"&&this.set(f,!i),this},get:function(f){return this[f]}},function(f){var i=Math.sqrt,l=Math.atan2,c=Math.pow,e=Math.PI/180,n=Math.PI/2;o.util={cos:function(t){if(t===0)return 1;t<0&&(t=-t);var s=t/n;switch(s){case 1:case 3:return 0;case 2:return-1}return Math.cos(t)},sin:function(t){if(t===0)return 0;var s=t/n,h=1;switch(t<0&&(h=-1),s){case 1:return h;case 2:return 0;case 3:return-h}return Math.sin(t)},removeFromArray:function(t,s){var h=t.indexOf(s);return h!==-1&&t.splice(h,1),t},getRandomInt:function(t,s){return Math.floor(Math.random()*(s-t+1))+t},degreesToRadians:function(t){return t*e},radiansToDegrees:function(t){return t/e},rotatePoint:function(t,s,h){var r=new o.Point(t.x-s.x,t.y-s.y),d=o.util.rotateVector(r,h);return new o.Point(d.x,d.y).addEquals(s)},rotateVector:function(t,s){var h=o.util.sin(s),r=o.util.cos(s),d=t.x*r-t.y*h,m=t.x*h+t.y*r;return{x:d,y:m}},createVector:function(t,s){return new o.Point(s.x-t.x,s.y-t.y)},calcAngleBetweenVectors:function(t,s){return Math.acos((t.x*s.x+t.y*s.y)/(Math.hypot(t.x,t.y)*Math.hypot(s.x,s.y)))},getHatVector:function(t){return new o.Point(t.x,t.y).multiply(1/Math.hypot(t.x,t.y))},getBisector:function(t,s,h){var r=o.util.createVector(t,s),d=o.util.createVector(t,h),m=o.util.calcAngleBetweenVectors(r,d),y=o.util.calcAngleBetweenVectors(o.util.rotateVector(r,m),d),b=m*(y===0?1:-1)/2;return{vector:o.util.getHatVector(o.util.rotateVector(r,b)),angle:m}},projectStrokeOnPoints:function(t,s,h){var r=[],d=s.strokeWidth/2,m=s.strokeUniform?new o.Point(1/s.scaleX,1/s.scaleY):new o.Point(1,1),y=function(b){var T=d/Math.hypot(b.x,b.y);return new o.Point(b.x*T*m.x,b.y*T*m.y)};return t.length<=1||t.forEach(function(b,T){var M=new o.Point(b.x,b.y),X,z;T===0?(z=t[T+1],X=h?y(o.util.createVector(z,M)).addEquals(M):t[t.length-1]):T===t.length-1?(X=t[T-1],z=h?y(o.util.createVector(X,M)).addEquals(M):t[0]):(X=t[T-1],z=t[T+1]);var st=o.util.getBisector(M,X,z),ft=st.vector,vt=st.angle,xt,St;if(s.strokeLineJoin==="miter"&&(xt=-d/Math.sin(vt/2),St=new o.Point(ft.x*xt*m.x,ft.y*xt*m.y),Math.hypot(St.x,St.y)/d<=s.strokeMiterLimit)){r.push(M.add(St)),r.push(M.subtract(St));return}xt=-d*Math.SQRT2,St=new o.Point(ft.x*xt*m.x,ft.y*xt*m.y),r.push(M.add(St)),r.push(M.subtract(St))}),r},transformPoint:function(t,s,h){return h?new o.Point(s[0]*t.x+s[2]*t.y,s[1]*t.x+s[3]*t.y):new o.Point(s[0]*t.x+s[2]*t.y+s[4],s[1]*t.x+s[3]*t.y+s[5])},makeBoundingBoxFromPoints:function(t,s){if(s)for(var h=0;h<t.length;h++)t[h]=o.util.transformPoint(t[h],s);var r=[t[0].x,t[1].x,t[2].x,t[3].x],d=o.util.array.min(r),m=o.util.array.max(r),y=m-d,b=[t[0].y,t[1].y,t[2].y,t[3].y],T=o.util.array.min(b),M=o.util.array.max(b),X=M-T;return{left:d,top:T,width:y,height:X}},invertTransform:function(t){var s=1/(t[0]*t[3]-t[1]*t[2]),h=[s*t[3],-s*t[1],-s*t[2],s*t[0]],r=o.util.transformPoint({x:t[4],y:t[5]},h,!0);return h[4]=-r.x,h[5]=-r.y,h},toFixed:function(t,s){return parseFloat(Number(t).toFixed(s))},parseUnit:function(t,s){var h=/\D{0,2}$/.exec(t),r=parseFloat(t);switch(s||(s=o.Text.DEFAULT_SVG_FONT_SIZE),h[0]){case"mm":return r*o.DPI/25.4;case"cm":return r*o.DPI/2.54;case"in":return r*o.DPI;case"pt":return r*o.DPI/72;case"pc":return r*o.DPI/72*12;case"em":return r*s;default:return r}},falseFunction:function(){return!1},getKlass:function(t,s){return t=o.util.string.camelize(t.charAt(0).toUpperCase()+t.slice(1)),o.util.resolveNamespace(s)[t]},getSvgAttributes:function(t){var s=["instantiated_by_use","style","id","class"];switch(t){case"linearGradient":s=s.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":s=s.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":s=s.concat(["offset","stop-color","stop-opacity"]);break}return s},resolveNamespace:function(t){if(!t)return o;var s=t.split("."),h=s.length,r,d=f||o.window;for(r=0;r<h;++r)d=d[s[r]];return d},loadImage:function(t,s,h,r){if(!t){s&&s.call(h,t);return}var d=o.util.createImage(),m=function(){s&&s.call(h,d,!1),d=d.onload=d.onerror=null};d.onload=m,d.onerror=function(){o.log("Error loading "+d.src),s&&s.call(h,null,!0),d=d.onload=d.onerror=null},t.indexOf("data")!==0&&r!==void 0&&r!==null&&(d.crossOrigin=r),t.substring(0,14)==="data:image/svg"&&(d.onload=null,o.util.loadImageInDom(d,m)),d.src=t},loadImageInDom:function(t,s){var h=o.document.createElement("div");h.style.width=h.style.height="1px",h.style.left=h.style.top="-100%",h.style.position="absolute",h.appendChild(t),o.document.querySelector("body").appendChild(h),t.onload=function(){s(),h.parentNode.removeChild(h),h=null}},enlivenObjects:function(t,s,h,r){t=t||[];var d=[],m=0,y=t.length;function b(){++m===y&&s&&s(d.filter(function(T){return T}))}if(!y){s&&s(d);return}t.forEach(function(T,M){if(!T||!T.type){b();return}var X=o.util.getKlass(T.type,h);X.fromObject(T,function(z,st){st||(d[M]=z),r&&r(T,z,st),b()})})},enlivenObjectEnlivables:function(t,s,h){var r=o.Object.ENLIVEN_PROPS.filter(function(d){return!!t[d]});o.util.enlivenObjects(r.map(function(d){return t[d]}),function(d){var m={};r.forEach(function(y,b){m[y]=d[b],s&&(s[y]=d[b])}),h&&h(m)})},enlivenPatterns:function(t,s){t=t||[];function h(){++d===m&&s&&s(r)}var r=[],d=0,m=t.length;if(!m){s&&s(r);return}t.forEach(function(y,b){y&&y.source?new o.Pattern(y,function(T){r[b]=T,h()}):(r[b]=y,h())})},groupSVGElements:function(t,s,h){var r;return t&&t.length===1?(typeof h<"u"&&(t[0].sourcePath=h),t[0]):(s&&(s.width&&s.height?s.centerPoint={x:s.width/2,y:s.height/2}:(delete s.width,delete s.height)),r=new o.Group(t,s),typeof h<"u"&&(r.sourcePath=h),r)},populateWithProperties:function(t,s,h){if(h&&Array.isArray(h))for(var r=0,d=h.length;r<d;r++)h[r]in t&&(s[h[r]]=t[h[r]])},createCanvasElement:function(){return o.document.createElement("canvas")},copyCanvasElement:function(t){var s=o.util.createCanvasElement();return s.width=t.width,s.height=t.height,s.getContext("2d").drawImage(t,0,0),s},toDataURL:function(t,s,h){return t.toDataURL("image/"+s,h)},createImage:function(){return o.document.createElement("img")},multiplyTransformMatrices:function(t,s,h){return[t[0]*s[0]+t[2]*s[1],t[1]*s[0]+t[3]*s[1],t[0]*s[2]+t[2]*s[3],t[1]*s[2]+t[3]*s[3],h?0:t[0]*s[4]+t[2]*s[5]+t[4],h?0:t[1]*s[4]+t[3]*s[5]+t[5]]},qrDecompose:function(t){var s=l(t[1],t[0]),h=c(t[0],2)+c(t[1],2),r=i(h),d=(t[0]*t[3]-t[2]*t[1])/r,m=l(t[0]*t[2]+t[1]*t[3],h);return{angle:s/e,scaleX:r,scaleY:d,skewX:m/e,skewY:0,translateX:t[4],translateY:t[5]}},calcRotateMatrix:function(t){if(!t.angle)return o.iMatrix.concat();var s=o.util.degreesToRadians(t.angle),h=o.util.cos(s),r=o.util.sin(s);return[h,r,-r,h,0,0]},calcDimensionsMatrix:function(t){var s=typeof t.scaleX>"u"?1:t.scaleX,h=typeof t.scaleY>"u"?1:t.scaleY,r=[t.flipX?-s:s,0,0,t.flipY?-h:h,0,0],d=o.util.multiplyTransformMatrices,m=o.util.degreesToRadians;return t.skewX&&(r=d(r,[1,0,Math.tan(m(t.skewX)),1],!0)),t.skewY&&(r=d(r,[1,Math.tan(m(t.skewY)),0,1],!0)),r},composeMatrix:function(t){var s=[1,0,0,1,t.translateX||0,t.translateY||0],h=o.util.multiplyTransformMatrices;return t.angle&&(s=h(s,o.util.calcRotateMatrix(t))),(t.scaleX!==1||t.scaleY!==1||t.skewX||t.skewY||t.flipX||t.flipY)&&(s=h(s,o.util.calcDimensionsMatrix(t))),s},resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.rotate(0)},saveObjectTransform:function(t){return{scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,angle:t.angle,left:t.left,flipX:t.flipX,flipY:t.flipY,top:t.top}},isTransparent:function(t,s,h,r){r>0&&(s>r?s-=r:s=0,h>r?h-=r:h=0);var d=!0,m,y,b=t.getImageData(s,h,r*2||1,r*2||1),T=b.data.length;for(m=3;m<T&&(y=b.data[m],d=y<=0,d!==!1);m+=4);return b=null,d},parsePreserveAspectRatioAttribute:function(t){var s="meet",h="Mid",r="Mid",d=t.split(" "),m;return d&&d.length&&(s=d.pop(),s!=="meet"&&s!=="slice"?(m=s,s="meet"):d.length&&(m=d.pop())),h=m!=="none"?m.slice(1,4):"none",r=m!=="none"?m.slice(5,8):"none",{meetOrSlice:s,alignX:h,alignY:r}},clearFabricFontCache:function(t){t=(t||"").toLowerCase(),t?o.charWidthsCache[t]&&delete o.charWidthsCache[t]:o.charWidthsCache={}},limitDimsByArea:function(t,s){var h=Math.sqrt(s*t),r=Math.floor(s/h);return{x:Math.floor(h),y:r}},capValue:function(t,s,h){return Math.max(t,Math.min(s,h))},findScaleToFit:function(t,s){return Math.min(s.width/t.width,s.height/t.height)},findScaleToCover:function(t,s){return Math.max(s.width/t.width,s.height/t.height)},matrixToSVG:function(t){return"matrix("+t.map(function(s){return o.util.toFixed(s,o.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(t,s){var h=o.util.invertTransform(s),r=o.util.multiplyTransformMatrices(h,t.calcOwnMatrix());o.util.applyTransformToObject(t,r)},addTransformToObject:function(t,s){o.util.applyTransformToObject(t,o.util.multiplyTransformMatrices(s,t.calcOwnMatrix()))},applyTransformToObject:function(t,s){var h=o.util.qrDecompose(s),r=new o.Point(h.translateX,h.translateY);t.flipX=!1,t.flipY=!1,t.set("scaleX",h.scaleX),t.set("scaleY",h.scaleY),t.skewX=h.skewX,t.skewY=h.skewY,t.angle=h.angle,t.setPositionByOrigin(r,"center","center")},sizeAfterTransform:function(t,s,h){var r=t/2,d=s/2,m=[{x:-r,y:-d},{x:r,y:-d},{x:-r,y:d},{x:r,y:d}],y=o.util.calcDimensionsMatrix(h),b=o.util.makeBoundingBoxFromPoints(m,y);return{x:b.width,y:b.height}},mergeClipPaths:function(t,s){var h=t,r=s;h.inverted&&!r.inverted&&(h=s,r=t),o.util.applyTransformToObject(r,o.util.multiplyTransformMatrices(o.util.invertTransform(h.calcTransformMatrix()),r.calcTransformMatrix()));var d=h.inverted&&r.inverted;return d&&(h.inverted=r.inverted=!1),new o.Group([h],{clipPath:r,inverted:d})},hasStyleChanged:function(t,s,h){return h=h||!1,t.fill!==s.fill||t.stroke!==s.stroke||t.strokeWidth!==s.strokeWidth||t.fontSize!==s.fontSize||t.fontFamily!==s.fontFamily||t.fontWeight!==s.fontWeight||t.fontStyle!==s.fontStyle||t.textBackgroundColor!==s.textBackgroundColor||t.deltaY!==s.deltaY||h&&(t.overline!==s.overline||t.underline!==s.underline||t.linethrough!==s.linethrough)},stylesToArray:function(h,s){for(var h=o.util.object.clone(h,!0),r=s.split(`
`),d=-1,m={},y=[],b=0;b<r.length;b++){if(!h[b]){d+=r[b].length;continue}for(var T=0;T<r[b].length;T++){d++;var M=h[b][T];if(M&&Object.keys(M).length>0){var X=o.util.hasStyleChanged(m,M,!0);X?y.push({start:d,end:d+1,style:M}):y[y.length-1].end++}m=M||{}}}return y},stylesFromArray:function(t,s){if(!Array.isArray(t))return t;for(var h=s.split(`
`),r=-1,d=0,m={},y=0;y<h.length;y++)for(var b=0;b<h[y].length;b++)r++,t[d]&&t[d].start<=r&&r<t[d].end&&(m[y]=m[y]||{},m[y][b]=Object.assign({},t[d].style),r===t[d].end-1&&d++);return m}}}(u),function(){var f=Array.prototype.join,i={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},l={m:"l",M:"L"};function c(k,U,N,H,nt,j,I,q,$,at,it){var ht=o.util.cos(k),dt=o.util.sin(k),F=o.util.cos(U),D=o.util.sin(U),R=N*nt*F-H*j*D+I,Y=H*nt*F+N*j*D+q,V=at+$*(-N*nt*dt-H*j*ht),G=it+$*(-H*nt*dt+N*j*ht),J=R+$*(N*nt*D+H*j*F),Z=Y+$*(H*nt*D-N*j*F);return["C",V,G,J,Z,R,Y]}function e(k,U,N,H,nt,j,I){var q=Math.PI,$=I*q/180,at=o.util.sin($),it=o.util.cos($),ht=0,dt=0;N=Math.abs(N),H=Math.abs(H);var F=-it*k*.5-at*U*.5,D=-it*U*.5+at*k*.5,R=N*N,Y=H*H,V=D*D,G=F*F,J=R*Y-R*V-Y*G,Z=0;if(J<0){var lt=Math.sqrt(1-J/(R*Y));N*=lt,H*=lt}else Z=(nt===j?-1:1)*Math.sqrt(J/(R*V+Y*G));var et=Z*N*D/H,Q=-Z*H*F/N,ct=it*et-at*Q+k*.5,gt=at*et+it*Q+U*.5,Ct=n(1,0,(F-et)/N,(D-Q)/H),Ot=n((F-et)/N,(D-Q)/H,(-F-et)/N,(-D-Q)/H);j===0&&Ot>0?Ot-=2*q:j===1&&Ot<0&&(Ot+=2*q);for(var Pt=Math.ceil(Math.abs(Ot/q*2)),Mt=[],Dt=Ot/Pt,Gt=8/3*Math.sin(Dt/4)*Math.sin(Dt/4)/Math.sin(Dt/2),re=Ct+Dt,$t=0;$t<Pt;$t++)Mt[$t]=c(Ct,re,it,at,N,H,ct,gt,Gt,ht,dt),ht=Mt[$t][5],dt=Mt[$t][6],Ct=re,re+=Dt;return Mt}function n(k,U,N,H){var nt=Math.atan2(U,k),j=Math.atan2(H,N);return j>=nt?j-nt:2*Math.PI-(nt-j)}function t(k,U,N,H,nt,j,I,q){var $;if(o.cachesBoundsOfCurve&&($=f.call(arguments),o.boundsOfCurveCache[$]))return o.boundsOfCurveCache[$];var at=Math.sqrt,it=Math.min,ht=Math.max,dt=Math.abs,F=[],D=[[],[]],R,Y,V,G,J,Z,lt,et;Y=6*k-12*N+6*nt,R=-3*k+9*N-9*nt+3*I,V=3*N-3*k;for(var Q=0;Q<2;++Q){if(Q>0&&(Y=6*U-12*H+6*j,R=-3*U+9*H-9*j+3*q,V=3*H-3*U),dt(R)<1e-12){if(dt(Y)<1e-12)continue;G=-V/Y,0<G&&G<1&&F.push(G);continue}lt=Y*Y-4*V*R,!(lt<0)&&(et=at(lt),J=(-Y+et)/(2*R),0<J&&J<1&&F.push(J),Z=(-Y-et)/(2*R),0<Z&&Z<1&&F.push(Z))}for(var ct,gt,Ct=F.length,Ot=Ct,Pt;Ct--;)G=F[Ct],Pt=1-G,ct=Pt*Pt*Pt*k+3*Pt*Pt*G*N+3*Pt*G*G*nt+G*G*G*I,D[0][Ct]=ct,gt=Pt*Pt*Pt*U+3*Pt*Pt*G*H+3*Pt*G*G*j+G*G*G*q,D[1][Ct]=gt;D[0][Ot]=k,D[1][Ot]=U,D[0][Ot+1]=I,D[1][Ot+1]=q;var Mt=[{x:it.apply(null,D[0]),y:it.apply(null,D[1])},{x:ht.apply(null,D[0]),y:ht.apply(null,D[1])}];return o.cachesBoundsOfCurve&&(o.boundsOfCurveCache[$]=Mt),Mt}function s(k,U,N){for(var H=N[1],nt=N[2],j=N[3],I=N[4],q=N[5],$=N[6],at=N[7],it=e($-k,at-U,H,nt,I,q,j),ht=0,dt=it.length;ht<dt;ht++)it[ht][1]+=k,it[ht][2]+=U,it[ht][3]+=k,it[ht][4]+=U,it[ht][5]+=k,it[ht][6]+=U;return it}function h(k){var U=0,N=0,H=k.length,nt=0,j=0,I,q,$,at=[],it,ht,dt;for(q=0;q<H;++q){switch($=!1,I=k[q].slice(0),I[0]){case"l":I[0]="L",I[1]+=U,I[2]+=N;case"L":U=I[1],N=I[2];break;case"h":I[1]+=U;case"H":I[0]="L",I[2]=N,U=I[1];break;case"v":I[1]+=N;case"V":I[0]="L",N=I[1],I[1]=U,I[2]=N;break;case"m":I[0]="M",I[1]+=U,I[2]+=N;case"M":U=I[1],N=I[2],nt=I[1],j=I[2];break;case"c":I[0]="C",I[1]+=U,I[2]+=N,I[3]+=U,I[4]+=N,I[5]+=U,I[6]+=N;case"C":ht=I[3],dt=I[4],U=I[5],N=I[6];break;case"s":I[0]="S",I[1]+=U,I[2]+=N,I[3]+=U,I[4]+=N;case"S":it==="C"?(ht=2*U-ht,dt=2*N-dt):(ht=U,dt=N),U=I[3],N=I[4],I[0]="C",I[5]=I[3],I[6]=I[4],I[3]=I[1],I[4]=I[2],I[1]=ht,I[2]=dt,ht=I[3],dt=I[4];break;case"q":I[0]="Q",I[1]+=U,I[2]+=N,I[3]+=U,I[4]+=N;case"Q":ht=I[1],dt=I[2],U=I[3],N=I[4];break;case"t":I[0]="T",I[1]+=U,I[2]+=N;case"T":it==="Q"?(ht=2*U-ht,dt=2*N-dt):(ht=U,dt=N),I[0]="Q",U=I[1],N=I[2],I[1]=ht,I[2]=dt,I[3]=U,I[4]=N;break;case"a":I[0]="A",I[6]+=U,I[7]+=N;case"A":$=!0,at=at.concat(s(U,N,I)),U=I[6],N=I[7];break;case"z":case"Z":U=nt,N=j;break}$||at.push(I),it=I[0]}return at}function r(k,U,N,H){return Math.sqrt((N-k)*(N-k)+(H-U)*(H-U))}function d(k){return k*k*k}function m(k){return 3*k*k*(1-k)}function y(k){return 3*k*(1-k)*(1-k)}function b(k){return(1-k)*(1-k)*(1-k)}function T(k,U,N,H,nt,j,I,q){return function($){var at=d($),it=m($),ht=y($),dt=b($);return{x:I*at+nt*it+N*ht+k*dt,y:q*at+j*it+H*ht+U*dt}}}function M(k,U,N,H,nt,j,I,q){return function($){var at=1-$,it=3*at*at*(N-k)+6*at*$*(nt-N)+3*$*$*(I-nt),ht=3*at*at*(H-U)+6*at*$*(j-H)+3*$*$*(q-j);return Math.atan2(ht,it)}}function X(k){return k*k}function z(k){return 2*k*(1-k)}function st(k){return(1-k)*(1-k)}function ft(k,U,N,H,nt,j){return function(I){var q=X(I),$=z(I),at=st(I);return{x:nt*q+N*$+k*at,y:j*q+H*$+U*at}}}function vt(k,U,N,H,nt,j){return function(I){var q=1-I,$=2*q*(N-k)+2*I*(nt-N),at=2*q*(H-U)+2*I*(j-H);return Math.atan2(at,$)}}function xt(k,U,N){var H={x:U,y:N},nt,j=0,I;for(I=1;I<=100;I+=1)nt=k(I/100),j+=r(H.x,H.y,nt.x,nt.y),H=nt;return j}function St(k,U){for(var N=0,H=0,nt=k.iterator,j={x:k.x,y:k.y},I,q,$=.01,at=k.angleFinder,it;H<U&&$>1e-4;)I=nt(N),it=N,q=r(j.x,j.y,I.x,I.y),q+H>U?(N-=$,$/=2):(j=I,N+=$,H+=q);return I.angle=at(it),I}function _t(k){for(var U=0,N=k.length,H,nt=0,j=0,I=0,q=0,$=[],at,it,ht,dt=0;dt<N;dt++){switch(H=k[dt],it={x:nt,y:j,command:H[0]},H[0]){case"M":it.length=0,I=nt=H[1],q=j=H[2];break;case"L":it.length=r(nt,j,H[1],H[2]),nt=H[1],j=H[2];break;case"C":at=T(nt,j,H[1],H[2],H[3],H[4],H[5],H[6]),ht=M(nt,j,H[1],H[2],H[3],H[4],H[5],H[6]),it.iterator=at,it.angleFinder=ht,it.length=xt(at,nt,j),nt=H[5],j=H[6];break;case"Q":at=ft(nt,j,H[1],H[2],H[3],H[4]),ht=vt(nt,j,H[1],H[2],H[3],H[4]),it.iterator=at,it.angleFinder=ht,it.length=xt(at,nt,j),nt=H[3],j=H[4];break;case"Z":case"z":it.destX=I,it.destY=q,it.length=r(nt,j,I,q),nt=I,j=q;break}U+=it.length,$.push(it)}return $.push({length:U,x:nt,y:j}),$}function ot(k,U,N){N||(N=_t(k));for(var H=0;U-N[H].length>0&&H<N.length-2;)U-=N[H].length,H++;var nt=N[H],j=U/nt.length,I=nt.command,q=k[H],$;switch(I){case"M":return{x:nt.x,y:nt.y,angle:0};case"Z":case"z":return $=new o.Point(nt.x,nt.y).lerp(new o.Point(nt.destX,nt.destY),j),$.angle=Math.atan2(nt.destY-nt.y,nt.destX-nt.x),$;case"L":return $=new o.Point(nt.x,nt.y).lerp(new o.Point(q[1],q[2]),j),$.angle=Math.atan2(q[2]-nt.y,q[1]-nt.x),$;case"C":return St(nt,U);case"Q":return St(nt,U)}}function pt(k){var U=[],N=[],H,nt,j=o.rePathCommand,I="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",q="("+I+")"+o.commaWsp,$="([01])"+o.commaWsp+"?",at=q+"?"+q+"?"+q+$+$+q+"?("+I+")",it=new RegExp(at,"g"),ht,dt,F;if(!k||!k.match)return U;F=k.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var D=0,R,Y=F.length;D<Y;D++){H=F[D],dt=H.slice(1).trim(),N.length=0;var V=H.charAt(0);if(R=[V],V.toLowerCase()==="a")for(var G;G=it.exec(dt);)for(var J=1;J<G.length;J++)N.push(G[J]);else for(;ht=j.exec(dt);)N.push(ht[0]);for(var J=0,Z=N.length;J<Z;J++)nt=parseFloat(N[J]),isNaN(nt)||R.push(nt);var lt=i[V.toLowerCase()],et=l[V]||V;if(R.length-1>lt)for(var Q=1,ct=R.length;Q<ct;Q+=lt)U.push([V].concat(R.slice(Q,Q+lt))),V=et;else U.push(R)}return U}function wt(k,U){var N=[],H,nt=new o.Point(k[0].x,k[0].y),j=new o.Point(k[1].x,k[1].y),I=k.length,q=1,$=0,at=I>2;for(U=U||0,at&&(q=k[2].x<j.x?-1:k[2].x===j.x?0:1,$=k[2].y<j.y?-1:k[2].y===j.y?0:1),N.push(["M",nt.x-q*U,nt.y-$*U]),H=1;H<I;H++){if(!nt.eq(j)){var it=nt.midPointFrom(j);N.push(["Q",nt.x,nt.y,it.x,it.y])}nt=k[H],H+1<k.length&&(j=k[H+1])}return at&&(q=nt.x>k[H-2].x?1:nt.x===k[H-2].x?0:-1,$=nt.y>k[H-2].y?1:nt.y===k[H-2].y?0:-1),N.push(["L",nt.x+q*U,nt.y+$*U]),N}function bt(k,U,N){return N&&(U=o.util.multiplyTransformMatrices(U,[1,0,0,1,-N.x,-N.y])),k.map(function(H){for(var nt=H.slice(0),j={},I=1;I<H.length-1;I+=2)j.x=H[I],j.y=H[I+1],j=o.util.transformPoint(j,U),nt[I]=j.x,nt[I+1]=j.y;return nt})}o.util.joinPath=function(k){return k.map(function(U){return U.join(" ")}).join(" ")},o.util.parsePath=pt,o.util.makePathSimpler=h,o.util.getSmoothPathFromPoints=wt,o.util.getPathSegmentsInfo=_t,o.util.getBoundsOfCurve=t,o.util.getPointOnPath=ot,o.util.transformPath=bt}(),function(){var f=Array.prototype.slice;function i(t,s){for(var h=f.call(arguments,2),r=[],d=0,m=t.length;d<m;d++)r[d]=h.length?t[d][s].apply(t[d],h):t[d][s].call(t[d]);return r}function l(t,s){return n(t,s,function(h,r){return h>=r})}function c(t,s){return n(t,s,function(h,r){return h<r})}function e(t,s){for(var h=t.length;h--;)t[h]=s;return t}function n(t,s,h){if(!(!t||t.length===0)){var r=t.length-1,d=s?t[r][s]:t[r];if(s)for(;r--;)h(t[r][s],d)&&(d=t[r][s]);else for(;r--;)h(t[r],d)&&(d=t[r]);return d}}o.util.array={fill:e,invoke:i,min:c,max:l}}(),function(){function f(l,c,e){if(e)if(!o.isLikelyNode&&c instanceof Element)l=c;else if(c instanceof Array){l=[];for(var n=0,t=c.length;n<t;n++)l[n]=f({},c[n],e)}else if(c&&typeof c=="object")for(var s in c)s==="canvas"||s==="group"?l[s]=null:c.hasOwnProperty(s)&&(l[s]=f({},c[s],e));else l=c;else for(var s in c)l[s]=c[s];return l}function i(l,c){return f({},l,c)}o.util.object={extend:f,clone:i},o.util.object.extend(o.util,o.Observable)}(),function(){function f(n){return n.replace(/-+(.)?/g,function(t,s){return s?s.toUpperCase():""})}function i(n,t){return n.charAt(0).toUpperCase()+(t?n.slice(1):n.slice(1).toLowerCase())}function l(n){return n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function c(n){var t=0,s,h=[];for(t=0,s;t<n.length;t++)(s=e(n,t))!==!1&&h.push(s);return h}function e(n,t){var s=n.charCodeAt(t);if(isNaN(s))return"";if(s<55296||s>57343)return n.charAt(t);if(55296<=s&&s<=56319){if(n.length<=t+1)throw"High surrogate without following low surrogate";var h=n.charCodeAt(t+1);if(56320>h||h>57343)throw"High surrogate without following low surrogate";return n.charAt(t)+n.charAt(t+1)}if(t===0)throw"Low surrogate without preceding high surrogate";var r=n.charCodeAt(t-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1}o.util.string={camelize:f,capitalize:i,escapeXml:l,graphemeSplit:c}}(),function(){var f=Array.prototype.slice,i=function(){},l=function(){for(var s in{toString:1})if(s==="toString")return!1;return!0}(),c=function(s,h,r){for(var d in h)d in s.prototype&&typeof s.prototype[d]=="function"&&(h[d]+"").indexOf("callSuper")>-1?s.prototype[d]=function(m){return function(){var y=this.constructor.superclass;this.constructor.superclass=r;var b=h[m].apply(this,arguments);if(this.constructor.superclass=y,m!=="initialize")return b}}(d):s.prototype[d]=h[d],l&&(h.toString!==Object.prototype.toString&&(s.prototype.toString=h.toString),h.valueOf!==Object.prototype.valueOf&&(s.prototype.valueOf=h.valueOf))};function e(){}function n(s){for(var h=null,r=this;r.constructor.superclass;){var d=r.constructor.superclass.prototype[s];if(r[s]!==d){h=d;break}r=r.constructor.superclass.prototype}return h?arguments.length>1?h.apply(this,f.call(arguments,1)):h.call(this):console.log("tried to callSuper "+s+", method not found in prototype chain",this)}function t(){var s=null,h=f.call(arguments,0);typeof h[0]=="function"&&(s=h.shift());function r(){this.initialize.apply(this,arguments)}r.superclass=s,r.subclasses=[],s&&(e.prototype=s.prototype,r.prototype=new e,s.subclasses.push(r));for(var d=0,m=h.length;d<m;d++)c(r,h[d],s);return r.prototype.initialize||(r.prototype.initialize=i),r.prototype.constructor=r,r.prototype.callSuper=n,r}o.util.createClass=t}(),function(){var f=!!o.document.createElement("div").attachEvent,i=["touchstart","touchmove","touchend"];o.util.addListener=function(c,e,n,t){c&&c.addEventListener(e,n,f?!1:t)},o.util.removeListener=function(c,e,n,t){c&&c.removeEventListener(e,n,f?!1:t)};function l(c){var e=c.changedTouches;return e&&e[0]?e[0]:c}o.util.getPointer=function(c){var e=c.target,n=o.util.getScrollLeftTop(e),t=l(c);return{x:t.clientX+n.left,y:t.clientY+n.top}},o.util.isTouchEvent=function(c){return i.indexOf(c.type)>-1||c.pointerType==="touch"}}(),function(){function f(t,s){var h=t.style;if(!h)return t;if(typeof s=="string")return t.style.cssText+=";"+s,s.indexOf("opacity")>-1?n(t,s.match(/opacity:\s*(\d?\.?\d*)/)[1]):t;for(var r in s)if(r==="opacity")n(t,s[r]);else{var d=r==="float"||r==="cssFloat"?typeof h.styleFloat>"u"?"cssFloat":"styleFloat":r;h.setProperty(d,s[r])}return t}var i=o.document.createElement("div"),l=typeof i.style.opacity=="string",c=typeof i.style.filter=="string",e=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,n=function(t){return t};l?n=function(t,s){return t.style.opacity=s,t}:c&&(n=function(t,s){var h=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(h.zoom=1),e.test(h.filter)?(s=s>=.9999?"":"alpha(opacity="+s*100+")",h.filter=h.filter.replace(e,s)):h.filter+=" alpha(opacity="+s*100+")",t}),o.util.setStyle=f}(),function(){var f=Array.prototype.slice;function i(b){return typeof b=="string"?o.document.getElementById(b):b}var l,c=function(b){return f.call(b,0)};try{l=c(o.document.childNodes)instanceof Array}catch{}l||(c=function(b){for(var T=new Array(b.length),M=b.length;M--;)T[M]=b[M];return T});function e(b,T){var M=o.document.createElement(b);for(var X in T)X==="class"?M.className=T[X]:X==="for"?M.htmlFor=T[X]:M.setAttribute(X,T[X]);return M}function n(b,T){b&&(" "+b.className+" ").indexOf(" "+T+" ")===-1&&(b.className+=(b.className?" ":"")+T)}function t(b,T,M){return typeof T=="string"&&(T=e(T,M)),b.parentNode&&b.parentNode.replaceChild(T,b),T.appendChild(b),T}function s(b){for(var T=0,M=0,X=o.document.documentElement,z=o.document.body||{scrollLeft:0,scrollTop:0};b&&(b.parentNode||b.host)&&(b=b.parentNode||b.host,b===o.document?(T=z.scrollLeft||X.scrollLeft||0,M=z.scrollTop||X.scrollTop||0):(T+=b.scrollLeft||0,M+=b.scrollTop||0),!(b.nodeType===1&&b.style.position==="fixed")););return{left:T,top:M}}function h(b){var T,M=b&&b.ownerDocument,X={left:0,top:0},z={left:0,top:0},st,ft={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!M)return z;for(var vt in ft)z[ft[vt]]+=parseInt(r(b,vt),10)||0;return T=M.documentElement,typeof b.getBoundingClientRect<"u"&&(X=b.getBoundingClientRect()),st=s(b),{left:X.left+st.left-(T.clientLeft||0)+z.left,top:X.top+st.top-(T.clientTop||0)+z.top}}var r;o.document.defaultView&&o.document.defaultView.getComputedStyle?r=function(b,T){var M=o.document.defaultView.getComputedStyle(b,null);return M?M[T]:void 0}:r=function(b,T){var M=b.style[T];return!M&&b.currentStyle&&(M=b.currentStyle[T]),M},function(){var b=o.document.documentElement.style,T="userSelect"in b?"userSelect":"MozUserSelect"in b?"MozUserSelect":"WebkitUserSelect"in b?"WebkitUserSelect":"KhtmlUserSelect"in b?"KhtmlUserSelect":"";function M(z){return typeof z.onselectstart<"u"&&(z.onselectstart=o.util.falseFunction),T?z.style[T]="none":typeof z.unselectable=="string"&&(z.unselectable="on"),z}function X(z){return typeof z.onselectstart<"u"&&(z.onselectstart=null),T?z.style[T]="":typeof z.unselectable=="string"&&(z.unselectable=""),z}o.util.makeElementUnselectable=M,o.util.makeElementSelectable=X}();function d(b){var T=o.jsdomImplForWrapper(b);return T._canvas||T._image}function m(b){if(o.isLikelyNode){var T=o.jsdomImplForWrapper(b);T&&(T._image=null,T._canvas=null,T._currentSrc=null,T._attributes=null,T._classList=null)}}function y(b,T){b.imageSmoothingEnabled=b.imageSmoothingEnabled||b.webkitImageSmoothingEnabled||b.mozImageSmoothingEnabled||b.msImageSmoothingEnabled||b.oImageSmoothingEnabled,b.imageSmoothingEnabled=T}o.util.setImageSmoothing=y,o.util.getById=i,o.util.toArray=c,o.util.addClass=n,o.util.makeElement=e,o.util.wrapElement=t,o.util.getScrollLeftTop=s,o.util.getElementOffset=h,o.util.getNodeCanvas=d,o.util.cleanUpJsdomNode=m}(),function(){function f(c,e){return c+(/\?/.test(c)?"&":"?")+e}function i(){}function l(c,e){e||(e={});var n=e.method?e.method.toUpperCase():"GET",t=e.onComplete||function(){},s=new o.window.XMLHttpRequest,h=e.body||e.parameters;return s.onreadystatechange=function(){s.readyState===4&&(t(s),s.onreadystatechange=i)},n==="GET"&&(h=null,typeof e.parameters=="string"&&(c=f(c,e.parameters))),s.open(n,c,!0),(n==="POST"||n==="PUT")&&s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(h),s}o.util.request=l}(),o.log=console.log,o.warn=console.warn,function(){var f=o.util.object.extend,i=o.util.object.clone,l=[];o.util.object.extend(l,{cancelAll:function(){var d=this.splice(0);return d.forEach(function(m){m.cancel()}),d},cancelByCanvas:function(d){if(!d)return[];var m=this.filter(function(y){return typeof y.target=="object"&&y.target.canvas===d});return m.forEach(function(y){y.cancel()}),m},cancelByTarget:function(d){var m=this.findAnimationsByTarget(d);return m.forEach(function(y){y.cancel()}),m},findAnimationIndex:function(d){return this.indexOf(this.findAnimation(d))},findAnimation:function(d){return this.find(function(m){return m.cancel===d})},findAnimationsByTarget:function(d){return d?this.filter(function(m){return m.target===d}):[]}});function c(){return!1}function e(d,m,y,b){return-y*Math.cos(d/b*(Math.PI/2))+y+m}function n(d){d||(d={});var m=!1,y,b=function(){var T=o.runningAnimations.indexOf(y);return T>-1&&o.runningAnimations.splice(T,1)[0]};return y=f(i(d),{cancel:function(){return m=!0,b()},currentValue:"startValue"in d?d.startValue:0,completionRate:0,durationRate:0}),o.runningAnimations.push(y),h(function(T){var M=T||+new Date,X=d.duration||500,z=M+X,st,ft=d.onChange||c,vt=d.abort||c,xt=d.onComplete||c,St=d.easing||e,_t="startValue"in d?d.startValue.length>0:!1,ot="startValue"in d?d.startValue:0,pt="endValue"in d?d.endValue:100,wt=d.byValue||(_t?ot.map(function(bt,k){return pt[k]-ot[k]}):pt-ot);d.onStart&&d.onStart(),function bt(k){st=k||+new Date;var U=st>z?X:st-M,N=U/X,H=_t?ot.map(function(j,I){return St(U,ot[I],wt[I],X)}):St(U,ot,wt,X),nt=Math.abs(_t?(H[0]-ot[0])/wt[0]:(H-ot)/wt);if(y.currentValue=_t?H.slice():H,y.completionRate=nt,y.durationRate=N,!m){if(vt(H,nt,N)){b();return}if(st>z){y.currentValue=_t?pt.slice():pt,y.completionRate=1,y.durationRate=1,ft(_t?pt.slice():pt,1,1),xt(pt,1,1),b();return}else ft(H,nt,N),h(bt)}}(M)}),y.cancel}var t=o.window.requestAnimationFrame||o.window.webkitRequestAnimationFrame||o.window.mozRequestAnimationFrame||o.window.oRequestAnimationFrame||o.window.msRequestAnimationFrame||function(d){return o.window.setTimeout(d,1e3/60)},s=o.window.cancelAnimationFrame||o.window.clearTimeout;function h(){return t.apply(o.window,arguments)}function r(){return s.apply(o.window,arguments)}o.util.animate=n,o.util.requestAnimFrame=h,o.util.cancelAnimFrame=r,o.runningAnimations=l}(),function(){function f(l,c,e){var n="rgba("+parseInt(l[0]+e*(c[0]-l[0]),10)+","+parseInt(l[1]+e*(c[1]-l[1]),10)+","+parseInt(l[2]+e*(c[2]-l[2]),10);return n+=","+(l&&c?parseFloat(l[3]+e*(c[3]-l[3])):1),n+=")",n}function i(l,c,e,n){var t=new o.Color(l).getSource(),s=new o.Color(c).getSource(),h=n.onComplete,r=n.onChange;return n=n||{},o.util.animate(o.util.object.extend(n,{duration:e||500,startValue:t,endValue:s,byValue:s,easing:function(d,m,y,b){var T=n.colorEasing?n.colorEasing(d,b):1-Math.cos(d/b*(Math.PI/2));return f(m,y,T)},onComplete:function(d,m,y){if(h)return h(f(s,s,0),m,y)},onChange:function(d,m,y){if(r){if(Array.isArray(d))return r(f(d,d,0),m,y);r(d,m,y)}}}))}o.util.animateColor=i}(),function(){function f(k,U,N,H){return k<Math.abs(U)?(k=U,H=N/4):U===0&&k===0?H=N/(2*Math.PI)*Math.asin(1):H=N/(2*Math.PI)*Math.asin(U/k),{a:k,c:U,p:N,s:H}}function i(k,U,N){return k.a*Math.pow(2,10*(U-=1))*Math.sin((U*N-k.s)*(2*Math.PI)/k.p)}function l(k,U,N,H){return N*((k=k/H-1)*k*k+1)+U}function c(k,U,N,H){return k/=H/2,k<1?N/2*k*k*k+U:N/2*((k-=2)*k*k+2)+U}function e(k,U,N,H){return N*(k/=H)*k*k*k+U}function n(k,U,N,H){return-N*((k=k/H-1)*k*k*k-1)+U}function t(k,U,N,H){return k/=H/2,k<1?N/2*k*k*k*k+U:-N/2*((k-=2)*k*k*k-2)+U}function s(k,U,N,H){return N*(k/=H)*k*k*k*k+U}function h(k,U,N,H){return N*((k=k/H-1)*k*k*k*k+1)+U}function r(k,U,N,H){return k/=H/2,k<1?N/2*k*k*k*k*k+U:N/2*((k-=2)*k*k*k*k+2)+U}function d(k,U,N,H){return-N*Math.cos(k/H*(Math.PI/2))+N+U}function m(k,U,N,H){return N*Math.sin(k/H*(Math.PI/2))+U}function y(k,U,N,H){return-N/2*(Math.cos(Math.PI*k/H)-1)+U}function b(k,U,N,H){return k===0?U:N*Math.pow(2,10*(k/H-1))+U}function T(k,U,N,H){return k===H?U+N:N*(-Math.pow(2,-10*k/H)+1)+U}function M(k,U,N,H){return k===0?U:k===H?U+N:(k/=H/2,k<1?N/2*Math.pow(2,10*(k-1))+U:N/2*(-Math.pow(2,-10*--k)+2)+U)}function X(k,U,N,H){return-N*(Math.sqrt(1-(k/=H)*k)-1)+U}function z(k,U,N,H){return N*Math.sqrt(1-(k=k/H-1)*k)+U}function st(k,U,N,H){return k/=H/2,k<1?-N/2*(Math.sqrt(1-k*k)-1)+U:N/2*(Math.sqrt(1-(k-=2)*k)+1)+U}function ft(k,U,N,H){var nt=1.70158,j=0,I=N;if(k===0)return U;if(k/=H,k===1)return U+N;j||(j=H*.3);var q=f(I,N,j,nt);return-i(q,k,H)+U}function vt(k,U,N,H){var nt=1.70158,j=0,I=N;if(k===0)return U;if(k/=H,k===1)return U+N;j||(j=H*.3);var q=f(I,N,j,nt);return q.a*Math.pow(2,-10*k)*Math.sin((k*H-q.s)*(2*Math.PI)/q.p)+q.c+U}function xt(k,U,N,H){var nt=1.70158,j=0,I=N;if(k===0)return U;if(k/=H/2,k===2)return U+N;j||(j=H*(.3*1.5));var q=f(I,N,j,nt);return k<1?-.5*i(q,k,H)+U:q.a*Math.pow(2,-10*(k-=1))*Math.sin((k*H-q.s)*(2*Math.PI)/q.p)*.5+q.c+U}function St(k,U,N,H,nt){return nt===void 0&&(nt=1.70158),N*(k/=H)*k*((nt+1)*k-nt)+U}function _t(k,U,N,H,nt){return nt===void 0&&(nt=1.70158),N*((k=k/H-1)*k*((nt+1)*k+nt)+1)+U}function ot(k,U,N,H,nt){return nt===void 0&&(nt=1.70158),k/=H/2,k<1?N/2*(k*k*(((nt*=1.525)+1)*k-nt))+U:N/2*((k-=2)*k*(((nt*=1.525)+1)*k+nt)+2)+U}function pt(k,U,N,H){return N-wt(H-k,0,N,H)+U}function wt(k,U,N,H){return(k/=H)<1/2.75?N*(7.5625*k*k)+U:k<2/2.75?N*(7.5625*(k-=1.5/2.75)*k+.75)+U:k<2.5/2.75?N*(7.5625*(k-=2.25/2.75)*k+.9375)+U:N*(7.5625*(k-=2.625/2.75)*k+.984375)+U}function bt(k,U,N,H){return k<H/2?pt(k*2,0,N,H)*.5+U:wt(k*2-H,0,N,H)*.5+N*.5+U}o.util.ease={easeInQuad:function(k,U,N,H){return N*(k/=H)*k+U},easeOutQuad:function(k,U,N,H){return-N*(k/=H)*(k-2)+U},easeInOutQuad:function(k,U,N,H){return k/=H/2,k<1?N/2*k*k+U:-N/2*(--k*(k-2)-1)+U},easeInCubic:function(k,U,N,H){return N*(k/=H)*k*k+U},easeOutCubic:l,easeInOutCubic:c,easeInQuart:e,easeOutQuart:n,easeInOutQuart:t,easeInQuint:s,easeOutQuint:h,easeInOutQuint:r,easeInSine:d,easeOutSine:m,easeInOutSine:y,easeInExpo:b,easeOutExpo:T,easeInOutExpo:M,easeInCirc:X,easeOutCirc:z,easeInOutCirc:st,easeInElastic:ft,easeOutElastic:vt,easeInOutElastic:xt,easeInBack:St,easeOutBack:_t,easeInOutBack:ot,easeInBounce:pt,easeOutBounce:wt,easeInOutBounce:bt}}(),function(f){var i=f.fabric||(f.fabric={}),l=i.util.object.extend,c=i.util.object.clone,e=i.util.toFixed,n=i.util.parseUnit,t=i.util.multiplyTransformMatrices,s=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],h=["symbol","image","marker","pattern","view","svg"],r=["pattern","defs","symbol","metadata","clipPath","mask","desc"],d=["symbol","g","a","svg","clipPath","defs"],m={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},y={stroke:"strokeOpacity",fill:"fillOpacity"},b="font-size",T="clip-path";i.svgValidTagNamesRegEx=z(s),i.svgViewBoxElementsRegEx=z(h),i.svgInvalidAncestorsRegEx=z(r),i.svgValidParentsRegEx=z(d),i.cssRules={},i.gradientDefs={},i.clipPaths={};function M(j){return j in m?m[j]:j}function X(j,I,q,$){var at=Array.isArray(I),it;if((j==="fill"||j==="stroke")&&I==="none")I="";else{if(j==="strokeUniform")return I==="non-scaling-stroke";if(j==="strokeDashArray")I==="none"?I=null:I=I.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(j==="transformMatrix")q&&q.transformMatrix?I=t(q.transformMatrix,i.parseTransformAttribute(I)):I=i.parseTransformAttribute(I);else if(j==="visible")I=I!=="none"&&I!=="hidden",q&&q.visible===!1&&(I=!1);else if(j==="opacity")I=parseFloat(I),q&&typeof q.opacity<"u"&&(I*=q.opacity);else if(j==="textAnchor")I=I==="start"?"left":I==="end"?"right":"center";else if(j==="charSpacing")it=n(I,$)/$*1e3;else if(j==="paintFirst"){var ht=I.indexOf("fill"),dt=I.indexOf("stroke"),I="fill";(ht>-1&&dt>-1&&dt<ht||ht===-1&&dt>-1)&&(I="stroke")}else{if(j==="href"||j==="xlink:href"||j==="font")return I;if(j==="imageSmoothing")return I==="optimizeQuality";it=at?I.map(n):n(I,$)}}return!at&&isNaN(it)?I:it}function z(j){return new RegExp("^("+j.join("|")+")\\b","i")}function st(j){for(var I in y)if(!(typeof j[y[I]]>"u"||j[I]==="")){if(typeof j[I]>"u"){if(!i.Object.prototype[I])continue;j[I]=i.Object.prototype[I]}if(j[I].indexOf("url(")!==0){var q=new i.Color(j[I]);j[I]=q.setAlpha(e(q.getAlpha()*j[y[I]],2)).toRgba()}}return j}function ft(j,I){var q,$=[],at,it,ht;for(it=0,ht=I.length;it<ht;it++)q=I[it],at=j.getElementsByTagName(q),$=$.concat(Array.prototype.slice.call(at));return $}i.parseTransformAttribute=function(){function j(Q,ct){var gt=i.util.cos(ct[0]),Ct=i.util.sin(ct[0]),Ot=0,Pt=0;ct.length===3&&(Ot=ct[1],Pt=ct[2]),Q[0]=gt,Q[1]=Ct,Q[2]=-Ct,Q[3]=gt,Q[4]=Ot-(gt*Ot-Ct*Pt),Q[5]=Pt-(Ct*Ot+gt*Pt)}function I(Q,ct){var gt=ct[0],Ct=ct.length===2?ct[1]:ct[0];Q[0]=gt,Q[3]=Ct}function q(Q,ct,gt){Q[gt]=Math.tan(i.util.degreesToRadians(ct[0]))}function $(Q,ct){Q[4]=ct[0],ct.length===2&&(Q[5]=ct[1])}var at=i.iMatrix,it=i.reNum,ht=i.commaWsp,dt="(?:(skewX)\\s*\\(\\s*("+it+")\\s*\\))",F="(?:(skewY)\\s*\\(\\s*("+it+")\\s*\\))",D="(?:(rotate)\\s*\\(\\s*("+it+")(?:"+ht+"("+it+")"+ht+"("+it+"))?\\s*\\))",R="(?:(scale)\\s*\\(\\s*("+it+")(?:"+ht+"("+it+"))?\\s*\\))",Y="(?:(translate)\\s*\\(\\s*("+it+")(?:"+ht+"("+it+"))?\\s*\\))",V="(?:(matrix)\\s*\\(\\s*("+it+")"+ht+"("+it+")"+ht+"("+it+")"+ht+"("+it+")"+ht+"("+it+")"+ht+"("+it+")\\s*\\))",G="(?:"+V+"|"+Y+"|"+R+"|"+D+"|"+dt+"|"+F+")",J="(?:"+G+"(?:"+ht+"*"+G+")*)",Z="^\\s*(?:"+J+"?)\\s*$",lt=new RegExp(Z),et=new RegExp(G,"g");return function(Q){var ct=at.concat(),gt=[];if(!Q||Q&&!lt.test(Q))return ct;Q.replace(et,function(Ot){var Pt=new RegExp(G).exec(Ot).filter(function(Gt){return!!Gt}),Mt=Pt[1],Dt=Pt.slice(2).map(parseFloat);switch(Mt){case"translate":$(ct,Dt);break;case"rotate":Dt[0]=i.util.degreesToRadians(Dt[0]),j(ct,Dt);break;case"scale":I(ct,Dt);break;case"skewX":q(ct,Dt,2);break;case"skewY":q(ct,Dt,1);break;case"matrix":ct=Dt;break}gt.push(ct.concat()),ct=at.concat()});for(var Ct=gt[0];gt.length>1;)gt.shift(),Ct=i.util.multiplyTransformMatrices(Ct,gt[0]);return Ct}}();function vt(j,I){var q,$;j.replace(/;\s*$/,"").split(";").forEach(function(at){var it=at.split(":");q=it[0].trim().toLowerCase(),$=it[1].trim(),I[q]=$})}function xt(j,I){var q,$;for(var at in j)typeof j[at]>"u"||(q=at.toLowerCase(),$=j[at],I[q]=$)}function St(j,I){var q={};for(var $ in i.cssRules[I])if(_t(j,$.split(" ")))for(var at in i.cssRules[I][$])q[at]=i.cssRules[I][$][at];return q}function _t(j,I){var q,$=!0;return q=pt(j,I.pop()),q&&I.length&&($=ot(j,I)),q&&$&&I.length===0}function ot(j,I){for(var q,$=!0;j.parentNode&&j.parentNode.nodeType===1&&I.length;)$&&(q=I.pop()),j=j.parentNode,$=pt(j,q);return I.length===0}function pt(j,I){var q=j.nodeName,$=j.getAttribute("class"),at=j.getAttribute("id"),it,ht;if(it=new RegExp("^"+q,"i"),I=I.replace(it,""),at&&I.length&&(it=new RegExp("#"+at+"(?![a-zA-Z\\-]+)","i"),I=I.replace(it,"")),$&&I.length)for($=$.split(" "),ht=$.length;ht--;)it=new RegExp("\\."+$[ht]+"(?![a-zA-Z\\-]+)","i"),I=I.replace(it,"");return I.length===0}function wt(j,I){var q;if(j.getElementById&&(q=j.getElementById(I)),q)return q;var $,at,it,ht=j.getElementsByTagName("*");for(at=0,it=ht.length;at<it;at++)if($=ht[at],I===$.getAttribute("id"))return $}function bt(j){for(var I=ft(j,["use","svg:use"]),q=0;I.length&&q<I.length;){var $=I[q],at=$.getAttribute("xlink:href")||$.getAttribute("href");if(at===null)return;var it=at.slice(1),ht=$.getAttribute("x")||0,dt=$.getAttribute("y")||0,F=wt(j,it).cloneNode(!0),D=(F.getAttribute("transform")||"")+" translate("+ht+", "+dt+")",R,Y=I.length,V,G,J,Z,lt=i.svgNS;if(U(F),/^svg$/i.test(F.nodeName)){var et=F.ownerDocument.createElementNS(lt,"g");for(G=0,J=F.attributes,Z=J.length;G<Z;G++)V=J.item(G),et.setAttributeNS(lt,V.nodeName,V.nodeValue);for(;F.firstChild;)et.appendChild(F.firstChild);F=et}for(G=0,J=$.attributes,Z=J.length;G<Z;G++)V=J.item(G),!(V.nodeName==="x"||V.nodeName==="y"||V.nodeName==="xlink:href"||V.nodeName==="href")&&(V.nodeName==="transform"?D=V.nodeValue+" "+D:F.setAttribute(V.nodeName,V.nodeValue));F.setAttribute("transform",D),F.setAttribute("instantiated_by_use","1"),F.removeAttribute("id"),R=$.parentNode,R.replaceChild(F,$),I.length===Y&&q++}}var k=new RegExp("^\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*$");function U(j){if(!i.svgViewBoxElementsRegEx.test(j.nodeName))return{};var I=j.getAttribute("viewBox"),q=1,$=1,at=0,it=0,ht,dt,F,D,R=j.getAttribute("width"),Y=j.getAttribute("height"),V=j.getAttribute("x")||0,G=j.getAttribute("y")||0,J=j.getAttribute("preserveAspectRatio")||"",Z=!I||!(I=I.match(k)),lt=!R||!Y||R==="100%"||Y==="100%",et=Z&&lt,Q={},ct="",gt=0,Ct=0;if(Q.width=0,Q.height=0,Q.toBeParsed=et,Z&&(V||G)&&j.parentNode&&j.parentNode.nodeName!=="#document"&&(ct=" translate("+n(V)+" "+n(G)+") ",F=(j.getAttribute("transform")||"")+ct,j.setAttribute("transform",F),j.removeAttribute("x"),j.removeAttribute("y")),et)return Q;if(Z)return Q.width=n(R),Q.height=n(Y),Q;if(at=-parseFloat(I[1]),it=-parseFloat(I[2]),ht=parseFloat(I[3]),dt=parseFloat(I[4]),Q.minX=at,Q.minY=it,Q.viewBoxWidth=ht,Q.viewBoxHeight=dt,lt?(Q.width=ht,Q.height=dt):(Q.width=n(R),Q.height=n(Y),q=Q.width/ht,$=Q.height/dt),J=i.util.parsePreserveAspectRatioAttribute(J),J.alignX!=="none"&&(J.meetOrSlice==="meet"&&($=q=q>$?$:q),J.meetOrSlice==="slice"&&($=q=q>$?q:$),gt=Q.width-ht*q,Ct=Q.height-dt*q,J.alignX==="Mid"&&(gt/=2),J.alignY==="Mid"&&(Ct/=2),J.alignX==="Min"&&(gt=0),J.alignY==="Min"&&(Ct=0)),q===1&&$===1&&at===0&&it===0&&V===0&&G===0)return Q;if((V||G)&&j.parentNode.nodeName!=="#document"&&(ct=" translate("+n(V)+" "+n(G)+") "),F=ct+" matrix("+q+" 0 0 "+$+" "+(at*q+gt)+" "+(it*$+Ct)+") ",j.nodeName==="svg"){for(D=j.ownerDocument.createElementNS(i.svgNS,"g");j.firstChild;)D.appendChild(j.firstChild);j.appendChild(D)}else D=j,D.removeAttribute("x"),D.removeAttribute("y"),F=D.getAttribute("transform")+F;return D.setAttribute("transform",F),Q}function N(j,I){for(;j&&(j=j.parentNode);)if(j.nodeName&&I.test(j.nodeName.replace("svg:",""))&&!j.getAttribute("instantiated_by_use"))return!0;return!1}i.parseSVGDocument=function(j,I,q,$){if(j){bt(j);var at=i.Object.__uid++,it,ht,dt=U(j),F=i.util.toArray(j.getElementsByTagName("*"));if(dt.crossOrigin=$&&$.crossOrigin,dt.svgUid=at,F.length===0&&i.isLikelyNode){F=j.selectNodes('//*[name(.)!="svg"]');var D=[];for(it=0,ht=F.length;it<ht;it++)D[it]=F[it];F=D}var R=F.filter(function(V){return U(V),i.svgValidTagNamesRegEx.test(V.nodeName.replace("svg:",""))&&!N(V,i.svgInvalidAncestorsRegEx)});if(!R||R&&!R.length){I&&I([],{});return}var Y={};F.filter(function(V){return V.nodeName.replace("svg:","")==="clipPath"}).forEach(function(V){var G=V.getAttribute("id");Y[G]=i.util.toArray(V.getElementsByTagName("*")).filter(function(J){return i.svgValidTagNamesRegEx.test(J.nodeName.replace("svg:",""))})}),i.gradientDefs[at]=i.getGradientDefs(j),i.cssRules[at]=i.getCSSRules(j),i.clipPaths[at]=Y,i.parseElements(R,function(V,G){I&&(I(V,dt,G,F),delete i.gradientDefs[at],delete i.cssRules[at],delete i.clipPaths[at])},c(dt),q,$)}};function H(j,I){var q=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],$="xlink:href",at=I.getAttribute($).slice(1),it=wt(j,at);if(it&&it.getAttribute($)&&H(j,it),q.forEach(function(dt){it&&!I.hasAttribute(dt)&&it.hasAttribute(dt)&&I.setAttribute(dt,it.getAttribute(dt))}),!I.children.length)for(var ht=it.cloneNode(!0);ht.firstChild;)I.appendChild(ht.firstChild);I.removeAttribute($)}var nt=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+i.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+i.reNum+"))?\\s+(.*)");l(i,{parseFontDeclaration:function(j,I){var q=j.match(nt);if(q){var $=q[1],at=q[3],it=q[4],ht=q[5],dt=q[6];$&&(I.fontStyle=$),at&&(I.fontWeight=isNaN(parseFloat(at))?at:parseFloat(at)),it&&(I.fontSize=n(it)),dt&&(I.fontFamily=dt),ht&&(I.lineHeight=ht==="normal"?1:ht)}},getGradientDefs:function(j){var I=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],q=ft(j,I),$,at=0,it={};for(at=q.length;at--;)$=q[at],$.getAttribute("xlink:href")&&H(j,$),it[$.getAttribute("id")]=$;return it},parseAttributes:function(j,I,q){if(j){var $,at={},it,ht;typeof q>"u"&&(q=j.getAttribute("svgUid")),j.parentNode&&i.svgValidParentsRegEx.test(j.parentNode.nodeName)&&(at=i.parseAttributes(j.parentNode,I,q));var dt=I.reduce(function(J,Z){return $=j.getAttribute(Z),$&&(J[Z]=$),J},{}),F=l(St(j,q),i.parseStyleAttribute(j));dt=l(dt,F),F[T]&&j.setAttribute(T,F[T]),it=ht=at.fontSize||i.Text.DEFAULT_SVG_FONT_SIZE,dt[b]&&(dt[b]=it=n(dt[b],ht));var D,R,Y={};for(var V in dt)D=M(V),R=X(D,dt[V],at,it),Y[D]=R;Y&&Y.font&&i.parseFontDeclaration(Y.font,Y);var G=l(at,Y);return i.svgValidParentsRegEx.test(j.nodeName)?G:st(G)}},parseElements:function(j,I,q,$,at){new i.ElementsParser(j,I,q,$,at).parse()},parseStyleAttribute:function(j){var I={},q=j.getAttribute("style");return q&&(typeof q=="string"?vt(q,I):xt(q,I)),I},parsePointsAttribute:function(j){if(!j)return null;j=j.replace(/,/g," ").trim(),j=j.split(/\s+/);var I=[],q,$;for(q=0,$=j.length;q<$;q+=2)I.push({x:parseFloat(j[q]),y:parseFloat(j[q+1])});return I},getCSSRules:function(j){var I=j.getElementsByTagName("style"),q,$,at={},it;for(q=0,$=I.length;q<$;q++){var ht=I[q].textContent;ht=ht.replace(/\/\*[\s\S]*?\*\//g,""),ht.trim()!==""&&(it=ht.split("}"),it=it.filter(function(dt){return dt.trim()}),it.forEach(function(dt){var F=dt.split("{"),D={},R=F[1].trim(),Y=R.split(";").filter(function(Z){return Z.trim()});for(q=0,$=Y.length;q<$;q++){var V=Y[q].split(":"),G=V[0].trim(),J=V[1].trim();D[G]=J}dt=F[0].trim(),dt.split(",").forEach(function(Z){Z=Z.replace(/^svg/i,"").trim(),Z!==""&&(at[Z]?i.util.object.extend(at[Z],D):at[Z]=i.util.object.clone(D))})}))}return at},loadSVGFromURL:function(j,I,q,$){j=j.replace(/^\n\s*/,"").trim(),new i.util.request(j,{method:"get",onComplete:at});function at(it){var ht=it.responseXML;if(!ht||!ht.documentElement)return I&&I(null),!1;i.parseSVGDocument(ht.documentElement,function(dt,F,D,R){I&&I(dt,F,D,R)},q,$)}},loadSVGFromString:function(j,I,q,$){var at=new i.window.DOMParser,it=at.parseFromString(j.trim(),"text/xml");i.parseSVGDocument(it.documentElement,function(ht,dt,F,D){I(ht,dt,F,D)},q,$)}})}(u),o.ElementsParser=function(f,i,l,c,e,n){this.elements=f,this.callback=i,this.options=l,this.reviver=c,this.svgUid=l&&l.svgUid||0,this.parsingOptions=e,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=n},function(f){f.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},f.createObjects=function(){var i=this;this.elements.forEach(function(l,c){l.setAttribute("svgUid",i.svgUid),i.createObject(l,c)})},f.findTag=function(i){return o[o.util.string.capitalize(i.tagName.replace("svg:",""))]},f.createObject=function(i,l){var c=this.findTag(i);if(c&&c.fromElement)try{c.fromElement(i,this.createCallback(l,i),this.options)}catch(e){o.log(e)}else this.checkIfDone()},f.createCallback=function(i,l){var c=this;return function(e){var n;c.resolveGradient(e,l,"fill"),c.resolveGradient(e,l,"stroke"),e instanceof o.Image&&e._originalElement&&(n=e.parsePreserveAspectRatioAttribute(l)),e._removeTransformMatrix(n),c.resolveClipPath(e,l),c.reviver&&c.reviver(l,e),c.instances[i]=e,c.checkIfDone()}},f.extractPropertyDefinition=function(i,l,c){var e=i[l],n=this.regexUrl;if(n.test(e)){n.lastIndex=0;var t=n.exec(e)[1];return n.lastIndex=0,o[c][this.svgUid][t]}},f.resolveGradient=function(i,l,c){var e=this.extractPropertyDefinition(i,c,"gradientDefs");if(e){var n=l.getAttribute(c+"-opacity"),t=o.Gradient.fromElement(e,i,n,this.options);i.set(c,t)}},f.createClipPathCallback=function(i,l){return function(c){c._removeTransformMatrix(),c.fillRule=c.clipRule,l.push(c)}},f.resolveClipPath=function(i,l){var c=this.extractPropertyDefinition(i,"clipPath","clipPaths"),e,n,t,s,h,r;if(c){s=[],t=o.util.invertTransform(i.calcTransformMatrix());for(var d=c[0].parentNode,m=l;m.parentNode&&m.getAttribute("clip-path")!==i.clipPath;)m=m.parentNode;m.parentNode.appendChild(d);for(var y=0;y<c.length;y++)e=c[y],n=this.findTag(e),n.fromElement(e,this.createClipPathCallback(i,s),this.options);s.length===1?c=s[0]:c=new o.Group(s),h=o.util.multiplyTransformMatrices(t,c.calcTransformMatrix()),c.clipPath&&this.resolveClipPath(c,m);var r=o.util.qrDecompose(h);c.flipX=!1,c.flipY=!1,c.set("scaleX",r.scaleX),c.set("scaleY",r.scaleY),c.angle=r.angle,c.skewX=r.skewX,c.skewY=0,c.setPositionByOrigin({x:r.translateX,y:r.translateY},"center","center"),i.clipPath=c}else delete i.clipPath},f.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(i){return i!=null}),this.callback(this.instances,this.elements))}}(o.ElementsParser.prototype),function(f){var i=f.fabric||(f.fabric={});if(i.Point){i.warn("fabric.Point is already defined");return}i.Point=l;function l(c,e){this.x=c,this.y=e}l.prototype={type:"point",constructor:l,add:function(c){return new l(this.x+c.x,this.y+c.y)},addEquals:function(c){return this.x+=c.x,this.y+=c.y,this},scalarAdd:function(c){return new l(this.x+c,this.y+c)},scalarAddEquals:function(c){return this.x+=c,this.y+=c,this},subtract:function(c){return new l(this.x-c.x,this.y-c.y)},subtractEquals:function(c){return this.x-=c.x,this.y-=c.y,this},scalarSubtract:function(c){return new l(this.x-c,this.y-c)},scalarSubtractEquals:function(c){return this.x-=c,this.y-=c,this},multiply:function(c){return new l(this.x*c,this.y*c)},multiplyEquals:function(c){return this.x*=c,this.y*=c,this},divide:function(c){return new l(this.x/c,this.y/c)},divideEquals:function(c){return this.x/=c,this.y/=c,this},eq:function(c){return this.x===c.x&&this.y===c.y},lt:function(c){return this.x<c.x&&this.y<c.y},lte:function(c){return this.x<=c.x&&this.y<=c.y},gt:function(c){return this.x>c.x&&this.y>c.y},gte:function(c){return this.x>=c.x&&this.y>=c.y},lerp:function(c,e){return typeof e>"u"&&(e=.5),e=Math.max(Math.min(1,e),0),new l(this.x+(c.x-this.x)*e,this.y+(c.y-this.y)*e)},distanceFrom:function(c){var e=this.x-c.x,n=this.y-c.y;return Math.sqrt(e*e+n*n)},midPointFrom:function(c){return this.lerp(c)},min:function(c){return new l(Math.min(this.x,c.x),Math.min(this.y,c.y))},max:function(c){return new l(Math.max(this.x,c.x),Math.max(this.y,c.y))},toString:function(){return this.x+","+this.y},setXY:function(c,e){return this.x=c,this.y=e,this},setX:function(c){return this.x=c,this},setY:function(c){return this.y=c,this},setFromPoint:function(c){return this.x=c.x,this.y=c.y,this},swap:function(c){var e=this.x,n=this.y;this.x=c.x,this.y=c.y,c.x=e,c.y=n},clone:function(){return new l(this.x,this.y)}}}(u),function(f){var i=f.fabric||(f.fabric={});if(i.Intersection){i.warn("fabric.Intersection is already defined");return}function l(c){this.status=c,this.points=[]}i.Intersection=l,i.Intersection.prototype={constructor:l,appendPoint:function(c){return this.points.push(c),this},appendPoints:function(c){return this.points=this.points.concat(c),this}},i.Intersection.intersectLineLine=function(c,e,n,t){var s,h=(t.x-n.x)*(c.y-n.y)-(t.y-n.y)*(c.x-n.x),r=(e.x-c.x)*(c.y-n.y)-(e.y-c.y)*(c.x-n.x),d=(t.y-n.y)*(e.x-c.x)-(t.x-n.x)*(e.y-c.y);if(d!==0){var m=h/d,y=r/d;0<=m&&m<=1&&0<=y&&y<=1?(s=new l("Intersection"),s.appendPoint(new i.Point(c.x+m*(e.x-c.x),c.y+m*(e.y-c.y)))):s=new l}else h===0||r===0?s=new l("Coincident"):s=new l("Parallel");return s},i.Intersection.intersectLinePolygon=function(c,e,n){var t=new l,s=n.length,h,r,d,m;for(m=0;m<s;m++)h=n[m],r=n[(m+1)%s],d=l.intersectLineLine(c,e,h,r),t.appendPoints(d.points);return t.points.length>0&&(t.status="Intersection"),t},i.Intersection.intersectPolygonPolygon=function(c,e){var n=new l,t=c.length,s;for(s=0;s<t;s++){var h=c[s],r=c[(s+1)%t],d=l.intersectLinePolygon(h,r,e);n.appendPoints(d.points)}return n.points.length>0&&(n.status="Intersection"),n},i.Intersection.intersectPolygonRectangle=function(c,e,n){var t=e.min(n),s=e.max(n),h=new i.Point(s.x,t.y),r=new i.Point(t.x,s.y),d=l.intersectLinePolygon(t,h,c),m=l.intersectLinePolygon(h,s,c),y=l.intersectLinePolygon(s,r,c),b=l.intersectLinePolygon(r,t,c),T=new l;return T.appendPoints(d.points),T.appendPoints(m.points),T.appendPoints(y.points),T.appendPoints(b.points),T.points.length>0&&(T.status="Intersection"),T}}(u),function(f){var i=f.fabric||(f.fabric={});if(i.Color){i.warn("fabric.Color is already defined.");return}function l(e){e?this._tryParsingColor(e):this.setSource([0,0,0,1])}i.Color=l,i.Color.prototype={_tryParsingColor:function(e){var n;e in l.colorNameMap&&(e=l.colorNameMap[e]),e==="transparent"&&(n=[255,255,255,0]),n||(n=l.sourceFromHex(e)),n||(n=l.sourceFromRgb(e)),n||(n=l.sourceFromHsl(e)),n||(n=[0,0,0,1]),n&&this.setSource(n)},_rgbToHsl:function(e,n,t){e/=255,n/=255,t/=255;var s,h,r,d=i.util.array.max([e,n,t]),m=i.util.array.min([e,n,t]);if(r=(d+m)/2,d===m)s=h=0;else{var y=d-m;switch(h=r>.5?y/(2-d-m):y/(d+m),d){case e:s=(n-t)/y+(n<t?6:0);break;case n:s=(t-e)/y+2;break;case t:s=(e-n)/y+4;break}s/=6}return[Math.round(s*360),Math.round(h*100),Math.round(r*100)]},getSource:function(){return this._source},setSource:function(e){this._source=e},toRgb:function(){var e=this.getSource();return"rgb("+e[0]+","+e[1]+","+e[2]+")"},toRgba:function(){var e=this.getSource();return"rgba("+e[0]+","+e[1]+","+e[2]+","+e[3]+")"},toHsl:function(){var e=this.getSource(),n=this._rgbToHsl(e[0],e[1],e[2]);return"hsl("+n[0]+","+n[1]+"%,"+n[2]+"%)"},toHsla:function(){var e=this.getSource(),n=this._rgbToHsl(e[0],e[1],e[2]);return"hsla("+n[0]+","+n[1]+"%,"+n[2]+"%,"+e[3]+")"},toHex:function(){var e=this.getSource(),n,t,s;return n=e[0].toString(16),n=n.length===1?"0"+n:n,t=e[1].toString(16),t=t.length===1?"0"+t:t,s=e[2].toString(16),s=s.length===1?"0"+s:s,n.toUpperCase()+t.toUpperCase()+s.toUpperCase()},toHexa:function(){var e=this.getSource(),n;return n=Math.round(e[3]*255),n=n.toString(16),n=n.length===1?"0"+n:n,this.toHex()+n.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(e){var n=this.getSource();return n[3]=e,this.setSource(n),this},toGrayscale:function(){var e=this.getSource(),n=parseInt((e[0]*.3+e[1]*.59+e[2]*.11).toFixed(0),10),t=e[3];return this.setSource([n,n,n,t]),this},toBlackWhite:function(e){var n=this.getSource(),t=(n[0]*.3+n[1]*.59+n[2]*.11).toFixed(0),s=n[3];return e=e||127,t=Number(t)<Number(e)?0:255,this.setSource([t,t,t,s]),this},overlayWith:function(e){e instanceof l||(e=new l(e));var n=[],t=this.getAlpha(),s=.5,h=this.getSource(),r=e.getSource(),d;for(d=0;d<3;d++)n.push(Math.round(h[d]*(1-s)+r[d]*s));return n[3]=t,this.setSource(n),this}},i.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,i.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,i.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,i.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function c(e,n,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?e+(n-e)*6*t:t<1/2?n:t<2/3?e+(n-e)*(2/3-t)*6:e}i.Color.fromRgb=function(e){return l.fromSource(l.sourceFromRgb(e))},i.Color.sourceFromRgb=function(e){var n=e.match(l.reRGBa);if(n){var t=parseInt(n[1],10)/(/%$/.test(n[1])?100:1)*(/%$/.test(n[1])?255:1),s=parseInt(n[2],10)/(/%$/.test(n[2])?100:1)*(/%$/.test(n[2])?255:1),h=parseInt(n[3],10)/(/%$/.test(n[3])?100:1)*(/%$/.test(n[3])?255:1);return[parseInt(t,10),parseInt(s,10),parseInt(h,10),n[4]?parseFloat(n[4]):1]}},i.Color.fromRgba=l.fromRgb,i.Color.fromHsl=function(e){return l.fromSource(l.sourceFromHsl(e))},i.Color.sourceFromHsl=function(e){var n=e.match(l.reHSLa);if(n){var t=(parseFloat(n[1])%360+360)%360/360,s=parseFloat(n[2])/(/%$/.test(n[2])?100:1),h=parseFloat(n[3])/(/%$/.test(n[3])?100:1),r,d,m;if(s===0)r=d=m=h;else{var y=h<=.5?h*(s+1):h+s-h*s,b=h*2-y;r=c(b,y,t+1/3),d=c(b,y,t),m=c(b,y,t-1/3)}return[Math.round(r*255),Math.round(d*255),Math.round(m*255),n[4]?parseFloat(n[4]):1]}},i.Color.fromHsla=l.fromHsl,i.Color.fromHex=function(e){return l.fromSource(l.sourceFromHex(e))},i.Color.sourceFromHex=function(e){if(e.match(l.reHex)){var n=e.slice(e.indexOf("#")+1),t=n.length===3||n.length===4,s=n.length===8||n.length===4,h=t?n.charAt(0)+n.charAt(0):n.substring(0,2),r=t?n.charAt(1)+n.charAt(1):n.substring(2,4),d=t?n.charAt(2)+n.charAt(2):n.substring(4,6),m=s?t?n.charAt(3)+n.charAt(3):n.substring(6,8):"FF";return[parseInt(h,16),parseInt(r,16),parseInt(d,16),parseFloat((parseInt(m,16)/255).toFixed(2))]}},i.Color.fromSource=function(e){var n=new l;return n.setSource(e),n}}(u),function(f){var i=f.fabric||(f.fabric={}),l=["e","se","s","sw","w","nw","n","ne","e"],c=["ns","nesw","ew","nwse"],e={},n="left",t="top",s="right",h="bottom",r="center",d={top:h,bottom:t,left:s,right:n,center:r},m=i.util.radiansToDegrees,y=Math.sign||function(D){return(D>0)-(D<0)||+D};function b(D,R){var Y=D.angle+m(Math.atan2(R.y,R.x))+360;return Math.round(Y%360/45)}function T(D,R){var Y=R.transform.target,V=Y.canvas,G=i.util.object.clone(R);G.target=Y,V&&V.fire("object:"+D,G),Y.fire(D,R)}function M(D,R){var Y=R.canvas,V=Y.uniScaleKey,G=D[V];return Y.uniformScaling&&!G||!Y.uniformScaling&&G}function X(D){return D.originX===r&&D.originY===r}function z(D,R,Y){var V=D.lockScalingX,G=D.lockScalingY;return!!(V&&G||!R&&(V||G)&&Y||V&&R==="x"||G&&R==="y")}function st(D,R,Y){var V="not-allowed",G=M(D,Y),J="";if(R.x!==0&&R.y===0?J="x":R.x===0&&R.y!==0&&(J="y"),z(Y,J,G))return V;var Z=b(Y,R);return l[Z]+"-resize"}function ft(D,R,Y){var V="not-allowed";if(R.x!==0&&Y.lockSkewingY||R.y!==0&&Y.lockSkewingX)return V;var G=b(Y,R)%4;return c[G]+"-resize"}function vt(D,R,Y){return D[Y.canvas.altActionKey]?e.skewCursorStyleHandler(D,R,Y):e.scaleCursorStyleHandler(D,R,Y)}function xt(D,R,Y){var V=D[Y.canvas.altActionKey];if(R.x===0)return V?"skewX":"scaleY";if(R.y===0)return V?"skewY":"scaleX"}function St(D,R,Y){return Y.lockRotation?"not-allowed":R.cursorStyle}function _t(D,R,Y,V){return{e:D,transform:R,pointer:{x:Y,y:V}}}function ot(D){return function(R,Y,V,G){var J=Y.target,Z=J.getCenterPoint(),lt=J.translateToOriginPoint(Z,Y.originX,Y.originY),et=D(R,Y,V,G);return J.setPositionByOrigin(lt,Y.originX,Y.originY),et}}function pt(D,R){return function(Y,V,G,J){var Z=R(Y,V,G,J);return Z&&T(D,_t(Y,V,G,J)),Z}}function wt(D,R,Y,V,G){var J=D.target,Z=J.controls[D.corner],lt=J.canvas.getZoom(),et=J.padding/lt,Q=J.toLocalPoint(new i.Point(V,G),R,Y);return Q.x>=et&&(Q.x-=et),Q.x<=-et&&(Q.x+=et),Q.y>=et&&(Q.y-=et),Q.y<=et&&(Q.y+=et),Q.x-=Z.offsetX,Q.y-=Z.offsetY,Q}function bt(D){return D.flipX!==D.flipY}function k(D,R,Y,V,G){if(D[R]!==0){var J=D._getTransformedDimensions()[V],Z=G/J*D[Y];D.set(Y,Z)}}function U(D,R,Y,V){var G=R.target,J=G._getTransformedDimensions(0,G.skewY),Z=wt(R,R.originX,R.originY,Y,V),lt=Math.abs(Z.x*2)-J.x,et=G.skewX,Q;lt<2?Q=0:(Q=m(Math.atan2(lt/G.scaleX,J.y/G.scaleY)),R.originX===n&&R.originY===h&&(Q=-Q),R.originX===s&&R.originY===t&&(Q=-Q),bt(G)&&(Q=-Q));var ct=et!==Q;if(ct){var gt=G._getTransformedDimensions().y;G.set("skewX",Q),k(G,"skewY","scaleY","y",gt)}return ct}function N(D,R,Y,V){var G=R.target,J=G._getTransformedDimensions(G.skewX,0),Z=wt(R,R.originX,R.originY,Y,V),lt=Math.abs(Z.y*2)-J.y,et=G.skewY,Q;lt<2?Q=0:(Q=m(Math.atan2(lt/G.scaleY,J.x/G.scaleX)),R.originX===n&&R.originY===h&&(Q=-Q),R.originX===s&&R.originY===t&&(Q=-Q),bt(G)&&(Q=-Q));var ct=et!==Q;if(ct){var gt=G._getTransformedDimensions().x;G.set("skewY",Q),k(G,"skewX","scaleX","x",gt)}return ct}function H(D,R,Y,V){var G=R.target,J=G.skewX,Z,lt=R.originY;if(G.lockSkewingX)return!1;if(J===0){var et=wt(R,r,r,Y,V);et.x>0?Z=n:Z=s}else J>0&&(Z=lt===t?n:s),J<0&&(Z=lt===t?s:n),bt(G)&&(Z=Z===n?s:n);R.originX=Z;var Q=pt("skewing",ot(U));return Q(D,R,Y,V)}function nt(D,R,Y,V){var G=R.target,J=G.skewY,Z,lt=R.originX;if(G.lockSkewingY)return!1;if(J===0){var et=wt(R,r,r,Y,V);et.y>0?Z=t:Z=h}else J>0&&(Z=lt===n?t:h),J<0&&(Z=lt===n?h:t),bt(G)&&(Z=Z===t?h:t);R.originY=Z;var Q=pt("skewing",ot(N));return Q(D,R,Y,V)}function j(D,R,Y,V){var G=R,J=G.target,Z=J.translateToOriginPoint(J.getCenterPoint(),G.originX,G.originY);if(J.lockRotation)return!1;var lt=Math.atan2(G.ey-Z.y,G.ex-Z.x),et=Math.atan2(V-Z.y,Y-Z.x),Q=m(et-lt+G.theta),ct=!0;if(J.snapAngle>0){var gt=J.snapAngle,Ct=J.snapThreshold||gt,Ot=Math.ceil(Q/gt)*gt,Pt=Math.floor(Q/gt)*gt;Math.abs(Q-Pt)<Ct?Q=Pt:Math.abs(Q-Ot)<Ct&&(Q=Ot)}return Q<0&&(Q=360+Q),Q%=360,ct=J.angle!==Q,J.angle=Q,ct}function I(D,R,Y,V,G){G=G||{};var J=R.target,Z=J.lockScalingX,lt=J.lockScalingY,et=G.by,Q,ct,gt,Ct,Ot=M(D,J),Pt=z(J,et,Ot),Mt,Dt,Gt=R.gestureScale;if(Pt)return!1;if(Gt)ct=R.scaleX*Gt,gt=R.scaleY*Gt;else{if(Q=wt(R,R.originX,R.originY,Y,V),Mt=et!=="y"?y(Q.x):1,Dt=et!=="x"?y(Q.y):1,R.signX||(R.signX=Mt),R.signY||(R.signY=Dt),J.lockScalingFlip&&(R.signX!==Mt||R.signY!==Dt))return!1;if(Ct=J._getTransformedDimensions(),Ot&&!et){var re=Math.abs(Q.x)+Math.abs(Q.y),$t=R.original,Oe=Math.abs(Ct.x*$t.scaleX/J.scaleX)+Math.abs(Ct.y*$t.scaleY/J.scaleY),We=re/Oe;ct=$t.scaleX*We,gt=$t.scaleY*We}else ct=Math.abs(Q.x*J.scaleX/Ct.x),gt=Math.abs(Q.y*J.scaleY/Ct.y);X(R)&&(ct*=2,gt*=2),R.signX!==Mt&&et!=="y"&&(R.originX=d[R.originX],ct*=-1,R.signX=Mt),R.signY!==Dt&&et!=="x"&&(R.originY=d[R.originY],gt*=-1,R.signY=Dt)}var Zt=J.scaleX,te=J.scaleY;return et?(et==="x"&&J.set("scaleX",ct),et==="y"&&J.set("scaleY",gt)):(!Z&&J.set("scaleX",ct),!lt&&J.set("scaleY",gt)),Zt!==J.scaleX||te!==J.scaleY}function q(D,R,Y,V){return I(D,R,Y,V)}function $(D,R,Y,V){return I(D,R,Y,V,{by:"x"})}function at(D,R,Y,V){return I(D,R,Y,V,{by:"y"})}function it(D,R,Y,V){return D[R.target.canvas.altActionKey]?e.skewHandlerX(D,R,Y,V):e.scalingY(D,R,Y,V)}function ht(D,R,Y,V){return D[R.target.canvas.altActionKey]?e.skewHandlerY(D,R,Y,V):e.scalingX(D,R,Y,V)}function dt(D,R,Y,V){var G=R.target,J=wt(R,R.originX,R.originY,Y,V),Z=G.strokeWidth/(G.strokeUniform?G.scaleX:1),lt=X(R)?2:1,et=G.width,Q=Math.abs(J.x*lt/G.scaleX)-Z;return G.set("width",Math.max(Q,0)),et!==Q}function F(D,R,Y,V){var G=R.target,J=Y-R.offsetX,Z=V-R.offsetY,lt=!G.get("lockMovementX")&&G.left!==J,et=!G.get("lockMovementY")&&G.top!==Z;return lt&&G.set("left",J),et&&G.set("top",Z),(lt||et)&&T("moving",_t(D,R,Y,V)),lt||et}e.scaleCursorStyleHandler=st,e.skewCursorStyleHandler=ft,e.scaleSkewCursorStyleHandler=vt,e.rotationWithSnapping=pt("rotating",ot(j)),e.scalingEqually=pt("scaling",ot(q)),e.scalingX=pt("scaling",ot($)),e.scalingY=pt("scaling",ot(at)),e.scalingYOrSkewingX=it,e.scalingXOrSkewingY=ht,e.changeWidth=pt("resizing",ot(dt)),e.skewHandlerX=H,e.skewHandlerY=nt,e.dragHandler=F,e.scaleOrSkewActionName=xt,e.rotationStyleHandler=St,e.fireEvent=T,e.wrapWithFixedAnchor=ot,e.wrapWithFireEvent=pt,e.getLocalPoint=wt,i.controlsUtils=e}(u),function(f){var i=f.fabric||(f.fabric={}),l=i.util.degreesToRadians,c=i.controlsUtils;function e(t,s,h,r,d){r=r||{};var m=this.sizeX||r.cornerSize||d.cornerSize,y=this.sizeY||r.cornerSize||d.cornerSize,b=typeof r.transparentCorners<"u"?r.transparentCorners:d.transparentCorners,T=b?"stroke":"fill",M=!b&&(r.cornerStrokeColor||d.cornerStrokeColor),X=s,z=h,st;t.save(),t.fillStyle=r.cornerColor||d.cornerColor,t.strokeStyle=r.cornerStrokeColor||d.cornerStrokeColor,m>y?(st=m,t.scale(1,y/m),z=h*m/y):y>m?(st=y,t.scale(m/y,1),X=s*y/m):st=m,t.lineWidth=1,t.beginPath(),t.arc(X,z,st/2,0,2*Math.PI,!1),t[T](),M&&t.stroke(),t.restore()}function n(t,s,h,r,d){r=r||{};var m=this.sizeX||r.cornerSize||d.cornerSize,y=this.sizeY||r.cornerSize||d.cornerSize,b=typeof r.transparentCorners<"u"?r.transparentCorners:d.transparentCorners,T=b?"stroke":"fill",M=!b&&(r.cornerStrokeColor||d.cornerStrokeColor),X=m/2,z=y/2;t.save(),t.fillStyle=r.cornerColor||d.cornerColor,t.strokeStyle=r.cornerStrokeColor||d.cornerStrokeColor,t.lineWidth=1,t.translate(s,h),t.rotate(l(d.angle)),t[T+"Rect"](-X,-z,m,y),M&&t.strokeRect(-X,-z,m,y),t.restore()}c.renderCircleControl=e,c.renderSquareControl=n}(u),function(f){var i=f.fabric||(f.fabric={});function l(c){for(var e in c)this[e]=c[e]}i.Control=l,i.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(c,e){return e.cursorStyle},getActionName:function(c,e){return e.actionName},getVisibility:function(c,e){var n=c._controlsVisibility;return n&&typeof n[e]<"u"?n[e]:this.visible},setVisibility:function(c){this.visible=c},positionHandler:function(c,e){var n=i.util.transformPoint({x:this.x*c.x+this.offsetX,y:this.y*c.y+this.offsetY},e);return n},calcCornerCoords:function(c,e,n,t,s){var h,r,d,m,y=s?this.touchSizeX:this.sizeX,b=s?this.touchSizeY:this.sizeY;if(y&&b&&y!==b){var T=Math.atan2(b,y),M=Math.sqrt(y*y+b*b)/2,X=T-i.util.degreesToRadians(c),z=Math.PI/2-T-i.util.degreesToRadians(c);h=M*i.util.cos(X),r=M*i.util.sin(X),d=M*i.util.cos(z),m=M*i.util.sin(z)}else{var st=y&&b?y:e;M=st*.7071067812;var X=i.util.degreesToRadians(45-c);h=d=M*i.util.cos(X),r=m=M*i.util.sin(X)}return{tl:{x:n-m,y:t-d},tr:{x:n+h,y:t-r},bl:{x:n-h,y:t+r},br:{x:n+m,y:t+d}}},render:function(c,e,n,t,s){switch(t=t||{},t.cornerStyle||s.cornerStyle){case"circle":i.controlsUtils.renderCircleControl.call(this,c,e,n,t,s);break;default:i.controlsUtils.renderSquareControl.call(this,c,e,n,t,s)}}}}(u),function(){function f(n,t){var s=n.getAttribute("style"),h=n.getAttribute("offset")||0,r,d,m,y;if(h=parseFloat(h)/(/%$/.test(h)?100:1),h=h<0?0:h>1?1:h,s){var b=s.split(/\s*;\s*/);for(b[b.length-1]===""&&b.pop(),y=b.length;y--;){var T=b[y].split(/\s*:\s*/),M=T[0].trim(),X=T[1].trim();M==="stop-color"?r=X:M==="stop-opacity"&&(m=X)}}return r||(r=n.getAttribute("stop-color")||"rgb(0,0,0)"),m||(m=n.getAttribute("stop-opacity")),r=new o.Color(r),d=r.getAlpha(),m=isNaN(parseFloat(m))?1:parseFloat(m),m*=d*t,{offset:h,color:r.toRgb(),opacity:m}}function i(n){return{x1:n.getAttribute("x1")||0,y1:n.getAttribute("y1")||0,x2:n.getAttribute("x2")||"100%",y2:n.getAttribute("y2")||0}}function l(n){return{x1:n.getAttribute("fx")||n.getAttribute("cx")||"50%",y1:n.getAttribute("fy")||n.getAttribute("cy")||"50%",r1:0,x2:n.getAttribute("cx")||"50%",y2:n.getAttribute("cy")||"50%",r2:n.getAttribute("r")||"50%"}}var c=o.util.object.clone;o.Gradient=o.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(n){n||(n={}),n.coords||(n.coords={});var t,s=this;Object.keys(n).forEach(function(h){s[h]=n[h]}),this.id?this.id+="_"+o.Object.__uid++:this.id=o.Object.__uid++,t={x1:n.coords.x1||0,y1:n.coords.y1||0,x2:n.coords.x2||0,y2:n.coords.y2||0},this.type==="radial"&&(t.r1=n.coords.r1||0,t.r2=n.coords.r2||0),this.coords=t,this.colorStops=n.colorStops.slice()},addColorStop:function(n){for(var t in n){var s=new o.Color(n[t]);this.colorStops.push({offset:parseFloat(t),color:s.toRgb(),opacity:s.getAlpha()})}return this},toObject:function(n){var t={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return o.util.populateWithProperties(this,t,n),t},toSVG:function(n,d){var s=c(this.coords,!0),h,r,d=d||{},m,y,b=c(this.colorStops,!0),T=s.r1>s.r2,M=this.gradientTransform?this.gradientTransform.concat():o.iMatrix.concat(),X=-this.offsetX,z=-this.offsetY,st=!!d.additionalTransform,ft=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(b.sort(function(ot,pt){return ot.offset-pt.offset}),ft==="objectBoundingBox"?(X/=n.width,z/=n.height):(X+=n.width/2,z+=n.height/2),n.type==="path"&&this.gradientUnits!=="percentage"&&(X-=n.pathOffset.x,z-=n.pathOffset.y),M[4]-=X,M[5]-=z,y='id="SVGID_'+this.id+'" gradientUnits="'+ft+'"',y+=' gradientTransform="'+(st?d.additionalTransform+" ":"")+o.util.matrixToSVG(M)+'" ',this.type==="linear"?m=["<linearGradient ",y,' x1="',s.x1,'" y1="',s.y1,'" x2="',s.x2,'" y2="',s.y2,`">
`]:this.type==="radial"&&(m=["<radialGradient ",y,' cx="',T?s.x1:s.x2,'" cy="',T?s.y1:s.y2,'" r="',T?s.r1:s.r2,'" fx="',T?s.x2:s.x1,'" fy="',T?s.y2:s.y1,`">
`]),this.type==="radial"){if(T)for(b=b.concat(),b.reverse(),h=0,r=b.length;h<r;h++)b[h].offset=1-b[h].offset;var vt=Math.min(s.r1,s.r2);if(vt>0){var xt=Math.max(s.r1,s.r2),St=vt/xt;for(h=0,r=b.length;h<r;h++)b[h].offset+=St*(1-b[h].offset)}}for(h=0,r=b.length;h<r;h++){var _t=b[h];m.push("<stop ",'offset="',_t.offset*100+"%",'" style="stop-color:',_t.color,typeof _t.opacity<"u"?";stop-opacity: "+_t.opacity:";",`"/>
`)}return m.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),m.join("")},toLive:function(n){var t,s=o.util.object.clone(this.coords),h,r;if(this.type){for(this.type==="linear"?t=n.createLinearGradient(s.x1,s.y1,s.x2,s.y2):this.type==="radial"&&(t=n.createRadialGradient(s.x1,s.y1,s.r1,s.x2,s.y2,s.r2)),h=0,r=this.colorStops.length;h<r;h++){var d=this.colorStops[h].color,m=this.colorStops[h].opacity,y=this.colorStops[h].offset;typeof m<"u"&&(d=new o.Color(d).setAlpha(m).toRgba()),t.addColorStop(y,d)}return t}}}),o.util.object.extend(o.Gradient,{fromElement:function(n,t,s,h){var r=parseFloat(s)/(/%$/.test(s)?100:1);r=r<0?0:r>1?1:r,isNaN(r)&&(r=1);var d=n.getElementsByTagName("stop"),m,y=n.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",b=n.getAttribute("gradientTransform")||"",T=[],M,X,z=0,st=0,ft;for(n.nodeName==="linearGradient"||n.nodeName==="LINEARGRADIENT"?(m="linear",M=i(n)):(m="radial",M=l(n)),X=d.length;X--;)T.push(f(d[X],r));ft=o.parseTransformAttribute(b),e(t,M,h,y),y==="pixels"&&(z=-t.left,st=-t.top);var vt=new o.Gradient({id:n.getAttribute("id"),type:m,coords:M,colorStops:T,gradientUnits:y,gradientTransform:ft,offsetX:z,offsetY:st});return vt}});function e(n,t,s,h){var r,d;Object.keys(t).forEach(function(m){r=t[m],r==="Infinity"?d=1:r==="-Infinity"?d=0:(d=parseFloat(t[m],10),typeof r=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(r)&&(d*=.01,h==="pixels"&&((m==="x1"||m==="x2"||m==="r2")&&(d*=s.viewBoxWidth||s.width),(m==="y1"||m==="y2")&&(d*=s.viewBoxHeight||s.height)))),t[m]=d})}}(),function(){var f=o.util.toFixed;o.Pattern=o.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(i,l){if(i||(i={}),this.id=o.Object.__uid++,this.setOptions(i),!i.source||i.source&&typeof i.source!="string"){l&&l(this);return}else{var c=this;this.source=o.util.createImage(),o.util.loadImage(i.source,function(e,n){c.source=e,l&&l(c,n)},null,this.crossOrigin)}},toObject:function(i){var l=o.Object.NUM_FRACTION_DIGITS,c,e;return typeof this.source.src=="string"?c=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(c=this.source.toDataURL()),e={type:"pattern",source:c,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:f(this.offsetX,l),offsetY:f(this.offsetY,l),patternTransform:this.patternTransform?this.patternTransform.concat():null},o.util.populateWithProperties(this,e,i),e},toSVG:function(i){var l=typeof this.source=="function"?this.source():this.source,c=l.width/i.width,e=l.height/i.height,n=this.offsetX/i.width,t=this.offsetY/i.height,s="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(e=1,t&&(e+=Math.abs(t))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(c=1,n&&(c+=Math.abs(n))),l.src?s=l.src:l.toDataURL&&(s=l.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+n+'" y="'+t+'" width="'+c+'" height="'+e+`">
<image x="0" y="0" width="`+l.width+'" height="'+l.height+'" xlink:href="'+s+`"></image>
</pattern>
`},setOptions:function(i){for(var l in i)this[l]=i[l]},toLive:function(i){var l=this.source;return!l||typeof l.src<"u"&&(!l.complete||l.naturalWidth===0||l.naturalHeight===0)?"":i.createPattern(l,this.repeat)}})}(),function(f){var i=f.fabric||(f.fabric={}),l=i.util.toFixed;if(i.Shadow){i.warn("fabric.Shadow is already defined.");return}i.Shadow=i.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(c){typeof c=="string"&&(c=this._parseShadow(c));for(var e in c)this[e]=c[e];this.id=i.Object.__uid++},_parseShadow:function(c){var e=c.trim(),n=i.Shadow.reOffsetsAndBlur.exec(e)||[],t=e.replace(i.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:t.trim(),offsetX:parseFloat(n[1],10)||0,offsetY:parseFloat(n[2],10)||0,blur:parseFloat(n[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(c){var e=40,n=40,t=i.Object.NUM_FRACTION_DIGITS,s=i.util.rotateVector({x:this.offsetX,y:this.offsetY},i.util.degreesToRadians(-c.angle)),h=20,r=new i.Color(this.color);return c.width&&c.height&&(e=l((Math.abs(s.x)+this.blur)/c.width,t)*100+h,n=l((Math.abs(s.y)+this.blur)/c.height,t)*100+h),c.flipX&&(s.x*=-1),c.flipY&&(s.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+n+'%" height="'+(100+2*n)+'%" x="-'+e+'%" width="'+(100+2*e)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+l(this.blur?this.blur/2:0,t)+`"></feGaussianBlur>
	<feOffset dx="`+l(s.x,t)+'" dy="'+l(s.y,t)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+r.toRgb()+'" flood-opacity="'+r.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var c={},e=i.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(n){this[n]!==e[n]&&(c[n]=this[n])},this),c}}),i.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(u),function(){if(o.StaticCanvas){o.warn("fabric.StaticCanvas is already defined.");return}var f=o.util.object.extend,i=o.util.getElementOffset,l=o.util.removeFromArray,c=o.util.toFixed,e=o.util.transformPoint,n=o.util.invertTransform,t=o.util.getNodeCanvas,s=o.util.createCanvasElement,h=new Error("Could not initialize `canvas` element");o.StaticCanvas=o.util.createClass(o.CommonMethods,{initialize:function(r,d){d||(d={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(r,d)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:o.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(r,d){var m=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(r),this._initOptions(d),this.interactive||this._initRetinaScaling(),d.overlayImage&&this.setOverlayImage(d.overlayImage,m),d.backgroundImage&&this.setBackgroundImage(d.backgroundImage,m),d.backgroundColor&&this.setBackgroundColor(d.backgroundColor,m),d.overlayColor&&this.setOverlayColor(d.overlayColor,m),this.calcOffset()},_isRetinaScaling:function(){return o.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,o.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var r=o.devicePixelRatio;this.__initRetinaScaling(r,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(r,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(r,d,m){d.setAttribute("width",this.width*r),d.setAttribute("height",this.height*r),m.scale(r,r)},calcOffset:function(){return this._offset=i(this.lowerCanvasEl),this},setOverlayImage:function(r,d,m){return this.__setBgOverlayImage("overlayImage",r,d,m)},setBackgroundImage:function(r,d,m){return this.__setBgOverlayImage("backgroundImage",r,d,m)},setOverlayColor:function(r,d){return this.__setBgOverlayColor("overlayColor",r,d)},setBackgroundColor:function(r,d){return this.__setBgOverlayColor("backgroundColor",r,d)},__setBgOverlayImage:function(r,d,m,y){return typeof d=="string"?o.util.loadImage(d,function(b,T){if(b){var M=new o.Image(b,y);this[r]=M,M.canvas=this}m&&m(b,T)},this,y&&y.crossOrigin):(y&&d.setOptions(y),this[r]=d,d&&(d.canvas=this),m&&m(d,!1)),this},__setBgOverlayColor:function(r,d,m){return this[r]=d,this._initGradient(d,r),this._initPattern(d,r,m),this},_createCanvasElement:function(){var r=s();if(!r||(r.style||(r.style={}),typeof r.getContext>"u"))throw h;return r},_initOptions:function(r){var d=this.lowerCanvasEl;this._setOptions(r),this.width=this.width||parseInt(d.width,10)||0,this.height=this.height||parseInt(d.height,10)||0,this.lowerCanvasEl.style&&(d.width=this.width,d.height=this.height,d.style.width=this.width+"px",d.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(r){r&&r.getContext?this.lowerCanvasEl=r:this.lowerCanvasEl=o.util.getById(r)||this._createCanvasElement(),o.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(r,d){return this.setDimensions({width:r},d)},setHeight:function(r,d){return this.setDimensions({height:r},d)},setDimensions:function(r,d){var m;d=d||{};for(var y in r)m=r[y],d.cssOnly||(this._setBackstoreDimension(y,r[y]),m+="px",this.hasLostContext=!0),d.backstoreOnly||this._setCssDimension(y,m);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),d.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(r,d){return this.lowerCanvasEl[r]=d,this.upperCanvasEl&&(this.upperCanvasEl[r]=d),this.cacheCanvasEl&&(this.cacheCanvasEl[r]=d),this[r]=d,this},_setCssDimension:function(r,d){return this.lowerCanvasEl.style[r]=d,this.upperCanvasEl&&(this.upperCanvasEl.style[r]=d),this.wrapperEl&&(this.wrapperEl.style[r]=d),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(r){var d=this._activeObject,m=this.backgroundImage,y=this.overlayImage,b,T,M;for(this.viewportTransform=r,T=0,M=this._objects.length;T<M;T++)b=this._objects[T],b.group||b.setCoords(!0);return d&&d.setCoords(),m&&m.setCoords(!0),y&&y.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(r,d){var m=r,y=this.viewportTransform.slice(0);r=e(r,n(this.viewportTransform)),y[0]=d,y[3]=d;var b=e(r,y);return y[4]+=m.x-b.x,y[5]+=m.y-b.y,this.setViewportTransform(y)},setZoom:function(r){return this.zoomToPoint(new o.Point(0,0),r),this},absolutePan:function(r){var d=this.viewportTransform.slice(0);return d[4]=-r.x,d[5]=-r.y,this.setViewportTransform(d)},relativePan:function(r){return this.absolutePan(new o.Point(-r.x-this.viewportTransform[4],-r.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(r){this.stateful&&r.setupState(),r._set("canvas",this),r.setCoords(),this.fire("object:added",{target:r}),r.fire("added")},_onObjectRemoved:function(r){this.fire("object:removed",{target:r}),r.fire("removed"),delete r.canvas},clearContext:function(r){return r.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var r=this.contextContainer;return this.renderCanvas(r,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=o.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var r={},d=this.width,m=this.height,y=n(this.viewportTransform);return r.tl=e({x:0,y:0},y),r.br=e({x:d,y:m},y),r.tr=new o.Point(r.br.x,r.tl.y),r.bl=new o.Point(r.tl.x,r.br.y),this.vptCoords=r,r},cancelRequestedRender:function(){this.isRendering&&(o.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(r,d){var m=this.viewportTransform,y=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(r),o.util.setImageSmoothing(r,this.imageSmoothingEnabled),this.fire("before:render",{ctx:r}),this._renderBackground(r),r.save(),r.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._renderObjects(r,d),r.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(r),y&&(y.canvas=this,y.shouldCache(),y._transformDone=!0,y.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(r)),this._renderOverlay(r),this.controlsAboveOverlay&&this.interactive&&this.drawControls(r),this.fire("after:render",{ctx:r})},drawClipPathOnCanvas:function(r){var d=this.viewportTransform,m=this.clipPath;r.save(),r.transform(d[0],d[1],d[2],d[3],d[4],d[5]),r.globalCompositeOperation="destination-in",m.transform(r),r.scale(1/m.zoomX,1/m.zoomY),r.drawImage(m._cacheCanvas,-m.cacheTranslationX,-m.cacheTranslationY),r.restore()},_renderObjects:function(r,d){var m,y;for(m=0,y=d.length;m<y;++m)d[m]&&d[m].render(r)},_renderBackgroundOrOverlay:function(r,d){var m=this[d+"Color"],y=this[d+"Image"],b=this.viewportTransform,T=this[d+"Vpt"];if(!(!m&&!y)){if(m){r.save(),r.beginPath(),r.moveTo(0,0),r.lineTo(this.width,0),r.lineTo(this.width,this.height),r.lineTo(0,this.height),r.closePath(),r.fillStyle=m.toLive?m.toLive(r,this):m,T&&r.transform(b[0],b[1],b[2],b[3],b[4],b[5]),r.transform(1,0,0,1,m.offsetX||0,m.offsetY||0);var M=m.gradientTransform||m.patternTransform;M&&r.transform(M[0],M[1],M[2],M[3],M[4],M[5]),r.fill(),r.restore()}y&&(r.save(),T&&r.transform(b[0],b[1],b[2],b[3],b[4],b[5]),y.render(r),r.restore())}},_renderBackground:function(r){this._renderBackgroundOrOverlay(r,"background")},_renderOverlay:function(r){this._renderBackgroundOrOverlay(r,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new o.Point(this.width/2,this.height/2)},centerObjectH:function(r){return this._centerObject(r,new o.Point(this.getCenterPoint().x,r.getCenterPoint().y))},centerObjectV:function(r){return this._centerObject(r,new o.Point(r.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(r){var d=this.getCenterPoint();return this._centerObject(r,d)},viewportCenterObject:function(r){var d=this.getVpCenter();return this._centerObject(r,d)},viewportCenterObjectH:function(r){var d=this.getVpCenter();return this._centerObject(r,new o.Point(d.x,r.getCenterPoint().y)),this},viewportCenterObjectV:function(r){var d=this.getVpCenter();return this._centerObject(r,new o.Point(r.getCenterPoint().x,d.y))},getVpCenter:function(){var r=this.getCenterPoint(),d=n(this.viewportTransform);return e(r,d)},_centerObject:function(r,d){return r.setPositionByOrigin(d,"center","center"),r.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(r){return this.toDatalessObject(r)},toObject:function(r){return this._toObjectMethod("toObject",r)},toDatalessObject:function(r){return this._toObjectMethod("toDatalessObject",r)},_toObjectMethod:function(r,d){var m=this.clipPath,y={version:o.version,objects:this._toObjects(r,d)};return m&&!m.excludeFromExport&&(y.clipPath=this._toObject(this.clipPath,r,d)),f(y,this.__serializeBgOverlay(r,d)),o.util.populateWithProperties(this,y,d),y},_toObjects:function(r,d){return this._objects.filter(function(m){return!m.excludeFromExport}).map(function(m){return this._toObject(m,r,d)},this)},_toObject:function(r,d,m){var y;this.includeDefaultValues||(y=r.includeDefaultValues,r.includeDefaultValues=!1);var b=r[d](m);return this.includeDefaultValues||(r.includeDefaultValues=y),b},__serializeBgOverlay:function(r,d){var m={},y=this.backgroundImage,b=this.overlayImage,T=this.backgroundColor,M=this.overlayColor;return T&&T.toObject?T.excludeFromExport||(m.background=T.toObject(d)):T&&(m.background=T),M&&M.toObject?M.excludeFromExport||(m.overlay=M.toObject(d)):M&&(m.overlay=M),y&&!y.excludeFromExport&&(m.backgroundImage=this._toObject(y,r,d)),b&&!b.excludeFromExport&&(m.overlayImage=this._toObject(b,r,d)),m},svgViewportTransformation:!0,toSVG:function(r,d){r||(r={}),r.reviver=d;var m=[];return this._setSVGPreamble(m,r),this._setSVGHeader(m,r),this.clipPath&&m.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(m,"background"),this._setSVGBgOverlayImage(m,"backgroundImage",d),this._setSVGObjects(m,d),this.clipPath&&m.push(`</g>
`),this._setSVGBgOverlayColor(m,"overlay"),this._setSVGBgOverlayImage(m,"overlayImage",d),m.push("</svg>"),m.join("")},_setSVGPreamble:function(r,d){d.suppressPreamble||r.push('<?xml version="1.0" encoding="',d.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(r,d){var m=d.width||this.width,y=d.height||this.height,b,T='viewBox="0 0 '+this.width+" "+this.height+'" ',M=o.Object.NUM_FRACTION_DIGITS;d.viewBox?T='viewBox="'+d.viewBox.x+" "+d.viewBox.y+" "+d.viewBox.width+" "+d.viewBox.height+'" ':this.svgViewportTransformation&&(b=this.viewportTransform,T='viewBox="'+c(-b[4]/b[0],M)+" "+c(-b[5]/b[3],M)+" "+c(this.width/b[0],M)+" "+c(this.height/b[3],M)+'" '),r.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',m,'" ','height="',y,'" ',T,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",o.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(d),`</defs>
`)},createSVGClipPathMarkup:function(r){var d=this.clipPath;return d?(d.clipPathId="CLIPPATH_"+o.Object.__uid++,'<clipPath id="'+d.clipPathId+`" >
`+this.clipPath.toClipPathSVG(r.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var r=this,d=["background","overlay"].map(function(m){var y=r[m+"Color"];if(y&&y.toLive){var b=r[m+"Vpt"],T=r.viewportTransform,M={width:r.width/(b?T[0]:1),height:r.height/(b?T[3]:1)};return y.toSVG(M,{additionalTransform:b?o.util.matrixToSVG(T):""})}});return d.join("")},createSVGFontFacesMarkup:function(){var r="",d={},m,y,b,T,M,X,z,st,ft,vt=o.fontPaths,xt=[];for(this._objects.forEach(function _t(ot){xt.push(ot),ot._objects&&ot._objects.forEach(_t)}),st=0,ft=xt.length;st<ft;st++)if(m=xt[st],y=m.fontFamily,!(m.type.indexOf("text")===-1||d[y]||!vt[y])&&(d[y]=!0,!!m.styles)){b=m.styles;for(M in b){T=b[M];for(z in T)X=T[z],y=X.fontFamily,!d[y]&&vt[y]&&(d[y]=!0)}}for(var St in d)r+=[`		@font-face {
`,"			font-family: '",St,`';
`,"			src: url('",vt[St],`');
`,`		}
`].join("");return r&&(r=['	<style type="text/css">',`<![CDATA[
`,r,"]]>",`</style>
`].join("")),r},_setSVGObjects:function(r,d){var m,y,b,T=this._objects;for(y=0,b=T.length;y<b;y++)m=T[y],!m.excludeFromExport&&this._setSVGObject(r,m,d)},_setSVGObject:function(r,d,m){r.push(d.toSVG(m))},_setSVGBgOverlayImage:function(r,d,m){this[d]&&!this[d].excludeFromExport&&this[d].toSVG&&r.push(this[d].toSVG(m))},_setSVGBgOverlayColor:function(r,d){var m=this[d+"Color"],y=this.viewportTransform,b=this.width,T=this.height;if(m)if(m.toLive){var M=m.repeat,X=o.util.invertTransform(y),z=this[d+"Vpt"],st=z?o.util.matrixToSVG(X):"";r.push('<rect transform="'+st+" translate(",b/2,",",T/2,')"',' x="',m.offsetX-b/2,'" y="',m.offsetY-T/2,'" ','width="',M==="repeat-y"||M==="no-repeat"?m.source.width:b,'" height="',M==="repeat-x"||M==="no-repeat"?m.source.height:T,'" fill="url(#SVGID_'+m.id+')"',`></rect>
`)}else r.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',m,'"',`></rect>
`)},sendToBack:function(r){if(!r)return this;var d=this._activeObject,m,y,b;if(r===d&&r.type==="activeSelection")for(b=d._objects,m=b.length;m--;)y=b[m],l(this._objects,y),this._objects.unshift(y);else l(this._objects,r),this._objects.unshift(r);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(r){if(!r)return this;var d=this._activeObject,m,y,b;if(r===d&&r.type==="activeSelection")for(b=d._objects,m=0;m<b.length;m++)y=b[m],l(this._objects,y),this._objects.push(y);else l(this._objects,r),this._objects.push(r);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(r,d){if(!r)return this;var m=this._activeObject,y,b,T,M,X,z=0;if(r===m&&r.type==="activeSelection")for(X=m._objects,y=0;y<X.length;y++)b=X[y],T=this._objects.indexOf(b),T>0+z&&(M=T-1,l(this._objects,b),this._objects.splice(M,0,b)),z++;else T=this._objects.indexOf(r),T!==0&&(M=this._findNewLowerIndex(r,T,d),l(this._objects,r),this._objects.splice(M,0,r));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(r,d,m){var y,b;if(m)for(y=d,b=d-1;b>=0;--b){var T=r.intersectsWithObject(this._objects[b])||r.isContainedWithinObject(this._objects[b])||this._objects[b].isContainedWithinObject(r);if(T){y=b;break}}else y=d-1;return y},bringForward:function(r,d){if(!r)return this;var m=this._activeObject,y,b,T,M,X,z=0;if(r===m&&r.type==="activeSelection")for(X=m._objects,y=X.length;y--;)b=X[y],T=this._objects.indexOf(b),T<this._objects.length-1-z&&(M=T+1,l(this._objects,b),this._objects.splice(M,0,b)),z++;else T=this._objects.indexOf(r),T!==this._objects.length-1&&(M=this._findNewUpperIndex(r,T,d),l(this._objects,r),this._objects.splice(M,0,r));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(r,d,m){var y,b,T;if(m)for(y=d,b=d+1,T=this._objects.length;b<T;++b){var M=r.intersectsWithObject(this._objects[b])||r.isContainedWithinObject(this._objects[b])||this._objects[b].isContainedWithinObject(r);if(M){y=b;break}}else y=d+1;return y},moveTo:function(r,d){return l(this._objects,r),this._objects.splice(d,0,r),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(o.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(r){r.dispose&&r.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),o.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),o.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),f(o.StaticCanvas.prototype,o.Observable),f(o.StaticCanvas.prototype,o.Collection),f(o.StaticCanvas.prototype,o.DataURLExporter),f(o.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(r){var d=s();if(!d||!d.getContext)return null;var m=d.getContext("2d");if(!m)return null;switch(r){case"setLineDash":return typeof m.setLineDash<"u";default:return null}}}),o.StaticCanvas.prototype.toJSON=o.StaticCanvas.prototype.toObject,o.isLikelyNode&&(o.StaticCanvas.prototype.createPNGStream=function(){var r=t(this.lowerCanvasEl);return r&&r.createPNGStream()},o.StaticCanvas.prototype.createJPEGStream=function(r){var d=t(this.lowerCanvasEl);return d&&d.createJPEGStream(r)})}(),o.BaseBrush=o.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(f){f.strokeStyle=this.color,f.lineWidth=this.width,f.lineCap=this.strokeLineCap,f.miterLimit=this.strokeMiterLimit,f.lineJoin=this.strokeLineJoin,f.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(f){var i=this.canvas.viewportTransform;f.save(),f.transform(i[0],i[1],i[2],i[3],i[4],i[5])},_setShadow:function(){if(this.shadow){var f=this.canvas,i=this.shadow,l=f.contextTop,c=f.getZoom();f&&f._isRetinaScaling()&&(c*=o.devicePixelRatio),l.shadowColor=i.color,l.shadowBlur=i.blur*c,l.shadowOffsetX=i.offsetX*c,l.shadowOffsetY=i.offsetY*c}},needsFullRender:function(){var f=new o.Color(this.color);return f.getAlpha()<1||!!this.shadow},_resetShadow:function(){var f=this.canvas.contextTop;f.shadowColor="",f.shadowBlur=f.shadowOffsetX=f.shadowOffsetY=0},_isOutSideCanvas:function(f){return f.x<0||f.x>this.canvas.getWidth()||f.y<0||f.y>this.canvas.getHeight()}}),function(){o.PencilBrush=o.util.createClass(o.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(f){this.canvas=f,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(f,i,l){var c=i.midPointFrom(l);return f.quadraticCurveTo(i.x,i.y,c.x,c.y),c},onMouseDown:function(f,i){this.canvas._isMainEvent(i.e)&&(this.drawStraightLine=i.e[this.straightLineKey],this._prepareForDrawing(f),this._captureDrawingPath(f),this._render())},onMouseMove:function(f,i){if(this.canvas._isMainEvent(i.e)&&(this.drawStraightLine=i.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(f))&&this._captureDrawingPath(f)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var l=this._points,c=l.length,e=this.canvas.contextTop;this._saveAndTransform(e),this.oldEnd&&(e.beginPath(),e.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(e,l[c-2],l[c-1],!0),e.stroke(),e.restore()}},onMouseUp:function(f){return this.canvas._isMainEvent(f.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(f){var i=new o.Point(f.x,f.y);this._reset(),this._addPoint(i),this.canvas.contextTop.moveTo(i.x,i.y)},_addPoint:function(f){return this._points.length>1&&f.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(f),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(f){var i=new o.Point(f.x,f.y);return this._addPoint(i)},_render:function(f){var i,l,c=this._points[0],e=this._points[1];if(f=f||this.canvas.contextTop,this._saveAndTransform(f),f.beginPath(),this._points.length===2&&c.x===e.x&&c.y===e.y){var n=this.width/1e3;c=new o.Point(c.x,c.y),e=new o.Point(e.x,e.y),c.x-=n,e.x+=n}for(f.moveTo(c.x,c.y),i=1,l=this._points.length;i<l;i++)this._drawSegment(f,c,e),c=this._points[i],e=this._points[i+1];f.lineTo(c.x,c.y),f.stroke(),f.restore()},convertPointsToSVGPath:function(f){var i=this.width/1e3;return o.util.getSmoothPathFromPoints(f,i)},_isEmptySVGPath:function(f){var i=o.util.joinPath(f);return i==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(f){var i=new o.Path(f,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,i.shadow=new o.Shadow(this.shadow)),i},decimatePoints:function(f,i){if(f.length<=2)return f;var l=this.canvas.getZoom(),c=Math.pow(i/l,2),e,n=f.length-1,t=f[0],s=[t],h;for(e=1;e<n-1;e++)h=Math.pow(t.x-f[e].x,2)+Math.pow(t.y-f[e].y,2),h>=c&&(t=f[e],s.push(t));return s.push(f[n]),s},_finalizeAndAddPath:function(){var f=this.canvas.contextTop;f.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var i=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(i)){this.canvas.requestRenderAll();return}var l=this.createPath(i);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:l}),this.canvas.add(l),this.canvas.requestRenderAll(),l.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:l})}})}(),o.CircleBrush=o.util.createClass(o.BaseBrush,{width:10,initialize:function(f){this.canvas=f,this.points=[]},drawDot:function(f){var i=this.addPoint(f),l=this.canvas.contextTop;this._saveAndTransform(l),this.dot(l,i),l.restore()},dot:function(f,i){f.fillStyle=i.fill,f.beginPath(),f.arc(i.x,i.y,i.radius,0,Math.PI*2,!1),f.closePath(),f.fill()},onMouseDown:function(f){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(f)},_render:function(){var f=this.canvas.contextTop,i,l,c=this.points;for(this._saveAndTransform(f),i=0,l=c.length;i<l;i++)this.dot(f,c[i]);f.restore()},onMouseMove:function(f){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(f)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(f),this._render()):this.drawDot(f))},onMouseUp:function(){var f=this.canvas.renderOnAddRemove,i,l;this.canvas.renderOnAddRemove=!1;var c=[];for(i=0,l=this.points.length;i<l;i++){var e=this.points[i],n=new o.Circle({radius:e.radius,left:e.x,top:e.y,originX:"center",originY:"center",fill:e.fill});this.shadow&&(n.shadow=new o.Shadow(this.shadow)),c.push(n)}var t=new o.Group(c);t.canvas=this.canvas,this.canvas.fire("before:path:created",{path:t}),this.canvas.add(t),this.canvas.fire("path:created",{path:t}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=f,this.canvas.requestRenderAll()},addPoint:function(f){var i=new o.Point(f.x,f.y),l=o.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,c=new o.Color(this.color).setAlpha(o.util.getRandomInt(0,100)/100).toRgba();return i.radius=l,i.fill=c,this.points.push(i),i}}),o.SprayBrush=o.util.createClass(o.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(f){this.canvas=f,this.sprayChunks=[]},onMouseDown:function(f){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(f),this.render(this.sprayChunkPoints)},onMouseMove:function(f){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(f)||(this.addSprayChunk(f),this.render(this.sprayChunkPoints))},onMouseUp:function(){var f=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var i=[],l=0,c=this.sprayChunks.length;l<c;l++)for(var e=this.sprayChunks[l],n=0,t=e.length;n<t;n++){var s=new o.Rect({width:e[n].width,height:e[n].width,left:e[n].x+1,top:e[n].y+1,originX:"center",originY:"center",fill:this.color});i.push(s)}this.optimizeOverlapping&&(i=this._getOptimizedRects(i));var h=new o.Group(i);this.shadow&&h.set("shadow",new o.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:h}),this.canvas.add(h),this.canvas.fire("path:created",{path:h}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=f,this.canvas.requestRenderAll()},_getOptimizedRects:function(f){var i={},l,c,e;for(c=0,e=f.length;c<e;c++)l=f[c].left+""+f[c].top,i[l]||(i[l]=f[c]);var n=[];for(l in i)n.push(i[l]);return n},render:function(f){var i=this.canvas.contextTop,l,c;for(i.fillStyle=this.color,this._saveAndTransform(i),l=0,c=f.length;l<c;l++){var e=f[l];typeof e.opacity<"u"&&(i.globalAlpha=e.opacity),i.fillRect(e.x,e.y,e.width,e.width)}i.restore()},_render:function(){var f=this.canvas.contextTop,i,l;for(f.fillStyle=this.color,this._saveAndTransform(f),i=0,l=this.sprayChunks.length;i<l;i++)this.render(this.sprayChunks[i]);f.restore()},addSprayChunk:function(f){this.sprayChunkPoints=[];var i,l,c,e=this.width/2,n;for(n=0;n<this.density;n++){i=o.util.getRandomInt(f.x-e,f.x+e),l=o.util.getRandomInt(f.y-e,f.y+e),this.dotWidthVariance?c=o.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):c=this.dotWidth;var t=new o.Point(i,l);t.width=c,this.randomOpacity&&(t.opacity=o.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(t)}this.sprayChunks.push(this.sprayChunkPoints)}}),o.PatternBrush=o.util.createClass(o.PencilBrush,{getPatternSrc:function(){var f=20,i=5,l=o.util.createCanvasElement(),c=l.getContext("2d");return l.width=l.height=f+i,c.fillStyle=this.color,c.beginPath(),c.arc(f/2,f/2,f/2,0,Math.PI*2,!1),c.closePath(),c.fill(),l},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(f){return f.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(f){this.callSuper("_setBrushStyles",f),f.strokeStyle=this.getPattern(f)},createPath:function(f){var i=this.callSuper("createPath",f),l=i._getLeftTopCoords().scalarAdd(i.strokeWidth/2);return i.stroke=new o.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-l.x,offsetY:-l.y}),i}}),function(){var f=o.util.getPointer,i=o.util.degreesToRadians,l=o.util.isTouchEvent;o.Canvas=o.util.createClass(o.StaticCanvas,{initialize:function(e,n){n||(n={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(e,n),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=o.PencilBrush&&new o.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var e=this.getActiveObjects(),n,t,s;if(e.length>0&&!this.preserveObjectStacking){t=[],s=[];for(var h=0,r=this._objects.length;h<r;h++)n=this._objects[h],e.indexOf(n)===-1?t.push(n):s.push(n);e.length>1&&(this._activeObject._objects=s),t.push.apply(t,s)}else t=this._objects;return t},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var e=this.contextContainer;return this.renderCanvas(e,this._chooseObjectsToRender()),this},renderTopLayer:function(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()},renderTop:function(){var e=this.contextTop;return this.clearContext(e),this.renderTopLayer(e),this.fire("after:render"),this},_normalizePointer:function(e,n){var t=e.calcTransformMatrix(),s=o.util.invertTransform(t),h=this.restorePointerVpt(n);return o.util.transformPoint(h,s)},isTargetTransparent:function(e,n,t){if(e.shouldCache()&&e._cacheCanvas&&e!==this._activeObject){var s=this._normalizePointer(e,{x:n,y:t}),h=Math.max(e.cacheTranslationX+s.x*e.zoomX,0),r=Math.max(e.cacheTranslationY+s.y*e.zoomY,0),b=o.util.isTransparent(e._cacheContext,Math.round(h),Math.round(r),this.targetFindTolerance);return b}var d=this.contextCache,m=e.selectionBackgroundColor,y=this.viewportTransform;e.selectionBackgroundColor="",this.clearContext(d),d.save(),d.transform(y[0],y[1],y[2],y[3],y[4],y[5]),e.render(d),d.restore(),e.selectionBackgroundColor=m;var b=o.util.isTransparent(d,n,t,this.targetFindTolerance);return b},_isSelectionKeyPressed:function(e){var n=!1;return Array.isArray(this.selectionKey)?n=!!this.selectionKey.find(function(t){return e[t]===!0}):n=e[this.selectionKey],n},_shouldClearSelection:function(e,n){var t=this.getActiveObjects(),s=this._activeObject;return!n||n&&s&&t.length>1&&t.indexOf(n)===-1&&s!==n&&!this._isSelectionKeyPressed(e)||n&&!n.evented||n&&!n.selectable&&s&&s!==n},_shouldCenterTransform:function(e,n,t){if(e){var s;return n==="scale"||n==="scaleX"||n==="scaleY"||n==="resizing"?s=this.centeredScaling||e.centeredScaling:n==="rotate"&&(s=this.centeredRotation||e.centeredRotation),s?!t:t}},_getOriginFromCorner:function(e,n){var t={x:e.originX,y:e.originY};return n==="ml"||n==="tl"||n==="bl"?t.x="right":(n==="mr"||n==="tr"||n==="br")&&(t.x="left"),n==="tl"||n==="mt"||n==="tr"?t.y="bottom":(n==="bl"||n==="mb"||n==="br")&&(t.y="top"),t},_getActionFromCorner:function(e,n,t,s){if(!n||!e)return"drag";var h=s.controls[n];return h.getActionName(t,h,s)},_setupCurrentTransform:function(e,n,t){if(n){var s=this.getPointer(e),h=n.__corner,r=n.controls[h],d=t&&h?r.getActionHandler(e,n,r):o.controlsUtils.dragHandler,m=this._getActionFromCorner(t,h,e,n),y=this._getOriginFromCorner(n,h),b=e[this.centeredKey],T={target:n,action:m,actionHandler:d,corner:h,scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,offsetX:s.x-n.left,offsetY:s.y-n.top,originX:y.x,originY:y.y,ex:s.x,ey:s.y,lastX:s.x,lastY:s.y,theta:i(n.angle),width:n.width*n.scaleX,shiftKey:e.shiftKey,altKey:b,original:o.util.saveObjectTransform(n)};this._shouldCenterTransform(n,m,b)&&(T.originX="center",T.originY="center"),T.original.originX=y.x,T.original.originY=y.y,this._currentTransform=T,this._beforeTransform(e)}},setCursor:function(e){this.upperCanvasEl.style.cursor=e},_drawSelection:function(e){var n=this._groupSelector,t=new o.Point(n.ex,n.ey),s=o.util.transformPoint(t,this.viewportTransform),h=new o.Point(n.ex+n.left,n.ey+n.top),r=o.util.transformPoint(h,this.viewportTransform),d=Math.min(s.x,r.x),m=Math.min(s.y,r.y),y=Math.max(s.x,r.x),b=Math.max(s.y,r.y),T=this.selectionLineWidth/2;this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(d,m,y-d,b-m)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,d+=T,m+=T,y-=T,b-=T,o.Object.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(d,m,y-d,b-m))},findTarget:function(e,n){if(!this.skipTargetFind){var t=!0,s=this.getPointer(e,t),h=this._activeObject,r=this.getActiveObjects(),d,m,y=l(e),b=r.length>1&&!n||r.length===1;if(this.targets=[],b&&h._findTargetCorner(s,y)||r.length>1&&!n&&h===this._searchPossibleTargets([h],s))return h;if(r.length===1&&h===this._searchPossibleTargets([h],s))if(this.preserveObjectStacking)d=h,m=this.targets,this.targets=[];else return h;var T=this._searchPossibleTargets(this._objects,s);return e[this.altSelectionKey]&&T&&d&&T!==d&&(T=d,this.targets=m),T}},_checkTarget:function(e,n,t){if(n&&n.visible&&n.evented&&n.containsPoint(e))if((this.perPixelTargetFind||n.perPixelTargetFind)&&!n.isEditing){var s=this.isTargetTransparent(n,t.x,t.y);if(!s)return!0}else return!0},_searchPossibleTargets:function(e,n){for(var t,s=e.length,h;s--;){var r=e[s],d=r.group?this._normalizePointer(r.group,n):n;if(this._checkTarget(d,r,n)){t=e[s],t.subTargetCheck&&t instanceof o.Group&&(h=this._searchPossibleTargets(t._objects,n),h&&this.targets.push(h));break}}return t},restorePointerVpt:function(e){return o.util.transformPoint(e,o.util.invertTransform(this.viewportTransform))},getPointer:function(e,n){if(this._absolutePointer&&!n)return this._absolutePointer;if(this._pointer&&n)return this._pointer;var t=f(e),s=this.upperCanvasEl,h=s.getBoundingClientRect(),r=h.width||0,d=h.height||0,m;(!r||!d)&&("top"in h&&"bottom"in h&&(d=Math.abs(h.top-h.bottom)),"right"in h&&"left"in h&&(r=Math.abs(h.right-h.left))),this.calcOffset(),t.x=t.x-this._offset.left,t.y=t.y-this._offset.top,n||(t=this.restorePointerVpt(t));var y=this.getRetinaScaling();return y!==1&&(t.x/=y,t.y/=y),r===0||d===0?m={width:1,height:1}:m={width:s.width/r,height:s.height/d},{x:t.x*m.width,y:t.y*m.height}},_createUpperCanvas:function(){var e=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),n=this.lowerCanvasEl,t=this.upperCanvasEl;t?t.className="":(t=this._createCanvasElement(),this.upperCanvasEl=t),o.util.addClass(t,"upper-canvas "+e),this.wrapperEl.appendChild(t),this._copyCanvasStyle(n,t),this._applyCanvasStyle(t),this.contextTop=t.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=o.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),o.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),o.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(e){var n=this.width||e.width,t=this.height||e.height;o.util.setStyle(e,{position:"absolute",width:n+"px",height:t+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),e.width=n,e.height=t,o.util.makeElementUnselectable(e)},_copyCanvasStyle:function(e,n){n.style.cssText=e.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var e=this._activeObject;return e?e.type==="activeSelection"&&e._objects?e._objects.slice(0):[e]:[]},_onObjectRemoved:function(e){e===this._activeObject&&(this.fire("before:selection:cleared",{target:e}),this._discardActiveObject(),this.fire("selection:cleared",{target:e}),e.fire("deselected")),e===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",e)},_fireSelectionEvents:function(e,n){var t=!1,s=this.getActiveObjects(),h=[],r=[];e.forEach(function(d){s.indexOf(d)===-1&&(t=!0,d.fire("deselected",{e:n,target:d}),r.push(d))}),s.forEach(function(d){e.indexOf(d)===-1&&(t=!0,d.fire("selected",{e:n,target:d}),h.push(d))}),e.length>0&&s.length>0?t&&this.fire("selection:updated",{e:n,selected:h,deselected:r}):s.length>0?this.fire("selection:created",{e:n,selected:h}):e.length>0&&this.fire("selection:cleared",{e:n,deselected:r})},setActiveObject:function(e,n){var t=this.getActiveObjects();return this._setActiveObject(e,n),this._fireSelectionEvents(t,n),this},_setActiveObject:function(e,n){return this._activeObject===e||!this._discardActiveObject(n,e)||e.onSelect({e:n})?!1:(this._activeObject=e,!0)},_discardActiveObject:function(e,n){var t=this._activeObject;if(t){if(t.onDeselect({e,object:n}))return!1;this._activeObject=null}return!0},discardActiveObject:function(e){var n=this.getActiveObjects(),t=this.getActiveObject();return n.length&&this.fire("before:selection:cleared",{target:t,e}),this._discardActiveObject(e),this._fireSelectionEvents(n,e),this},dispose:function(){var e=this.wrapperEl;return this.removeListeners(),e.removeChild(this.upperCanvasEl),e.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(n){o.util.cleanUpJsdomNode(this[n]),this[n]=void 0}).bind(this)),e.parentNode&&e.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,o.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(e){var n=this._activeObject;n&&n._renderControls(e)},_toObject:function(e,n,t){var s=this._realizeGroupTransformOnObject(e),h=this.callSuper("_toObject",e,n,t);return this._unwindGroupTransformOnObject(e,s),h},_realizeGroupTransformOnObject:function(e){if(e.group&&e.group.type==="activeSelection"&&this._activeObject===e.group){var n=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],t={};return n.forEach(function(s){t[s]=e[s]}),o.util.addTransformToObject(e,this._activeObject.calcOwnMatrix()),t}else return null},_unwindGroupTransformOnObject:function(e,n){n&&e.set(n)},_setSVGObject:function(e,n,t){var s=this._realizeGroupTransformOnObject(n);this.callSuper("_setSVGObject",e,n,t),this._unwindGroupTransformOnObject(n,s)},setViewportTransform:function(e){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),o.StaticCanvas.prototype.setViewportTransform.call(this,e)}});for(var c in o.StaticCanvas)c!=="prototype"&&(o.Canvas[c]=o.StaticCanvas[c])}(),function(){var f=o.util.addListener,i=o.util.removeListener,l=3,c=2,e=1,n={passive:!1};function t(s,h){return s.button&&s.button===h-1}o.util.object.extend(o.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(f,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(s,h){var r=this.upperCanvasEl,d=this._getEventPrefix();s(o.window,"resize",this._onResize),s(r,d+"down",this._onMouseDown),s(r,d+"move",this._onMouseMove,n),s(r,d+"out",this._onMouseOut),s(r,d+"enter",this._onMouseEnter),s(r,"wheel",this._onMouseWheel),s(r,"contextmenu",this._onContextMenu),s(r,"dblclick",this._onDoubleClick),s(r,"dragover",this._onDragOver),s(r,"dragenter",this._onDragEnter),s(r,"dragleave",this._onDragLeave),s(r,"drop",this._onDrop),this.enablePointerEvents||s(r,"touchstart",this._onTouchStart,n),typeof eventjs<"u"&&h in eventjs&&(eventjs[h](r,"gesture",this._onGesture),eventjs[h](r,"drag",this._onDrag),eventjs[h](r,"orientation",this._onOrientationChange),eventjs[h](r,"shake",this._onShake),eventjs[h](r,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(i,"remove");var s=this._getEventPrefix();i(o.document,s+"up",this._onMouseUp),i(o.document,"touchend",this._onTouchEnd,n),i(o.document,s+"move",this._onMouseMove,n),i(o.document,"touchmove",this._onMouseMove,n)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(s,h){this.__onTransformGesture&&this.__onTransformGesture(s,h)},_onDrag:function(s,h){this.__onDrag&&this.__onDrag(s,h)},_onMouseWheel:function(s){this.__onMouseWheel(s)},_onMouseOut:function(s){var h=this._hoveredTarget;this.fire("mouse:out",{target:h,e:s}),this._hoveredTarget=null,h&&h.fire("mouseout",{e:s});var r=this;this._hoveredTargets.forEach(function(d){r.fire("mouse:out",{target:h,e:s}),d&&h.fire("mouseout",{e:s})}),this._hoveredTargets=[]},_onMouseEnter:function(s){!this._currentTransform&&!this.findTarget(s)&&(this.fire("mouse:over",{target:null,e:s}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(s,h){this.__onOrientationChange&&this.__onOrientationChange(s,h)},_onShake:function(s,h){this.__onShake&&this.__onShake(s,h)},_onLongPress:function(s,h){this.__onLongPress&&this.__onLongPress(s,h)},_onDragOver:function(s){s.preventDefault();var h=this._simpleEventHandler("dragover",s);this._fireEnterLeaveEvents(h,s)},_onDrop:function(s){return this._simpleEventHandler("drop:before",s),this._simpleEventHandler("drop",s)},_onContextMenu:function(s){return this.stopContextMenu&&(s.stopPropagation(),s.preventDefault()),!1},_onDoubleClick:function(s){this._cacheTransformEventData(s),this._handleEvent(s,"dblclick"),this._resetTransformEventData(s)},getPointerId:function(s){var h=s.changedTouches;return h?h[0]&&h[0].identifier:this.enablePointerEvents?s.pointerId:-1},_isMainEvent:function(s){return s.isPrimary===!0?!0:s.isPrimary===!1?!1:s.type==="touchend"&&s.touches.length===0?!0:s.changedTouches?s.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(s){s.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(s)),this.__onMouseDown(s),this._resetTransformEventData();var h=this.upperCanvasEl,r=this._getEventPrefix();f(o.document,"touchend",this._onTouchEnd,n),f(o.document,"touchmove",this._onMouseMove,n),i(h,r+"down",this._onMouseDown)},_onMouseDown:function(s){this.__onMouseDown(s),this._resetTransformEventData();var h=this.upperCanvasEl,r=this._getEventPrefix();i(h,r+"move",this._onMouseMove,n),f(o.document,r+"up",this._onMouseUp),f(o.document,r+"move",this._onMouseMove,n)},_onTouchEnd:function(s){if(!(s.touches.length>0)){this.__onMouseUp(s),this._resetTransformEventData(),this.mainTouchId=null;var h=this._getEventPrefix();i(o.document,"touchend",this._onTouchEnd,n),i(o.document,"touchmove",this._onMouseMove,n);var r=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){f(r.upperCanvasEl,h+"down",r._onMouseDown),r._willAddMouseDown=0},400)}},_onMouseUp:function(s){this.__onMouseUp(s),this._resetTransformEventData();var h=this.upperCanvasEl,r=this._getEventPrefix();this._isMainEvent(s)&&(i(o.document,r+"up",this._onMouseUp),i(o.document,r+"move",this._onMouseMove,n),f(h,r+"move",this._onMouseMove,n))},_onMouseMove:function(s){!this.allowTouchScrolling&&s.preventDefault&&s.preventDefault(),this.__onMouseMove(s)},_onResize:function(){this.calcOffset()},_shouldRender:function(s){var h=this._activeObject;return!!h!=!!s||h&&s&&h!==s?!0:(h&&h.isEditing,!1)},__onMouseUp:function(s){var h,r=this._currentTransform,d=this._groupSelector,m=!1,y=!d||d.left===0&&d.top===0;if(this._cacheTransformEventData(s),h=this._target,this._handleEvent(s,"up:before"),t(s,l)){this.fireRightClick&&this._handleEvent(s,"up",l,y);return}if(t(s,c)){this.fireMiddleClick&&this._handleEvent(s,"up",c,y),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(s);return}if(this._isMainEvent(s)){if(r&&(this._finalizeCurrentTransform(s),m=r.actionPerformed),!y){var b=h===this._activeObject;this._maybeGroupObjects(s),m||(m=this._shouldRender(h)||!b&&h===this._activeObject)}var T,M;if(h){if(T=h._findTargetCorner(this.getPointer(s,!0),o.util.isTouchEvent(s)),h.selectable&&h!==this._activeObject&&h.activeOn==="up")this.setActiveObject(h,s),m=!0;else{var X=h.controls[T],z=X&&X.getMouseUpHandler(s,h,X);z&&(M=this.getPointer(s),z(s,r,M.x,M.y))}h.isMoving=!1}if(r&&(r.target!==h||r.corner!==T)){var st=r.target&&r.target.controls[r.corner],ft=st&&st.getMouseUpHandler(s,h,X);M=M||this.getPointer(s),ft&&ft(s,r,M.x,M.y)}this._setCursorFromEvent(s,h),this._handleEvent(s,"up",e,y),this._groupSelector=null,this._currentTransform=null,h&&(h.__corner=0),m?this.requestRenderAll():y||this.renderTop()}},_simpleEventHandler:function(s,h){var r=this.findTarget(h),d=this.targets,m={e:h,target:r,subTargets:d};if(this.fire(s,m),r&&r.fire(s,m),!d)return r;for(var y=0;y<d.length;y++)d[y].fire(s,m);return r},_handleEvent:function(s,h,r,d){var m=this._target,y=this.targets||[],b={e:s,target:m,subTargets:y,button:r||e,isClick:d||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};h==="up"&&(b.currentTarget=this.findTarget(s),b.currentSubTargets=this.targets),this.fire("mouse:"+h,b),m&&m.fire("mouse"+h,b);for(var T=0;T<y.length;T++)y[T].fire("mouse"+h,b)},_finalizeCurrentTransform:function(s){var h=this._currentTransform,r=h.target,d={e:s,target:r,transform:h,action:h.action};r._scaling&&(r._scaling=!1),r.setCoords(),(h.actionPerformed||this.stateful&&r.hasStateChanged())&&this._fire("modified",d)},_onMouseDownInDrawingMode:function(s){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(s).requestRenderAll();var h=this.getPointer(s);this.freeDrawingBrush.onMouseDown(h,{e:s,pointer:h}),this._handleEvent(s,"down")},_onMouseMoveInDrawingMode:function(s){if(this._isCurrentlyDrawing){var h=this.getPointer(s);this.freeDrawingBrush.onMouseMove(h,{e:s,pointer:h})}this.setCursor(this.freeDrawingCursor),this._handleEvent(s,"move")},_onMouseUpInDrawingMode:function(s){var h=this.getPointer(s);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:s,pointer:h}),this._handleEvent(s,"up")},__onMouseDown:function(s){this._cacheTransformEventData(s),this._handleEvent(s,"down:before");var h=this._target;if(t(s,l)){this.fireRightClick&&this._handleEvent(s,"down",l);return}if(t(s,c)){this.fireMiddleClick&&this._handleEvent(s,"down",c);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(s);return}if(this._isMainEvent(s)&&!this._currentTransform){var r=this._pointer;this._previousPointer=r;var d=this._shouldRender(h),m=this._shouldGroup(s,h);if(this._shouldClearSelection(s,h)?this.discardActiveObject(s):m&&(this._handleGrouping(s,h),h=this._activeObject),this.selection&&(!h||!h.selectable&&!h.isEditing&&h!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),h){var y=h===this._activeObject;h.selectable&&h.activeOn==="down"&&this.setActiveObject(h,s);var b=h._findTargetCorner(this.getPointer(s,!0),o.util.isTouchEvent(s));if(h.__corner=b,h===this._activeObject&&(b||!m)){this._setupCurrentTransform(s,h,y);var T=h.controls[b],r=this.getPointer(s),M=T&&T.getMouseDownHandler(s,h,T);M&&M(s,this._currentTransform,r.x,r.y)}}this._handleEvent(s,"down"),(d||m)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(s){this._resetTransformEventData(),this._pointer=this.getPointer(s,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(s)||null},_beforeTransform:function(s){var h=this._currentTransform;this.stateful&&h.target.saveState(),this.fire("before:transform",{e:s,transform:h})},__onMouseMove:function(s){this._handleEvent(s,"move:before"),this._cacheTransformEventData(s);var h,r;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(s);return}if(this._isMainEvent(s)){var d=this._groupSelector;d?(r=this._absolutePointer,d.left=r.x-d.ex,d.top=r.y-d.ey,this.renderTop()):this._currentTransform?this._transformObject(s):(h=this.findTarget(s)||null,this._setCursorFromEvent(s,h),this._fireOverOutEvents(h,s)),this._handleEvent(s,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(s,h){var r=this._hoveredTarget,d=this._hoveredTargets,m=this.targets,y=Math.max(d.length,m.length);this.fireSyntheticInOutEvents(s,h,{oldTarget:r,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var b=0;b<y;b++)this.fireSyntheticInOutEvents(m[b],h,{oldTarget:d[b],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=s,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(s,h){var r=this._draggedoverTarget,d=this._hoveredTargets,m=this.targets,y=Math.max(d.length,m.length);this.fireSyntheticInOutEvents(s,h,{oldTarget:r,evtOut:"dragleave",evtIn:"dragenter"});for(var b=0;b<y;b++)this.fireSyntheticInOutEvents(m[b],h,{oldTarget:d[b],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=s},fireSyntheticInOutEvents:function(s,h,r){var d,m,y=r.oldTarget,b,T,M=y!==s,X=r.canvasEvtIn,z=r.canvasEvtOut;M&&(d={e:h,target:s,previousTarget:y},m={e:h,target:y,nextTarget:s}),T=s&&M,b=y&&M,b&&(z&&this.fire(z,m),y.fire(r.evtOut,m)),T&&(X&&this.fire(X,d),s.fire(r.evtIn,d))},__onMouseWheel:function(s){this._cacheTransformEventData(s),this._handleEvent(s,"wheel"),this._resetTransformEventData()},_transformObject:function(s){var h=this.getPointer(s),r=this._currentTransform;r.reset=!1,r.shiftKey=s.shiftKey,r.altKey=s[this.centeredKey],this._performTransformAction(s,r,h),r.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(s,h,r){var d=r.x,m=r.y,y=h.action,b=!1,T=h.actionHandler;T&&(b=T(s,h,d,m)),y==="drag"&&b&&(h.target.isMoving=!0,this.setCursor(h.target.moveCursor||this.moveCursor)),h.actionPerformed=h.actionPerformed||b},_fire:o.controlsUtils.fireEvent,_setCursorFromEvent:function(s,h){if(!h)return this.setCursor(this.defaultCursor),!1;var r=h.hoverCursor||this.hoverCursor,d=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,m=(!d||!d.contains(h))&&h._findTargetCorner(this.getPointer(s,!0));m?this.setCursor(this.getCornerCursor(m,h,s)):(h.subTargetCheck&&this.targets.concat().reverse().map(function(y){r=y.hoverCursor||r}),this.setCursor(r))},getCornerCursor:function(s,h,r){var d=h.controls[s];return d.cursorStyleHandler(r,d,h)}})}(),function(){var f=Math.min,i=Math.max;o.util.object.extend(o.Canvas.prototype,{_shouldGroup:function(l,c){var e=this._activeObject;return e&&this._isSelectionKeyPressed(l)&&c&&c.selectable&&this.selection&&(e!==c||e.type==="activeSelection")&&!c.onSelect({e:l})},_handleGrouping:function(l,c){var e=this._activeObject;e.__corner||c===e&&(c=this.findTarget(l,!0),!c||!c.selectable)||(e&&e.type==="activeSelection"?this._updateActiveSelection(c,l):this._createActiveSelection(c,l))},_updateActiveSelection:function(l,c){var e=this._activeObject,n=e._objects.slice(0);e.contains(l)?(e.removeWithUpdate(l),this._hoveredTarget=l,this._hoveredTargets=this.targets.concat(),e.size()===1&&this._setActiveObject(e.item(0),c)):(e.addWithUpdate(l),this._hoveredTarget=e,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(n,c)},_createActiveSelection:function(l,c){var e=this.getActiveObjects(),n=this._createGroup(l);this._hoveredTarget=n,this._setActiveObject(n,c),this._fireSelectionEvents(e,c)},_createGroup:function(l){var c=this._objects,e=c.indexOf(this._activeObject)<c.indexOf(l),n=e?[this._activeObject,l]:[l,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new o.ActiveSelection(n,{canvas:this})},_groupSelectedObjects:function(l){var c=this._collectObjects(l),e;c.length===1?this.setActiveObject(c[0],l):c.length>1&&(e=new o.ActiveSelection(c.reverse(),{canvas:this}),this.setActiveObject(e,l))},_collectObjects:function(l){for(var c=[],e,n=this._groupSelector.ex,t=this._groupSelector.ey,s=n+this._groupSelector.left,h=t+this._groupSelector.top,r=new o.Point(f(n,s),f(t,h)),d=new o.Point(i(n,s),i(t,h)),m=!this.selectionFullyContained,y=n===s&&t===h,b=this._objects.length;b--&&(e=this._objects[b],!(!(!e||!e.selectable||!e.visible)&&(m&&e.intersectsWithRect(r,d,!0)||e.isContainedWithinRect(r,d,!0)||m&&e.containsPoint(r,null,!0)||m&&e.containsPoint(d,null,!0))&&(c.push(e),y))););return c.length>1&&(c=c.filter(function(T){return!T.onSelect({e:l})})),c},_maybeGroupObjects:function(l){this.selection&&this._groupSelector&&this._groupSelectedObjects(l),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){o.util.object.extend(o.StaticCanvas.prototype,{toDataURL:function(f){f||(f={});var i=f.format||"png",l=f.quality||1,c=(f.multiplier||1)*(f.enableRetinaScaling?this.getRetinaScaling():1),e=this.toCanvasElement(c,f);return o.util.toDataURL(e,i,l)},toCanvasElement:function(f,i){f=f||1,i=i||{};var l=(i.width||this.width)*f,c=(i.height||this.height)*f,e=this.getZoom(),n=this.width,t=this.height,s=e*f,h=this.viewportTransform,r=(h[4]-(i.left||0))*f,d=(h[5]-(i.top||0))*f,m=this.interactive,y=[s,0,0,s,r,d],b=this.enableRetinaScaling,T=o.util.createCanvasElement(),M=this.contextTop;return T.width=l,T.height=c,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=y,this.width=l,this.height=c,this.calcViewportBoundaries(),this.renderCanvas(T.getContext("2d"),this._objects),this.viewportTransform=h,this.width=n,this.height=t,this.calcViewportBoundaries(),this.interactive=m,this.enableRetinaScaling=b,this.contextTop=M,T}})}(),o.util.object.extend(o.StaticCanvas.prototype,{loadFromJSON:function(f,i,l){if(f){var c=typeof f=="string"?JSON.parse(f):o.util.object.clone(f),e=this,n=c.clipPath,t=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete c.clipPath,this._enlivenObjects(c.objects,function(s){e.clear(),e._setBgOverlay(c,function(){n?e._enlivenObjects([n],function(h){e.clipPath=h[0],e.__setupCanvas.call(e,c,s,t,i)}):e.__setupCanvas.call(e,c,s,t,i)})},l),this}},__setupCanvas:function(f,i,l,c){var e=this;i.forEach(function(n,t){e.insertAt(n,t)}),this.renderOnAddRemove=l,delete f.objects,delete f.backgroundImage,delete f.overlayImage,delete f.background,delete f.overlay,this._setOptions(f),this.renderAll(),c&&c()},_setBgOverlay:function(f,i){var l={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!f.backgroundImage&&!f.overlayImage&&!f.background&&!f.overlay){i&&i();return}var c=function(){l.backgroundImage&&l.overlayImage&&l.backgroundColor&&l.overlayColor&&i&&i()};this.__setBgOverlay("backgroundImage",f.backgroundImage,l,c),this.__setBgOverlay("overlayImage",f.overlayImage,l,c),this.__setBgOverlay("backgroundColor",f.background,l,c),this.__setBgOverlay("overlayColor",f.overlay,l,c)},__setBgOverlay:function(f,i,l,c){var e=this;if(!i){l[f]=!0,c&&c();return}f==="backgroundImage"||f==="overlayImage"?o.util.enlivenObjects([i],function(n){e[f]=n[0],l[f]=!0,c&&c()}):this["set"+o.util.string.capitalize(f,!0)](i,function(){l[f]=!0,c&&c()})},_enlivenObjects:function(f,i,l){if(!f||f.length===0){i&&i([]);return}o.util.enlivenObjects(f,function(c){i&&i(c)},null,l)},_toDataURL:function(f,i){this.clone(function(l){i(l.toDataURL(f))})},_toDataURLWithMultiplier:function(f,i,l){this.clone(function(c){l(c.toDataURLWithMultiplier(f,i))})},clone:function(f,i){var l=JSON.stringify(this.toJSON(i));this.cloneWithoutData(function(c){c.loadFromJSON(l,function(){f&&f(c)})})},cloneWithoutData:function(f){var i=o.util.createCanvasElement();i.width=this.width,i.height=this.height;var l=new o.Canvas(i);this.backgroundImage?(l.setBackgroundImage(this.backgroundImage.src,function(){l.renderAll(),f&&f(l)}),l.backgroundImageOpacity=this.backgroundImageOpacity,l.backgroundImageStretch=this.backgroundImageStretch):f&&f(l)}}),function(f){var i=f.fabric||(f.fabric={}),l=i.util.object.extend,c=i.util.object.clone,e=i.util.toFixed,n=i.util.string.capitalize,t=i.util.degreesToRadians,s=!i.isLikelyNode,h=2;i.Object||(i.Object=i.util.createClass(i.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:s,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(r){r&&this.setOptions(r)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=i.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(r){var d=i.perfLimitSizeTotal,m=r.width,y=r.height,b=i.maxCacheSideLimit,T=i.minCacheSideLimit;if(m<=b&&y<=b&&m*y<=d)return m<T&&(r.width=T),y<T&&(r.height=T),r;var M=m/y,X=i.util.limitDimsByArea(M,d),z=i.util.capValue,st=z(T,X.x,b),ft=z(T,X.y,b);return m>st&&(r.zoomX/=m/st,r.width=st,r.capped=!0),y>ft&&(r.zoomY/=y/ft,r.height=ft,r.capped=!0),r},_getCacheCanvasDimensions:function(){var r=this.getTotalObjectScaling(),d=this._getTransformedDimensions(0,0),m=d.x*r.scaleX/this.scaleX,y=d.y*r.scaleY/this.scaleY;return{width:m+h,height:y+h,zoomX:r.scaleX,zoomY:r.scaleY,x:m,y}},_updateCacheCanvas:function(){var r=this.canvas;if(this.noScaleCache&&r&&r._currentTransform){var d=r._currentTransform.target,m=r._currentTransform.action;if(this===d&&m.slice&&m.slice(0,5)==="scale")return!1}var y=this._cacheCanvas,b=this._limitCacheSize(this._getCacheCanvasDimensions()),T=i.minCacheSideLimit,M=b.width,X=b.height,z,st,ft=b.zoomX,vt=b.zoomY,xt=M!==this.cacheWidth||X!==this.cacheHeight,St=this.zoomX!==ft||this.zoomY!==vt,_t=xt||St,ot=0,pt=0,wt=!1;if(xt){var bt=this._cacheCanvas.width,k=this._cacheCanvas.height,U=M>bt||X>k,N=(M<bt*.9||X<k*.9)&&bt>T&&k>T;wt=U||N,U&&!b.capped&&(M>T||X>T)&&(ot=M*.1,pt=X*.1)}return this instanceof i.Text&&this.path&&(_t=!0,wt=!0,ot+=this.getHeightOfLine(0)*this.zoomX,pt+=this.getHeightOfLine(0)*this.zoomY),_t?(wt?(y.width=Math.ceil(M+ot),y.height=Math.ceil(X+pt)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,y.width,y.height)),z=b.x/2,st=b.y/2,this.cacheTranslationX=Math.round(y.width/2-z)+z,this.cacheTranslationY=Math.round(y.height/2-st)+st,this.cacheWidth=M,this.cacheHeight=X,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(ft,vt),this.zoomX=ft,this.zoomY=vt,!0):!1},setOptions:function(r){this._setOptions(r),this._initGradient(r.fill,"fill"),this._initGradient(r.stroke,"stroke"),this._initPattern(r.fill,"fill"),this._initPattern(r.stroke,"stroke")},transform:function(r){var d=this.group&&!this.group._transformDone||this.group&&this.canvas&&r===this.canvas.contextTop,m=this.calcTransformMatrix(!d);r.transform(m[0],m[1],m[2],m[3],m[4],m[5])},toObject:function(r){var d=i.Object.NUM_FRACTION_DIGITS,m={type:this.type,version:i.version,originX:this.originX,originY:this.originY,left:e(this.left,d),top:e(this.top,d),width:e(this.width,d),height:e(this.height,d),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:e(this.strokeWidth,d),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:e(this.strokeMiterLimit,d),scaleX:e(this.scaleX,d),scaleY:e(this.scaleY,d),angle:e(this.angle,d),flipX:this.flipX,flipY:this.flipY,opacity:e(this.opacity,d),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:e(this.skewX,d),skewY:e(this.skewY,d)};return this.clipPath&&!this.clipPath.excludeFromExport&&(m.clipPath=this.clipPath.toObject(r),m.clipPath.inverted=this.clipPath.inverted,m.clipPath.absolutePositioned=this.clipPath.absolutePositioned),i.util.populateWithProperties(this,m,r),this.includeDefaultValues||(m=this._removeDefaultValues(m)),m},toDatalessObject:function(r){return this.toObject(r)},_removeDefaultValues:function(r){var d=i.util.getKlass(r.type).prototype,m=d.stateProperties;return m.forEach(function(y){y==="left"||y==="top"||(r[y]===d[y]&&delete r[y],Array.isArray(r[y])&&Array.isArray(d[y])&&r[y].length===0&&d[y].length===0&&delete r[y])}),r},toString:function(){return"#<fabric."+n(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var r=i.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(r.scaleX),scaleY:Math.abs(r.scaleY)}},getTotalObjectScaling:function(){var r=this.getObjectScaling(),d=r.scaleX,m=r.scaleY;if(this.canvas){var y=this.canvas.getZoom(),b=this.canvas.getRetinaScaling();d*=y*b,m*=y*b}return{scaleX:d,scaleY:m}},getObjectOpacity:function(){var r=this.opacity;return this.group&&(r*=this.group.getObjectOpacity()),r},_set:function(r,d){var m=r==="scaleX"||r==="scaleY",y=this[r]!==d,b=!1;return m&&(d=this._constrainScale(d)),r==="scaleX"&&d<0?(this.flipX=!this.flipX,d*=-1):r==="scaleY"&&d<0?(this.flipY=!this.flipY,d*=-1):r==="shadow"&&d&&!(d instanceof i.Shadow)?d=new i.Shadow(d):r==="dirty"&&this.group&&this.group.set("dirty",d),this[r]=d,y&&(b=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(r)>-1?(this.dirty=!0,b&&this.group.set("dirty",!0)):b&&this.stateProperties.indexOf(r)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:i.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(r){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(r.save(),this._setupCompositeOperation(r),this.drawSelectionBackground(r),this.transform(r),this._setOpacity(r),this._setShadow(r,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(r)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(r),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),r.restore())},renderCache:function(r){r=r||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,r.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(r,d){if(r.save(),d.inverted?r.globalCompositeOperation="destination-out":r.globalCompositeOperation="destination-in",d.absolutePositioned){var m=i.util.invertTransform(this.calcTransformMatrix());r.transform(m[0],m[1],m[2],m[3],m[4],m[5])}d.transform(r),r.scale(1/d.zoomX,1/d.zoomY),r.drawImage(d._cacheCanvas,-d.cacheTranslationX,-d.cacheTranslationY),r.restore()},drawObject:function(r,d){var m=this.fill,y=this.stroke;d?(this.fill="black",this.stroke="",this._setClippingProperties(r)):this._renderBackground(r),this._render(r),this._drawClipPath(r,this.clipPath),this.fill=m,this.stroke=y},_drawClipPath:function(r,d){d&&(d.canvas=this.canvas,d.shouldCache(),d._transformDone=!0,d.renderCache({forClipping:!0}),this.drawClipPathOnCache(r,d))},drawCacheOnCanvas:function(r){r.scale(1/this.zoomX,1/this.zoomY),r.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(r){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!r&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!r){var d=this.cacheWidth/this.zoomX,m=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-d/2,-m/2,d,m)}return!0}return!1},_renderBackground:function(r){if(this.backgroundColor){var d=this._getNonTransformedDimensions();r.fillStyle=this.backgroundColor,r.fillRect(-d.x/2,-d.y/2,d.x,d.y),this._removeShadow(r)}},_setOpacity:function(r){this.group&&!this.group._transformDone?r.globalAlpha=this.getObjectOpacity():r.globalAlpha*=this.opacity},_setStrokeStyles:function(r,d){var m=d.stroke;m&&(r.lineWidth=d.strokeWidth,r.lineCap=d.strokeLineCap,r.lineDashOffset=d.strokeDashOffset,r.lineJoin=d.strokeLineJoin,r.miterLimit=d.strokeMiterLimit,m.toLive?m.gradientUnits==="percentage"||m.gradientTransform||m.patternTransform?this._applyPatternForTransformedGradient(r,m):(r.strokeStyle=m.toLive(r,this),this._applyPatternGradientTransform(r,m)):r.strokeStyle=d.stroke)},_setFillStyles:function(r,d){var m=d.fill;m&&(m.toLive?(r.fillStyle=m.toLive(r,this),this._applyPatternGradientTransform(r,d.fill)):r.fillStyle=m)},_setClippingProperties:function(r){r.globalAlpha=1,r.strokeStyle="transparent",r.fillStyle="#000000"},_setLineDash:function(r,d){!d||d.length===0||(1&d.length&&d.push.apply(d,d),r.setLineDash(d))},_renderControls:function(r,d){var m=this.getViewportTransform(),y=this.calcTransformMatrix(),b,T,M;d=d||{},T=typeof d.hasBorders<"u"?d.hasBorders:this.hasBorders,M=typeof d.hasControls<"u"?d.hasControls:this.hasControls,y=i.util.multiplyTransformMatrices(m,y),b=i.util.qrDecompose(y),r.save(),r.translate(b.translateX,b.translateY),r.lineWidth=1*this.borderScaleFactor,this.group||(r.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(b.angle-=180),r.rotate(t(this.group?b.angle:this.angle)),d.forActiveSelection||this.group?T&&this.drawBordersInGroup(r,b,d):T&&this.drawBorders(r,d),M&&this.drawControls(r,d),r.restore()},_setShadow:function(r){if(this.shadow){var d=this.shadow,m=this.canvas,y,b=m&&m.viewportTransform[0]||1,T=m&&m.viewportTransform[3]||1;d.nonScaling?y={scaleX:1,scaleY:1}:y=this.getObjectScaling(),m&&m._isRetinaScaling()&&(b*=i.devicePixelRatio,T*=i.devicePixelRatio),r.shadowColor=d.color,r.shadowBlur=d.blur*i.browserShadowBlurConstant*(b+T)*(y.scaleX+y.scaleY)/4,r.shadowOffsetX=d.offsetX*b*y.scaleX,r.shadowOffsetY=d.offsetY*T*y.scaleY}},_removeShadow:function(r){this.shadow&&(r.shadowColor="",r.shadowBlur=r.shadowOffsetX=r.shadowOffsetY=0)},_applyPatternGradientTransform:function(r,d){if(!d||!d.toLive)return{offsetX:0,offsetY:0};var m=d.gradientTransform||d.patternTransform,y=-this.width/2+d.offsetX||0,b=-this.height/2+d.offsetY||0;return d.gradientUnits==="percentage"?r.transform(this.width,0,0,this.height,y,b):r.transform(1,0,0,1,y,b),m&&r.transform(m[0],m[1],m[2],m[3],m[4],m[5]),{offsetX:y,offsetY:b}},_renderPaintInOrder:function(r){this.paintFirst==="stroke"?(this._renderStroke(r),this._renderFill(r)):(this._renderFill(r),this._renderStroke(r))},_render:function(){},_renderFill:function(r){this.fill&&(r.save(),this._setFillStyles(r,this),this.fillRule==="evenodd"?r.fill("evenodd"):r.fill(),r.restore())},_renderStroke:function(r){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(r),r.save(),this.strokeUniform&&this.group){var d=this.getObjectScaling();r.scale(1/d.scaleX,1/d.scaleY)}else this.strokeUniform&&r.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(r,this.strokeDashArray),this._setStrokeStyles(r,this),r.stroke(),r.restore()}},_applyPatternForTransformedGradient:function(r,d){var m=this._limitCacheSize(this._getCacheCanvasDimensions()),y=i.util.createCanvasElement(),b,T=this.canvas.getRetinaScaling(),M=m.x/this.scaleX/T,X=m.y/this.scaleY/T;y.width=M,y.height=X,b=y.getContext("2d"),b.beginPath(),b.moveTo(0,0),b.lineTo(M,0),b.lineTo(M,X),b.lineTo(0,X),b.closePath(),b.translate(M/2,X/2),b.scale(m.zoomX/this.scaleX/T,m.zoomY/this.scaleY/T),this._applyPatternGradientTransform(b,d),b.fillStyle=d.toLive(r),b.fill(),r.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),r.scale(T*this.scaleX/m.zoomX,T*this.scaleY/m.zoomY),r.strokeStyle=b.createPattern(y,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var r=i.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",r.scaleX),this.set("scaleY",r.scaleY),this.angle=r.angle,this.skewX=r.skewX,this.skewY=0}},_removeTransformMatrix:function(r){var d=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),d=i.util.transformPoint(d,this.transformMatrix)),this.transformMatrix=null,r&&(this.scaleX*=r.scaleX,this.scaleY*=r.scaleY,this.cropX=r.cropX,this.cropY=r.cropY,d.x+=r.offsetLeft,d.y+=r.offsetTop,this.width=r.width,this.height=r.height),this.setPositionByOrigin(d,"center","center")},clone:function(r,d){var m=this.toObject(d);this.constructor.fromObject?this.constructor.fromObject(m,r):i.Object._fromObject("Object",m,r)},cloneAsImage:function(r,d){var m=this.toCanvasElement(d);return r&&r(new i.Image(m)),this},toCanvasElement:function(r){r||(r={});var d=i.util,m=d.saveObjectTransform(this),y=this.group,b=this.shadow,T=Math.abs,M=(r.multiplier||1)*(r.enableRetinaScaling?i.devicePixelRatio:1);delete this.group,r.withoutTransform&&d.resetObjectTransform(this),r.withoutShadow&&(this.shadow=null);var X=i.util.createCanvasElement(),z=this.getBoundingRect(!0,!0),st=this.shadow,ft,vt={x:0,y:0},xt,St,_t;st&&(xt=st.blur,st.nonScaling?ft={scaleX:1,scaleY:1}:ft=this.getObjectScaling(),vt.x=2*Math.round(T(st.offsetX)+xt)*T(ft.scaleX),vt.y=2*Math.round(T(st.offsetY)+xt)*T(ft.scaleY)),St=z.width+vt.x,_t=z.height+vt.y,X.width=Math.ceil(St),X.height=Math.ceil(_t);var ot=new i.StaticCanvas(X,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});r.format==="jpeg"&&(ot.backgroundColor="#fff"),this.setPositionByOrigin(new i.Point(ot.width/2,ot.height/2),"center","center");var pt=this.canvas;ot.add(this);var wt=ot.toCanvasElement(M||1,r);return this.shadow=b,this.set("canvas",pt),y&&(this.group=y),this.set(m).setCoords(),ot._objects=[],ot.dispose(),ot=null,wt},toDataURL:function(r){return r||(r={}),i.util.toDataURL(this.toCanvasElement(r),r.format||"png",r.quality||1)},isType:function(r){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===r},complexity:function(){return 1},toJSON:function(r){return this.toObject(r)},rotate:function(r){var d=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return d&&this._setOriginToCenter(),this.set("angle",r),d&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(r,d){d=d||this.canvas.getPointer(r);var m=new i.Point(d.x,d.y),y=this._getLeftTopCoords();return this.angle&&(m=i.util.rotatePoint(m,y,t(-this.angle))),{x:m.x-y.x,y:m.y-y.y}},_setupCompositeOperation:function(r){this.globalCompositeOperation&&(r.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){i.runningAnimations&&i.runningAnimations.cancelByTarget(this)}}),i.util.createAccessors&&i.util.createAccessors(i.Object),l(i.Object.prototype,i.Observable),i.Object.NUM_FRACTION_DIGITS=2,i.Object.ENLIVEN_PROPS=["clipPath"],i.Object._fromObject=function(r,d,m,y){var b=i[r];d=c(d,!0),i.util.enlivenPatterns([d.fill,d.stroke],function(T){typeof T[0]<"u"&&(d.fill=T[0]),typeof T[1]<"u"&&(d.stroke=T[1]),i.util.enlivenObjectEnlivables(d,d,function(){var M=y?new b(d[y],d):new b(d);m&&m(M)})})},i.Object.__uid=0)}(u),function(){var f=o.util.degreesToRadians,i={left:-.5,center:0,right:.5},l={top:-.5,center:0,bottom:.5};o.util.object.extend(o.Object.prototype,{translateToGivenOrigin:function(c,e,n,t,s){var h=c.x,r=c.y,d,m,y;return typeof e=="string"?e=i[e]:e-=.5,typeof t=="string"?t=i[t]:t-=.5,d=t-e,typeof n=="string"?n=l[n]:n-=.5,typeof s=="string"?s=l[s]:s-=.5,m=s-n,(d||m)&&(y=this._getTransformedDimensions(),h=c.x+d*y.x,r=c.y+m*y.y),new o.Point(h,r)},translateToCenterPoint:function(c,e,n){var t=this.translateToGivenOrigin(c,e,n,"center","center");return this.angle?o.util.rotatePoint(t,c,f(this.angle)):t},translateToOriginPoint:function(c,e,n){var t=this.translateToGivenOrigin(c,"center","center",e,n);return this.angle?o.util.rotatePoint(t,c,f(this.angle)):t},getCenterPoint:function(){var c=new o.Point(this.left,this.top);return this.translateToCenterPoint(c,this.originX,this.originY)},getPointByOrigin:function(c,e){var n=this.getCenterPoint();return this.translateToOriginPoint(n,c,e)},toLocalPoint:function(c,e,n){var t=this.getCenterPoint(),s,h;return typeof e<"u"&&typeof n<"u"?s=this.translateToGivenOrigin(t,"center","center",e,n):s=new o.Point(this.left,this.top),h=new o.Point(c.x,c.y),this.angle&&(h=o.util.rotatePoint(h,t,-f(this.angle))),h.subtractEquals(s)},setPositionByOrigin:function(c,e,n){var t=this.translateToCenterPoint(c,e,n),s=this.translateToOriginPoint(t,this.originX,this.originY);this.set("left",s.x),this.set("top",s.y)},adjustPosition:function(c){var e=f(this.angle),n=this.getScaledWidth(),t=o.util.cos(e)*n,s=o.util.sin(e)*n,h,r;typeof this.originX=="string"?h=i[this.originX]:h=this.originX-.5,typeof c=="string"?r=i[c]:r=c-.5,this.left+=t*(r-h),this.top+=s*(r-h),this.setCoords(),this.originX=c},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var c=this.getCenterPoint();this.originX="center",this.originY="center",this.left=c.x,this.top=c.y},_resetOrigin:function(){var c=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=c.x,this.top=c.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function f(n){return[new o.Point(n.tl.x,n.tl.y),new o.Point(n.tr.x,n.tr.y),new o.Point(n.br.x,n.br.y),new o.Point(n.bl.x,n.bl.y)]}var i=o.util,l=i.degreesToRadians,c=i.multiplyTransformMatrices,e=i.transformPoint;i.object.extend(o.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(n,t){return t?n?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),n?this.aCoords:this.lineCoords)},getCoords:function(n,t){return f(this._getCoords(n,t))},intersectsWithRect:function(n,t,s,h){var r=this.getCoords(s,h),d=o.Intersection.intersectPolygonRectangle(r,n,t);return d.status==="Intersection"},intersectsWithObject:function(n,t,s){var h=o.Intersection.intersectPolygonPolygon(this.getCoords(t,s),n.getCoords(t,s));return h.status==="Intersection"||n.isContainedWithinObject(this,t,s)||this.isContainedWithinObject(n,t,s)},isContainedWithinObject:function(n,t,s){for(var h=this.getCoords(t,s),r=t?n.aCoords:n.lineCoords,d=0,m=n._getImageLines(r);d<4;d++)if(!n.containsPoint(h[d],m))return!1;return!0},isContainedWithinRect:function(n,t,s,h){var r=this.getBoundingRect(s,h);return r.left>=n.x&&r.left+r.width<=t.x&&r.top>=n.y&&r.top+r.height<=t.y},containsPoint:function(n,d,s,h){var r=this._getCoords(s,h),d=d||this._getImageLines(r),m=this._findCrossPoints(n,d);return m!==0&&m%2===1},isOnScreen:function(n){if(!this.canvas)return!1;var t=this.canvas.vptCoords.tl,s=this.canvas.vptCoords.br,h=this.getCoords(!0,n);return h.some(function(r){return r.x<=s.x&&r.x>=t.x&&r.y<=s.y&&r.y>=t.y})||this.intersectsWithRect(t,s,!0,n)?!0:this._containsCenterOfCanvas(t,s,n)},_containsCenterOfCanvas:function(n,t,s){var h={x:(n.x+t.x)/2,y:(n.y+t.y)/2};return!!this.containsPoint(h,null,!0,s)},isPartiallyOnScreen:function(n){if(!this.canvas)return!1;var t=this.canvas.vptCoords.tl,s=this.canvas.vptCoords.br;if(this.intersectsWithRect(t,s,!0,n))return!0;var h=this.getCoords(!0,n).every(function(r){return(r.x>=s.x||r.x<=t.x)&&(r.y>=s.y||r.y<=t.y)});return h&&this._containsCenterOfCanvas(t,s,n)},_getImageLines:function(n){var t={topline:{o:n.tl,d:n.tr},rightline:{o:n.tr,d:n.br},bottomline:{o:n.br,d:n.bl},leftline:{o:n.bl,d:n.tl}};return t},_findCrossPoints:function(n,t){var s,h,r,d,m,y=0,b;for(var T in t)if(b=t[T],!(b.o.y<n.y&&b.d.y<n.y)&&!(b.o.y>=n.y&&b.d.y>=n.y)&&(b.o.x===b.d.x&&b.o.x>=n.x?m=b.o.x:(s=0,h=(b.d.y-b.o.y)/(b.d.x-b.o.x),r=n.y-s*n.x,d=b.o.y-h*b.o.x,m=-(r-d)/(s-h)),m>=n.x&&(y+=1),y===2))break;return y},getBoundingRect:function(n,t){var s=this.getCoords(n,t);return i.makeBoundingBoxFromPoints(s)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(n){return Math.abs(n)<this.minScaleLimit?n<0?-this.minScaleLimit:this.minScaleLimit:n===0?1e-4:n},scale:function(n){return this._set("scaleX",n),this._set("scaleY",n),this.setCoords()},scaleToWidth:function(n,t){var s=this.getBoundingRect(t).width/this.getScaledWidth();return this.scale(n/this.width/s)},scaleToHeight:function(n,t){var s=this.getBoundingRect(t).height/this.getScaledHeight();return this.scale(n/this.height/s)},calcLineCoords:function(){var n=this.getViewportTransform(),t=this.padding,s=l(this.angle),h=i.cos(s),r=i.sin(s),d=h*t,m=r*t,y=d+m,b=d-m,T=this.calcACoords(),M={tl:e(T.tl,n),tr:e(T.tr,n),bl:e(T.bl,n),br:e(T.br,n)};return t&&(M.tl.x-=b,M.tl.y-=y,M.tr.x+=y,M.tr.y-=b,M.bl.x-=y,M.bl.y+=b,M.br.x+=b,M.br.y+=y),M},calcOCoords:function(){var n=this._calcRotateMatrix(),t=this._calcTranslateMatrix(),s=this.getViewportTransform(),h=c(s,t),r=c(h,n),r=c(r,[1/s[0],0,0,1/s[3],0,0]),d=this._calculateCurrentDimensions(),m={};return this.forEachControl(function(y,b,T){m[b]=y.positionHandler(d,r,T)}),m},calcACoords:function(){var n=this._calcRotateMatrix(),t=this._calcTranslateMatrix(),s=c(t,n),h=this._getTransformedDimensions(),r=h.x/2,d=h.y/2;return{tl:e({x:-r,y:-d},s),tr:e({x:r,y:-d},s),bl:e({x:-r,y:d},s),br:e({x:r,y:d},s)}},setCoords:function(n){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),n?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return i.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var n=this.getCenterPoint();return[1,0,0,1,n.x,n.y]},transformMatrixKey:function(n){var t="_",s="";return!n&&this.group&&(s=this.group.transformMatrixKey(n)+t),s+this.top+t+this.left+t+this.scaleX+t+this.scaleY+t+this.skewX+t+this.skewY+t+this.angle+t+this.originX+t+this.originY+t+this.width+t+this.height+t+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(n){var t=this.calcOwnMatrix();if(n||!this.group)return t;var s=this.transformMatrixKey(n),h=this.matrixCache||(this.matrixCache={});return h.key===s?h.value:(this.group&&(t=c(this.group.calcTransformMatrix(!1),t)),h.key=s,h.value=t,t)},calcOwnMatrix:function(){var n=this.transformMatrixKey(!0),t=this.ownMatrixCache||(this.ownMatrixCache={});if(t.key===n)return t.value;var s=this._calcTranslateMatrix(),h={angle:this.angle,translateX:s[4],translateY:s[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return t.key=n,t.value=i.composeMatrix(h),t.value},_getNonTransformedDimensions:function(){var n=this.strokeWidth,t=this.width+n,s=this.height+n;return{x:t,y:s}},_getTransformedDimensions:function(n,t){typeof n>"u"&&(n=this.skewX),typeof t>"u"&&(t=this.skewY);var s,h,r,d=n===0&&t===0;if(this.strokeUniform?(h=this.width,r=this.height):(s=this._getNonTransformedDimensions(),h=s.x,r=s.y),d)return this._finalizeDimensions(h*this.scaleX,r*this.scaleY);var m=i.sizeAfterTransform(h,r,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:n,skewY:t});return this._finalizeDimensions(m.x,m.y)},_finalizeDimensions:function(n,t){return this.strokeUniform?{x:n+this.strokeWidth,y:t+this.strokeWidth}:{x:n,y:t}},_calculateCurrentDimensions:function(){var n=this.getViewportTransform(),t=this._getTransformedDimensions(),s=e(t,n,!0);return s.scalarAdd(2*this.padding)}})}(),o.util.object.extend(o.Object.prototype,{sendToBack:function(){return this.group?o.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?o.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(f){return this.group?o.StaticCanvas.prototype.sendBackwards.call(this.group,this,f):this.canvas&&this.canvas.sendBackwards(this,f),this},bringForward:function(f){return this.group?o.StaticCanvas.prototype.bringForward.call(this.group,this,f):this.canvas&&this.canvas.bringForward(this,f),this},moveTo:function(f){return this.group&&this.group.type!=="activeSelection"?o.StaticCanvas.prototype.moveTo.call(this.group,this,f):this.canvas&&this.canvas.moveTo(this,f),this}}),function(){function f(l,c){if(c){if(c.toLive)return l+": url(#SVGID_"+c.id+"); ";var e=new o.Color(c),n=l+": "+e.toRgb()+"; ",t=e.getAlpha();return t!==1&&(n+=l+"-opacity: "+t.toString()+"; "),n}else return l+": none; "}var i=o.util.toFixed;o.util.object.extend(o.Object.prototype,{getSvgStyles:function(l){var c=this.fillRule?this.fillRule:"nonzero",e=this.strokeWidth?this.strokeWidth:"0",n=this.strokeDashArray?this.strokeDashArray.join(" "):"none",t=this.strokeDashOffset?this.strokeDashOffset:"0",s=this.strokeLineCap?this.strokeLineCap:"butt",h=this.strokeLineJoin?this.strokeLineJoin:"miter",r=this.strokeMiterLimit?this.strokeMiterLimit:"4",d=typeof this.opacity<"u"?this.opacity:"1",m=this.visible?"":" visibility: hidden;",y=l?"":this.getSvgFilter(),b=f("fill",this.fill),T=f("stroke",this.stroke);return[T,"stroke-width: ",e,"; ","stroke-dasharray: ",n,"; ","stroke-linecap: ",s,"; ","stroke-dashoffset: ",t,"; ","stroke-linejoin: ",h,"; ","stroke-miterlimit: ",r,"; ",b,"fill-rule: ",c,"; ","opacity: ",d,";",y,m].join("")},getSvgSpanStyles:function(l,c){var e="; ",t=l.fontFamily?"font-family: "+(l.fontFamily.indexOf("'")===-1&&l.fontFamily.indexOf('"')===-1?"'"+l.fontFamily+"'":l.fontFamily)+e:"",n=l.strokeWidth?"stroke-width: "+l.strokeWidth+e:"",t=t,s=l.fontSize?"font-size: "+l.fontSize+"px"+e:"",h=l.fontStyle?"font-style: "+l.fontStyle+e:"",r=l.fontWeight?"font-weight: "+l.fontWeight+e:"",d=l.fill?f("fill",l.fill):"",m=l.stroke?f("stroke",l.stroke):"",y=this.getSvgTextDecoration(l),b=l.deltaY?"baseline-shift: "+-l.deltaY+"; ":"";return y&&(y="text-decoration: "+y+e),[m,n,t,s,h,r,y,d,b,c?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(l){return["overline","underline","line-through"].filter(function(c){return l[c.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(l,c){var e=l?this.calcTransformMatrix():this.calcOwnMatrix(),n='transform="'+o.util.matrixToSVG(e);return n+(c||"")+'" '},_setSVGBg:function(l){if(this.backgroundColor){var c=o.Object.NUM_FRACTION_DIGITS;l.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',i(-this.width/2,c),'" y="',i(-this.height/2,c),'" width="',i(this.width,c),'" height="',i(this.height,c),`"></rect>
`)}},toSVG:function(l){return this._createBaseSVGMarkup(this._toSVG(l),{reviver:l})},toClipPathSVG:function(l){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(l),{reviver:l})},_createBaseClipPathSVGMarkup:function(l,c){c=c||{};var e=c.reviver,n=c.additionalTransform||"",t=[this.getSvgTransform(!0,n),this.getSvgCommons()].join(""),s=l.indexOf("COMMON_PARTS");return l[s]=t,e?e(l.join("")):l.join("")},_createBaseSVGMarkup:function(l,c){c=c||{};var e=c.noStyle,n=c.reviver,t=e?"":'style="'+this.getSvgStyles()+'" ',s=c.withShadow?'style="'+this.getSvgFilter()+'" ':"",h=this.clipPath,r=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",d=h&&h.absolutePositioned,m=this.stroke,y=this.fill,b=this.shadow,T,M=[],X,z=l.indexOf("COMMON_PARTS"),st=c.additionalTransform;return h&&(h.clipPathId="CLIPPATH_"+o.Object.__uid++,X='<clipPath id="'+h.clipPathId+`" >
`+h.toClipPathSVG(n)+`</clipPath>
`),d&&M.push("<g ",s,this.getSvgCommons(),` >
`),M.push("<g ",this.getSvgTransform(!1),d?"":s+this.getSvgCommons(),` >
`),T=[t,r,e?"":this.addPaintOrder()," ",st?'transform="'+st+'" ':""].join(""),l[z]=T,y&&y.toLive&&M.push(y.toSVG(this)),m&&m.toLive&&M.push(m.toSVG(this)),b&&M.push(b.toSVG(this)),h&&M.push(X),M.push(l.join("")),M.push(`</g>
`),d&&M.push(`</g>
`),n?n(M.join("")):M.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var f=o.util.object.extend,i="stateProperties";function l(e,n,t){var s={},h=!0;t.forEach(function(r){s[r]=e[r]}),f(e[n],s,h)}function c(e,n,t){if(e===n)return!0;if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(var s=0,h=e.length;s<h;s++)if(!c(e[s],n[s]))return!1;return!0}else if(e&&typeof e=="object"){var r=Object.keys(e),d;if(!n||typeof n!="object"||!t&&r.length!==Object.keys(n).length)return!1;for(var s=0,h=r.length;s<h;s++)if(d=r[s],!(d==="canvas"||d==="group")&&!c(e[d],n[d]))return!1;return!0}}o.util.object.extend(o.Object.prototype,{hasStateChanged:function(e){e=e||i;var n="_"+e;return Object.keys(this[n]).length<this[e].length?!0:!c(this[n],this,!0)},saveState:function(e){var n=e&&e.propertySet||i,t="_"+n;return this[t]?(l(this,t,this[n]),e&&e.stateProperties&&l(this,t,e.stateProperties),this):this.setupState(e)},setupState:function(e){e=e||{};var n=e.propertySet||i;return e.propertySet=n,this["_"+n]={},this.saveState(e),this}})}(),function(){var f=o.util.degreesToRadians;o.util.object.extend(o.Object.prototype,{_findTargetCorner:function(i,l){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var c=i.x,e=i.y,n,t,s=Object.keys(this.oCoords),h=s.length-1,r;for(this.__corner=0;h>=0;h--)if(r=s[h],!!this.isControlVisible(r)&&(t=this._getImageLines(l?this.oCoords[r].touchCorner:this.oCoords[r].corner),n=this._findCrossPoints({x:c,y:e},t),n!==0&&n%2===1))return this.__corner=r,r;return!1},forEachControl:function(i){for(var l in this.controls)i(this.controls[l],l,this)},_setCornerCoords:function(){var i=this.oCoords;for(var l in i){var c=this.controls[l];i[l].corner=c.calcCornerCoords(this.angle,this.cornerSize,i[l].x,i[l].y,!1),i[l].touchCorner=c.calcCornerCoords(this.angle,this.touchCornerSize,i[l].x,i[l].y,!0)}},drawSelectionBackground:function(i){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;i.save();var l=this.getCenterPoint(),c=this._calculateCurrentDimensions(),e=this.canvas.viewportTransform;return i.translate(l.x,l.y),i.scale(1/e[0],1/e[3]),i.rotate(f(this.angle)),i.fillStyle=this.selectionBackgroundColor,i.fillRect(-c.x/2,-c.y/2,c.x,c.y),i.restore(),this},drawBorders:function(i,l){l=l||{};var c=this._calculateCurrentDimensions(),e=this.borderScaleFactor,n=c.x+e,t=c.y+e,s=typeof l.hasControls<"u"?l.hasControls:this.hasControls,h=!1;return i.save(),i.strokeStyle=l.borderColor||this.borderColor,this._setLineDash(i,l.borderDashArray||this.borderDashArray),i.strokeRect(-n/2,-t/2,n,t),s&&(i.beginPath(),this.forEachControl(function(r,d,m){r.withConnection&&r.getVisibility(m,d)&&(h=!0,i.moveTo(r.x*n,r.y*t),i.lineTo(r.x*n+r.offsetX,r.y*t+r.offsetY))}),h&&i.stroke()),i.restore(),this},drawBordersInGroup:function(i,l,c){c=c||{};var e=o.util.sizeAfterTransform(this.width,this.height,l),n=this.strokeWidth,t=this.strokeUniform,s=this.borderScaleFactor,h=e.x+n*(t?this.canvas.getZoom():l.scaleX)+s,r=e.y+n*(t?this.canvas.getZoom():l.scaleY)+s;return i.save(),this._setLineDash(i,c.borderDashArray||this.borderDashArray),i.strokeStyle=c.borderColor||this.borderColor,i.strokeRect(-h/2,-r/2,h,r),i.restore(),this},drawControls:function(i,l){l=l||{},i.save();var c=this.canvas.getRetinaScaling(),e,n;return i.setTransform(c,0,0,c,0,0),i.strokeStyle=i.fillStyle=l.cornerColor||this.cornerColor,this.transparentCorners||(i.strokeStyle=l.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(i,l.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(e=this.group.calcTransformMatrix()),this.forEachControl(function(t,s,h){n=h.oCoords[s],t.getVisibility(h,s)&&(e&&(n=o.util.transformPoint(n,e)),t.render(i,n.x,n.y,l,h))}),i.restore(),this},isControlVisible:function(i){return this.controls[i]&&this.controls[i].getVisibility(this,i)},setControlVisible:function(i,l){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[i]=l,this},setControlsVisibility:function(i){i||(i={});for(var l in i)this.setControlVisible(l,i[l]);return this},onDeselect:function(){},onSelect:function(){}})}(),o.util.object.extend(o.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(f,i){i=i||{};var l=function(){},c=i.onComplete||l,e=i.onChange||l,n=this;return o.util.animate({target:this,startValue:f.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(t){f.set("left",t),n.requestRenderAll(),e()},onComplete:function(){f.setCoords(),c()}})},fxCenterObjectV:function(f,i){i=i||{};var l=function(){},c=i.onComplete||l,e=i.onChange||l,n=this;return o.util.animate({target:this,startValue:f.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(t){f.set("top",t),n.requestRenderAll(),e()},onComplete:function(){f.setCoords(),c()}})},fxRemove:function(f,i){i=i||{};var l=function(){},c=i.onComplete||l,e=i.onChange||l,n=this;return o.util.animate({target:this,startValue:f.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(t){f.set("opacity",t),n.requestRenderAll(),e()},onComplete:function(){n.remove(f),c()}})}}),o.util.object.extend(o.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var f=[],i,l,c=[];for(i in arguments[0])f.push(i);for(var e=0,n=f.length;e<n;e++)i=f[e],l=e!==n-1,c.push(this._animate(i,arguments[0][i],arguments[1],l));return c}else return this._animate.apply(this,arguments)},_animate:function(f,i,l,c){var e=this,n;i=i.toString(),l?l=o.util.object.clone(l):l={},~f.indexOf(".")&&(n=f.split("."));var t=e.colorProperties.indexOf(f)>-1||n&&e.colorProperties.indexOf(n[1])>-1,s=n?this.get(n[0])[n[1]]:this.get(f);"from"in l||(l.from=s),t||(~i.indexOf("=")?i=s+parseFloat(i.replace("=","")):i=parseFloat(i));var h={target:this,startValue:l.from,endValue:i,byValue:l.by,easing:l.easing,duration:l.duration,abort:l.abort&&function(r,d,m){return l.abort.call(e,r,d,m)},onChange:function(r,d,m){n?e[n[0]][n[1]]=r:e.set(f,r),!c&&l.onChange&&l.onChange(r,d,m)},onComplete:function(r,d,m){c||(e.setCoords(),l.onComplete&&l.onComplete(r,d,m))}};return t?o.util.animateColor(h.startValue,h.endValue,h.duration,h):o.util.animate(h)}}),function(f){var i=f.fabric||(f.fabric={}),l=i.util.object.extend,c=i.util.object.clone,e={x1:1,x2:1,y1:1,y2:1};if(i.Line){i.warn("fabric.Line is already defined");return}i.Line=i.util.createClass(i.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:i.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(t,s){t||(t=[0,0,0,0]),this.callSuper("initialize",s),this.set("x1",t[0]),this.set("y1",t[1]),this.set("x2",t[2]),this.set("y2",t[3]),this._setWidthHeight(s)},_setWidthHeight:function(t){t||(t={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in t?t.left:this._getLeftToOriginX(),this.top="top"in t?t.top:this._getTopToOriginY()},_set:function(t,s){return this.callSuper("_set",t,s),typeof e[t]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:n({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:n({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(t){t.beginPath();var s=this.calcLinePoints();t.moveTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineWidth=this.strokeWidth;var h=t.strokeStyle;t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=h},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(t){return l(this.callSuper("toObject",t),this.calcLinePoints())},_getNonTransformedDimensions:function(){var t=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(t.y-=this.strokeWidth),this.height===0&&(t.x-=this.strokeWidth)),t},calcLinePoints:function(){var t=this.x1<=this.x2?-1:1,s=this.y1<=this.y2?-1:1,h=t*this.width*.5,r=s*this.height*.5,d=t*this.width*-.5,m=s*this.height*-.5;return{x1:h,x2:d,y1:r,y2:m}},_toSVG:function(){var t=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',t.x1,'" y1="',t.y1,'" x2="',t.x2,'" y2="',t.y2,`" />
`]}}),i.Line.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),i.Line.fromElement=function(t,s,h){h=h||{};var r=i.parseAttributes(t,i.Line.ATTRIBUTE_NAMES),d=[r.x1||0,r.y1||0,r.x2||0,r.y2||0];s(new i.Line(d,l(r,h)))},i.Line.fromObject=function(t,s){function h(d){delete d.points,s&&s(d)}var r=c(t,!0);r.points=[t.x1,t.y1,t.x2,t.y2],i.Object._fromObject("Line",r,h,"points")};function n(t,s){var h=t.origin,r=t.axis1,d=t.axis2,m=t.dimension,y=s.nearest,b=s.center,T=s.farthest;return function(){switch(this.get(h)){case y:return Math.min(this.get(r),this.get(d));case b:return Math.min(this.get(r),this.get(d))+.5*this.get(m);case T:return Math.max(this.get(r),this.get(d))}}}}(u),function(f){var i=f.fabric||(f.fabric={}),l=i.util.degreesToRadians;if(i.Circle){i.warn("fabric.Circle is already defined.");return}i.Circle=i.util.createClass(i.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:i.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(e,n){return this.callSuper("_set",e,n),e==="radius"&&this.setRadius(n),this},toObject:function(e){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(e))},_toSVG:function(){var e,n=0,t=0,s=(this.endAngle-this.startAngle)%360;if(s===0)e=["<circle ","COMMON_PARTS",'cx="'+n+'" cy="'+t+'" ','r="',this.radius,`" />
`];else{var h=l(this.startAngle),r=l(this.endAngle),d=this.radius,m=i.util.cos(h)*d,y=i.util.sin(h)*d,b=i.util.cos(r)*d,T=i.util.sin(r)*d,M=s>180?"1":"0";e=['<path d="M '+m+" "+y," A "+d+" "+d," 0 ",+M+" 1"," "+b+" "+T,'" ',"COMMON_PARTS",` />
`]}return e},_render:function(e){e.beginPath(),e.arc(0,0,this.radius,l(this.startAngle),l(this.endAngle),!1),this._renderPaintInOrder(e)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(e){return this.radius=e,this.set("width",e*2).set("height",e*2)}}),i.Circle.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),i.Circle.fromElement=function(e,n){var t=i.parseAttributes(e,i.Circle.ATTRIBUTE_NAMES);if(!c(t))throw new Error("value of `r` attribute is required and can not be negative");t.left=(t.left||0)-t.radius,t.top=(t.top||0)-t.radius,n(new i.Circle(t))};function c(e){return"radius"in e&&e.radius>=0}i.Circle.fromObject=function(e,n){i.Object._fromObject("Circle",e,n)}}(u),function(f){var i=f.fabric||(f.fabric={});if(i.Triangle){i.warn("fabric.Triangle is already defined");return}i.Triangle=i.util.createClass(i.Object,{type:"triangle",width:100,height:100,_render:function(l){var c=this.width/2,e=this.height/2;l.beginPath(),l.moveTo(-c,e),l.lineTo(0,-e),l.lineTo(c,e),l.closePath(),this._renderPaintInOrder(l)},_toSVG:function(){var l=this.width/2,c=this.height/2,e=[-l+" "+c,"0 "+-c,l+" "+c].join(",");return["<polygon ","COMMON_PARTS",'points="',e,'" />']}}),i.Triangle.fromObject=function(l,c){return i.Object._fromObject("Triangle",l,c)}}(u),function(f){var i=f.fabric||(f.fabric={}),l=Math.PI*2;if(i.Ellipse){i.warn("fabric.Ellipse is already defined.");return}i.Ellipse=i.util.createClass(i.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:i.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(c){this.callSuper("initialize",c),this.set("rx",c&&c.rx||0),this.set("ry",c&&c.ry||0)},_set:function(c,e){switch(this.callSuper("_set",c,e),c){case"rx":this.rx=e,this.set("width",e*2);break;case"ry":this.ry=e,this.set("height",e*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(c){return this.callSuper("toObject",["rx","ry"].concat(c))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(c){c.beginPath(),c.save(),c.transform(1,0,0,this.ry/this.rx,0,0),c.arc(0,0,this.rx,0,l,!1),c.restore(),this._renderPaintInOrder(c)}}),i.Ellipse.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),i.Ellipse.fromElement=function(c,e){var n=i.parseAttributes(c,i.Ellipse.ATTRIBUTE_NAMES);n.left=(n.left||0)-n.rx,n.top=(n.top||0)-n.ry,e(new i.Ellipse(n))},i.Ellipse.fromObject=function(c,e){i.Object._fromObject("Ellipse",c,e)}}(u),function(f){var i=f.fabric||(f.fabric={}),l=i.util.object.extend;if(i.Rect){i.warn("fabric.Rect is already defined");return}i.Rect=i.util.createClass(i.Object,{stateProperties:i.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:i.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(c){this.callSuper("initialize",c),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(c){var e=this.rx?Math.min(this.rx,this.width/2):0,n=this.ry?Math.min(this.ry,this.height/2):0,t=this.width,s=this.height,h=-this.width/2,r=-this.height/2,d=e!==0||n!==0,m=1-.5522847498;c.beginPath(),c.moveTo(h+e,r),c.lineTo(h+t-e,r),d&&c.bezierCurveTo(h+t-m*e,r,h+t,r+m*n,h+t,r+n),c.lineTo(h+t,r+s-n),d&&c.bezierCurveTo(h+t,r+s-m*n,h+t-m*e,r+s,h+t-e,r+s),c.lineTo(h+e,r+s),d&&c.bezierCurveTo(h+m*e,r+s,h,r+s-m*n,h,r+s-n),c.lineTo(h,r+n),d&&c.bezierCurveTo(h,r+m*n,h+m*e,r,h+e,r),c.closePath(),this._renderPaintInOrder(c)},toObject:function(c){return this.callSuper("toObject",["rx","ry"].concat(c))},_toSVG:function(){var c=-this.width/2,e=-this.height/2;return["<rect ","COMMON_PARTS",'x="',c,'" y="',e,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),i.Rect.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),i.Rect.fromElement=function(c,e,n){if(!c)return e(null);n=n||{};var t=i.parseAttributes(c,i.Rect.ATTRIBUTE_NAMES);t.left=t.left||0,t.top=t.top||0,t.height=t.height||0,t.width=t.width||0;var s=new i.Rect(l(n?i.util.object.clone(n):{},t));s.visible=s.visible&&s.width>0&&s.height>0,e(s)},i.Rect.fromObject=function(c,e){return i.Object._fromObject("Rect",c,e)}}(u),function(f){var i=f.fabric||(f.fabric={}),l=i.util.object.extend,c=i.util.array.min,e=i.util.array.max,n=i.util.toFixed,t=i.util.projectStrokeOnPoints;if(i.Polyline){i.warn("fabric.Polyline is already defined");return}i.Polyline=i.util.createClass(i.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:i.Object.prototype.cacheProperties.concat("points"),initialize:function(s,h){h=h||{},this.points=s||[],this.callSuper("initialize",h),this._setPositionDimensions(h)},_projectStrokeOnPoints:function(){return t(this.points,this,!0)},_setPositionDimensions:function(s){var h=this._calcDimensions(s),r,d=this.exactBoundingBox?this.strokeWidth:0;this.width=h.width-d,this.height=h.height-d,s.fromSVG||(r=this.translateToGivenOrigin({x:h.left-this.strokeWidth/2+d/2,y:h.top-this.strokeWidth/2+d/2},"left","top",this.originX,this.originY)),typeof s.left>"u"&&(this.left=s.fromSVG?h.left:r.x),typeof s.top>"u"&&(this.top=s.fromSVG?h.top:r.y),this.pathOffset={x:h.left+this.width/2+d/2,y:h.top+this.height/2+d/2}},_calcDimensions:function(){var s=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,h=c(s,"x")||0,r=c(s,"y")||0,d=e(s,"x")||0,m=e(s,"y")||0,y=d-h,b=m-r;return{left:h,top:r,width:y,height:b}},toObject:function(s){return l(this.callSuper("toObject",s),{points:this.points.concat()})},_toSVG:function(){for(var s=[],h=this.pathOffset.x,r=this.pathOffset.y,d=i.Object.NUM_FRACTION_DIGITS,m=0,y=this.points.length;m<y;m++)s.push(n(this.points[m].x-h,d),",",n(this.points[m].y-r,d)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',s.join(""),`" />
`]},commonRender:function(s){var h,r=this.points.length,d=this.pathOffset.x,m=this.pathOffset.y;if(!r||isNaN(this.points[r-1].y))return!1;s.beginPath(),s.moveTo(this.points[0].x-d,this.points[0].y-m);for(var y=0;y<r;y++)h=this.points[y],s.lineTo(h.x-d,h.y-m);return!0},_render:function(s){this.commonRender(s)&&this._renderPaintInOrder(s)},complexity:function(){return this.get("points").length}}),i.Polyline.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(),i.Polyline.fromElementGenerator=function(s){return function(h,r,d){if(!h)return r(null);d||(d={});var m=i.parsePointsAttribute(h.getAttribute("points")),y=i.parseAttributes(h,i[s].ATTRIBUTE_NAMES);y.fromSVG=!0,r(new i[s](m,l(y,d)))}},i.Polyline.fromElement=i.Polyline.fromElementGenerator("Polyline"),i.Polyline.fromObject=function(s,h){return i.Object._fromObject("Polyline",s,h,"points")}}(u),function(f){var i=f.fabric||(f.fabric={}),l=i.util.projectStrokeOnPoints;if(i.Polygon){i.warn("fabric.Polygon is already defined");return}i.Polygon=i.util.createClass(i.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return l(this.points,this)},_render:function(c){this.commonRender(c)&&(c.closePath(),this._renderPaintInOrder(c))}}),i.Polygon.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(),i.Polygon.fromElement=i.Polyline.fromElementGenerator("Polygon"),i.Polygon.fromObject=function(c,e){i.Object._fromObject("Polygon",c,e,"points")}}(u),function(f){var i=f.fabric||(f.fabric={}),l=i.util.array.min,c=i.util.array.max,e=i.util.object.extend,n=i.util.object.clone,t=i.util.toFixed;if(i.Path){i.warn("fabric.Path is already defined");return}i.Path=i.util.createClass(i.Object,{type:"path",path:null,cacheProperties:i.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:i.Object.prototype.stateProperties.concat("path"),initialize:function(s,h){h=n(h||{}),delete h.path,this.callSuper("initialize",h),this._setPath(s||[],h)},_setPath:function(s,h){this.path=i.util.makePathSimpler(Array.isArray(s)?s:i.util.parsePath(s)),i.Polyline.prototype._setPositionDimensions.call(this,h||{})},_renderPathCommands:function(s){var h,r=0,d=0,m=0,y=0,b=0,T=0,M=-this.pathOffset.x,X=-this.pathOffset.y;s.beginPath();for(var z=0,st=this.path.length;z<st;++z)switch(h=this.path[z],h[0]){case"L":m=h[1],y=h[2],s.lineTo(m+M,y+X);break;case"M":m=h[1],y=h[2],r=m,d=y,s.moveTo(m+M,y+X);break;case"C":m=h[5],y=h[6],b=h[3],T=h[4],s.bezierCurveTo(h[1]+M,h[2]+X,b+M,T+X,m+M,y+X);break;case"Q":s.quadraticCurveTo(h[1]+M,h[2]+X,h[3]+M,h[4]+X),m=h[3],y=h[4],b=h[1],T=h[2];break;case"z":case"Z":m=r,y=d,s.closePath();break}},_render:function(s){this._renderPathCommands(s),this._renderPaintInOrder(s)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(s){return e(this.callSuper("toObject",s),{path:this.path.map(function(h){return h.slice()})})},toDatalessObject:function(s){var h=this.toObject(["sourcePath"].concat(s));return h.sourcePath&&delete h.path,h},_toSVG:function(){var s=i.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',s,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var s=i.Object.NUM_FRACTION_DIGITS;return" translate("+t(-this.pathOffset.x,s)+", "+t(-this.pathOffset.y,s)+")"},toClipPathSVG:function(s){var h=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:s,additionalTransform:h})},toSVG:function(s){var h=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:s,additionalTransform:h})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var s=[],h=[],r,d=0,m=0,y=0,b=0,T,M=0,X=this.path.length;M<X;++M){switch(r=this.path[M],r[0]){case"L":y=r[1],b=r[2],T=[];break;case"M":y=r[1],b=r[2],d=y,m=b,T=[];break;case"C":T=i.util.getBoundsOfCurve(y,b,r[1],r[2],r[3],r[4],r[5],r[6]),y=r[5],b=r[6];break;case"Q":T=i.util.getBoundsOfCurve(y,b,r[1],r[2],r[1],r[2],r[3],r[4]),y=r[3],b=r[4];break;case"z":case"Z":y=d,b=m;break}T.forEach(function(_t){s.push(_t.x),h.push(_t.y)}),s.push(y),h.push(b)}var z=l(s)||0,st=l(h)||0,ft=c(s)||0,vt=c(h)||0,xt=ft-z,St=vt-st;return{left:z,top:st,width:xt,height:St}}}),i.Path.fromObject=function(s,h){if(typeof s.sourcePath=="string"){var r=s.sourcePath;i.loadSVGFromURL(r,function(d){var m=d[0];m.setOptions(s),s.clipPath?i.util.enlivenObjects([s.clipPath],function(y){m.clipPath=y[0],h&&h(m)}):h&&h(m)})}else i.Object._fromObject("Path",s,h,"path")},i.Path.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(["d"]),i.Path.fromElement=function(s,h,r){var d=i.parseAttributes(s,i.Path.ATTRIBUTE_NAMES);d.fromSVG=!0,h(new i.Path(d.d,e(d,r)))}}(u),function(f){var i=f.fabric||(f.fabric={}),l=i.util.array.min,c=i.util.array.max;i.Group||(i.Group=i.util.createClass(i.Object,i.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(e,n,t){n=n||{},this._objects=[],t&&this.callSuper("initialize",n),this._objects=e||[];for(var s=this._objects.length;s--;)this._objects[s].group=this;if(t)this._updateObjectsACoords();else{var h=n&&n.centerPoint;n.originX!==void 0&&(this.originX=n.originX),n.originY!==void 0&&(this.originY=n.originY),h||this._calcBounds(),this._updateObjectsCoords(h),delete n.centerPoint,this.callSuper("initialize",n)}this.setCoords()},_updateObjectsACoords:function(){for(var e=!0,n=this._objects.length;n--;)this._objects[n].setCoords(e)},_updateObjectsCoords:function(n){for(var n=n||this.getCenterPoint(),t=this._objects.length;t--;)this._updateObjectCoords(this._objects[t],n)},_updateObjectCoords:function(e,n){var t=e.left,s=e.top,h=!0;e.set({left:t-n.x,top:s-n.y}),e.group=this,e.setCoords(h)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(e){var n=!!this.group;return this._restoreObjectsState(),i.util.resetObjectTransform(this),e&&(n&&i.util.removeTransformFromObject(e,this.group.calcTransformMatrix()),this._objects.push(e),e.group=this,e._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,n?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(e){return this._restoreObjectsState(),i.util.resetObjectTransform(this),this.remove(e),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(e){this.dirty=!0,e.group=this,e._set("canvas",this.canvas)},_onObjectRemoved:function(e){this.dirty=!0,delete e.group},_set:function(e,n){var t=this._objects.length;if(this.useSetOnGroup)for(;t--;)this._objects[t].setOnGroup(e,n);if(e==="canvas")for(;t--;)this._objects[t]._set(e,n);i.Object.prototype._set.call(this,e,n)},toObject:function(e){var n=this.includeDefaultValues,t=this._objects.filter(function(h){return!h.excludeFromExport}).map(function(h){var r=h.includeDefaultValues;h.includeDefaultValues=n;var d=h.toObject(e);return h.includeDefaultValues=r,d}),s=i.Object.prototype.toObject.call(this,e);return s.objects=t,s},toDatalessObject:function(e){var n,t=this.sourcePath;if(t)n=t;else{var s=this.includeDefaultValues;n=this._objects.map(function(r){var d=r.includeDefaultValues;r.includeDefaultValues=s;var m=r.toDatalessObject(e);return r.includeDefaultValues=d,m})}var h=i.Object.prototype.toDatalessObject.call(this,e);return h.objects=n,h},render:function(e){this._transformDone=!0,this.callSuper("render",e),this._transformDone=!1},shouldCache:function(){var e=i.Object.prototype.shouldCache.call(this);if(e){for(var n=0,t=this._objects.length;n<t;n++)if(this._objects[n].willDrawShadow())return this.ownCaching=!1,!1}return e},willDrawShadow:function(){if(i.Object.prototype.willDrawShadow.call(this))return!0;for(var e=0,n=this._objects.length;e<n;e++)if(this._objects[e].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(e){for(var n=0,t=this._objects.length;n<t;n++)this._objects[n].render(e);this._drawClipPath(e,this.clipPath)},isCacheDirty:function(e){if(this.callSuper("isCacheDirty",e))return!0;if(!this.statefullCache)return!1;for(var n=0,t=this._objects.length;n<t;n++)if(this._objects[n].isCacheDirty(!0)){if(this._cacheCanvas){var s=this.cacheWidth/this.zoomX,h=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-s/2,-h/2,s,h)}return!0}return!1},_restoreObjectsState:function(){var e=this.calcOwnMatrix();return this._objects.forEach(function(n){i.util.addTransformToObject(n,e),delete n.group,n.setCoords()}),this},destroy:function(){return this._objects.forEach(function(e){e.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(e){e.dispose&&e.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var e=this._objects,n=this.canvas;this._objects=[];var t=this.toObject();delete t.objects;var s=new i.ActiveSelection([]);return s.set(t),s.type="activeSelection",n.remove(this),e.forEach(function(h){h.group=s,h.dirty=!0,n.add(h)}),s.canvas=n,s._objects=e,n._activeObject=s,s.setCoords(),s}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var e=!0;return this.forEachObject(function(n){n.setCoords(e)}),this},_calcBounds:function(e){for(var n=[],t=[],s,h,r,d=["tr","br","bl","tl"],m=0,y=this._objects.length,b,T=d.length;m<y;++m){for(s=this._objects[m],r=s.calcACoords(),b=0;b<T;b++)h=d[b],n.push(r[h].x),t.push(r[h].y);s.aCoords=r}this._getBounds(n,t,e)},_getBounds:function(e,n,t){var s=new i.Point(l(e),l(n)),h=new i.Point(c(e),c(n)),r=s.y||0,d=s.x||0,m=h.x-s.x||0,y=h.y-s.y||0;this.width=m,this.height=y,t||this.setPositionByOrigin({x:d,y:r},"left","top")},_toSVG:function(e){for(var n=["<g ","COMMON_PARTS",` >
`],t=0,s=this._objects.length;t<s;t++)n.push("		",this._objects[t].toSVG(e));return n.push(`</g>
`),n},getSvgStyles:function(){var e=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",n=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),n].join("")},toClipPathSVG:function(e){for(var n=[],t=0,s=this._objects.length;t<s;t++)n.push("	",this._objects[t].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(n,{reviver:e})}}),i.Group.fromObject=function(e,n){var t=e.objects,s=i.util.object.clone(e,!0);if(delete s.objects,typeof t=="string"){i.loadSVGFromURL(t,function(h){var r=i.util.groupSVGElements(h,e,t),d=s.clipPath;delete s.clipPath,r.set(s),d?i.util.enlivenObjects([d],function(m){r.clipPath=m[0],n&&n(r)}):n&&n(r)});return}i.util.enlivenObjects(t,function(h){i.util.enlivenObjectEnlivables(e,s,function(){n&&n(new i.Group(h,s,!0))})})})}(u),function(f){var i=f.fabric||(f.fabric={});i.ActiveSelection||(i.ActiveSelection=i.util.createClass(i.Group,{type:"activeSelection",initialize:function(l,c){c=c||{},this._objects=l||[];for(var e=this._objects.length;e--;)this._objects[e].group=this;c.originX&&(this.originX=c.originX),c.originY&&(this.originY=c.originY),this._calcBounds(),this._updateObjectsCoords(),i.Object.prototype.initialize.call(this,c),this.setCoords()},toGroup:function(){var l=this._objects.concat();this._objects=[];var c=i.Object.prototype.toObject.call(this),e=new i.Group([]);if(delete c.type,e.set(c),l.forEach(function(t){t.canvas.remove(t),t.group=e}),e._objects=l,!this.canvas)return e;var n=this.canvas;return n.add(e),n._activeObject=e,e.setCoords(),e},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(l,c,e){l.save(),l.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",l,c),e=e||{},typeof e.hasControls>"u"&&(e.hasControls=!1),e.forActiveSelection=!0;for(var n=0,t=this._objects.length;n<t;n++)this._objects[n]._renderControls(l,e);l.restore()}}),i.ActiveSelection.fromObject=function(l,c){i.util.enlivenObjects(l.objects,function(e){delete l.objects,c&&c(new i.ActiveSelection(e,l,!0))})})}(u),function(f){var i=o.util.object.extend;if(f.fabric||(f.fabric={}),f.fabric.Image){o.warn("fabric.Image is already defined.");return}o.Image=o.util.createClass(o.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:o.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:o.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(l,c){c||(c={}),this.filters=[],this.cacheKey="texture"+o.Object.__uid++,this.callSuper("initialize",c),this._initElement(l,c)},getElement:function(){return this._element||{}},setElement:function(l,c){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=l,this._originalElement=l,this._initConfig(c),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(l){var c=o.filterBackend;c&&c.evictCachesForKey&&c.evictCachesForKey(l)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(l){o.util.cleanUpJsdomNode(this[l]),this[l]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var l=this.getElement();return{width:l.naturalWidth||l.width,height:l.naturalHeight||l.height}},_stroke:function(l){if(!(!this.stroke||this.strokeWidth===0)){var c=this.width/2,e=this.height/2;l.beginPath(),l.moveTo(-c,-e),l.lineTo(c,-e),l.lineTo(c,e),l.lineTo(-c,e),l.lineTo(-c,-e),l.closePath()}},toObject:function(l){var c=[];this.filters.forEach(function(n){n&&c.push(n.toObject())});var e=i(this.callSuper("toObject",["cropX","cropY"].concat(l)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:c});return this.resizeFilter&&(e.resizeFilter=this.resizeFilter.toObject()),e},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var l=[],c=[],e,n=this._element,t=-this.width/2,s=-this.height/2,h="",r="";if(!n)return[];if(this.hasCrop()){var d=o.Object.__uid++;l.push('<clipPath id="imageCrop_'+d+`">
`,'	<rect x="'+t+'" y="'+s+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),h=' clip-path="url(#imageCrop_'+d+')" '}if(this.imageSmoothing||(r='" image-rendering="optimizeSpeed'),c.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',t-this.cropX,'" y="',s-this.cropY,'" width="',n.width||n.naturalWidth,'" height="',n.height||n.height,r,'"',h,`></image>
`),this.stroke||this.strokeDashArray){var m=this.fill;this.fill=null,e=["	<rect ",'x="',t,'" y="',s,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=m}return this.paintFirst!=="fill"?l=l.concat(e,c):l=l.concat(c,e),l},getSrc:function(l){var c=l?this._element:this._originalElement;return c?c.toDataURL?c.toDataURL():this.srcFromAttribute?c.getAttribute("src"):c.src:this.src||""},setSrc:function(l,c,e){return o.util.loadImage(l,function(n,t){this.setElement(n,e),this._setWidthHeight(),c&&c(this,t)},this,e&&e.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var l=this.resizeFilter,c=this.minimumScaleTrigger,e=this.getTotalObjectScaling(),n=e.scaleX,t=e.scaleY,s=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!l||n>c&&t>c){this._element=s,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=n,this._lastScaleY=t;return}o.filterBackend||(o.filterBackend=o.initFilterBackend());var h=o.util.createCanvasElement(),r=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,d=s.width,m=s.height;h.width=d,h.height=m,this._element=h,this._lastScaleX=l.scaleX=n,this._lastScaleY=l.scaleY=t,o.filterBackend.applyFilters([l],s,d,m,this._element,r),this._filterScalingX=h.width/this._originalElement.width,this._filterScalingY=h.height/this._originalElement.height},applyFilters:function(l){if(l=l||this.filters||[],l=l.filter(function(s){return s&&!s.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),l.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var c=this._originalElement,e=c.naturalWidth||c.width,n=c.naturalHeight||c.height;if(this._element===this._originalElement){var t=o.util.createCanvasElement();t.width=e,t.height=n,this._element=t,this._filteredEl=t}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,e,n),this._lastScaleX=1,this._lastScaleY=1;return o.filterBackend||(o.filterBackend=o.initFilterBackend()),o.filterBackend.applyFilters(l,this._originalElement,e,n,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(l){o.util.setImageSmoothing(l,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(l),this._renderPaintInOrder(l)},drawCacheOnCanvas:function(l){o.util.setImageSmoothing(l,this.imageSmoothing),o.Object.prototype.drawCacheOnCanvas.call(this,l)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(l){var c=this._element;if(c){var e=this._filterScalingX,n=this._filterScalingY,t=this.width,s=this.height,h=Math.min,r=Math.max,d=r(this.cropX,0),m=r(this.cropY,0),y=c.naturalWidth||c.width,b=c.naturalHeight||c.height,T=d*e,M=m*n,X=h(t*e,y-T),z=h(s*n,b-M),st=-t/2,ft=-s/2,vt=h(t,y/e-d),xt=h(s,b/n-m);c&&l.drawImage(c,T,M,X,z,st,ft,vt,xt)}},_needsResize:function(){var l=this.getTotalObjectScaling();return l.scaleX!==this._lastScaleX||l.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(l,c){this.setElement(o.util.getById(l),c),o.util.addClass(this.getElement(),o.Image.CSS_CANVAS)},_initConfig:function(l){l||(l={}),this.setOptions(l),this._setWidthHeight(l)},_initFilters:function(l,c){l&&l.length?o.util.enlivenObjects(l,function(e){c&&c(e)},"fabric.Image.filters"):c&&c()},_setWidthHeight:function(l){l||(l={});var c=this.getElement();this.width=l.width||c.naturalWidth||c.width||0,this.height=l.height||c.naturalHeight||c.height||0},parsePreserveAspectRatioAttribute:function(){var l=o.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),c=this._element.width,e=this._element.height,n=1,t=1,s=0,h=0,r=0,d=0,m,y=this.width,b=this.height,T={width:y,height:b};return l&&(l.alignX!=="none"||l.alignY!=="none")?(l.meetOrSlice==="meet"&&(n=t=o.util.findScaleToFit(this._element,T),m=(y-c*n)/2,l.alignX==="Min"&&(s=-m),l.alignX==="Max"&&(s=m),m=(b-e*t)/2,l.alignY==="Min"&&(h=-m),l.alignY==="Max"&&(h=m)),l.meetOrSlice==="slice"&&(n=t=o.util.findScaleToCover(this._element,T),m=c-y/n,l.alignX==="Mid"&&(r=m/2),l.alignX==="Max"&&(r=m),m=e-b/t,l.alignY==="Mid"&&(d=m/2),l.alignY==="Max"&&(d=m),c=y/n,e=b/t)):(n=y/c,t=b/e),{width:c,height:e,scaleX:n,scaleY:t,offsetLeft:s,offsetTop:h,cropX:r,cropY:d}}}),o.Image.CSS_CANVAS="canvas-img",o.Image.prototype.getSvgSrc=o.Image.prototype.getSrc,o.Image.fromObject=function(l,c){var e=o.util.object.clone(l);o.util.loadImage(e.src,function(n,t){if(t){c&&c(null,!0);return}o.Image.prototype._initFilters.call(e,e.filters,function(s){e.filters=s||[],o.Image.prototype._initFilters.call(e,[e.resizeFilter],function(h){e.resizeFilter=h[0],o.util.enlivenObjectEnlivables(e,e,function(){var r=new o.Image(n,e);c(r,!1)})})})},null,e.crossOrigin)},o.Image.fromURL=function(l,c,e){o.util.loadImage(l,function(n,t){c&&c(new o.Image(n,e),t)},null,e&&e.crossOrigin)},o.Image.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),o.Image.fromElement=function(l,c,e){var n=o.parseAttributes(l,o.Image.ATTRIBUTE_NAMES);o.Image.fromURL(n["xlink:href"],c,i(e?o.util.object.clone(e):{},n))}}(u),o.util.object.extend(o.Object.prototype,{_getAngleValueForStraighten:function(){var f=this.angle%360;return f>0?Math.round((f-1)/90)*90:Math.round(f/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(f){f=f||{};var i=function(){},l=f.onComplete||i,c=f.onChange||i,e=this;return o.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(n){e.rotate(n),c()},onComplete:function(){e.setCoords(),l()}})}}),o.util.object.extend(o.StaticCanvas.prototype,{straightenObject:function(f){return f.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(f){return f.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function f(l,c){var e="precision "+c+` float;
void main(){}`,n=l.createShader(l.FRAGMENT_SHADER);return l.shaderSource(n,e),l.compileShader(n),!!l.getShaderParameter(n,l.COMPILE_STATUS)}o.isWebglSupported=function(l){if(o.isLikelyNode)return!1;l=l||o.WebglFilterBackend.prototype.tileSize;var c=document.createElement("canvas"),e=c.getContext("webgl")||c.getContext("experimental-webgl"),n=!1;if(e){o.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),n=o.maxTextureSize>=l;for(var t=["highp","mediump","lowp"],s=0;s<3;s++)if(f(e,t[s])){o.webGlPrecision=t[s];break}}return this.isSupported=n,n},o.WebglFilterBackend=i;function i(l){l&&l.tileSize&&(this.tileSize=l.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}i.prototype={tileSize:2048,resources:{},setupGLContext:function(l,c){this.dispose(),this.createWebGLCanvas(l,c),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(l,c)},chooseFastestCopyGLTo2DMethod:function(l,c){var e=typeof window.performance<"u",n;try{new ImageData(1,1),n=!0}catch{n=!1}var t=typeof ArrayBuffer<"u",s=typeof Uint8ClampedArray<"u";if(e&&n&&t&&s){var h=o.util.createCanvasElement(),r=new ArrayBuffer(l*c*4);if(o.forceGLPutImageData){this.imageBuffer=r,this.copyGLTo2D=B;return}var d={imageBuffer:r,destinationWidth:l,destinationHeight:c,targetCanvas:h},m,y,b;h.width=l,h.height=c,m=window.performance.now(),A.call(d,this.gl,d),y=window.performance.now()-m,m=window.performance.now(),B.call(d,this.gl,d),b=window.performance.now()-m,y>b?(this.imageBuffer=r,this.copyGLTo2D=B):this.copyGLTo2D=A}},createWebGLCanvas:function(l,c){var e=o.util.createCanvasElement();e.width=l,e.height=c;var n={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},t=e.getContext("webgl",n);t||(t=e.getContext("experimental-webgl",n)),t&&(t.clearColor(0,0,0,0),this.canvas=e,this.gl=t)},applyFilters:function(l,c,e,n,t,s){var h=this.gl,r;s&&(r=this.getCachedTexture(s,c));var d={originalWidth:c.width||c.originalWidth,originalHeight:c.height||c.originalHeight,sourceWidth:e,sourceHeight:n,destinationWidth:e,destinationHeight:n,context:h,sourceTexture:this.createTexture(h,e,n,!r&&c),targetTexture:this.createTexture(h,e,n),originalTexture:r||this.createTexture(h,e,n,!r&&c),passes:l.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:t},m=h.createFramebuffer();return h.bindFramebuffer(h.FRAMEBUFFER,m),l.forEach(function(y){y&&y.applyTo(d)}),O(d),this.copyGLTo2D(h,d),h.bindTexture(h.TEXTURE_2D,null),h.deleteTexture(d.sourceTexture),h.deleteTexture(d.targetTexture),h.deleteFramebuffer(m),t.getContext("2d").setTransform(1,0,0,1,0,0),d},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(l,c,e,n,t){var s=l.createTexture();return l.bindTexture(l.TEXTURE_2D,s),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,t||l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,t||l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),n?l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,n):l.texImage2D(l.TEXTURE_2D,0,l.RGBA,c,e,0,l.RGBA,l.UNSIGNED_BYTE,null),s},getCachedTexture:function(l,c){if(this.textureCache[l])return this.textureCache[l];var e=this.createTexture(this.gl,c.width,c.height,c);return this.textureCache[l]=e,e},evictCachesForKey:function(l){this.textureCache[l]&&(this.gl.deleteTexture(this.textureCache[l]),delete this.textureCache[l])},copyGLTo2D:A,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var l=this.gl,c={renderer:"",vendor:""};if(!l)return c;var e=l.getExtension("WEBGL_debug_renderer_info");if(e){var n=l.getParameter(e.UNMASKED_RENDERER_WEBGL),t=l.getParameter(e.UNMASKED_VENDOR_WEBGL);n&&(c.renderer=n.toLowerCase()),t&&(c.vendor=t.toLowerCase())}return this.gpuInfo=c,c}}}();function O(f){var i=f.targetCanvas,l=i.width,c=i.height,e=f.destinationWidth,n=f.destinationHeight;(l!==e||c!==n)&&(i.width=e,i.height=n)}function A(f,i){var l=f.canvas,c=i.targetCanvas,e=c.getContext("2d");e.translate(0,c.height),e.scale(1,-1);var n=l.height-c.height;e.drawImage(l,0,n,c.width,c.height,0,0,c.width,c.height)}function B(f,i){var l=i.targetCanvas,c=l.getContext("2d"),e=i.destinationWidth,n=i.destinationHeight,t=e*n*4,s=new Uint8Array(this.imageBuffer,0,t),h=new Uint8ClampedArray(this.imageBuffer,0,t);f.readPixels(0,0,e,n,f.RGBA,f.UNSIGNED_BYTE,s);var r=new ImageData(h,e,n);c.putImageData(r,0,0)}(function(){var f=function(){};o.Canvas2dFilterBackend=i;function i(){}i.prototype={evictCachesForKey:f,dispose:f,clearWebGLCaches:f,resources:{},applyFilters:function(l,c,e,n,t){var s=t.getContext("2d");s.drawImage(c,0,0,e,n);var h=s.getImageData(0,0,e,n),r=s.getImageData(0,0,e,n),d={sourceWidth:e,sourceHeight:n,imageData:h,originalEl:c,originalImageData:r,canvasEl:t,ctx:s,filterBackend:this};return l.forEach(function(m){m.applyTo(d)}),(d.imageData.width!==e||d.imageData.height!==n)&&(t.width=d.imageData.width,t.height=d.imageData.height),s.putImageData(d.imageData,0,0),d}}})(),o.Image=o.Image||{},o.Image.filters=o.Image.filters||{},o.Image.filters.BaseFilter=o.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(f){f&&this.setOptions(f)},setOptions:function(f){for(var i in f)this[i]=f[i]},createProgram:function(f,i,l){i=i||this.fragmentSource,l=l||this.vertexSource,o.webGlPrecision!=="highp"&&(i=i.replace(/precision highp float/g,"precision "+o.webGlPrecision+" float"));var c=f.createShader(f.VERTEX_SHADER);if(f.shaderSource(c,l),f.compileShader(c),!f.getShaderParameter(c,f.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+f.getShaderInfoLog(c));var e=f.createShader(f.FRAGMENT_SHADER);if(f.shaderSource(e,i),f.compileShader(e),!f.getShaderParameter(e,f.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+f.getShaderInfoLog(e));var n=f.createProgram();if(f.attachShader(n,c),f.attachShader(n,e),f.linkProgram(n),!f.getProgramParameter(n,f.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+f.getProgramInfoLog(n));var t=this.getAttributeLocations(f,n),s=this.getUniformLocations(f,n)||{};return s.uStepW=f.getUniformLocation(n,"uStepW"),s.uStepH=f.getUniformLocation(n,"uStepH"),{program:n,attributeLocations:t,uniformLocations:s}},getAttributeLocations:function(f,i){return{aPosition:f.getAttribLocation(i,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(f,i,l){var c=i.aPosition,e=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,e),f.enableVertexAttribArray(c),f.vertexAttribPointer(c,2,f.FLOAT,!1,0,0),f.bufferData(f.ARRAY_BUFFER,l,f.STATIC_DRAW)},_setupFrameBuffer:function(f){var i=f.context,l,c;f.passes>1?(l=f.destinationWidth,c=f.destinationHeight,(f.sourceWidth!==l||f.sourceHeight!==c)&&(i.deleteTexture(f.targetTexture),f.targetTexture=f.filterBackend.createTexture(i,l,c)),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,f.targetTexture,0)):(i.bindFramebuffer(i.FRAMEBUFFER,null),i.finish())},_swapTextures:function(f){f.passes--,f.pass++;var i=f.targetTexture;f.targetTexture=f.sourceTexture,f.sourceTexture=i},isNeutralState:function(){var f=this.mainParameter,i=o.Image.filters[this.type].prototype;if(f)if(Array.isArray(i[f])){for(var l=i[f].length;l--;)if(this[f][l]!==i[f][l])return!1;return!0}else return i[f]===this[f];else return!1},applyTo:function(f){f.webgl?(this._setupFrameBuffer(f),this.applyToWebGL(f),this._swapTextures(f)):this.applyTo2d(f)},retrieveShader:function(f){return f.programCache.hasOwnProperty(this.type)||(f.programCache[this.type]=this.createProgram(f.context)),f.programCache[this.type]},applyToWebGL:function(f){var i=f.context,l=this.retrieveShader(f);f.pass===0&&f.originalTexture?i.bindTexture(i.TEXTURE_2D,f.originalTexture):i.bindTexture(i.TEXTURE_2D,f.sourceTexture),i.useProgram(l.program),this.sendAttributeData(i,l.attributeLocations,f.aPosition),i.uniform1f(l.uniformLocations.uStepW,1/f.sourceWidth),i.uniform1f(l.uniformLocations.uStepH,1/f.sourceHeight),this.sendUniformData(i,l.uniformLocations),i.viewport(0,0,f.destinationWidth,f.destinationHeight),i.drawArrays(i.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(f,i,l){f.activeTexture(l),f.bindTexture(f.TEXTURE_2D,i),f.activeTexture(f.TEXTURE0)},unbindAdditionalTexture:function(f,i){f.activeTexture(i),f.bindTexture(f.TEXTURE_2D,null),f.activeTexture(f.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(f){this[this.mainParameter]=f},sendUniformData:function(){},createHelpLayer:function(f){if(!f.helpLayer){var i=document.createElement("canvas");i.width=f.sourceWidth,i.height=f.sourceHeight,f.helpLayer=i}},toObject:function(){var f={type:this.type},i=this.mainParameter;return i&&(f[i]=this[i]),f},toJSON:function(){return this.toObject()}}),o.Image.filters.BaseFilter.fromObject=function(f,i){var l=new o.Image.filters[f.type](f);return i&&i(l),l},function(f){var i=f.fabric||(f.fabric={}),l=i.Image.filters,c=i.util.createClass;l.ColorMatrix=c(l.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(e){this.callSuper("initialize",e),this.matrix=this.matrix.slice(0)},applyTo2d:function(e){var n=e.imageData,t=n.data,s=t.length,h=this.matrix,r,d,m,y,b,T=this.colorsOnly;for(b=0;b<s;b+=4)r=t[b],d=t[b+1],m=t[b+2],T?(t[b]=r*h[0]+d*h[1]+m*h[2]+h[4]*255,t[b+1]=r*h[5]+d*h[6]+m*h[7]+h[9]*255,t[b+2]=r*h[10]+d*h[11]+m*h[12]+h[14]*255):(y=t[b+3],t[b]=r*h[0]+d*h[1]+m*h[2]+y*h[3]+h[4]*255,t[b+1]=r*h[5]+d*h[6]+m*h[7]+y*h[8]+h[9]*255,t[b+2]=r*h[10]+d*h[11]+m*h[12]+y*h[13]+h[14]*255,t[b+3]=r*h[15]+d*h[16]+m*h[17]+y*h[18]+h[19]*255)},getUniformLocations:function(e,n){return{uColorMatrix:e.getUniformLocation(n,"uColorMatrix"),uConstants:e.getUniformLocation(n,"uConstants")}},sendUniformData:function(e,n){var t=this.matrix,s=[t[0],t[1],t[2],t[3],t[5],t[6],t[7],t[8],t[10],t[11],t[12],t[13],t[15],t[16],t[17],t[18]],h=[t[4],t[9],t[14],t[19]];e.uniformMatrix4fv(n.uColorMatrix,!1,s),e.uniform4fv(n.uConstants,h)}}),i.Image.filters.ColorMatrix.fromObject=i.Image.filters.BaseFilter.fromObject}(u),function(f){var i=f.fabric||(f.fabric={}),l=i.Image.filters,c=i.util.createClass;l.Brightness=c(l.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(e){if(this.brightness!==0){var n=e.imageData,t=n.data,s,h=t.length,r=Math.round(this.brightness*255);for(s=0;s<h;s+=4)t[s]=t[s]+r,t[s+1]=t[s+1]+r,t[s+2]=t[s+2]+r}},getUniformLocations:function(e,n){return{uBrightness:e.getUniformLocation(n,"uBrightness")}},sendUniformData:function(e,n){e.uniform1f(n.uBrightness,this.brightness)}}),i.Image.filters.Brightness.fromObject=i.Image.filters.BaseFilter.fromObject}(u),function(f){var i=f.fabric||(f.fabric={}),l=i.util.object.extend,c=i.Image.filters,e=i.util.createClass;c.Convolute=e(c.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(n){var t=Math.sqrt(this.matrix.length),s=this.type+"_"+t+"_"+(this.opaque?1:0),h=this.fragmentSource[s];return n.programCache.hasOwnProperty(s)||(n.programCache[s]=this.createProgram(n.context,h)),n.programCache[s]},applyTo2d:function(n){var t=n.imageData,s=t.data,h=this.matrix,r=Math.round(Math.sqrt(h.length)),d=Math.floor(r/2),m=t.width,y=t.height,b=n.ctx.createImageData(m,y),T=b.data,M=this.opaque?1:0,X,z,st,ft,vt,xt,St,_t,ot,pt,wt,bt,k;for(wt=0;wt<y;wt++)for(pt=0;pt<m;pt++){for(vt=(wt*m+pt)*4,X=0,z=0,st=0,ft=0,k=0;k<r;k++)for(bt=0;bt<r;bt++)St=wt+k-d,xt=pt+bt-d,!(St<0||St>=y||xt<0||xt>=m)&&(_t=(St*m+xt)*4,ot=h[k*r+bt],X+=s[_t]*ot,z+=s[_t+1]*ot,st+=s[_t+2]*ot,M||(ft+=s[_t+3]*ot));T[vt]=X,T[vt+1]=z,T[vt+2]=st,M?T[vt+3]=s[vt+3]:T[vt+3]=ft}n.imageData=b},getUniformLocations:function(n,t){return{uMatrix:n.getUniformLocation(t,"uMatrix"),uOpaque:n.getUniformLocation(t,"uOpaque"),uHalfSize:n.getUniformLocation(t,"uHalfSize"),uSize:n.getUniformLocation(t,"uSize")}},sendUniformData:function(n,t){n.uniform1fv(t.uMatrix,this.matrix)},toObject:function(){return l(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),i.Image.filters.Convolute.fromObject=i.Image.filters.BaseFilter.fromObject}(u),function(f){var i=f.fabric||(f.fabric={}),l=i.Image.filters,c=i.util.createClass;l.Grayscale=c(l.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(e){var n=e.imageData,t=n.data,s,h=t.length,r,d=this.mode;for(s=0;s<h;s+=4)d==="average"?r=(t[s]+t[s+1]+t[s+2])/3:d==="lightness"?r=(Math.min(t[s],t[s+1],t[s+2])+Math.max(t[s],t[s+1],t[s+2]))/2:d==="luminosity"&&(r=.21*t[s]+.72*t[s+1]+.07*t[s+2]),t[s]=r,t[s+1]=r,t[s+2]=r},retrieveShader:function(e){var n=this.type+"_"+this.mode;if(!e.programCache.hasOwnProperty(n)){var t=this.fragmentSource[this.mode];e.programCache[n]=this.createProgram(e.context,t)}return e.programCache[n]},getUniformLocations:function(e,n){return{uMode:e.getUniformLocation(n,"uMode")}},sendUniformData:function(e,n){var t=1;e.uniform1i(n.uMode,t)},isNeutralState:function(){return!1}}),i.Image.filters.Grayscale.fromObject=i.Image.filters.BaseFilter.fromObject}(u),function(f){var i=f.fabric||(f.fabric={}),l=i.Image.filters,c=i.util.createClass;l.Invert=c(l.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(e){var n=e.imageData,t=n.data,s,h=t.length;for(s=0;s<h;s+=4)t[s]=255-t[s],t[s+1]=255-t[s+1],t[s+2]=255-t[s+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(e,n){return{uInvert:e.getUniformLocation(n,"uInvert")}},sendUniformData:function(e,n){e.uniform1i(n.uInvert,this.invert)}}),i.Image.filters.Invert.fromObject=i.Image.filters.BaseFilter.fromObject}(u),function(f){var i=f.fabric||(f.fabric={}),l=i.util.object.extend,c=i.Image.filters,e=i.util.createClass;c.Noise=e(c.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(n){if(this.noise!==0){var t=n.imageData,s=t.data,h,r=s.length,d=this.noise,m;for(h=0,r=s.length;h<r;h+=4)m=(.5-Math.random())*d,s[h]+=m,s[h+1]+=m,s[h+2]+=m}},getUniformLocations:function(n,t){return{uNoise:n.getUniformLocation(t,"uNoise"),uSeed:n.getUniformLocation(t,"uSeed")}},sendUniformData:function(n,t){n.uniform1f(t.uNoise,this.noise/255),n.uniform1f(t.uSeed,Math.random())},toObject:function(){return l(this.callSuper("toObject"),{noise:this.noise})}}),i.Image.filters.Noise.fromObject=i.Image.filters.BaseFilter.fromObject}(u),function(f){var i=f.fabric||(f.fabric={}),l=i.Image.filters,c=i.util.createClass;l.Pixelate=c(l.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(e){var n=e.imageData,t=n.data,s=n.height,h=n.width,r,d,m,y,b,T,M,X,z,st,ft;for(d=0;d<s;d+=this.blocksize)for(m=0;m<h;m+=this.blocksize)for(r=d*4*h+m*4,y=t[r],b=t[r+1],T=t[r+2],M=t[r+3],st=Math.min(d+this.blocksize,s),ft=Math.min(m+this.blocksize,h),X=d;X<st;X++)for(z=m;z<ft;z++)r=X*4*h+z*4,t[r]=y,t[r+1]=b,t[r+2]=T,t[r+3]=M},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(e,n){return{uBlocksize:e.getUniformLocation(n,"uBlocksize"),uStepW:e.getUniformLocation(n,"uStepW"),uStepH:e.getUniformLocation(n,"uStepH")}},sendUniformData:function(e,n){e.uniform1f(n.uBlocksize,this.blocksize)}}),i.Image.filters.Pixelate.fromObject=i.Image.filters.BaseFilter.fromObject}(u),function(f){var i=f.fabric||(f.fabric={}),l=i.util.object.extend,c=i.Image.filters,e=i.util.createClass;c.RemoveColor=e(c.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(n){var t=n.imageData,s=t.data,h,r=this.distance*255,d,m,y,b=new i.Color(this.color).getSource(),T=[b[0]-r,b[1]-r,b[2]-r],M=[b[0]+r,b[1]+r,b[2]+r];for(h=0;h<s.length;h+=4)d=s[h],m=s[h+1],y=s[h+2],d>T[0]&&m>T[1]&&y>T[2]&&d<M[0]&&m<M[1]&&y<M[2]&&(s[h+3]=0)},getUniformLocations:function(n,t){return{uLow:n.getUniformLocation(t,"uLow"),uHigh:n.getUniformLocation(t,"uHigh")}},sendUniformData:function(n,t){var s=new i.Color(this.color).getSource(),h=parseFloat(this.distance),r=[0+s[0]/255-h,0+s[1]/255-h,0+s[2]/255-h,1],d=[s[0]/255+h,s[1]/255+h,s[2]/255+h,1];n.uniform4fv(t.uLow,r),n.uniform4fv(t.uHigh,d)},toObject:function(){return l(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),i.Image.filters.RemoveColor.fromObject=i.Image.filters.BaseFilter.fromObject}(u),function(f){var i=f.fabric||(f.fabric={}),l=i.Image.filters,c=i.util.createClass,e={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var n in e)l[n]=c(l.ColorMatrix,{type:n,matrix:e[n],mainParameter:!1,colorsOnly:!0}),i.Image.filters[n].fromObject=i.Image.filters.BaseFilter.fromObject}(u),function(f){var i=f.fabric,l=i.Image.filters,c=i.util.createClass;l.BlendColor=c(l.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(e){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[e]+`}
}`},retrieveShader:function(e){var n=this.type+"_"+this.mode,t;return e.programCache.hasOwnProperty(n)||(t=this.buildSource(this.mode),e.programCache[n]=this.createProgram(e.context,t)),e.programCache[n]},applyTo2d:function(e){var n=e.imageData,t=n.data,s=t.length,h,r,d,m,y,b,T,M=1-this.alpha;T=new i.Color(this.color).getSource(),h=T[0]*this.alpha,r=T[1]*this.alpha,d=T[2]*this.alpha;for(var X=0;X<s;X+=4)switch(m=t[X],y=t[X+1],b=t[X+2],this.mode){case"multiply":t[X]=m*h/255,t[X+1]=y*r/255,t[X+2]=b*d/255;break;case"screen":t[X]=255-(255-m)*(255-h)/255,t[X+1]=255-(255-y)*(255-r)/255,t[X+2]=255-(255-b)*(255-d)/255;break;case"add":t[X]=m+h,t[X+1]=y+r,t[X+2]=b+d;break;case"diff":case"difference":t[X]=Math.abs(m-h),t[X+1]=Math.abs(y-r),t[X+2]=Math.abs(b-d);break;case"subtract":t[X]=m-h,t[X+1]=y-r,t[X+2]=b-d;break;case"darken":t[X]=Math.min(m,h),t[X+1]=Math.min(y,r),t[X+2]=Math.min(b,d);break;case"lighten":t[X]=Math.max(m,h),t[X+1]=Math.max(y,r),t[X+2]=Math.max(b,d);break;case"overlay":t[X]=h<128?2*m*h/255:255-2*(255-m)*(255-h)/255,t[X+1]=r<128?2*y*r/255:255-2*(255-y)*(255-r)/255,t[X+2]=d<128?2*b*d/255:255-2*(255-b)*(255-d)/255;break;case"exclusion":t[X]=h+m-2*h*m/255,t[X+1]=r+y-2*r*y/255,t[X+2]=d+b-2*d*b/255;break;case"tint":t[X]=h+m*M,t[X+1]=r+y*M,t[X+2]=d+b*M}},getUniformLocations:function(e,n){return{uColor:e.getUniformLocation(n,"uColor")}},sendUniformData:function(e,n){var t=new i.Color(this.color).getSource();t[0]=this.alpha*t[0]/255,t[1]=this.alpha*t[1]/255,t[2]=this.alpha*t[2]/255,t[3]=this.alpha,e.uniform4fv(n.uColor,t)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),i.Image.filters.BlendColor.fromObject=i.Image.filters.BaseFilter.fromObject}(u),function(f){var i=f.fabric,l=i.Image.filters,c=i.util.createClass;l.BlendImage=c(l.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(e){var n=this.type+"_"+this.mode,t=this.fragmentSource[this.mode];return e.programCache.hasOwnProperty(n)||(e.programCache[n]=this.createProgram(e.context,t)),e.programCache[n]},applyToWebGL:function(e){var n=e.context,t=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(n,t,n.TEXTURE1),this.callSuper("applyToWebGL",e),this.unbindAdditionalTexture(n,n.TEXTURE1)},createTexture:function(e,n){return e.getCachedTexture(n.cacheKey,n._element)},calculateMatrix:function(){var e=this.image,n=e._element.width,t=e._element.height;return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/n,-e.top/t,1]},applyTo2d:function(e){var n=e.imageData,t=e.filterBackend.resources,s=n.data,h=s.length,r=n.width,d=n.height,m,y,b,T,M,X,z,st,ft,vt,xt=this.image,St;t.blendImage||(t.blendImage=i.util.createCanvasElement()),ft=t.blendImage,vt=ft.getContext("2d"),ft.width!==r||ft.height!==d?(ft.width=r,ft.height=d):vt.clearRect(0,0,r,d),vt.setTransform(xt.scaleX,0,0,xt.scaleY,xt.left,xt.top),vt.drawImage(xt._element,0,0,r,d),St=vt.getImageData(0,0,r,d).data;for(var _t=0;_t<h;_t+=4)switch(M=s[_t],X=s[_t+1],z=s[_t+2],st=s[_t+3],m=St[_t],y=St[_t+1],b=St[_t+2],T=St[_t+3],this.mode){case"multiply":s[_t]=M*m/255,s[_t+1]=X*y/255,s[_t+2]=z*b/255,s[_t+3]=st*T/255;break;case"mask":s[_t+3]=T;break}},getUniformLocations:function(e,n){return{uTransformMatrix:e.getUniformLocation(n,"uTransformMatrix"),uImage:e.getUniformLocation(n,"uImage")}},sendUniformData:function(e,n){var t=this.calculateMatrix();e.uniform1i(n.uImage,1),e.uniformMatrix3fv(n.uTransformMatrix,!1,t)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),i.Image.filters.BlendImage.fromObject=function(e,n){i.Image.fromObject(e.image,function(t){var s=i.util.object.clone(e);s.image=t,n(new i.Image.filters.BlendImage(s))})}}(u),function(f){var i=f.fabric||(f.fabric={}),l=Math.pow,c=Math.floor,e=Math.sqrt,n=Math.abs,t=Math.round,s=Math.sin,h=Math.ceil,r=i.Image.filters,d=i.util.createClass;r.Resize=d(r.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(m,y){return{uDelta:m.getUniformLocation(y,"uDelta"),uTaps:m.getUniformLocation(y,"uTaps")}},sendUniformData:function(m,y){m.uniform2fv(y.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),m.uniform1fv(y.uTaps,this.taps)},retrieveShader:function(m){var y=this.getFilterWindow(),b=this.type+"_"+y;if(!m.programCache.hasOwnProperty(b)){var T=this.generateShader(y);m.programCache[b]=this.createProgram(m.context,T)}return m.programCache[b]},getFilterWindow:function(){var m=this.tempScale;return Math.ceil(this.lanczosLobes/m)},getTaps:function(){for(var m=this.lanczosCreate(this.lanczosLobes),y=this.tempScale,b=this.getFilterWindow(),T=new Array(b),M=1;M<=b;M++)T[M-1]=m(M*y);return T},generateShader:function(T){for(var y=new Array(T),b=this.fragmentSourceTOP,T,M=1;M<=T;M++)y[M-1]=M+".0 * uDelta";return b+="uniform float uTaps["+T+`];
`,b+=`void main() {
`,b+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,b+=`  float sum = 1.0;
`,y.forEach(function(X,z){b+="  color += texture2D(uTexture, vTexCoord + "+X+") * uTaps["+z+`];
`,b+="  color += texture2D(uTexture, vTexCoord - "+X+") * uTaps["+z+`];
`,b+="  sum += 2.0 * uTaps["+z+`];
`}),b+=`  gl_FragColor = color / sum;
`,b+="}",b},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(m){m.webgl?(m.passes++,this.width=m.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=m.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),m.destinationWidth=this.dW,this._setupFrameBuffer(m),this.applyToWebGL(m),this._swapTextures(m),m.sourceWidth=m.destinationWidth,this.height=m.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),m.destinationHeight=this.dH,this._setupFrameBuffer(m),this.applyToWebGL(m),this._swapTextures(m),m.sourceHeight=m.destinationHeight):this.applyTo2d(m)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(m){return function(y){if(y>=m||y<=-m)return 0;if(y<11920929e-14&&y>-11920929e-14)return 1;y*=Math.PI;var b=y/m;return s(y)/y*s(b)/b}},applyTo2d:function(m){var y=m.imageData,b=this.scaleX,T=this.scaleY;this.rcpScaleX=1/b,this.rcpScaleY=1/T;var M=y.width,X=y.height,z=t(M*b),st=t(X*T),ft;this.resizeType==="sliceHack"?ft=this.sliceByTwo(m,M,X,z,st):this.resizeType==="hermite"?ft=this.hermiteFastResize(m,M,X,z,st):this.resizeType==="bilinear"?ft=this.bilinearFiltering(m,M,X,z,st):this.resizeType==="lanczos"&&(ft=this.lanczosResize(m,M,X,z,st)),m.imageData=ft},sliceByTwo:function(m,y,b,T,M){var X=m.imageData,z=.5,st=!1,ft=!1,vt=y*z,xt=b*z,St=i.filterBackend.resources,_t,ot,pt=0,wt=0,bt=y,k=0;for(St.sliceByTwo||(St.sliceByTwo=document.createElement("canvas")),_t=St.sliceByTwo,(_t.width<y*1.5||_t.height<b)&&(_t.width=y*1.5,_t.height=b),ot=_t.getContext("2d"),ot.clearRect(0,0,y*1.5,b),ot.putImageData(X,0,0),T=c(T),M=c(M);!st||!ft;)y=vt,b=xt,T<c(vt*z)?vt=c(vt*z):(vt=T,st=!0),M<c(xt*z)?xt=c(xt*z):(xt=M,ft=!0),ot.drawImage(_t,pt,wt,y,b,bt,k,vt,xt),pt=bt,wt=k,k+=xt;return ot.getImageData(pt,wt,T,M)},lanczosResize:function(m,y,b,T,M){function X(N){var H,nt,j,I,q,$,at,it,ht,dt,F;for(k.x=(N+.5)*xt,U.x=c(k.x),H=0;H<M;H++){for(k.y=(H+.5)*St,U.y=c(k.y),q=0,$=0,at=0,it=0,ht=0,nt=U.x-pt;nt<=U.x+pt;nt++)if(!(nt<0||nt>=y)){dt=c(1e3*n(nt-k.x)),bt[dt]||(bt[dt]={});for(var D=U.y-wt;D<=U.y+wt;D++)D<0||D>=b||(F=c(1e3*n(D-k.y)),bt[dt][F]||(bt[dt][F]=vt(e(l(dt*_t,2)+l(F*ot,2))/1e3)),j=bt[dt][F],j>0&&(I=(D*y+nt)*4,q+=j,$+=j*z[I],at+=j*z[I+1],it+=j*z[I+2],ht+=j*z[I+3]))}I=(H*T+N)*4,ft[I]=$/q,ft[I+1]=at/q,ft[I+2]=it/q,ft[I+3]=ht/q}return++N<T?X(N):st}var z=m.imageData.data,st=m.ctx.createImageData(T,M),ft=st.data,vt=this.lanczosCreate(this.lanczosLobes),xt=this.rcpScaleX,St=this.rcpScaleY,_t=2/this.rcpScaleX,ot=2/this.rcpScaleY,pt=h(xt*this.lanczosLobes/2),wt=h(St*this.lanczosLobes/2),bt={},k={},U={};return X(0)},bilinearFiltering:function(m,y,b,T,M){var X,z,st,ft,vt,xt,St,_t,ot,pt,wt,bt,k=0,U,N=this.rcpScaleX,H=this.rcpScaleY,nt=4*(y-1),j=m.imageData,I=j.data,q=m.ctx.createImageData(T,M),$=q.data;for(St=0;St<M;St++)for(_t=0;_t<T;_t++)for(vt=c(N*_t),xt=c(H*St),ot=N*_t-vt,pt=H*St-xt,U=4*(xt*y+vt),wt=0;wt<4;wt++)X=I[U+wt],z=I[U+4+wt],st=I[U+nt+wt],ft=I[U+nt+4+wt],bt=X*(1-ot)*(1-pt)+z*ot*(1-pt)+st*pt*(1-ot)+ft*ot*pt,$[k++]=bt;return q},hermiteFastResize:function(m,y,b,T,M){for(var X=this.rcpScaleX,z=this.rcpScaleY,st=h(X/2),ft=h(z/2),vt=m.imageData,xt=vt.data,St=m.ctx.createImageData(T,M),_t=St.data,ot=0;ot<M;ot++)for(var pt=0;pt<T;pt++){for(var wt=(pt+ot*T)*4,bt=0,k=0,U=0,N=0,H=0,nt=0,j=0,I=(ot+.5)*z,q=c(ot*z);q<(ot+1)*z;q++)for(var $=n(I-(q+.5))/ft,at=(pt+.5)*X,it=$*$,ht=c(pt*X);ht<(pt+1)*X;ht++){var dt=n(at-(ht+.5))/st,F=e(it+dt*dt);F>1&&F<-1||(bt=2*F*F*F-3*F*F+1,bt>0&&(dt=4*(ht+q*y),j+=bt*xt[dt+3],U+=bt,xt[dt+3]<255&&(bt=bt*xt[dt+3]/250),N+=bt*xt[dt],H+=bt*xt[dt+1],nt+=bt*xt[dt+2],k+=bt))}_t[wt]=N/k,_t[wt+1]=H/k,_t[wt+2]=nt/k,_t[wt+3]=j/U}return St},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),i.Image.filters.Resize.fromObject=i.Image.filters.BaseFilter.fromObject}(u),function(f){var i=f.fabric||(f.fabric={}),l=i.Image.filters,c=i.util.createClass;l.Contrast=c(l.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(e){if(this.contrast!==0){var n=e.imageData,t,h,s=n.data,h=s.length,r=Math.floor(this.contrast*255),d=259*(r+255)/(255*(259-r));for(t=0;t<h;t+=4)s[t]=d*(s[t]-128)+128,s[t+1]=d*(s[t+1]-128)+128,s[t+2]=d*(s[t+2]-128)+128}},getUniformLocations:function(e,n){return{uContrast:e.getUniformLocation(n,"uContrast")}},sendUniformData:function(e,n){e.uniform1f(n.uContrast,this.contrast)}}),i.Image.filters.Contrast.fromObject=i.Image.filters.BaseFilter.fromObject}(u),function(f){var i=f.fabric||(f.fabric={}),l=i.Image.filters,c=i.util.createClass;l.Saturation=c(l.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(e){if(this.saturation!==0){var n=e.imageData,t=n.data,s=t.length,h=-this.saturation,r,d;for(r=0;r<s;r+=4)d=Math.max(t[r],t[r+1],t[r+2]),t[r]+=d!==t[r]?(d-t[r])*h:0,t[r+1]+=d!==t[r+1]?(d-t[r+1])*h:0,t[r+2]+=d!==t[r+2]?(d-t[r+2])*h:0}},getUniformLocations:function(e,n){return{uSaturation:e.getUniformLocation(n,"uSaturation")}},sendUniformData:function(e,n){e.uniform1f(n.uSaturation,-this.saturation)}}),i.Image.filters.Saturation.fromObject=i.Image.filters.BaseFilter.fromObject}(u),function(f){var i=f.fabric||(f.fabric={}),l=i.Image.filters,c=i.util.createClass;l.Vibrance=c(l.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(e){if(this.vibrance!==0){var n=e.imageData,t=n.data,s=t.length,h=-this.vibrance,r,d,m,y;for(r=0;r<s;r+=4)d=Math.max(t[r],t[r+1],t[r+2]),m=(t[r]+t[r+1]+t[r+2])/3,y=Math.abs(d-m)*2/255*h,t[r]+=d!==t[r]?(d-t[r])*y:0,t[r+1]+=d!==t[r+1]?(d-t[r+1])*y:0,t[r+2]+=d!==t[r+2]?(d-t[r+2])*y:0}},getUniformLocations:function(e,n){return{uVibrance:e.getUniformLocation(n,"uVibrance")}},sendUniformData:function(e,n){e.uniform1f(n.uVibrance,-this.vibrance)}}),i.Image.filters.Vibrance.fromObject=i.Image.filters.BaseFilter.fromObject}(u),function(f){var i=f.fabric||(f.fabric={}),l=i.Image.filters,c=i.util.createClass;l.Blur=c(l.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(e){e.webgl?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)},applyTo2d:function(e){e.imageData=this.simpleBlur(e)},simpleBlur:function(e){var n=e.filterBackend.resources,t,s,h=e.imageData.width,r=e.imageData.height;n.blurLayer1||(n.blurLayer1=i.util.createCanvasElement(),n.blurLayer2=i.util.createCanvasElement()),t=n.blurLayer1,s=n.blurLayer2,(t.width!==h||t.height!==r)&&(s.width=t.width=h,s.height=t.height=r);var d=t.getContext("2d"),m=s.getContext("2d"),y=15,b,T,M,X,z=this.blur*.06*.5;for(d.putImageData(e.imageData,0,0),m.clearRect(0,0,h,r),X=-y;X<=y;X++)b=(Math.random()-.5)/4,T=X/y,M=z*T*h+b,m.globalAlpha=1-Math.abs(T),m.drawImage(t,M,b),d.drawImage(s,0,0),m.globalAlpha=1,m.clearRect(0,0,s.width,s.height);for(X=-y;X<=y;X++)b=(Math.random()-.5)/4,T=X/y,M=z*T*r+b,m.globalAlpha=1-Math.abs(T),m.drawImage(t,b,M),d.drawImage(s,0,0),m.globalAlpha=1,m.clearRect(0,0,s.width,s.height);e.ctx.drawImage(t,0,0);var st=e.ctx.getImageData(0,0,t.width,t.height);return d.globalAlpha=1,d.clearRect(0,0,t.width,t.height),st},getUniformLocations:function(e,n){return{delta:e.getUniformLocation(n,"uDelta")}},sendUniformData:function(e,n){var t=this.chooseRightDelta();e.uniform2fv(n.delta,t)},chooseRightDelta:function(){var e=1,n=[0,0],t;return this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio),t=e*this.blur*.12,this.horizontal?n[0]=t:n[1]=t,n}}),l.Blur.fromObject=i.Image.filters.BaseFilter.fromObject}(u),function(f){var i=f.fabric||(f.fabric={}),l=i.Image.filters,c=i.util.createClass;l.Gamma=c(l.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(e){this.gamma=[1,1,1],l.BaseFilter.prototype.initialize.call(this,e)},applyTo2d:function(e){var n=e.imageData,t=n.data,s=this.gamma,h=t.length,r=1/s[0],d=1/s[1],m=1/s[2],y;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),y=0,h=256;y<h;y++)this.rVals[y]=Math.pow(y/255,r)*255,this.gVals[y]=Math.pow(y/255,d)*255,this.bVals[y]=Math.pow(y/255,m)*255;for(y=0,h=t.length;y<h;y+=4)t[y]=this.rVals[t[y]],t[y+1]=this.gVals[t[y+1]],t[y+2]=this.bVals[t[y+2]]},getUniformLocations:function(e,n){return{uGamma:e.getUniformLocation(n,"uGamma")}},sendUniformData:function(e,n){e.uniform3fv(n.uGamma,this.gamma)}}),i.Image.filters.Gamma.fromObject=i.Image.filters.BaseFilter.fromObject}(u),function(f){var i=f.fabric||(f.fabric={}),l=i.Image.filters,c=i.util.createClass;l.Composed=c(l.BaseFilter,{type:"Composed",subFilters:[],initialize:function(e){this.callSuper("initialize",e),this.subFilters=this.subFilters.slice(0)},applyTo:function(e){e.passes+=this.subFilters.length-1,this.subFilters.forEach(function(n){n.applyTo(e)})},toObject:function(){return i.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(e){return e.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(e){return!e.isNeutralState()})}}),i.Image.filters.Composed.fromObject=function(e,n){var t=e.subFilters||[],s=t.map(function(r){return new i.Image.filters[r.type](r)}),h=new i.Image.filters.Composed({subFilters:s});return n&&n(h),h}}(u),function(f){var i=f.fabric||(f.fabric={}),l=i.Image.filters,c=i.util.createClass;l.HueRotation=c(l.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var e=this.rotation*Math.PI,n=i.util.cos(e),t=i.util.sin(e),s=1/3,h=Math.sqrt(s)*t,r=1-n;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=n+r/3,this.matrix[1]=s*r-h,this.matrix[2]=s*r+h,this.matrix[5]=s*r+h,this.matrix[6]=n+s*r,this.matrix[7]=s*r-h,this.matrix[10]=s*r-h,this.matrix[11]=s*r+h,this.matrix[12]=n+s*r},isNeutralState:function(e){return this.calculateMatrix(),l.BaseFilter.prototype.isNeutralState.call(this,e)},applyTo:function(e){this.calculateMatrix(),l.BaseFilter.prototype.applyTo.call(this,e)}}),i.Image.filters.HueRotation.fromObject=i.Image.filters.BaseFilter.fromObject}(u),function(f){var i=f.fabric||(f.fabric={}),l=i.util.object.clone;if(i.Text){i.warn("fabric.Text is already defined");return}var c="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");i.Text=i.util.createClass(i.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:i.Object.prototype.stateProperties.concat(c),cacheProperties:i.Object.prototype.cacheProperties.concat(c),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(e,n){this.styles=n?n.styles||{}:{},this.text=e,this.__skipDimension=!0,this.callSuper("initialize",n),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var e=this.path;e&&(e.segmentsInfo=i.util.getPathSegmentsInfo(e.path))},getMeasuringContext:function(){return i._measuringContext||(i._measuringContext=this.canvas&&this.canvas.contextCache||i.util.createCanvasElement().getContext("2d")),i._measuringContext},_splitText:function(){var e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var e,n,t,s,h,r,d,m=0,y=this._textLines.length;m<y;m++)if(!(this.textAlign!=="justify"&&(m===y-1||this.isEndOfWrapping(m)))&&(s=0,h=this._textLines[m],n=this.getLineWidth(m),n<this.width&&(d=this.textLines[m].match(this._reSpacesAndTabs)))){t=d.length,e=(this.width-n)/t;for(var b=0,T=h.length;b<=T;b++)r=this.__charBounds[m][b],this._reSpaceAndTab.test(h[b])?(r.width+=e,r.kernedWidth+=e,r.left+=s,s+=e):r.left+=s}},isEndOfWrapping:function(e){return e===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var e=this.callSuper("_getCacheCanvasDimensions"),n=this.fontSize;return e.width+=n*e.zoomX,e.height+=n*e.zoomY,e},_render:function(e){var n=this.path;n&&!n.isNotVisible()&&n._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")},_renderText:function(e){this.paintFirst==="stroke"?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))},_setTextStyles:function(e,n,t){if(e.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":e.textBaseline="middle";break;case"ascender":e.textBaseline="top";break;case"descender":e.textBaseline="bottom";break}e.font=this._getFontDeclaration(n,t)},calcTextWidth:function(){for(var e=this.getLineWidth(0),n=1,t=this._textLines.length;n<t;n++){var s=this.getLineWidth(n);s>e&&(e=s)}return e},_renderTextLine:function(e,n,t,s,h,r){this._renderChars(e,n,t,s,h,r)},_renderTextLinesBackground:function(e){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var n,t,s=e.fillStyle,h,r,d=this._getLeftOffset(),m=this._getTopOffset(),y=0,b=0,T,M,X=this.path,z,st=0,ft=this._textLines.length;st<ft;st++){if(n=this.getHeightOfLine(st),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",st)){m+=n;continue}h=this._textLines[st],t=this._getLineLeftOffset(st),b=0,y=0,r=this.getValueOfPropertyAt(st,0,"textBackgroundColor");for(var vt=0,xt=h.length;vt<xt;vt++)T=this.__charBounds[st][vt],M=this.getValueOfPropertyAt(st,vt,"textBackgroundColor"),X?(e.save(),e.translate(T.renderLeft,T.renderTop),e.rotate(T.angle),e.fillStyle=M,M&&e.fillRect(-T.width/2,-n/this.lineHeight*(1-this._fontSizeFraction),T.width,n/this.lineHeight),e.restore()):M!==r?(z=d+t+y,this.direction==="rtl"&&(z=this.width-z-b),e.fillStyle=r,r&&e.fillRect(z,m,b,n/this.lineHeight),y=T.left,b=T.width,r=M):b+=T.kernedWidth;M&&!X&&(z=d+t+y,this.direction==="rtl"&&(z=this.width-z-b),e.fillStyle=M,e.fillRect(z,m,b,n/this.lineHeight)),m+=n}e.fillStyle=s,this._removeShadow(e)}},getFontCache:function(e){var n=e.fontFamily.toLowerCase();i.charWidthsCache[n]||(i.charWidthsCache[n]={});var t=i.charWidthsCache[n],s=e.fontStyle.toLowerCase()+"_"+(e.fontWeight+"").toLowerCase();return t[s]||(t[s]={}),t[s]},_measureChar:function(e,n,t,s){var h=this.getFontCache(n),r=this._getFontDeclaration(n),d=this._getFontDeclaration(s),m=t+e,y=r===d,b,T,M,X=n.fontSize/this.CACHE_FONT_SIZE,z;if(t&&h[t]!==void 0&&(M=h[t]),h[e]!==void 0&&(z=b=h[e]),y&&h[m]!==void 0&&(T=h[m],z=T-M),b===void 0||M===void 0||T===void 0){var st=this.getMeasuringContext();this._setTextStyles(st,n,!0)}return b===void 0&&(z=b=st.measureText(e).width,h[e]=b),M===void 0&&y&&t&&(M=st.measureText(t).width,h[t]=M),y&&T===void 0&&(T=st.measureText(m).width,h[m]=T,z=T-M),{width:b*X,kernedWidth:z*X}},getHeightOfChar:function(e,n){return this.getValueOfPropertyAt(e,n,"fontSize")},measureLine:function(e){var n=this._measureLine(e);return this.charSpacing!==0&&(n.width-=this._getWidthOfCharSpacing()),n.width<0&&(n.width=0),n},_measureLine:function(e){var n=0,t,s,h=this._textLines[e],r,d,m=0,y=new Array(h.length),b=0,T,M,X=this.path,z=this.pathSide==="right";for(this.__charBounds[e]=y,t=0;t<h.length;t++)s=h[t],d=this._getGraphemeBox(s,e,t,r),y[t]=d,n+=d.kernedWidth,r=s;if(y[t]={left:d?d.left+d.width:0,width:0,kernedWidth:0,height:this.fontSize},X){switch(M=X.segmentsInfo[X.segmentsInfo.length-1].length,T=i.util.getPointOnPath(X.path,0,X.segmentsInfo),T.x+=X.pathOffset.x,T.y+=X.pathOffset.y,this.textAlign){case"left":b=z?M-n:0;break;case"center":b=(M-n)/2;break;case"right":b=z?0:M-n;break}for(b+=this.pathStartOffset*(z?-1:1),t=z?h.length-1:0;z?t>=0:t<h.length;z?t--:t++)d=y[t],b>M?b%=M:b<0&&(b+=M),this._setGraphemeOnPath(b,d,T),b+=d.kernedWidth}return{width:n,numOfSpaces:m}},_setGraphemeOnPath:function(e,n,t){var s=e+n.kernedWidth/2,h=this.path,r=i.util.getPointOnPath(h.path,s,h.segmentsInfo);n.renderLeft=r.x-t.x,n.renderTop=r.y-t.y,n.angle=r.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(e,n,t,s,h){var r=this.getCompleteStyleDeclaration(n,t),d=s?this.getCompleteStyleDeclaration(n,t-1):{},m=this._measureChar(e,r,s,d),y=m.kernedWidth,b=m.width,T;this.charSpacing!==0&&(T=this._getWidthOfCharSpacing(),b+=T,y+=T);var M={width:b,left:0,height:r.fontSize,kernedWidth:y,deltaY:r.deltaY};if(t>0&&!h){var X=this.__charBounds[n][t-1];M.left=X.left+X.width+m.kernedWidth-m.width}return M},getHeightOfLine:function(e){if(this.__lineHeights[e])return this.__lineHeights[e];for(var n=this._textLines[e],t=this.getHeightOfChar(e,0),s=1,h=n.length;s<h;s++)t=Math.max(this.getHeightOfChar(e,s),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var e,n=0,t=0,s=this._textLines.length;t<s;t++)e=this.getHeightOfLine(t),n+=t===s-1?e/this.lineHeight:e;return n},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(e,n){e.save();for(var t=0,s=this._getLeftOffset(),h=this._getTopOffset(),r=0,d=this._textLines.length;r<d;r++){var m=this.getHeightOfLine(r),y=m/this.lineHeight,b=this._getLineLeftOffset(r);this._renderTextLine(n,e,this._textLines[r],s+b,h+t+y,r),t+=m}e.restore()},_renderTextFill:function(e){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(e,"fillText")},_renderTextStroke:function(e){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())},_renderChars:function(e,n,t,s,h,r){var d=this.getHeightOfLine(r),m=this.textAlign.indexOf("justify")!==-1,y,b,T="",M,X=0,z,st=this.path,ft=!m&&this.charSpacing===0&&this.isEmptyStyles(r)&&!st,vt=this.direction==="ltr",xt=this.direction==="ltr"?1:-1,St,_t=n.canvas.getAttribute("dir");if(n.save(),_t!==this.direction&&(n.canvas.setAttribute("dir",vt?"ltr":"rtl"),n.direction=vt?"ltr":"rtl",n.textAlign=vt?"left":"right"),h-=d*this._fontSizeFraction/this.lineHeight,ft){this._renderChar(e,n,r,0,t.join(""),s,h,d),n.restore();return}for(var ot=0,pt=t.length-1;ot<=pt;ot++)z=ot===pt||this.charSpacing||st,T+=t[ot],M=this.__charBounds[r][ot],X===0?(s+=xt*(M.kernedWidth-M.width),X+=M.width):X+=M.kernedWidth,m&&!z&&this._reSpaceAndTab.test(t[ot])&&(z=!0),z||(y=y||this.getCompleteStyleDeclaration(r,ot),b=this.getCompleteStyleDeclaration(r,ot+1),z=i.util.hasStyleChanged(y,b,!1)),z&&(st?(n.save(),n.translate(M.renderLeft,M.renderTop),n.rotate(M.angle),this._renderChar(e,n,r,ot,T,-X/2,0,d),n.restore()):(St=s,this._renderChar(e,n,r,ot,T,St,h,d)),T="",y=b,s+=xt*X,X=0);n.restore()},_applyPatternGradientTransformText:function(e){var n=i.util.createCanvasElement(),t,s=this.width+this.strokeWidth,h=this.height+this.strokeWidth;return n.width=s,n.height=h,t=n.getContext("2d"),t.beginPath(),t.moveTo(0,0),t.lineTo(s,0),t.lineTo(s,h),t.lineTo(0,h),t.closePath(),t.translate(s/2,h/2),t.fillStyle=e.toLive(t),this._applyPatternGradientTransform(t,e),t.fill(),t.createPattern(n,"no-repeat")},handleFiller:function(e,n,t){var s,h;return t.toLive?t.gradientUnits==="percentage"||t.gradientTransform||t.patternTransform?(s=-this.width/2,h=-this.height/2,e.translate(s,h),e[n]=this._applyPatternGradientTransformText(t),{offsetX:s,offsetY:h}):(e[n]=t.toLive(e,this),this._applyPatternGradientTransform(e,t)):(e[n]=t,{offsetX:0,offsetY:0})},_setStrokeStyles:function(e,n){return e.lineWidth=n.strokeWidth,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",n.stroke)},_setFillStyles:function(e,n){return this.handleFiller(e,"fillStyle",n.fill)},_renderChar:function(e,n,t,s,h,r,d){var m=this._getStyleDeclaration(t,s),y=this.getCompleteStyleDeclaration(t,s),b=e==="fillText"&&y.fill,T=e==="strokeText"&&y.stroke&&y.strokeWidth,M,X;!T&&!b||(n.save(),b&&(M=this._setFillStyles(n,y)),T&&(X=this._setStrokeStyles(n,y)),n.font=this._getFontDeclaration(y),m&&m.textBackgroundColor&&this._removeShadow(n),m&&m.deltaY&&(d+=m.deltaY),b&&n.fillText(h,r-M.offsetX,d-M.offsetY),T&&n.strokeText(h,r-X.offsetX,d-X.offsetY),n.restore())},setSuperscript:function(e,n){return this._setScript(e,n,this.superscript)},setSubscript:function(e,n){return this._setScript(e,n,this.subscript)},_setScript:function(e,n,t){var s=this.get2DCursorLocation(e,!0),h=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"fontSize"),r=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"deltaY"),d={fontSize:h*t.size,deltaY:r+h*t.baseline};return this.setSelectionStyles(d,e,n),this},_getLineLeftOffset:function(e){var n=this.getLineWidth(e),t=this.width-n,s=this.textAlign,h=this.direction,d,r=0,d=this.isEndOfWrapping(e);return s==="justify"||s==="justify-center"&&!d||s==="justify-right"&&!d||s==="justify-left"&&!d?0:(s==="center"&&(r=t/2),s==="right"&&(r=t),s==="justify-center"&&(r=t/2),s==="justify-right"&&(r=t),h==="rtl"&&(r-=t),r)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var e=this._forceClearCache;return e||(e=this.hasStateChanged("_dimensionAffectingProps")),e&&(this.dirty=!0,this._forceClearCache=!1),e},getLineWidth:function(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];var n=this.measureLine(e),t=n.width;return this.__lineWidths[e]=t,t},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(e,n,t){var s=this._getStyleDeclaration(e,n);return s&&typeof s[t]<"u"?s[t]:this[t]},_renderTextDecoration:function(e,n){if(!(!this[n]&&!this.styleHas(n))){for(var t,s,h,r,d,m,y,b,T=this._getLeftOffset(),M=this._getTopOffset(),X,z,st,ft,vt,xt,St,_t,ot=this.path,pt=this._getWidthOfCharSpacing(),wt=this.offsets[n],bt=0,k=this._textLines.length;bt<k;bt++){if(t=this.getHeightOfLine(bt),!this[n]&&!this.styleHas(n,bt)){M+=t;continue}y=this._textLines[bt],xt=t/this.lineHeight,r=this._getLineLeftOffset(bt),z=0,st=0,b=this.getValueOfPropertyAt(bt,0,n),_t=this.getValueOfPropertyAt(bt,0,"fill"),X=M+xt*(1-this._fontSizeFraction),s=this.getHeightOfChar(bt,0),d=this.getValueOfPropertyAt(bt,0,"deltaY");for(var U=0,N=y.length;U<N;U++)if(ft=this.__charBounds[bt][U],vt=this.getValueOfPropertyAt(bt,U,n),St=this.getValueOfPropertyAt(bt,U,"fill"),h=this.getHeightOfChar(bt,U),m=this.getValueOfPropertyAt(bt,U,"deltaY"),ot&&vt&&St)e.save(),e.fillStyle=_t,e.translate(ft.renderLeft,ft.renderTop),e.rotate(ft.angle),e.fillRect(-ft.kernedWidth/2,wt*h+m,ft.kernedWidth,this.fontSize/15),e.restore();else if((vt!==b||St!==_t||h!==s||m!==d)&&st>0){var H=T+r+z;this.direction==="rtl"&&(H=this.width-H-st),b&&_t&&(e.fillStyle=_t,e.fillRect(H,X+wt*s+d,st,this.fontSize/15)),z=ft.left,st=ft.width,b=vt,_t=St,s=h,d=m}else st+=ft.kernedWidth;var H=T+r+z;this.direction==="rtl"&&(H=this.width-H-st),e.fillStyle=St,vt&&St&&e.fillRect(H,X+wt*s+d,st-pt,this.fontSize/15),M+=t}this._removeShadow(e)}},_getFontDeclaration:function(e,n){var t=e||this,s=this.fontFamily,h=i.Text.genericFonts.indexOf(s.toLowerCase())>-1,r=s===void 0||s.indexOf("'")>-1||s.indexOf(",")>-1||s.indexOf('"')>-1||h?t.fontFamily:'"'+t.fontFamily+'"';return[i.isLikelyNode?t.fontWeight:t.fontStyle,i.isLikelyNode?t.fontStyle:t.fontWeight,n?this.CACHE_FONT_SIZE+"px":t.fontSize+"px",r].join(" ")},render:function(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",e)))},_splitTextIntoLines:function(e){for(var n=e.split(this._reNewline),t=new Array(n.length),s=[`
`],h=[],r=0;r<n.length;r++)t[r]=i.util.string.graphemeSplit(n[r]),h=h.concat(t[r],s);return h.pop(),{_unwrappedLines:t,lines:n,graphemeText:h,graphemeLines:t}},toObject:function(e){var n=c.concat(e),t=this.callSuper("toObject",n);return t.styles=i.util.stylesToArray(this.styles,this.text),t.path&&(t.path=this.path.toObject()),t},set:function(e,n){this.callSuper("set",e,n);var t=!1,s=!1;if(typeof e=="object")for(var h in e)h==="path"&&this.setPathInfo(),t=t||this._dimensionAffectingProps.indexOf(h)!==-1,s=s||h==="path";else t=this._dimensionAffectingProps.indexOf(e)!==-1,s=e==="path";return s&&this.setPathInfo(),t&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),i.Text.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),i.Text.DEFAULT_SVG_FONT_SIZE=16,i.Text.fromElement=function(e,n,t){if(!e)return n(null);var s=i.parseAttributes(e,i.Text.ATTRIBUTE_NAMES),h=s.textAnchor||"left";if(t=i.util.object.extend(t?l(t):{},s),t.top=t.top||0,t.left=t.left||0,s.textDecoration){var r=s.textDecoration;r.indexOf("underline")!==-1&&(t.underline=!0),r.indexOf("overline")!==-1&&(t.overline=!0),r.indexOf("line-through")!==-1&&(t.linethrough=!0),delete t.textDecoration}"dx"in s&&(t.left+=s.dx),"dy"in s&&(t.top+=s.dy),"fontSize"in t||(t.fontSize=i.Text.DEFAULT_SVG_FONT_SIZE);var d="";"textContent"in e?d=e.textContent:"firstChild"in e&&e.firstChild!==null&&"data"in e.firstChild&&e.firstChild.data!==null&&(d=e.firstChild.data),d=d.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var m=t.strokeWidth;t.strokeWidth=0;var y=new i.Text(d,t),b=y.getScaledHeight()/y.height,T=(y.height+y.strokeWidth)*y.lineHeight-y.height,M=T*b,X=y.getScaledHeight()+M,z=0;h==="center"&&(z=y.getScaledWidth()/2),h==="right"&&(z=y.getScaledWidth()),y.set({left:y.left-z,top:y.top-(X-y.fontSize*(.07+y._fontSizeFraction))/y.lineHeight,strokeWidth:typeof m<"u"?m:1}),n(y)},i.Text.fromObject=function(e,n){var t=l(e),s=e.path;return delete t.path,i.Object._fromObject("Text",t,function(h){h.styles=i.util.stylesFromArray(e.styles,e.text),s?i.Object._fromObject("Path",s,function(r){h.set("path",r),n(h)},"path"):n(h)},"text")},i.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],i.util.createAccessors&&i.util.createAccessors(i.Text)}(u),function(){o.util.object.extend(o.Text.prototype,{isEmptyStyles:function(f){if(!this.styles||typeof f<"u"&&!this.styles[f])return!0;var i=typeof f>"u"?this.styles:{line:this.styles[f]};for(var l in i)for(var c in i[l])for(var e in i[l][c])return!1;return!0},styleHas:function(f,i){if(!this.styles||!f||f===""||typeof i<"u"&&!this.styles[i])return!1;var l=typeof i>"u"?this.styles:{0:this.styles[i]};for(var c in l)for(var e in l[c])if(typeof l[c][e][f]<"u")return!0;return!1},cleanStyle:function(f){if(!this.styles||!f||f==="")return!1;var i=this.styles,l=0,c,e,n=!0,t=0,s;for(var h in i){c=0;for(var r in i[h]){var s=i[h][r],d=s.hasOwnProperty(f);l++,d?(e?s[f]!==e&&(n=!1):e=s[f],s[f]===this[f]&&delete s[f]):n=!1,Object.keys(s).length!==0?c++:delete i[h][r]}c===0&&delete i[h]}for(var m=0;m<this._textLines.length;m++)t+=this._textLines[m].length;n&&l===t&&(this[f]=e,this.removeStyle(f))},removeStyle:function(f){if(!(!this.styles||!f||f==="")){var i=this.styles,l,c,e;for(c in i){l=i[c];for(e in l)delete l[e][f],Object.keys(l[e]).length===0&&delete l[e];Object.keys(l).length===0&&delete i[c]}}},_extendStyles:function(f,i){var l=this.get2DCursorLocation(f);this._getLineStyle(l.lineIndex)||this._setLineStyle(l.lineIndex),this._getStyleDeclaration(l.lineIndex,l.charIndex)||this._setStyleDeclaration(l.lineIndex,l.charIndex,{}),o.util.object.extend(this._getStyleDeclaration(l.lineIndex,l.charIndex),i)},get2DCursorLocation:function(f,i){typeof f>"u"&&(f=this.selectionStart);for(var l=i?this._unwrappedTextLines:this._textLines,c=l.length,e=0;e<c;e++){if(f<=l[e].length)return{lineIndex:e,charIndex:f};f-=l[e].length+this.missingNewlineOffset(e)}return{lineIndex:e-1,charIndex:l[e-1].length<f?l[e-1].length:f}},getSelectionStyles:function(f,i,l){typeof f>"u"&&(f=this.selectionStart||0),typeof i>"u"&&(i=this.selectionEnd||f);for(var c=[],e=f;e<i;e++)c.push(this.getStyleAtPosition(e,l));return c},getStyleAtPosition:function(f,i){var l=this.get2DCursorLocation(f),c=i?this.getCompleteStyleDeclaration(l.lineIndex,l.charIndex):this._getStyleDeclaration(l.lineIndex,l.charIndex);return c||{}},setSelectionStyles:function(f,i,l){typeof i>"u"&&(i=this.selectionStart||0),typeof l>"u"&&(l=this.selectionEnd||i);for(var c=i;c<l;c++)this._extendStyles(c,f);return this._forceClearCache=!0,this},_getStyleDeclaration:function(f,i){var l=this.styles&&this.styles[f];return l?l[i]:null},getCompleteStyleDeclaration:function(f,i){for(var l=this._getStyleDeclaration(f,i)||{},c={},e,n=0;n<this._styleProperties.length;n++)e=this._styleProperties[n],c[e]=typeof l[e]>"u"?this[e]:l[e];return c},_setStyleDeclaration:function(f,i,l){this.styles[f][i]=l},_deleteStyleDeclaration:function(f,i){delete this.styles[f][i]},_getLineStyle:function(f){return!!this.styles[f]},_setLineStyle:function(f){this.styles[f]={}},_deleteLineStyle:function(f){delete this.styles[f]}})}(),function(){function f(i){i.textDecoration&&(i.textDecoration.indexOf("underline")>-1&&(i.underline=!0),i.textDecoration.indexOf("line-through")>-1&&(i.linethrough=!0),i.textDecoration.indexOf("overline")>-1&&(i.overline=!0),delete i.textDecoration)}o.IText=o.util.createClass(o.Text,o.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(i,l){this.callSuper("initialize",i,l),this.initBehavior()},setSelectionStart:function(i){i=Math.max(i,0),this._updateAndFire("selectionStart",i)},setSelectionEnd:function(i){i=Math.min(i,this.text.length),this._updateAndFire("selectionEnd",i)},_updateAndFire:function(i,l){this[i]!==l&&(this._fireSelectionChanged(),this[i]=l),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(i){this.clearContextTop(),this.callSuper("render",i),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(i){this.callSuper("_render",i)},clearContextTop:function(i){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var l=this.canvas.contextTop,c=this.canvas.viewportTransform;l.save(),l.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this.transform(l),this._clearTextArea(l),i||l.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var i=this._getCursorBoundaries(),l=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(i,l):this.renderSelection(i,l),l.restore()}},_clearTextArea:function(i){var l=this.width+4,c=this.height+4;i.clearRect(-l/2,-c/2,l,c)},_getCursorBoundaries:function(i){typeof i>"u"&&(i=this.selectionStart);var l=this._getLeftOffset(),c=this._getTopOffset(),e=this._getCursorBoundariesOffsets(i);return{left:l,top:c,leftOffset:e.left,topOffset:e.top}},_getCursorBoundariesOffsets:function(i){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var l,c,e,n=0,t=0,s,h=this.get2DCursorLocation(i);e=h.charIndex,c=h.lineIndex;for(var r=0;r<c;r++)n+=this.getHeightOfLine(r);l=this._getLineLeftOffset(c);var d=this.__charBounds[c][e];return d&&(t=d.left),this.charSpacing!==0&&e===this._textLines[c].length&&(t-=this._getWidthOfCharSpacing()),s={top:n,left:l+(t>0?t:0)},this.direction==="rtl"&&(s.left*=-1),this.cursorOffsetCache=s,this.cursorOffsetCache},renderCursor:function(i,l){var c=this.get2DCursorLocation(),e=c.lineIndex,n=c.charIndex>0?c.charIndex-1:0,t=this.getValueOfPropertyAt(e,n,"fontSize"),s=this.scaleX*this.canvas.getZoom(),h=this.cursorWidth/s,r=i.topOffset,d=this.getValueOfPropertyAt(e,n,"deltaY");r+=(1-this._fontSizeFraction)*this.getHeightOfLine(e)/this.lineHeight-t*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(i,l),l.fillStyle=this.cursorColor||this.getValueOfPropertyAt(e,n,"fill"),l.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,l.fillRect(i.left+i.leftOffset-h/2,r+i.top+d,h,t)},renderSelection:function(i,l){for(var c=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,e=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,n=this.textAlign.indexOf("justify")!==-1,t=this.get2DCursorLocation(c),s=this.get2DCursorLocation(e),h=t.lineIndex,r=s.lineIndex,d=t.charIndex<0?0:t.charIndex,m=s.charIndex<0?0:s.charIndex,y=h;y<=r;y++){var b=this._getLineLeftOffset(y)||0,T=this.getHeightOfLine(y),M=0,X=0,z=0;if(y===h&&(X=this.__charBounds[h][d].left),y>=h&&y<r)z=n&&!this.isEndOfWrapping(y)?this.width:this.getLineWidth(y)||5;else if(y===r)if(m===0)z=this.__charBounds[r][m].left;else{var st=this._getWidthOfCharSpacing();z=this.__charBounds[r][m-1].left+this.__charBounds[r][m-1].width-st}M=T,(this.lineHeight<1||y===r&&this.lineHeight>1)&&(T/=this.lineHeight);var ft=i.left+b+X,vt=z-X,xt=T,St=0;this.inCompositionMode?(l.fillStyle=this.compositionColor||"black",xt=1,St=T):l.fillStyle=this.selectionColor,this.direction==="rtl"&&(ft=this.width-ft-vt),l.fillRect(ft,i.top+i.topOffset+St,vt,xt),i.topOffset+=M}},getCurrentCharFontSize:function(){var i=this._getCurrentCharIndex();return this.getValueOfPropertyAt(i.l,i.c,"fontSize")},getCurrentCharColor:function(){var i=this._getCurrentCharIndex();return this.getValueOfPropertyAt(i.l,i.c,"fill")},_getCurrentCharIndex:function(){var i=this.get2DCursorLocation(this.selectionStart,!0),l=i.charIndex>0?i.charIndex-1:0;return{l:i.lineIndex,c:l}}}),o.IText.fromObject=function(i,l){var c=o.util.stylesFromArray(i.styles,i.text),e=Object.assign({},i,{styles:c});if(f(e),e.styles)for(var n in e.styles)for(var t in e.styles[n])f(e.styles[n][t]);o.Object._fromObject("IText",e,l,"text")}}(),function(){var f=o.util.object.clone;o.util.object.extend(o.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var i=this;this.on("added",function(){var l=i.canvas;l&&(l._hasITextHandlers||(l._hasITextHandlers=!0,i._initCanvasHandlers(l)),l._iTextInstances=l._iTextInstances||[],l._iTextInstances.push(i))})},initRemovedHandler:function(){var i=this;this.on("removed",function(){var l=i.canvas;l&&(l._iTextInstances=l._iTextInstances||[],o.util.removeFromArray(l._iTextInstances,i),l._iTextInstances.length===0&&(l._hasITextHandlers=!1,i._removeCanvasHandlers(l)))})},_initCanvasHandlers:function(i){i._mouseUpITextHandler=function(){i._iTextInstances&&i._iTextInstances.forEach(function(l){l.__isMousedown=!1})},i.on("mouse:up",i._mouseUpITextHandler)},_removeCanvasHandlers:function(i){i.off("mouse:up",i._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(i,l,c,e){var n;return n={isAborted:!1,abort:function(){this.isAborted=!0}},i.animate("_currentCursorOpacity",l,{duration:c,onComplete:function(){n.isAborted||i[e]()},onChange:function(){i.canvas&&i.selectionStart===i.selectionEnd&&i.renderCursorOrSelection()},abort:function(){return n.isAborted}}),n},_onTickComplete:function(){var i=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){i._currentTickCompleteState=i._animateCursor(i,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(i){var l=this,c=i?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){l._tick()},c)},abortCursorAnimation:function(){var i=this._currentTickState||this._currentTickCompleteState,l=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,i&&l&&l.clearContext(l.contextTop||l.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(i){var l=0,c=i-1;if(this._reSpace.test(this._text[c]))for(;this._reSpace.test(this._text[c]);)l++,c--;for(;/\S/.test(this._text[c])&&c>-1;)l++,c--;return i-l},findWordBoundaryRight:function(i){var l=0,c=i;if(this._reSpace.test(this._text[c]))for(;this._reSpace.test(this._text[c]);)l++,c++;for(;/\S/.test(this._text[c])&&c<this._text.length;)l++,c++;return i+l},findLineBoundaryLeft:function(i){for(var l=0,c=i-1;!/\n/.test(this._text[c])&&c>-1;)l++,c--;return i-l},findLineBoundaryRight:function(i){for(var l=0,c=i;!/\n/.test(this._text[c])&&c<this._text.length;)l++,c++;return i+l},searchWordBoundary:function(i,l){for(var c=this._text,e=this._reSpace.test(c[i])?i-1:i,n=c[e],t=o.reNonWord;!t.test(n)&&e>0&&e<c.length;)e+=l,n=c[e];return t.test(n)&&(e+=l===1?0:1),e},selectWord:function(i){i=i||this.selectionStart;var l=this.searchWordBoundary(i,-1),c=this.searchWordBoundary(i,1);this.selectionStart=l,this.selectionEnd=c,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(i){i=i||this.selectionStart;var l=this.findLineBoundaryLeft(i),c=this.findLineBoundaryRight(i);return this.selectionStart=l,this.selectionEnd=c,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(i){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(i),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(i){i._iTextInstances&&i._iTextInstances.forEach(function(l){l.selected=!1,l.isEditing&&l.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(i){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var l=this.getSelectionStartFromPointer(i.e),c=this.selectionStart,e=this.selectionEnd;(l!==this.__selectionStartOnMouseDown||c===e)&&(c===l||e===l)||(l>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=l):(this.selectionStart=l,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==c||this.selectionEnd!==e)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(i,l,c){var e=c.slice(0,i),n=o.util.string.graphemeSplit(e).length;if(i===l)return{selectionStart:n,selectionEnd:n};var t=c.slice(i,l),s=o.util.string.graphemeSplit(t).length;return{selectionStart:n,selectionEnd:n+s}},fromGraphemeToStringSelection:function(i,l,c){var e=c.slice(0,i),n=e.join("").length;if(i===l)return{selectionStart:n,selectionEnd:n};var t=c.slice(i,l),s=t.join("").length;return{selectionStart:n,selectionEnd:n+s}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var i=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=i.selectionStart,this.hiddenTextarea.selectionEnd=i.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var i=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=i.selectionEnd,this.inCompositionMode||(this.selectionStart=i.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var i=this._calcTextareaPosition();this.hiddenTextarea.style.left=i.left,this.hiddenTextarea.style.top=i.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var i=this.inCompositionMode?this.compositionStart:this.selectionStart,l=this._getCursorBoundaries(i),c=this.get2DCursorLocation(i),e=c.lineIndex,n=c.charIndex,t=this.getValueOfPropertyAt(e,n,"fontSize")*this.lineHeight,s=l.leftOffset,h=this.calcTransformMatrix(),r={x:l.left+s,y:l.top+l.topOffset+t},d=this.canvas.getRetinaScaling(),m=this.canvas.upperCanvasEl,y=m.width/d,b=m.height/d,T=y-t,M=b-t,X=m.clientWidth/y,z=m.clientHeight/b;return r=o.util.transformPoint(r,h),r=o.util.transformPoint(r,this.canvas.viewportTransform),r.x*=X,r.y*=z,r.x<0&&(r.x=0),r.x>T&&(r.x=T),r.y<0&&(r.y=0),r.y>M&&(r.y=M),r.x+=this.canvas._offset.left,r.y+=this.canvas._offset.top,{left:r.x+"px",top:r.y+"px",fontSize:t+"px",charHeight:t}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var i=this._textBeforeEdit!==this.text,l=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,l&&(l.blur&&l.blur(),l.parentNode&&l.parentNode.removeChild(l)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),i&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),i&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var i in this.styles)this._textLines[i]||delete this.styles[i]},removeStyleFromTo:function(i,l){var c=this.get2DCursorLocation(i,!0),e=this.get2DCursorLocation(l,!0),n=c.lineIndex,t=c.charIndex,s=e.lineIndex,h=e.charIndex,r,d;if(n!==s){if(this.styles[n])for(r=t;r<this._unwrappedTextLines[n].length;r++)delete this.styles[n][r];if(this.styles[s])for(r=h;r<this._unwrappedTextLines[s].length;r++)d=this.styles[s][r],d&&(this.styles[n]||(this.styles[n]={}),this.styles[n][t+r-h]=d);for(r=n+1;r<=s;r++)delete this.styles[r];this.shiftLineStyles(s,n-s)}else if(this.styles[n]){d=this.styles[n];var m=h-t,y,b;for(r=t;r<h;r++)delete d[r];for(b in this.styles[n])y=parseInt(b,10),y>=h&&(d[y-m]=d[b],delete d[b])}},shiftLineStyles:function(i,l){var c=f(this.styles);for(var e in this.styles){var n=parseInt(e,10);n>i&&(this.styles[n+l]=c[n],c[n-l]||delete this.styles[n])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(i,l,c,e){var n,t={},s=!1,h=this._unwrappedTextLines[i].length===l;c||(c=1),this.shiftLineStyles(i,c),this.styles[i]&&(n=this.styles[i][l===0?l:l-1]);for(var r in this.styles[i]){var d=parseInt(r,10);d>=l&&(s=!0,t[d-l]=this.styles[i][r],h&&l===0||delete this.styles[i][r])}var m=!1;for(s&&!h&&(this.styles[i+c]=t,m=!0),m&&c--;c>0;)e&&e[c-1]?this.styles[i+c]={0:f(e[c-1])}:n?this.styles[i+c]={0:f(n)}:delete this.styles[i+c],c--;this._forceClearCache=!0},insertCharStyleObject:function(i,l,c,e){this.styles||(this.styles={});var n=this.styles[i],t=n?f(n):{};c||(c=1);for(var s in t){var h=parseInt(s,10);h>=l&&(n[h+c]=t[h],t[h-c]||delete n[h])}if(this._forceClearCache=!0,e){for(;c--;)Object.keys(e[c]).length&&(this.styles[i]||(this.styles[i]={}),this.styles[i][l+c]=f(e[c]));return}if(n)for(var r=n[l?l-1:1];r&&c--;)this.styles[i][l+c]=f(r)},insertNewStyleBlock:function(i,l,c){for(var e=this.get2DCursorLocation(l,!0),n=[0],t=0,s=0;s<i.length;s++)i[s]===`
`?(t++,n[t]=0):n[t]++;n[0]>0&&(this.insertCharStyleObject(e.lineIndex,e.charIndex,n[0],c),c=c&&c.slice(n[0]+1)),t&&this.insertNewlineStyleObject(e.lineIndex,e.charIndex+n[0],t);for(var s=1;s<t;s++)n[s]>0?this.insertCharStyleObject(e.lineIndex+s,0,n[s],c):c&&this.styles[e.lineIndex+s]&&c[0]&&(this.styles[e.lineIndex+s][0]=c[0]),c=c&&c.slice(n[s]+1);n[s]>0&&this.insertCharStyleObject(e.lineIndex+s,0,n[s],c)},setSelectionStartEndWithShift:function(i,l,c){c<=i?(l===i?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=i),this.selectionStart=c):c>i&&c<l?this._selectionDirection==="right"?this.selectionEnd=c:this.selectionStart=c:(l===i?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=l),this.selectionEnd=c)},setSelectionInBoundaries:function(){var i=this.text.length;this.selectionStart>i?this.selectionStart=i:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>i?this.selectionEnd=i:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),o.util.object.extend(o.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(f){if(this.canvas){this.__newClickTime=+new Date;var i=f.pointer;this.isTripleClick(i)&&(this.fire("tripleclick",f),this._stopEvent(f.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=i,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(f){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===f.x&&this.__lastPointer.y===f.y},_stopEvent:function(f){f.preventDefault&&f.preventDefault(),f.stopPropagation&&f.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(f){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(f.e))},tripleClickHandler:function(f){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(f.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(f){!this.canvas||!this.editable||f.e.button&&f.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(f.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(f){!this.canvas||!this.editable||f.e.button&&f.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(f){if(this.__isMousedown=!1,!(!this.editable||this.group||f.transform&&f.transform.actionPerformed||f.e.button&&f.e.button!==1)){if(this.canvas){var i=this.canvas._activeObject;if(i&&i!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(f.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(f){var i=this.getSelectionStartFromPointer(f),l=this.selectionStart,c=this.selectionEnd;f.shiftKey?this.setSelectionStartEndWithShift(l,c,i):(this.selectionStart=i,this.selectionEnd=i),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(f){for(var i=this.getLocalPointer(f),l=0,c=0,e=0,n=0,t=0,s,h,r=0,d=this._textLines.length;r<d&&e<=i.y;r++)e+=this.getHeightOfLine(r)*this.scaleY,t=r,r>0&&(n+=this._textLines[r-1].length+this.missingNewlineOffset(r-1));s=this._getLineLeftOffset(t),c=s*this.scaleX,h=this._textLines[t],this.direction==="rtl"&&(i.x=this.width*this.scaleX-i.x+c);for(var m=0,y=h.length;m<y&&(l=c,c+=this.__charBounds[t][m].kernedWidth*this.scaleX,c<=i.x);m++)n++;return this._getNewSelectionStartFromOffset(i,l,c,n,y)},_getNewSelectionStartFromOffset:function(f,i,l,c,e){var n=f.x-i,t=l-f.x,s=t>n||t<0?0:1,h=c+s;return this.flipX&&(h=e-h),h>this._text.length&&(h=this._text.length),h}}),o.util.object.extend(o.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=o.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var f=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+f.top+"; left: "+f.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+f.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):o.document.body.appendChild(this.hiddenTextarea),o.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),o.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),o.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),o.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),o.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),o.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),o.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),o.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),o.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(o.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(f){if(this.isEditing){var i=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(f.keyCode in i)this[i[f.keyCode]](f);else if(f.keyCode in this.ctrlKeysMapDown&&(f.ctrlKey||f.metaKey))this[this.ctrlKeysMapDown[f.keyCode]](f);else return;f.stopImmediatePropagation(),f.preventDefault(),f.keyCode>=33&&f.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(f){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(f.keyCode in this.ctrlKeysMapUp&&(f.ctrlKey||f.metaKey))this[this.ctrlKeysMapUp[f.keyCode]](f);else return;f.stopImmediatePropagation(),f.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(f){var i=this.fromPaste;if(this.fromPaste=!1,f&&f.stopPropagation(),!!this.isEditing){var l=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,c=this._text.length,e=l.length,n,t,s=e-c,h=this.selectionStart,r=this.selectionEnd,d=h!==r,m,y,b;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var T=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),M=h>T.selectionStart;d?(n=this._text.slice(h,r),s+=r-h):e<c&&(M?n=this._text.slice(r+s,r):n=this._text.slice(h,h-s)),t=l.slice(T.selectionEnd-s,T.selectionEnd),n&&n.length&&(t.length&&(m=this.getSelectionStyles(h,h+1,!1),m=t.map(function(){return m[0]})),d?(y=h,b=r):M?(y=r-n.length,b=r):(y=r,b=r+n.length),this.removeStyleFromTo(y,b)),t.length&&(i&&t.join("")===o.copiedText&&!o.disableStyleCopyPaste&&(m=o.copiedTextStyle),this.insertNewStyleBlock(t,h,m)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(f){this.compositionStart=f.target.selectionStart,this.compositionEnd=f.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(o.copiedText=this.getSelectedText(),o.disableStyleCopyPaste?o.copiedTextStyle=null:o.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(f){return f&&f.clipboardData||o.window.clipboardData},_getWidthBeforeCursor:function(f,i){var l=this._getLineLeftOffset(f),c;return i>0&&(c=this.__charBounds[f][i-1],l+=c.left+c.width),l},getDownCursorOffset:function(f,i){var l=this._getSelectionForOffset(f,i),c=this.get2DCursorLocation(l),e=c.lineIndex;if(e===this._textLines.length-1||f.metaKey||f.keyCode===34)return this._text.length-l;var n=c.charIndex,t=this._getWidthBeforeCursor(e,n),s=this._getIndexOnLine(e+1,t),h=this._textLines[e].slice(n);return h.length+s+1+this.missingNewlineOffset(e)},_getSelectionForOffset:function(f,i){return f.shiftKey&&this.selectionStart!==this.selectionEnd&&i?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(f,i){var l=this._getSelectionForOffset(f,i),c=this.get2DCursorLocation(l),e=c.lineIndex;if(e===0||f.metaKey||f.keyCode===33)return-l;var n=c.charIndex,t=this._getWidthBeforeCursor(e,n),s=this._getIndexOnLine(e-1,t),h=this._textLines[e].slice(0,n),r=this.missingNewlineOffset(e-1);return-this._textLines[e-1].length+s-h.length+(1-r)},_getIndexOnLine:function(f,i){for(var l=this._textLines[f],c=this._getLineLeftOffset(f),e=c,n=0,t,s,h=0,r=l.length;h<r;h++)if(t=this.__charBounds[f][h].width,e+=t,e>i){s=!0;var d=e-t,m=e,y=Math.abs(d-i),b=Math.abs(m-i);n=b<y?h:h-1;break}return s||(n=l.length-1),n},moveCursorDown:function(f){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",f)},moveCursorUp:function(f){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",f)},_moveCursorUpOrDown:function(f,i){var l="get"+f+"CursorOffset",c=this[l](i,this._selectionDirection==="right");i.shiftKey?this.moveCursorWithShift(c):this.moveCursorWithoutShift(c),c!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(f){var i=this._selectionDirection==="left"?this.selectionStart+f:this.selectionEnd+f;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,i),f!==0},moveCursorWithoutShift:function(f){return f<0?(this.selectionStart+=f,this.selectionEnd=this.selectionStart):(this.selectionEnd+=f,this.selectionStart=this.selectionEnd),f!==0},moveCursorLeft:function(f){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",f)},_move:function(f,i,l){var c;if(f.altKey)c=this["findWordBoundary"+l](this[i]);else if(f.metaKey||f.keyCode===35||f.keyCode===36)c=this["findLineBoundary"+l](this[i]);else return this[i]+=l==="Left"?-1:1,!0;if(typeof c<"u"&&this[i]!==c)return this[i]=c,!0},_moveLeft:function(f,i){return this._move(f,i,"Left")},_moveRight:function(f,i){return this._move(f,i,"Right")},moveCursorLeftWithoutShift:function(f){var i=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(i=this._moveLeft(f,"selectionStart")),this.selectionEnd=this.selectionStart,i},moveCursorLeftWithShift:function(f){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(f,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(f,"selectionStart")},moveCursorRight:function(f){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",f)},_moveCursorLeftOrRight:function(f,i){var l="moveCursor"+f+"With";this._currentCursorOpacity=1,i.shiftKey?l+="Shift":l+="outShift",this[l](i)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(f){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(f,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(f,"selectionEnd")},moveCursorRightWithoutShift:function(f){var i=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(i=this._moveRight(f,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,i},removeChars:function(f,i){typeof i>"u"&&(i=f+1),this.removeStyleFromTo(f,i),this._text.splice(f,i-f),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(f,i,l,c){typeof c>"u"&&(c=l),c>l&&this.removeStyleFromTo(l,c);var e=o.util.string.graphemeSplit(f);this.insertNewStyleBlock(e,l,i),this._text=[].concat(this._text.slice(0,l),e,this._text.slice(c)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var f=o.util.toFixed,i=/  +/g;o.util.object.extend(o.Text.prototype,{_toSVG:function(){var l=this._getSVGLeftTopOffsets(),c=this._getSVGTextAndBg(l.textTop,l.textLeft);return this._wrapSVGTextAndBg(c)},toSVG:function(l){return this._createBaseSVGMarkup(this._toSVG(),{reviver:l,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(l){var c=!0,e=this.getSvgTextDecoration(this);return[l.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",e?'text-decoration="'+e+'" ':"",'style="',this.getSvgStyles(c),'"',this.addPaintOrder()," >",l.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(l,c){var e=[],n=[],t=l,s;this._setSVGBg(n);for(var h=0,r=this._textLines.length;h<r;h++)s=this._getLineLeftOffset(h),(this.textBackgroundColor||this.styleHas("textBackgroundColor",h))&&this._setSVGTextLineBg(n,h,c+s,t),this._setSVGTextLineText(e,h,c+s,t),t+=this.getHeightOfLine(h);return{textSpans:e,textBgRects:n}},_createTextCharSpan:function(l,c,e,n){var t=l!==l.trim()||l.match(i),s=this.getSvgSpanStyles(c,t),h=s?'style="'+s+'"':"",r=c.deltaY,d="",m=o.Object.NUM_FRACTION_DIGITS;return r&&(d=' dy="'+f(r,m)+'" '),['<tspan x="',f(e,m),'" y="',f(n,m),'" ',d,h,">",o.util.string.escapeXml(l),"</tspan>"].join("")},_setSVGTextLineText:function(l,c,e,n){var t=this.getHeightOfLine(c),s=this.textAlign.indexOf("justify")!==-1,h,r,d="",m,y,b=0,T=this._textLines[c],M;n+=t*(1-this._fontSizeFraction)/this.lineHeight;for(var X=0,z=T.length-1;X<=z;X++)M=X===z||this.charSpacing,d+=T[X],m=this.__charBounds[c][X],b===0?(e+=m.kernedWidth-m.width,b+=m.width):b+=m.kernedWidth,s&&!M&&this._reSpaceAndTab.test(T[X])&&(M=!0),M||(h=h||this.getCompleteStyleDeclaration(c,X),r=this.getCompleteStyleDeclaration(c,X+1),M=o.util.hasStyleChanged(h,r,!0)),M&&(y=this._getStyleDeclaration(c,X)||{},l.push(this._createTextCharSpan(d,y,e,n)),d="",h=r,e+=b,b=0)},_pushTextBgRect:function(l,c,e,n,t,s){var h=o.Object.NUM_FRACTION_DIGITS;l.push("		<rect ",this._getFillAttributes(c),' x="',f(e,h),'" y="',f(n,h),'" width="',f(t,h),'" height="',f(s,h),`"></rect>
`)},_setSVGTextLineBg:function(l,c,e,n){for(var t=this._textLines[c],s=this.getHeightOfLine(c)/this.lineHeight,h=0,r=0,d,m,y=this.getValueOfPropertyAt(c,0,"textBackgroundColor"),b=0,T=t.length;b<T;b++)d=this.__charBounds[c][b],m=this.getValueOfPropertyAt(c,b,"textBackgroundColor"),m!==y?(y&&this._pushTextBgRect(l,y,e+r,n,h,s),r=d.left,h=d.width,y=m):h+=d.kernedWidth;m&&this._pushTextBgRect(l,m,e+r,n,h,s)},_getFillAttributes:function(l){var c=l&&typeof l=="string"?new o.Color(l):"";return!c||!c.getSource()||c.getAlpha()===1?'fill="'+l+'"':'opacity="'+c.getAlpha()+'" fill="'+c.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(l){for(var c=0,e=0,n=0;n<l;n++)c+=this.getHeightOfLine(n);return e=this.getHeightOfLine(n),{lineTop:c,offset:(this._fontSizeMult-this._fontSizeFraction)*e/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(l){var c=o.Object.prototype.getSvgStyles.call(this,l);return c+" white-space: pre;"}})}(),function(f){var i=f.fabric||(f.fabric={});i.Textbox=i.util.createClass(i.IText,i.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:i.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(l){for(var c=0,e=0,n=0,t={},s=0;s<l.graphemeLines.length;s++)l.graphemeText[n]===`
`&&s>0?(e=0,n++,c++):!this.splitByGrapheme&&this._reSpaceAndTab.test(l.graphemeText[n])&&s>0&&(e++,n++),t[s]={line:c,offset:e},n+=l.graphemeLines[s].length,e+=l.graphemeLines[s].length;return t},styleHas:function(l,c){if(this._styleMap&&!this.isWrapping){var e=this._styleMap[c];e&&(c=e.line)}return i.Text.prototype.styleHas.call(this,l,c)},isEmptyStyles:function(l){if(!this.styles)return!0;var c=0,e=l+1,n,t,s=!1,h=this._styleMap[l],r=this._styleMap[l+1];h&&(l=h.line,c=h.offset),r&&(e=r.line,s=e===l,n=r.offset),t=typeof l>"u"?this.styles:{line:this.styles[l]};for(var d in t)for(var m in t[d])if(m>=c&&(!s||m<n))for(var y in t[d][m])return!1;return!0},_getStyleDeclaration:function(l,c){if(this._styleMap&&!this.isWrapping){var e=this._styleMap[l];if(!e)return null;l=e.line,c=e.offset+c}return this.callSuper("_getStyleDeclaration",l,c)},_setStyleDeclaration:function(l,c,e){var n=this._styleMap[l];l=n.line,c=n.offset+c,this.styles[l][c]=e},_deleteStyleDeclaration:function(l,c){var e=this._styleMap[l];l=e.line,c=e.offset+c,delete this.styles[l][c]},_getLineStyle:function(l){var c=this._styleMap[l];return!!this.styles[c.line]},_setLineStyle:function(l){var c=this._styleMap[l];this.styles[c.line]={}},_wrapText:function(l,c){var e=[],n;for(this.isWrapping=!0,n=0;n<l.length;n++)e=e.concat(this._wrapLine(l[n],n,c));return this.isWrapping=!1,e},_measureWord:function(l,c,e){var n=0,t,s=!0;e=e||0;for(var h=0,r=l.length;h<r;h++){var d=this._getGraphemeBox(l[h],c,h+e,t,s);n+=d.kernedWidth,t=l[h]}return n},_wrapLine:function(l,c,e,ft){var t=0,s=this.splitByGrapheme,h=[],r=[],d=s?i.util.string.graphemeSplit(l):l.split(this._wordJoiners),m="",y=0,b=s?"":" ",T=0,M=0,X=0,z=!0,st=this._getWidthOfCharSpacing(),ft=ft||0;d.length===0&&d.push([]),e-=ft;for(var vt=0;vt<d.length;vt++)m=s?d[vt]:i.util.string.graphemeSplit(d[vt]),T=this._measureWord(m,c,y),y+=m.length,t+=M+T-st,t>e&&!z?(h.push(r),r=[],t=T,z=!0):t+=st,!z&&!s&&r.push(b),r=r.concat(m),M=s?0:this._measureWord([b],c,y),y++,z=!1,T>X&&(X=T);return vt&&h.push(r),X+ft>this.dynamicMinWidth&&(this.dynamicMinWidth=X-st+ft),h},isEndOfWrapping:function(l){return!this._styleMap[l+1]||this._styleMap[l+1].line!==this._styleMap[l].line},missingNewlineOffset:function(l){return this.splitByGrapheme?this.isEndOfWrapping(l)?1:0:1},_splitTextIntoLines:function(l){for(var c=i.Text.prototype._splitTextIntoLines.call(this,l),e=this._wrapText(c.lines,this.width),n=new Array(e.length),t=0;t<e.length;t++)n[t]=e[t].join("");return c.lines=n,c.graphemeLines=e,c},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var l={};for(var c in this._styleMap)this._textLines[c]&&(l[this._styleMap[c].line]=1);for(var c in this.styles)l[c]||delete this.styles[c]},toObject:function(l){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(l))}}),i.Textbox.fromObject=function(l,c){var e=i.util.stylesFromArray(l.styles,l.text),n=Object.assign({},l,{styles:e});return i.Object._fromObject("Textbox",n,c,"text")}}(u),function(){var f=o.controlsUtils,i=f.scaleSkewCursorStyleHandler,l=f.scaleCursorStyleHandler,c=f.scalingEqually,e=f.scalingYOrSkewingX,n=f.scalingXOrSkewingY,t=f.scaleOrSkewActionName,s=o.Object.prototype.controls;if(s.ml=new o.Control({x:-.5,y:0,cursorStyleHandler:i,actionHandler:n,getActionName:t}),s.mr=new o.Control({x:.5,y:0,cursorStyleHandler:i,actionHandler:n,getActionName:t}),s.mb=new o.Control({x:0,y:.5,cursorStyleHandler:i,actionHandler:e,getActionName:t}),s.mt=new o.Control({x:0,y:-.5,cursorStyleHandler:i,actionHandler:e,getActionName:t}),s.tl=new o.Control({x:-.5,y:-.5,cursorStyleHandler:l,actionHandler:c}),s.tr=new o.Control({x:.5,y:-.5,cursorStyleHandler:l,actionHandler:c}),s.bl=new o.Control({x:-.5,y:.5,cursorStyleHandler:l,actionHandler:c}),s.br=new o.Control({x:.5,y:.5,cursorStyleHandler:l,actionHandler:c}),s.mtr=new o.Control({x:0,y:-.5,actionHandler:f.rotationWithSnapping,cursorStyleHandler:f.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),o.Textbox){var h=o.Textbox.prototype.controls={};h.mtr=s.mtr,h.tr=s.tr,h.br=s.br,h.tl=s.tl,h.bl=s.bl,h.mt=s.mt,h.mb=s.mb,h.mr=new o.Control({x:.5,y:0,actionHandler:f.changeWidth,cursorStyleHandler:i,actionName:"resizing"}),h.ml=new o.Control({x:-.5,y:0,actionHandler:f.changeWidth,cursorStyleHandler:i,actionName:"resizing"})}}()})(ln);function Ah(){return["/images/templates/1.png","/images/templates/2.png","/images/templates/3.png","/images/templates/4.png","/images/templates/5.png","/images/templates/6.png","/images/templates/7.png","/images/templates/8.png","/images/templates/9.png","/images/templates/10.png","/images/templates/11.png","/images/templates/12.png"].map((u,o)=>({id:o,url:u}))}const Mh="data:image/webp;base64,UklGRtQDAABXRUJQVlA4WAoAAAAQAAAAIAAAIQAAQUxQSLwBAAABkCvbtmlb49m2bdtmaNu2bSMyU9u2bdu21YM91zr7/kFETIDsBB0Pvf74/sPH67NyKdyml3F/nJs5hCz7AT5dPXvh2T/gbf2ICjwGjnTNHl1KUnfJN2BYBLlvw6t60eXMvxXo6LcHTmeX9xT4U8qnCzzNrGDSDKljBLQA9sVwJb0AzWSu//ympJHsNtR31YM9MqNdgGqGmsEO12JoZ+kcVLEyPuR+GsdVXiVxHIPKluZDS8dLLseVMp18cvv6N3hy/cGjFpIGQj/He7ZHk4rhO0ZSexjqeMuRmFKeTz79JPWAwY5HPEooxS5VvUKZ69A7b9UqqSVNgi6OQ/wsJvswVJYZbSc/Kzl6wxIrxkWoZpWC43IW+ceTLIYueCyH6S4thjVWnW5tUxiN4HU6j4JvYY7hrvgVBsq3B7A4oU/997BS/sOA6y2jWaU3AozO18hL3QFurh7SuNP8Y18I/vzDOC9VPoXv0wErCA70UpxmKz9aJwdlV0OD/l6S0hZu1atblaxxJS2y6BuBd6GLFsNCU6orFsNCU6YLFqNCU9pjFtNCU9IL1p7wlOZE4Fr6KFCKg3Azk6I0y5MHuSRWUDgg8gEAALALAJ0BKiEAIgA+nUCfSiWjoyGquqlYsBOJaQATjPwA7AawN8n8o/nBf7Pkd+h/YD/kH9C/WjtIehL+qv//CwfylJVS+lqu9Shr5zEq8DkrYYKO1qBVR8OcB6Iqw+vA2v+za0pMAAD+mT/9N5MeB58JXrOUt5kQKbW/nL6RtfT1EbLZj7pDgYvKqvyIsz1j+7c4pXY1YmvIvuiRBlGS/1hp9fo5coOYwLl3bOHvseZGQUFtaq9BnrYZBja8E6c1Eza0ATOzsOsV0MuIj1yW/jVwy+ezNYbTqxjFW1IIzHgHWvtU+32WGfgg9LtRi1SS6fJAEH3/Ble4PSZTgLJ+yycd+ov0s3flvtMsm//kW4qZVhPajgfDOsG5+byavIQ1UGUff1WiGsEAHPrWkQAyC3KfqOWbaN8Orj7mBAn5tBVunmgH8VDx9w6+vfy3a24sxdvVSROsyPkINFvwUVoy9JRlHKReb3LSeGiVbp779DiieUmXqtrvfsfIZ9zuKvzIW8blaDfhb254hwUGSIyN19gqd6FB9qC3ucf2/3ZJhFXQm4ADJ7XiDGnWIJVpWCian7Rm4b8HVTYZKxRXGg3FPWZaYCKX7tv/N6zvqQaf2OcD/TBYYD3krxwpp8D31f7I4T/9+ldC+a4a+CXe37/vEoAAAA==",kh="data:image/webp;base64,UklGRoADAABXRUJQVlA4WAoAAAAQAAAAIAAAIQAAQUxQSI0BAAABkHPbtrG9qvdnxLZtp3KqlLZt2zYqs7Vt27ZtWyu4+iJiAmRO1nbf87ev37y9PK2AwjY8j/3tzJwBcu0GeHfx5JlHv4CXtb2K3QcOdMwbKaWqueATMMij4HV4VitS1qIbgbZuO+B4XjlPgB8VXDrAw5zynAO7omypz0Aj+aa5DrVttWCH/BvBFtt8aBUg+11uZ7Jc5FmqAJoNTS1POR8v5Tj64Lr5zr0mkvpCL8trNkdIZXAdIak1DLS85EC0VOidSy9JXaC/5R73kkuxFWpUMVermlHSOOhg2cfXMvKP2MrXypbusCBABTgsa6lfPMjltxgm2zQfVnjVg+dZHIq/hBkelT5CX7l2AeYnd6n9GpbKfRBwuWmEqeJagOFF6jmpM8DV5QPqt5t96AP/f/3BKCdVOYbrwz5L+L+vk+IaLX1rOtovr+oa6O0kKXPJZt06Vc0dL2meiZ4eziXOmhgUTBkumBgUTDnOmBgWTJkPmZgUTKnPmHaEU6Yj/13KmgRKtxeu5lCS5npwp4AEAFZQOCDMAQAAkAoAnQEqIQAiAD6dRJxLJaOioaq1WViwE4lpAAsARwIQD+J81r/neSb8n/xPsDfyL+kb5B+pI09x6vxhR4TUxwpQK8ev4GZPWHZAAFylNbHMfaQgYEGp7J8ZMqFQAP62ofYauxemdYxC+rfuhmAOWrRN3+nThP2wWtcMH0Z89NRdF9Ao8ArdC78C3+dWHsSemG2ZMRmp5Kdz5e9pj/jB8CwiutiPOunai0SoW0FPN2vEoIRhB/QAMiykYyZ1kj0lZ5O5K4VIyHfyTHw5gEMPbJ2AD96LMB8HX7W0z0tXiRZGRWfoXqpNxnCWr1dP3LwSJP8uV7VMcpUYE7USwByddeH8I1Ts+25+D37yhdu/EW8YK2Zc/Egwwdi+1KeKAR+BEx+mVhhN1NJBCtKltd3na7vGMPGH+EA/pOFp3d3fHi5+0ZV3ultaQWCdxm9XkOjtoS3+Tq+mt/mxnwpasg0hdWN3eunt0n6/XVnj1S+RHi7r6bp/w2+OTcPSIZjZVaKjxfnz1zdAX4BxhbqqSXWSPckoUU/tvql9rndyQkLqEEf9jTPepEIP2MwGnkGnPsGC6FJOT/5QHxk9P/uvqYWQqFvBetW0Fn/vEoAAAA==",Dh="data:image/webp;base64,UklGRiADAABXRUJQVlA4WAoAAAAQAAAAHQAAIQAAQUxQSEQBAAABkHPbtrG90vdnm51R2jZiJ61t26nU2Ulp27aNyra5i3Of89wvIiYA+tZz0JKzeb8FMk+TO+1N+ktyk63SC5T3x03rlRrhymcetf/fruyg8uhyla5PVim8d9DmfCdgxHcLXK9AxmHT1e6DN943cY0CmGzYBABtDxg4QYP8IyT3CGC0gWkaYPgv7jZhgGGnDkVP7jpgsWCKDnE9PBwCPopRLtQLxW57TeKtvcC3JL/Yw32Sn49funRpg517JD+R5D8PK49JfnlOkvU2sv6Q/LxRLLIxgSQv9xTfoy08FnMiv5LkanfjKHOxQrCdm5z/4jgQ/1v8adQVfqCsBDBQ8G9/zciflEshNwjyRP8IAB4JY6/QeM3X4LHfQL67efzso280346G41aT/ngwlHPdzfWEuvCg6vvGHLgumnrhk3yze3QKnAFWUDggtgEAALAKAJ0BKh4AIgA+mUCYSCWkIqE1VAgAsBMJaQAT1z9Q5TQ9w3A1pIubms+aPYC/if9X6s365ewh+xATt/fmts9ZCo8SY7ZDfAa+7X7VEF3sChfqannsEDKKiyO8ReAA/c0vnF2T/3zrC02wbOQ3eGUCG/9ZWzl3ayLUM6ZA3VjFm88+6wasenNOMUh8ErRgU5aaJNfgK9JJpj0hunyyZPd4HfwhLYb109xr3/RHYGx+hnkf/5+M8Xj89JZvyg8UM3xqK3lFWGPA0jv0Hossbd42j6dastXLg9LcA9aKER+8L/lqYmg8uF2/9z7BLMF/6hFVbvojvYc0o+hf1ltcXJpfrKTl3ygcRG/J640Yow+YpbhCtsCkL1l3yMCYBIleXEljS3XV3jdY2ZbbYT0gglapRZWiJdtGNAOqNQpwOqwpBrmkKOeC7oBTAyOOG32c7m5YSXYf5EdrUp7R/t1E1grBLkmjJ3ql1dz+tT5vYmgfX/Yr7fH+2iaP+vrLXp6PpjQWcL8kD/Jt+ncDn/s6Dow3toO+435f7Jj36UfS5l/UvrDbh9b/9o+vO99TVEf/vtXlgAAAAA==",Ih="data:image/webp;base64,UklGRjYDAABXRUJQVlA4WAoAAAAQAAAAHQAAIQAAQUxQSEIBAAABkHLb1rHtsvdrm82Itv1+tqpt219Ss78v2rZtI9k2dziXnoiYANjOaQ2P3udsj+wkT2d7YBPJv5OcRKX3mjbuPuWFcqsOK9/+p+k8P6Oak7S+2sVLN58ud/hq1tPh9xHQrqH6/sbB3a+qDmdBO4HKA20BYJNiMvQZVI6Gcg/JI4Uw3KkYAPVu/hoO0zTKxdDefVIC41HiY5DGq0cCzHeLhXD+VrRw94Xk22B3n0neh/tPJO+52XDp0qXjX0g+duL1jyQ/k/yT46KRJJ9fJskJLhaJjXPEYwex30XPfMFxdqtJ8ms0jov/eTbtKFcA1YIfis2a/4jfiQCWCv4cadL/L+VAAPC/JsgrY5O8AET1P0HlBihjbyvIb4/OHr/5jur9XiqEHleZb4Wh91y7uTDP2/jd6GAxrNNG737zSV6YWgI9VlA4IM4BAAAwCwCdASoeACIAPp08mkiloyKhNVQIALATiWkAE4o/EaUAj1kv7/e+Tv6E/5XuBfx3+leiB69P2A9g/9UAngIOOs7QA7WFs0xzufvmzzdJ9i9uK/fn/sfU1mmqlP57fDKJ4AD+0y3xdSXKrC9VYtfO+aRPR6cpBCC9Mykxb2GnlSTeQATVu6t7qMk8mbaytB48fQRZDwu45e58r6QixW3irVkbypM9jSVMAOo+8YIO1wuSYJfk04nTQGrZlM/GK59nEPBjIcy0j78XaTEnYviveAgwPj5mCYUViWd4Ox0y6jLKnk1n4Wm/CutSonH8KN/Z0jwv87fShr/7EiIsuwMTD+kIu6Ml/QNEskCHZ/jP+ZAAvRTi0S3w06kQsSsL5Zgxx4te6tn/wSxsGhWx+2pnjUjaot3SGklcaE48qWlcAW6XmZ6M5v6eVC9RnESOePoN7Xr8BKRmOdmwAoM/m1zXLGYzcqZBufeVKR4+w+P8FXmlLCEAx8OmdShfv+KRJnv0ejVCYU72/d756Mk8H/Nz61JCW54O//Hb/+ly1GMzGTNkzLH+jipMgqsv+8cihzEvaDrrYQfSYP7P/9XP4Fum4hij//itIMzC8EgAAAA=",jh="data:image/webp;base64,UklGRgADAABXRUJQVlA4WAoAAAAQAAAAGwAAIQAAQUxQSEEBAAABkHNb27G5qq+x2bl0bNu2bXW27dRs09pOStu2y/Gc4NFExATI2n3D8dtv3945saGH/o85+7WTjInLnuH4bFmSVAD7DeM+APy8ceLEjR8AHycoFXb/tx/4sadbsiQld939HdiY/Jsdkk4DGzPkmLYBuP+FHYo9Al/ayDPpNMAOtYAPWXLPH9thfoUh/eLdfLknVWHepYCJPy0HQyhzgLlUMwK4crgOWr5hW7ClVfdgS6Cx/HoIbA4yBu78x6YAo4CHD3lZDhu8RmDa1xBY7zEcyxW1B9Y5jcB2VeoBrHUYhsMVST2B1ZYh+Ki0DPYaJuA3qAIWGfr5zQPGyNywwuW6NAcYJ3vjSoczmgKMk2uTCtuhocB4uTeutPwCJsi3SZUJmCT/5jWWyQrZsobbd2CKwrak4jtTFXrYB9YrfFYn1SUAVlA4IJgBAABQCQCdASocACIAPpk6mUgloyKhNVgIALATCWkAE9SfbDnUv7ryZfRXsBfyX+o74f+tJ0tRSi/TkgcLXHUVVzAgS+hLpab2ksEUzQu1fQuQC+U3AAD+3uyIfhW3485uWb1rG22fxDVuh0bAqIgCb80y4PTDLzpmg19a3YOXKch+chR232Xw9kLXPv0hmrOTTecICFvTH/9lWpm4hJt5j2r6a1YaeLacP9WNp/WcAfLjN8qDac/FIWiUnT3T+xI+IbwR0oHVHH4jEfvyR8JtikVeQHWLI7IwZ4jov0pgr8370sCF0pYg4zq9BjXnAIsF1XbgSXQ0bRp75wciXkVOtQujNjP9nVwfl/k7Fn2cKAG+cB5uxKyQBdH8fe2wYb/wCNuOqnN0e8EfOvidiPq04qtjN6vItYDtDtmxbX8w6Sm9pr+vrlBnEYz/LirZSdm3Yt1yn6h9lKRZf4NxEElCpnCK4xGZii83yra8qGTvhpNRGBP53JE7Gdg3I59hrbgkfVma/lzdDqU6n9toTWaCalz+AH//V6gAAAA=",Fh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC40lEQVR4nO2Yz0tVQRTHNfAJgj60P6B9+nhWoEQZtIiQwgTRqKX/QMvAVRjopl/2+oH/gBQYLaxVP4iEFq6s7BdFC1tIVBZaBmV94tAJHsPcmbn3vfuCx/3CwOXe8z3nzJ0zZ86ZhoYMGTJkyJChQgAtwAAwDswBL4AV4LuOFX03pzIi2/K/nW4EDgKzwDfiQzizqqOx1s4fARapHhZFZy0c3wbcJj3cEhtp/vVVh/HXQAk4ChSBDqBJhzx367eLwCuHntWqrwYwBvyOMHgT2J1AZ6/uAZteeTdWLecvRDj+MInjFv09wP0IG+crVT5pUboJnAK2VOq8kdFOAD8s9iYakgAYtSj7COz38ArAFLAEfNWxpCvZ5eH2Ae8tdkfjOi8bbsPifLeD0wxcAX5FhMO/1bsE5Dw/4IPB23DZNhXkNaOU4wuww+N8VBzbcM8ziSLw2eCIT/mQCUxbMsKAh3OV+Ch5dB62rOZ0SEYwSZMeTsHCWQaGgFYdg8BLSzh1enSfNjhip8eVCRYMwhPXUkekWXG+wyLXrt/Kcc6jWw7BxwZnwVo7Af2W0Ol1GVDeM4M35JAdNmSfBh545mHXbxOcN4Su+ZQrb83gtTpk2wzZtUAbMwZvPmQCMylMIJ9wAtdDJmALIfuGcYfQoEN2JEEI7QkNIdsmljq9KeYmlmzTbpHbCryLuYmbgedBm9iRRsc9Rro0JZZjWTdsm44Ri/PC2e7RfSY4jToOMiEd8nCkPIiLKY/OYUvouA8yRykhx3rRwckBd2M4f8cVmvyNhPVEpYSjmJMCq+CZRMkSTuXY1ErV5fwuSx0UXsx5ymkpdfd5eJ2yOSXD6F9c1+ezATF/APhUcTntaWh+ptTQnIxYvYm0WsoHIaVGgP4+4FEqLWVAUy/vbsTtjfWP79WbOlJt6mNcq7wBLgPHpPnRgyunQ553Ase1a3tb02uVurjYqourxbq53K2L6/UMGTJkyFAX+AN9Goz3BOQxdwAAAABJRU5ErkJggg==";var ol={exports:{}};(function(u,o){(function(x){u.exports=x()})(function(){var x={};Object.defineProperty(x,"__esModule",{value:!0}),x.default=void 0,x.default=function(a){return!(!a||!a.Window)&&a instanceof a.Window};var C={};Object.defineProperty(C,"__esModule",{value:!0}),C.getWindow=function(a){return(0,x.default)(a)?a:(a.ownerDocument||a).defaultView||A.window},C.init=B,C.window=C.realWindow=void 0;var O=void 0;C.realWindow=O;var A=void 0;function B(a){C.realWindow=O=a;var p=a.document.createTextNode("");p.ownerDocument!==a.document&&typeof a.wrap=="function"&&a.wrap(p)===p&&(a=a.wrap(a)),C.window=A=a}C.window=A,typeof window<"u"&&window&&B(window);var f={};function i(a){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},i(a)}Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var l=function(a){return!!a&&i(a)==="object"},c=function(a){return typeof a=="function"},e={window:function(a){return a===C.window||(0,x.default)(a)},docFrag:function(a){return l(a)&&a.nodeType===11},object:l,func:c,number:function(a){return typeof a=="number"},bool:function(a){return typeof a=="boolean"},string:function(a){return typeof a=="string"},element:function(a){if(!a||i(a)!=="object")return!1;var p=C.getWindow(a)||C.window;return/object|function/.test(typeof Element>"u"?"undefined":i(Element))?a instanceof Element||a instanceof p.Element:a.nodeType===1&&typeof a.nodeName=="string"},plainObject:function(a){return l(a)&&!!a.constructor&&/function Object\b/.test(a.constructor.toString())},array:function(a){return l(a)&&a.length!==void 0&&c(a.splice)}};f.default=e;var n={};function t(a){var p=a.interaction;if(p.prepared.name==="drag"){var g=p.prepared.axis;g==="x"?(p.coords.cur.page.y=p.coords.start.page.y,p.coords.cur.client.y=p.coords.start.client.y,p.coords.velocity.client.y=0,p.coords.velocity.page.y=0):g==="y"&&(p.coords.cur.page.x=p.coords.start.page.x,p.coords.cur.client.x=p.coords.start.client.x,p.coords.velocity.client.x=0,p.coords.velocity.page.x=0)}}function s(a){var p=a.iEvent,g=a.interaction;if(g.prepared.name==="drag"){var v=g.prepared.axis;if(v==="x"||v==="y"){var _=v==="x"?"y":"x";p.page[_]=g.coords.start.page[_],p.client[_]=g.coords.start.client[_],p.delta[_]=0}}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var h={id:"actions/drag",install:function(a){var p=a.actions,g=a.Interactable,v=a.defaults;g.prototype.draggable=h.draggable,p.map.drag=h,p.methodDict.drag="draggable",v.actions.drag=h.defaults},listeners:{"interactions:before-action-move":t,"interactions:action-resume":t,"interactions:action-move":s,"auto-start:check":function(a){var p=a.interaction,g=a.interactable,v=a.buttons,_=g.options.drag;if(_&&_.enabled&&(!p.pointerIsDown||!/mouse|pointer/.test(p.pointerType)||v&g.options.drag.mouseButtons))return a.action={name:"drag",axis:_.lockAxis==="start"?_.startAxis:_.lockAxis},!1}},draggable:function(a){return f.default.object(a)?(this.options.drag.enabled=a.enabled!==!1,this.setPerAction("drag",a),this.setOnEvents("drag",a),/^(xy|x|y|start)$/.test(a.lockAxis)&&(this.options.drag.lockAxis=a.lockAxis),/^(xy|x|y)$/.test(a.startAxis)&&(this.options.drag.startAxis=a.startAxis),this):f.default.bool(a)?(this.options.drag.enabled=a,this):this.options.drag},beforeMove:t,move:s,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"}},r=h;n.default=r;var d={};Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var m={init:function(a){var p=a;m.document=p.document,m.DocumentFragment=p.DocumentFragment||y,m.SVGElement=p.SVGElement||y,m.SVGSVGElement=p.SVGSVGElement||y,m.SVGElementInstance=p.SVGElementInstance||y,m.Element=p.Element||y,m.HTMLElement=p.HTMLElement||m.Element,m.Event=p.Event,m.Touch=p.Touch||y,m.PointerEvent=p.PointerEvent||p.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function y(){}var b=m;d.default=b;var T={};Object.defineProperty(T,"__esModule",{value:!0}),T.default=void 0;var M={init:function(a){var p=d.default.Element,g=a.navigator||{};M.supportsTouch="ontouchstart"in a||f.default.func(a.DocumentTouch)&&d.default.document instanceof a.DocumentTouch,M.supportsPointerEvent=g.pointerEnabled!==!1&&!!d.default.PointerEvent,M.isIOS=/iP(hone|od|ad)/.test(g.platform),M.isIOS7=/iP(hone|od|ad)/.test(g.platform)&&/OS 7[^\d]/.test(g.appVersion),M.isIe9=/MSIE 9/.test(g.userAgent),M.isOperaMobile=g.appName==="Opera"&&M.supportsTouch&&/Presto/.test(g.userAgent),M.prefixedMatchesSelector="matches"in p.prototype?"matches":"webkitMatchesSelector"in p.prototype?"webkitMatchesSelector":"mozMatchesSelector"in p.prototype?"mozMatchesSelector":"oMatchesSelector"in p.prototype?"oMatchesSelector":"msMatchesSelector",M.pEventTypes=M.supportsPointerEvent?d.default.PointerEvent===a.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,M.wheelEvent=d.default.document&&"onmousewheel"in d.default.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},X=M;T.default=X;var z={};function st(a){var p=a.parentNode;if(f.default.docFrag(p)){for(;(p=p.host)&&f.default.docFrag(p););return p}return p}function ft(a,p){return C.window!==C.realWindow&&(p=p.replace(/\/deep\//g," ")),a[T.default.prefixedMatchesSelector](p)}Object.defineProperty(z,"__esModule",{value:!0}),z.closest=function(a,p){for(;f.default.element(a);){if(ft(a,p))return a;a=st(a)}return null},z.getActualElement=function(a){return a.correspondingUseElement||a},z.getElementClientRect=_t,z.getElementRect=function(a){var p=_t(a);if(!T.default.isIOS7&&p){var g=St(C.getWindow(a));p.left+=g.x,p.right+=g.x,p.top+=g.y,p.bottom+=g.y}return p},z.getPath=function(a){for(var p=[];a;)p.push(a),a=st(a);return p},z.getScrollXY=St,z.indexOfDeepestElement=function(a){for(var p,g=[],v=0;v<a.length;v++){var _=a[v],w=a[p];if(_&&v!==p)if(w){var E=vt(_),S=vt(w);if(E!==_.ownerDocument)if(S!==_.ownerDocument)if(E!==S){g=g.length?g:xt(w);var P=void 0;if(w instanceof d.default.HTMLElement&&_ instanceof d.default.SVGElement&&!(_ instanceof d.default.SVGSVGElement)){if(_===S)continue;P=_.ownerSVGElement}else P=_;for(var L=xt(P,w.ownerDocument),W=0;L[W]&&L[W]===g[W];)W++;var K=[L[W-1],L[W],g[W]];if(K[0])for(var rt=K[0].lastChild;rt;){if(rt===K[1]){p=v,g=L;break}if(rt===K[2])break;rt=rt.previousSibling}}else ut=_,tt=w,(parseInt(C.getWindow(ut).getComputedStyle(ut).zIndex,10)||0)>=(parseInt(C.getWindow(tt).getComputedStyle(tt).zIndex,10)||0)&&(p=v);else p=v}else p=v}var ut,tt;return p},z.matchesSelector=ft,z.matchesUpTo=function(a,p,g){for(;f.default.element(a);){if(ft(a,p))return!0;if((a=st(a))===g)return ft(a,p)}return!1},z.nodeContains=function(a,p){if(a.contains)return a.contains(p);for(;p;){if(p===a)return!0;p=p.parentNode}return!1},z.parentNode=st,z.trySelector=function(a){return!!f.default.string(a)&&(d.default.document.querySelector(a),!0)};var vt=function(a){return a.parentNode||a.host};function xt(a,p){for(var g,v=[],_=a;(g=vt(_))&&_!==p&&g!==_.ownerDocument;)v.unshift(_),_=g;return v}function St(a){return{x:(a=a||C.window).scrollX||a.document.documentElement.scrollLeft,y:a.scrollY||a.document.documentElement.scrollTop}}function _t(a){var p=a instanceof d.default.SVGElement?a.getBoundingClientRect():a.getClientRects()[0];return p&&{left:p.left,right:p.right,top:p.top,bottom:p.bottom,width:p.width||p.right-p.left,height:p.height||p.bottom-p.top}}var ot={};Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=function(a,p){for(var g in p)a[g]=p[g];return a};var pt={};function wt(a,p){(p==null||p>a.length)&&(p=a.length);for(var g=0,v=Array(p);g<p;g++)v[g]=a[g];return v}function bt(a,p,g){return a==="parent"?(0,z.parentNode)(g):a==="self"?p.getRect(g):(0,z.closest)(g,a)}Object.defineProperty(pt,"__esModule",{value:!0}),pt.addEdges=function(a,p,g){a.left&&(p.left+=g.x),a.right&&(p.right+=g.x),a.top&&(p.top+=g.y),a.bottom&&(p.bottom+=g.y),p.width=p.right-p.left,p.height=p.bottom-p.top},pt.getStringOptionResult=bt,pt.rectToXY=function(a){return a&&{x:"x"in a?a.x:a.left,y:"y"in a?a.y:a.top}},pt.resolveRectLike=function(a,p,g,v){var _,w=a;return f.default.string(w)?w=bt(w,p,g):f.default.func(w)&&(w=w.apply(void 0,function(E){if(Array.isArray(E))return wt(E)}(_=v)||function(E){if(typeof Symbol<"u"&&E[Symbol.iterator]!=null||E["@@iterator"]!=null)return Array.from(E)}(_)||function(E,S){if(E){if(typeof E=="string")return wt(E,S);var P=Object.prototype.toString.call(E).slice(8,-1);return P==="Object"&&E.constructor&&(P=E.constructor.name),P==="Map"||P==="Set"?Array.from(E):P==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(P)?wt(E,S):void 0}}(_)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())),f.default.element(w)&&(w=(0,z.getElementRect)(w)),w},pt.tlbrToXywh=function(a){return!a||"x"in a&&"y"in a||((a=(0,ot.default)({},a)).x=a.left||0,a.y=a.top||0,a.width=a.width||(a.right||0)-a.x,a.height=a.height||(a.bottom||0)-a.y),a},pt.xywhToTlbr=function(a){return!a||"left"in a&&"top"in a||((a=(0,ot.default)({},a)).left=a.x||0,a.top=a.y||0,a.right=a.right||a.left+a.width,a.bottom=a.bottom||a.top+a.height),a};var k={};Object.defineProperty(k,"__esModule",{value:!0}),k.default=function(a,p,g){var v=a.options[g],_=v&&v.origin||a.options.origin,w=(0,pt.resolveRectLike)(_,a,p,[a&&p]);return(0,pt.rectToXY)(w)||{x:0,y:0}};var U={};function N(a){return a.trim().split(/ +/)}Object.defineProperty(U,"__esModule",{value:!0}),U.default=function a(p,g,v){if(v=v||{},f.default.string(p)&&p.search(" ")!==-1&&(p=N(p)),f.default.array(p))return p.reduce(function(P,L){return(0,ot.default)(P,a(L,g,v))},v);if(f.default.object(p)&&(g=p,p=""),f.default.func(g))v[p]=v[p]||[],v[p].push(g);else if(f.default.array(g))for(var _=0;_<g.length;_++){var w;w=g[_],a(p,w,v)}else if(f.default.object(g))for(var E in g){var S=N(E).map(function(P){return"".concat(p).concat(P)});a(S,g[E],v)}return v};var H={};Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0,H.default=function(a,p){return Math.sqrt(a*a+p*p)};var nt={};Object.defineProperty(nt,"__esModule",{value:!0}),nt.default=function(a,p){a.__set||(a.__set={});var g=function(_){typeof a[_]!="function"&&_!=="__set"&&Object.defineProperty(a,_,{get:function(){return _ in a.__set?a.__set[_]:a.__set[_]=p[_]},set:function(w){a.__set[_]=w},configurable:!0})};for(var v in p)g(v);return a};var j={};function I(a){return a instanceof d.default.Event||a instanceof d.default.Touch}function q(a,p,g){return a=a||"page",(g=g||{}).x=p[a+"X"],g.y=p[a+"Y"],g}function $(a,p){return p=p||{x:0,y:0},T.default.isOperaMobile&&I(a)?(q("screen",a,p),p.x+=window.scrollX,p.y+=window.scrollY):q("page",a,p),p}function at(a,p){return p=p||{},T.default.isOperaMobile&&I(a)?q("screen",a,p):q("client",a,p),p}function it(a){var p=[];return f.default.array(a)?(p[0]=a[0],p[1]=a[1]):a.type==="touchend"?a.touches.length===1?(p[0]=a.touches[0],p[1]=a.changedTouches[0]):a.touches.length===0&&(p[0]=a.changedTouches[0],p[1]=a.changedTouches[1]):(p[0]=a.touches[0],p[1]=a.touches[1]),p}function ht(a){for(var p={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},g=0;g<a.length;g++){var v=a[g];for(var _ in p)p[_]+=v[_]}for(var w in p)p[w]/=a.length;return p}Object.defineProperty(j,"__esModule",{value:!0}),j.coordsToEvent=function(a){return{coords:a,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}},j.copyCoords=function(a,p){a.page=a.page||{},a.page.x=p.page.x,a.page.y=p.page.y,a.client=a.client||{},a.client.x=p.client.x,a.client.y=p.client.y,a.timeStamp=p.timeStamp},j.getClientXY=at,j.getEventTargets=function(a){var p=f.default.func(a.composedPath)?a.composedPath():a.path;return[z.getActualElement(p?p[0]:a.target),z.getActualElement(a.currentTarget)]},j.getPageXY=$,j.getPointerId=function(a){return f.default.number(a.pointerId)?a.pointerId:a.identifier},j.getPointerType=function(a){return f.default.string(a.pointerType)?a.pointerType:f.default.number(a.pointerType)?[void 0,void 0,"touch","pen","mouse"][a.pointerType]:/touch/.test(a.type||"")||a instanceof d.default.Touch?"touch":"mouse"},j.getTouchPair=it,j.getXY=q,j.isNativePointer=I,j.newCoords=function(){return{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},j.pointerAverage=ht,Object.defineProperty(j,"pointerExtend",{enumerable:!0,get:function(){return nt.default}}),j.setCoordDeltas=function(a,p,g){a.page.x=g.page.x-p.page.x,a.page.y=g.page.y-p.page.y,a.client.x=g.client.x-p.client.x,a.client.y=g.client.y-p.client.y,a.timeStamp=g.timeStamp-p.timeStamp},j.setCoordVelocity=function(a,p){var g=Math.max(p.timeStamp/1e3,.001);a.page.x=p.page.x/g,a.page.y=p.page.y/g,a.client.x=p.client.x/g,a.client.y=p.client.y/g,a.timeStamp=g},j.setCoords=function(a,p,g){var v=p.length>1?ht(p):p[0];$(v,a.page),at(v,a.client),a.timeStamp=g},j.setZeroCoords=function(a){a.page.x=0,a.page.y=0,a.client.x=0,a.client.y=0},j.touchAngle=function(a,p){var g=p+"X",v=p+"Y",_=it(a),w=_[1][g]-_[0][g],E=_[1][v]-_[0][v];return 180*Math.atan2(E,w)/Math.PI},j.touchBBox=function(a){if(!a.length)return null;var p=it(a),g=Math.min(p[0].pageX,p[1].pageX),v=Math.min(p[0].pageY,p[1].pageY),_=Math.max(p[0].pageX,p[1].pageX),w=Math.max(p[0].pageY,p[1].pageY);return{x:g,y:v,left:g,top:v,right:_,bottom:w,width:_-g,height:w-v}},j.touchDistance=function(a,p){var g=p+"X",v=p+"Y",_=it(a),w=_[0][g]-_[1][g],E=_[0][v]-_[1][v];return(0,H.default)(w,E)};var dt={};function F(a,p){for(var g=0;g<p.length;g++){var v=p[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}function D(a,p,g){return p in a?Object.defineProperty(a,p,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[p]=g,a}Object.defineProperty(dt,"__esModule",{value:!0}),dt.BaseEvent=void 0;var R=function(){function a(v){(function(_,w){if(!(_ instanceof w))throw new TypeError("Cannot call a class as a function")})(this,a),D(this,"immediatePropagationStopped",!1),D(this,"propagationStopped",!1),this._interaction=v}var p,g;return p=a,(g=[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&F(p.prototype,g),Object.defineProperty(p,"prototype",{writable:!1}),a}();dt.BaseEvent=R,Object.defineProperty(R.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var Y={};Object.defineProperty(Y,"__esModule",{value:!0}),Y.remove=Y.merge=Y.from=Y.findIndex=Y.find=Y.contains=void 0,Y.contains=function(a,p){return a.indexOf(p)!==-1},Y.remove=function(a,p){return a.splice(a.indexOf(p),1)};var V=function(a,p){for(var g=0;g<p.length;g++){var v=p[g];a.push(v)}return a};Y.merge=V,Y.from=function(a){return V([],a)};var G=function(a,p){for(var g=0;g<a.length;g++)if(p(a[g],g,a))return g;return-1};Y.findIndex=G,Y.find=function(a,p){return a[G(a,p)]};var J={};function Z(a){return Z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},Z(a)}function lt(a,p){for(var g=0;g<p.length;g++){var v=p[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}function et(a,p){return et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,v){return g.__proto__=v,g},et(a,p)}function Q(a,p){if(p&&(Z(p)==="object"||typeof p=="function"))return p;if(p!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ct(a)}function ct(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function gt(a){return gt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(p){return p.__proto__||Object.getPrototypeOf(p)},gt(a)}function Ct(a,p,g){return p in a?Object.defineProperty(a,p,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[p]=g,a}Object.defineProperty(J,"__esModule",{value:!0}),J.DropEvent=void 0;var Ot=function(a){(function(S,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(P&&P.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),Object.defineProperty(S,"prototype",{writable:!1}),P&&et(S,P)})(E,a);var p,g,v,_,w=(v=E,_=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var S,P=gt(v);if(_){var L=gt(this).constructor;S=Reflect.construct(P,arguments,L)}else S=P.apply(this,arguments);return Q(this,S)});function E(S,P,L){var W;(function(tt,mt){if(!(tt instanceof mt))throw new TypeError("Cannot call a class as a function")})(this,E),Ct(ct(W=w.call(this,P._interaction)),"dropzone",void 0),Ct(ct(W),"dragEvent",void 0),Ct(ct(W),"relatedTarget",void 0),Ct(ct(W),"draggable",void 0),Ct(ct(W),"propagationStopped",!1),Ct(ct(W),"immediatePropagationStopped",!1);var K=L==="dragleave"?S.prev:S.cur,rt=K.element,ut=K.dropzone;return W.type=L,W.target=rt,W.currentTarget=rt,W.dropzone=ut,W.dragEvent=P,W.relatedTarget=P.target,W.draggable=P.interactable,W.timeStamp=P.timeStamp,W}return p=E,(g=[{key:"reject",value:function(){var S=this,P=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&P.cur.dropzone===this.dropzone&&P.cur.element===this.target)if(P.prev.dropzone=this.dropzone,P.prev.element=this.target,P.rejected=!0,P.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var L=P.activeDrops,W=Y.findIndex(L,function(rt){var ut=rt.dropzone,tt=rt.element;return ut===S.dropzone&&tt===S.target});P.activeDrops.splice(W,1);var K=new E(P,this.dragEvent,"dropdeactivate");K.dropzone=this.dropzone,K.target=this.target,this.dropzone.fire(K)}else this.dropzone.fire(new E(P,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&lt(p.prototype,g),Object.defineProperty(p,"prototype",{writable:!1}),E}(dt.BaseEvent);J.DropEvent=Ot;var Pt={};function Mt(a,p){for(var g=0;g<a.slice().length;g++){var v=a.slice()[g],_=v.dropzone,w=v.element;p.dropzone=_,p.target=w,_.fire(p),p.propagationStopped=p.immediatePropagationStopped=!1}}function Dt(a,p){for(var g=function(w,E){for(var S=w.interactables,P=[],L=0;L<S.list.length;L++){var W=S.list[L];if(W.options.drop.enabled){var K=W.options.drop.accept;if(!(f.default.element(K)&&K!==E||f.default.string(K)&&!z.matchesSelector(E,K)||f.default.func(K)&&!K({dropzone:W,draggableElement:E})))for(var rt=f.default.string(W.target)?W._context.querySelectorAll(W.target):f.default.array(W.target)?W.target:[W.target],ut=0;ut<rt.length;ut++){var tt=rt[ut];tt!==E&&P.push({dropzone:W,element:tt,rect:W.getRect(tt)})}}}return P}(a,p),v=0;v<g.length;v++){var _=g[v];_.rect=_.dropzone.getRect(_.element)}return g}function Gt(a,p,g){for(var v=a.dropState,_=a.interactable,w=a.element,E=[],S=0;S<v.activeDrops.length;S++){var P=v.activeDrops[S],L=P.dropzone,W=P.element,K=P.rect;E.push(L.dropCheck(p,g,_,w,W,K)?W:null)}var rt=z.indexOfDeepestElement(E);return v.activeDrops[rt]||null}function re(a,p,g){var v=a.dropState,_={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return g.type==="dragstart"&&(_.activate=new J.DropEvent(v,g,"dropactivate"),_.activate.target=null,_.activate.dropzone=null),g.type==="dragend"&&(_.deactivate=new J.DropEvent(v,g,"dropdeactivate"),_.deactivate.target=null,_.deactivate.dropzone=null),v.rejected||(v.cur.element!==v.prev.element&&(v.prev.dropzone&&(_.leave=new J.DropEvent(v,g,"dragleave"),g.dragLeave=_.leave.target=v.prev.element,g.prevDropzone=_.leave.dropzone=v.prev.dropzone),v.cur.dropzone&&(_.enter=new J.DropEvent(v,g,"dragenter"),g.dragEnter=v.cur.element,g.dropzone=v.cur.dropzone)),g.type==="dragend"&&v.cur.dropzone&&(_.drop=new J.DropEvent(v,g,"drop"),g.dropzone=v.cur.dropzone,g.relatedTarget=v.cur.element),g.type==="dragmove"&&v.cur.dropzone&&(_.move=new J.DropEvent(v,g,"dropmove"),_.move.dragmove=g,g.dropzone=v.cur.dropzone)),_}function $t(a,p){var g=a.dropState,v=g.activeDrops,_=g.cur,w=g.prev;p.leave&&w.dropzone.fire(p.leave),p.enter&&_.dropzone.fire(p.enter),p.move&&_.dropzone.fire(p.move),p.drop&&_.dropzone.fire(p.drop),p.deactivate&&Mt(v,p.deactivate),g.prev.dropzone=_.dropzone,g.prev.element=_.element}function Oe(a,p){var g=a.interaction,v=a.iEvent,_=a.event;if(v.type==="dragmove"||v.type==="dragend"){var w=g.dropState;p.dynamicDrop&&(w.activeDrops=Dt(p,g.element));var E=v,S=Gt(g,E,_);w.rejected=w.rejected&&!!S&&S.dropzone===w.cur.dropzone&&S.element===w.cur.element,w.cur.dropzone=S&&S.dropzone,w.cur.element=S&&S.element,w.events=re(g,0,E)}}Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.default=void 0;var We={id:"actions/drop",install:function(a){var p=a.actions,g=a.interactStatic,v=a.Interactable,_=a.defaults;a.usePlugin(n.default),v.prototype.dropzone=function(w){return function(E,S){if(f.default.object(S)){if(E.options.drop.enabled=S.enabled!==!1,S.listeners){var P=(0,U.default)(S.listeners),L=Object.keys(P).reduce(function(W,K){return W[/^(enter|leave)/.test(K)?"drag".concat(K):/^(activate|deactivate|move)/.test(K)?"drop".concat(K):K]=P[K],W},{});E.off(E.options.drop.listeners),E.on(L),E.options.drop.listeners=L}return f.default.func(S.ondrop)&&E.on("drop",S.ondrop),f.default.func(S.ondropactivate)&&E.on("dropactivate",S.ondropactivate),f.default.func(S.ondropdeactivate)&&E.on("dropdeactivate",S.ondropdeactivate),f.default.func(S.ondragenter)&&E.on("dragenter",S.ondragenter),f.default.func(S.ondragleave)&&E.on("dragleave",S.ondragleave),f.default.func(S.ondropmove)&&E.on("dropmove",S.ondropmove),/^(pointer|center)$/.test(S.overlap)?E.options.drop.overlap=S.overlap:f.default.number(S.overlap)&&(E.options.drop.overlap=Math.max(Math.min(1,S.overlap),0)),"accept"in S&&(E.options.drop.accept=S.accept),"checker"in S&&(E.options.drop.checker=S.checker),E}return f.default.bool(S)?(E.options.drop.enabled=S,E):E.options.drop}(this,w)},v.prototype.dropCheck=function(w,E,S,P,L,W){return function(K,rt,ut,tt,mt,Tt,yt){var Et=!1;if(!(yt=yt||K.getRect(Tt)))return!!K.options.drop.checker&&K.options.drop.checker(rt,ut,Et,K,Tt,tt,mt);var At=K.options.drop.overlap;if(At==="pointer"){var jt=(0,k.default)(tt,mt,"drag"),Bt=j.getPageXY(rt);Bt.x+=jt.x,Bt.y+=jt.y;var Wt=Bt.x>yt.left&&Bt.x<yt.right,Rt=Bt.y>yt.top&&Bt.y<yt.bottom;Et=Wt&&Rt}var Yt=tt.getRect(mt);if(Yt&&At==="center"){var ve=Yt.left+Yt.width/2,Be=Yt.top+Yt.height/2;Et=ve>=yt.left&&ve<=yt.right&&Be>=yt.top&&Be<=yt.bottom}return Yt&&f.default.number(At)&&(Et=Math.max(0,Math.min(yt.right,Yt.right)-Math.max(yt.left,Yt.left))*Math.max(0,Math.min(yt.bottom,Yt.bottom)-Math.max(yt.top,Yt.top))/(Yt.width*Yt.height)>=At),K.options.drop.checker&&(Et=K.options.drop.checker(rt,ut,Et,K,Tt,tt,mt)),Et}(this,w,E,S,P,L,W)},g.dynamicDrop=function(w){return f.default.bool(w)?(a.dynamicDrop=w,g):a.dynamicDrop},(0,ot.default)(p.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),p.methodDict.drop="dropzone",a.dynamicDrop=!1,_.actions.drop=We.defaults},listeners:{"interactions:before-action-start":function(a){var p=a.interaction;p.prepared.name==="drag"&&(p.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(a,p){var g=a.interaction,v=(a.event,a.iEvent);if(g.prepared.name==="drag"){var _=g.dropState;_.activeDrops=null,_.events=null,_.activeDrops=Dt(p,g.element),_.events=re(g,0,v),_.events.activate&&(Mt(_.activeDrops,_.events.activate),p.fire("actions/drop:start",{interaction:g,dragEvent:v}))}},"interactions:action-move":Oe,"interactions:after-action-move":function(a,p){var g=a.interaction,v=a.iEvent;g.prepared.name==="drag"&&($t(g,g.dropState.events),p.fire("actions/drop:move",{interaction:g,dragEvent:v}),g.dropState.events={})},"interactions:action-end":function(a,p){if(a.interaction.prepared.name==="drag"){var g=a.interaction,v=a.iEvent;Oe(a,p),$t(g,g.dropState.events),p.fire("actions/drop:end",{interaction:g,dragEvent:v})}},"interactions:stop":function(a){var p=a.interaction;if(p.prepared.name==="drag"){var g=p.dropState;g&&(g.activeDrops=null,g.events=null,g.cur.dropzone=null,g.cur.element=null,g.prev.dropzone=null,g.prev.element=null,g.rejected=!1)}}},getActiveDrops:Dt,getDrop:Gt,getDropEvents:re,fireDropEvents:$t,defaults:{enabled:!1,accept:null,overlap:"pointer"}},Zt=We;Pt.default=Zt;var te={};function vi(a){var p=a.interaction,g=a.iEvent,v=a.phase;if(p.prepared.name==="gesture"){var _=p.pointers.map(function(L){return L.pointer}),w=v==="start",E=v==="end",S=p.interactable.options.deltaSource;if(g.touches=[_[0],_[1]],w)g.distance=j.touchDistance(_,S),g.box=j.touchBBox(_),g.scale=1,g.ds=0,g.angle=j.touchAngle(_,S),g.da=0,p.gesture.startDistance=g.distance,p.gesture.startAngle=g.angle;else if(E){var P=p.prevEvent;g.distance=P.distance,g.box=P.box,g.scale=P.scale,g.ds=0,g.angle=P.angle,g.da=0}else g.distance=j.touchDistance(_,S),g.box=j.touchBBox(_),g.scale=g.distance/p.gesture.startDistance,g.angle=j.touchAngle(_,S),g.ds=g.scale-p.gesture.scale,g.da=g.angle-p.gesture.angle;p.gesture.distance=g.distance,p.gesture.angle=g.angle,f.default.number(g.scale)&&g.scale!==1/0&&!isNaN(g.scale)&&(p.gesture.scale=g.scale)}}Object.defineProperty(te,"__esModule",{value:!0}),te.default=void 0;var yr={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(a){var p=a.actions,g=a.Interactable,v=a.defaults;g.prototype.gesturable=function(_){return f.default.object(_)?(this.options.gesture.enabled=_.enabled!==!1,this.setPerAction("gesture",_),this.setOnEvents("gesture",_),this):f.default.bool(_)?(this.options.gesture.enabled=_,this):this.options.gesture},p.map.gesture=yr,p.methodDict.gesture="gesturable",v.actions.gesture=yr.defaults},listeners:{"interactions:action-start":vi,"interactions:action-move":vi,"interactions:action-end":vi,"interactions:new":function(a){a.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(a){if(!(a.interaction.pointers.length<2)){var p=a.interactable.options.gesture;if(p&&p.enabled)return a.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""}},sl=yr;te.default=sl;var gn={};function al(a,p,g,v,_,w,E){if(!p)return!1;if(p===!0){var S=f.default.number(w.width)?w.width:w.right-w.left,P=f.default.number(w.height)?w.height:w.bottom-w.top;if(E=Math.min(E,Math.abs((a==="left"||a==="right"?S:P)/2)),S<0&&(a==="left"?a="right":a==="right"&&(a="left")),P<0&&(a==="top"?a="bottom":a==="bottom"&&(a="top")),a==="left"){var L=S>=0?w.left:w.right;return g.x<L+E}if(a==="top"){var W=P>=0?w.top:w.bottom;return g.y<W+E}if(a==="right")return g.x>(S>=0?w.right:w.left)-E;if(a==="bottom")return g.y>(P>=0?w.bottom:w.top)-E}return!!f.default.element(v)&&(f.default.element(p)?p===v:z.matchesUpTo(v,p,_))}function Xo(a){var p=a.iEvent,g=a.interaction;if(g.prepared.name==="resize"&&g.resizeAxes){var v=p;g.interactable.options.resize.square?(g.resizeAxes==="y"?v.delta.x=v.delta.y:v.delta.y=v.delta.x,v.axes="xy"):(v.axes=g.resizeAxes,g.resizeAxes==="x"?v.delta.y=0:g.resizeAxes==="y"&&(v.delta.x=0))}}Object.defineProperty(gn,"__esModule",{value:!0}),gn.default=void 0;var Ie={id:"actions/resize",before:["actions/drag"],install:function(a){var p=a.actions,g=a.browser,v=a.Interactable,_=a.defaults;Ie.cursors=function(w){return w.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(g),Ie.defaultMargin=g.supportsTouch||g.supportsPointerEvent?20:10,v.prototype.resizable=function(w){return function(E,S,P){return f.default.object(S)?(E.options.resize.enabled=S.enabled!==!1,E.setPerAction("resize",S),E.setOnEvents("resize",S),f.default.string(S.axis)&&/^x$|^y$|^xy$/.test(S.axis)?E.options.resize.axis=S.axis:S.axis===null&&(E.options.resize.axis=P.defaults.actions.resize.axis),f.default.bool(S.preserveAspectRatio)?E.options.resize.preserveAspectRatio=S.preserveAspectRatio:f.default.bool(S.square)&&(E.options.resize.square=S.square),E):f.default.bool(S)?(E.options.resize.enabled=S,E):E.options.resize}(this,w,a)},p.map.resize=Ie,p.methodDict.resize="resizable",_.actions.resize=Ie.defaults},listeners:{"interactions:new":function(a){a.interaction.resizeAxes="xy"},"interactions:action-start":function(a){(function(p){var g=p.iEvent,v=p.interaction;if(v.prepared.name==="resize"&&v.prepared.edges){var _=g,w=v.rect;v._rects={start:(0,ot.default)({},w),corrected:(0,ot.default)({},w),previous:(0,ot.default)({},w),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},_.edges=v.prepared.edges,_.rect=v._rects.corrected,_.deltaRect=v._rects.delta}})(a),Xo(a)},"interactions:action-move":function(a){(function(p){var g=p.iEvent,v=p.interaction;if(v.prepared.name==="resize"&&v.prepared.edges){var _=g,w=v.interactable.options.resize.invert,E=w==="reposition"||w==="negate",S=v.rect,P=v._rects,L=P.start,W=P.corrected,K=P.delta,rt=P.previous;if((0,ot.default)(rt,W),E){if((0,ot.default)(W,S),w==="reposition"){if(W.top>W.bottom){var ut=W.top;W.top=W.bottom,W.bottom=ut}if(W.left>W.right){var tt=W.left;W.left=W.right,W.right=tt}}}else W.top=Math.min(S.top,L.bottom),W.bottom=Math.max(S.bottom,L.top),W.left=Math.min(S.left,L.right),W.right=Math.max(S.right,L.left);for(var mt in W.width=W.right-W.left,W.height=W.bottom-W.top,W)K[mt]=W[mt]-rt[mt];_.edges=v.prepared.edges,_.rect=W,_.deltaRect=K}})(a),Xo(a)},"interactions:action-end":function(a){var p=a.iEvent,g=a.interaction;if(g.prepared.name==="resize"&&g.prepared.edges){var v=p;v.edges=g.prepared.edges,v.rect=g._rects.corrected,v.deltaRect=g._rects.delta}},"auto-start:check":function(a){var p=a.interaction,g=a.interactable,v=a.element,_=a.rect,w=a.buttons;if(_){var E=(0,ot.default)({},p.coords.cur.page),S=g.options.resize;if(S&&S.enabled&&(!p.pointerIsDown||!/mouse|pointer/.test(p.pointerType)||w&S.mouseButtons)){if(f.default.object(S.edges)){var P={left:!1,right:!1,top:!1,bottom:!1};for(var L in P)P[L]=al(L,S.edges[L],E,p._latestPointer.eventTarget,v,_,S.margin||Ie.defaultMargin);P.left=P.left&&!P.right,P.top=P.top&&!P.bottom,(P.left||P.right||P.top||P.bottom)&&(a.action={name:"resize",edges:P})}else{var W=S.axis!=="y"&&E.x>_.right-Ie.defaultMargin,K=S.axis!=="x"&&E.y>_.bottom-Ie.defaultMargin;(W||K)&&(a.action={name:"resize",axes:(W?"x":"")+(K?"y":"")})}return!a.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(a){var p=a.edges,g=a.axis,v=a.name,_=Ie.cursors,w=null;if(g)w=_[v+g];else if(p){for(var E="",S=["top","bottom","left","right"],P=0;P<S.length;P++){var L=S[P];p[L]&&(E+=L)}w=_[E]}return w},defaultMargin:null},ll=Ie;gn.default=ll;var Fi={};Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.default=void 0;var cl={id:"actions",install:function(a){a.usePlugin(te.default),a.usePlugin(gn.default),a.usePlugin(n.default),a.usePlugin(Pt.default)}};Fi.default=cl;var be={};Object.defineProperty(be,"__esModule",{value:!0}),be.default=void 0;var je,Ze,zo=0,ul={request:function(a){return je(a)},cancel:function(a){return Ze(a)},init:function(a){if(je=a.requestAnimationFrame,Ze=a.cancelAnimationFrame,!je)for(var p=["ms","moz","webkit","o"],g=0;g<p.length;g++){var v=p[g];je=a["".concat(v,"RequestAnimationFrame")],Ze=a["".concat(v,"CancelAnimationFrame")]||a["".concat(v,"CancelRequestAnimationFrame")]}je=je&&je.bind(a),Ze=Ze&&Ze.bind(a),je||(je=function(_){var w=Date.now(),E=Math.max(0,16-(w-zo)),S=a.setTimeout(function(){_(w+E)},E);return zo=w+E,S},Ze=function(_){return clearTimeout(_)})}};be.default=ul;var Fe={};Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.default=void 0,Fe.getContainer=vn,Fe.getScroll=Ri,Fe.getScrollSize=function(a){return f.default.window(a)&&(a=window.document.body),{x:a.scrollWidth,y:a.scrollHeight}},Fe.getScrollSizeDelta=function(a,p){var g=a.interaction,v=a.element,_=g&&g.interactable.options[g.prepared.name].autoScroll;if(!_||!_.enabled)return p(),{x:0,y:0};var w=vn(_.container,g.interactable,v),E=Ri(w);p();var S=Ri(w);return{x:S.x-E.x,y:S.y-E.y}};var kt={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(a){kt.isScrolling=!0,be.default.cancel(kt.i),a.autoScroll=kt,kt.interaction=a,kt.prevTime=kt.now(),kt.i=be.default.request(kt.scroll)},stop:function(){kt.isScrolling=!1,kt.interaction&&(kt.interaction.autoScroll=null),be.default.cancel(kt.i)},scroll:function(){var a=kt.interaction,p=a.interactable,g=a.element,v=a.prepared.name,_=p.options[v].autoScroll,w=vn(_.container,p,g),E=kt.now(),S=(E-kt.prevTime)/1e3,P=_.speed*S;if(P>=1){var L={x:kt.x*P,y:kt.y*P};if(L.x||L.y){var W=Ri(w);f.default.window(w)?w.scrollBy(L.x,L.y):w&&(w.scrollLeft+=L.x,w.scrollTop+=L.y);var K=Ri(w),rt={x:K.x-W.x,y:K.y-W.y};(rt.x||rt.y)&&p.fire({type:"autoscroll",target:g,interactable:p,delta:rt,interaction:a,container:w})}kt.prevTime=E}kt.isScrolling&&(be.default.cancel(kt.i),kt.i=be.default.request(kt.scroll))},check:function(a,p){var g;return(g=a.options[p].autoScroll)==null?void 0:g.enabled},onInteractionMove:function(a){var p=a.interaction,g=a.pointer;if(p.interacting()&&kt.check(p.interactable,p.prepared.name))if(p.simulation)kt.x=kt.y=0;else{var v,_,w,E,S=p.interactable,P=p.element,L=p.prepared.name,W=S.options[L].autoScroll,K=vn(W.container,S,P);if(f.default.window(K))E=g.clientX<kt.margin,v=g.clientY<kt.margin,_=g.clientX>K.innerWidth-kt.margin,w=g.clientY>K.innerHeight-kt.margin;else{var rt=z.getElementClientRect(K);E=g.clientX<rt.left+kt.margin,v=g.clientY<rt.top+kt.margin,_=g.clientX>rt.right-kt.margin,w=g.clientY>rt.bottom-kt.margin}kt.x=_?1:E?-1:0,kt.y=w?1:v?-1:0,kt.isScrolling||(kt.margin=W.margin,kt.speed=W.speed,kt.start(p))}}};function vn(a,p,g){return(f.default.string(a)?(0,pt.getStringOptionResult)(a,p,g):a)||(0,C.getWindow)(g)}function Ri(a){return f.default.window(a)&&(a=window.document.body),{x:a.scrollLeft,y:a.scrollTop}}var fl={id:"auto-scroll",install:function(a){var p=a.defaults,g=a.actions;a.autoScroll=kt,kt.now=function(){return a.now()},g.phaselessTypes.autoscroll=!0,p.perAction.autoScroll=kt.defaults},listeners:{"interactions:new":function(a){a.interaction.autoScroll=null},"interactions:destroy":function(a){a.interaction.autoScroll=null,kt.stop(),kt.interaction&&(kt.interaction=null)},"interactions:stop":kt.stop,"interactions:action-move":function(a){return kt.onInteractionMove(a)}}},hl=fl;Fe.default=hl;var pe={};Object.defineProperty(pe,"__esModule",{value:!0}),pe.copyAction=function(a,p){return a.name=p.name,a.axis=p.axis,a.edges=p.edges,a},pe.sign=void 0,pe.warnOnce=function(a,p){var g=!1;return function(){return g||(C.window.console.warn(p),g=!0),a.apply(this,arguments)}},pe.sign=function(a){return a>=0?1:-1};var mn={};function dl(a){return f.default.bool(a)?(this.options.styleCursor=a,this):a===null?(delete this.options.styleCursor,this):this.options.styleCursor}function pl(a){return f.default.func(a)?(this.options.actionChecker=a,this):a===null?(delete this.options.actionChecker,this):this.options.actionChecker}Object.defineProperty(mn,"__esModule",{value:!0}),mn.default=void 0;var gl={id:"auto-start/interactableMethods",install:function(a){var p=a.Interactable;p.prototype.getAction=function(g,v,_,w){var E=function(S,P,L,W,K){var rt=S.getRect(W),ut={action:null,interactable:S,interaction:L,element:W,rect:rt,buttons:P.buttons||{0:1,1:4,3:8,4:16}[P.button]};return K.fire("auto-start:check",ut),ut.action}(this,v,_,w,a);return this.options.actionChecker?this.options.actionChecker(g,v,E,this,w,_):E},p.prototype.ignoreFrom=(0,pe.warnOnce)(function(g){return this._backCompatOption("ignoreFrom",g)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),p.prototype.allowFrom=(0,pe.warnOnce)(function(g){return this._backCompatOption("allowFrom",g)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),p.prototype.actionChecker=pl,p.prototype.styleCursor=dl}};mn.default=gl;var mi={};function Yo(a,p,g,v,_){return p.testIgnoreAllow(p.options[a.name],g,v)&&p.options[a.name].enabled&&yn(p,g,a,_)?a:null}function vl(a,p,g,v,_,w,E){for(var S=0,P=v.length;S<P;S++){var L=v[S],W=_[S],K=L.getAction(p,g,a,W);if(K){var rt=Yo(K,L,W,w,E);if(rt)return{action:rt,interactable:L,element:W}}}return{action:null,interactable:null,element:null}}function Wo(a,p,g,v,_){var w=[],E=[],S=v;function P(W){w.push(W),E.push(S)}for(;f.default.element(S);){w=[],E=[],_.interactables.forEachMatch(S,P);var L=vl(a,p,g,w,E,v,_);if(L.action&&!L.interactable.options[L.action.name].manualStart)return L;S=z.parentNode(S)}return{action:null,interactable:null,element:null}}function Ho(a,p,g){var v=p.action,_=p.interactable,w=p.element;v=v||{name:null},a.interactable=_,a.element=w,(0,pe.copyAction)(a.prepared,v),a.rect=_&&v.name?_.getRect(w):null,No(a,g),g.fire("autoStart:prepared",{interaction:a})}function yn(a,p,g,v){var _=a.options,w=_[g.name].max,E=_[g.name].maxPerElement,S=v.autoStart.maxInteractions,P=0,L=0,W=0;if(!(w&&E&&S))return!1;for(var K=0;K<v.interactions.list.length;K++){var rt=v.interactions.list[K],ut=rt.prepared.name;if(rt.interacting()&&(++P>=S||rt.interactable===a&&((L+=ut===g.name?1:0)>=w||rt.element===p&&(W++,ut===g.name&&W>=E))))return!1}return S>0}function Uo(a,p){return f.default.number(a)?(p.autoStart.maxInteractions=a,this):p.autoStart.maxInteractions}function br(a,p,g){var v=g.autoStart.cursorElement;v&&v!==a&&(v.style.cursor=""),a.ownerDocument.documentElement.style.cursor=p,a.style.cursor=p,g.autoStart.cursorElement=p?a:null}function No(a,p){var g=a.interactable,v=a.element,_=a.prepared;if(a.pointerType==="mouse"&&g&&g.options.styleCursor){var w="";if(_.name){var E=g.options[_.name].cursorChecker;w=f.default.func(E)?E(_,g,v,a._interacting):p.actions.map[_.name].getCursor(_)}br(a.element,w||"",p)}else p.autoStart.cursorElement&&br(p.autoStart.cursorElement,"",p)}Object.defineProperty(mi,"__esModule",{value:!0}),mi.default=void 0;var ml={id:"auto-start/base",before:["actions"],install:function(a){var p=a.interactStatic,g=a.defaults;a.usePlugin(mn.default),g.base.actionChecker=null,g.base.styleCursor=!0,(0,ot.default)(g.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),p.maxInteractions=function(v){return Uo(v,a)},a.autoStart={maxInteractions:1/0,withinInteractionLimit:yn,cursorElement:null}},listeners:{"interactions:down":function(a,p){var g=a.interaction,v=a.pointer,_=a.event,w=a.eventTarget;g.interacting()||Ho(g,Wo(g,v,_,w,p),p)},"interactions:move":function(a,p){(function(g,v){var _=g.interaction,w=g.pointer,E=g.event,S=g.eventTarget;_.pointerType!=="mouse"||_.pointerIsDown||_.interacting()||Ho(_,Wo(_,w,E,S,v),v)})(a,p),function(g,v){var _=g.interaction;if(_.pointerIsDown&&!_.interacting()&&_.pointerWasMoved&&_.prepared.name){v.fire("autoStart:before-start",g);var w=_.interactable,E=_.prepared.name;E&&w&&(w.options[E].manualStart||!yn(w,_.element,_.prepared,v)?_.stop():(_.start(_.prepared,w,_.element),No(_,v)))}}(a,p)},"interactions:stop":function(a,p){var g=a.interaction,v=g.interactable;v&&v.options.styleCursor&&br(g.element,"",p)}},maxInteractions:Uo,withinInteractionLimit:yn,validateAction:Yo},yl=ml;mi.default=yl;var bn={};Object.defineProperty(bn,"__esModule",{value:!0}),bn.default=void 0;var bl={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(a,p){var g=a.interaction,v=a.eventTarget,_=a.dx,w=a.dy;if(g.prepared.name==="drag"){var E=Math.abs(_),S=Math.abs(w),P=g.interactable.options.drag,L=P.startAxis,W=E>S?"x":E<S?"y":"xy";if(g.prepared.axis=P.lockAxis==="start"?W[0]:P.lockAxis,W!=="xy"&&L!=="xy"&&L!==W){g.prepared.name=null;for(var K=v,rt=function(tt){if(tt!==g.interactable){var mt=g.interactable.options.drag;if(!mt.manualStart&&tt.testIgnoreAllow(mt,K,v)){var Tt=tt.getAction(g.downPointer,g.downEvent,g,K);if(Tt&&Tt.name==="drag"&&function(yt,Et){if(!Et)return!1;var At=Et.options.drag.startAxis;return yt==="xy"||At==="xy"||At===yt}(W,tt)&&mi.default.validateAction(Tt,tt,K,v,p))return tt}}};f.default.element(K);){var ut=p.interactables.forEachMatch(K,rt);if(ut){g.prepared.name="drag",g.interactable=ut,g.element=K;break}K=(0,z.parentNode)(K)}}}}}};bn.default=bl;var _n={};function _r(a){var p=a.prepared&&a.prepared.name;if(!p)return null;var g=a.interactable.options;return g[p].hold||g[p].delay}Object.defineProperty(_n,"__esModule",{value:!0}),_n.default=void 0;var _l={id:"auto-start/hold",install:function(a){var p=a.defaults;a.usePlugin(mi.default),p.perAction.hold=0,p.perAction.delay=0},listeners:{"interactions:new":function(a){a.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(a){var p=a.interaction,g=_r(p);g>0&&(p.autoStartHoldTimer=setTimeout(function(){p.start(p.prepared,p.interactable,p.element)},g))},"interactions:move":function(a){var p=a.interaction,g=a.duplicate;p.autoStartHoldTimer&&p.pointerWasMoved&&!g&&(clearTimeout(p.autoStartHoldTimer),p.autoStartHoldTimer=null)},"autoStart:before-start":function(a){var p=a.interaction;_r(p)>0&&(p.prepared.name=null)}},getHoldDuration:_r},xl=_l;_n.default=xl;var Li={};Object.defineProperty(Li,"__esModule",{value:!0}),Li.default=void 0;var Cl={id:"auto-start",install:function(a){a.usePlugin(mi.default),a.usePlugin(_n.default),a.usePlugin(bn.default)}};Li.default=Cl;var ti={};function wl(a){return/^(always|never|auto)$/.test(a)?(this.options.preventDefault=a,this):f.default.bool(a)?(this.options.preventDefault=a?"always":"never",this):this.options.preventDefault}function Sl(a){var p=a.interaction,g=a.event;p.interactable&&p.interactable.checkAndPreventDefault(g)}function Vo(a){var p=a.Interactable;p.prototype.preventDefault=wl,p.prototype.checkAndPreventDefault=function(g){return function(v,_,w){var E=v.options.preventDefault;if(E!=="never")if(E!=="always"){if(_.events.supportsPassive&&/^touch(start|move)$/.test(w.type)){var S=(0,C.getWindow)(w.target).document,P=_.getDocOptions(S);if(!P||!P.events||P.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(w.type)||f.default.element(w.target)&&(0,z.matchesSelector)(w.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||w.preventDefault()}else w.preventDefault()}(this,a,g)},a.interactions.docEvents.push({type:"dragstart",listener:function(g){for(var v=0;v<a.interactions.list.length;v++){var _=a.interactions.list[v];if(_.element&&(_.element===g.target||(0,z.nodeContains)(_.element,g.target)))return void _.interactable.checkAndPreventDefault(g)}}})}Object.defineProperty(ti,"__esModule",{value:!0}),ti.default=void 0,ti.install=Vo;var Tl={id:"core/interactablePreventDefault",install:Vo,listeners:["down","move","up","cancel"].reduce(function(a,p){return a["interactions:".concat(p)]=Sl,a},{})};ti.default=Tl;var xr={};Object.defineProperty(xr,"__esModule",{value:!0}),xr.default=void 0,xr.default={};var Bi,xn={};Object.defineProperty(xn,"__esModule",{value:!0}),xn.default=void 0,function(a){a.touchAction="touchAction",a.boxSizing="boxSizing",a.noListeners="noListeners"}(Bi||(Bi={})),Bi.touchAction,Bi.boxSizing,Bi.noListeners;var Ol={id:"dev-tools",install:function(){}};xn.default=Ol;var ei={};Object.defineProperty(ei,"__esModule",{value:!0}),ei.default=function a(p){var g={};for(var v in p){var _=p[v];f.default.plainObject(_)?g[v]=a(_):f.default.array(_)?g[v]=Y.from(_):g[v]=_}return g};var ii={};function Go(a,p){return function(g){if(Array.isArray(g))return g}(a)||function(g,v){var _=g==null?null:typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(_!=null){var w,E,S=[],P=!0,L=!1;try{for(_=_.call(g);!(P=(w=_.next()).done)&&(S.push(w.value),!v||S.length!==v);P=!0);}catch(W){L=!0,E=W}finally{try{P||_.return==null||_.return()}finally{if(L)throw E}}return S}}(a,p)||function(g,v){if(g){if(typeof g=="string")return Ko(g,v);var _=Object.prototype.toString.call(g).slice(8,-1);return _==="Object"&&g.constructor&&(_=g.constructor.name),_==="Map"||_==="Set"?Array.from(g):_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?Ko(g,v):void 0}}(a,p)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ko(a,p){(p==null||p>a.length)&&(p=a.length);for(var g=0,v=Array(p);g<p;g++)v[g]=a[g];return v}function Pl(a,p){for(var g=0;g<p.length;g++){var v=p[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}function ni(a,p,g){return p in a?Object.defineProperty(a,p,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[p]=g,a}Object.defineProperty(ii,"__esModule",{value:!0}),ii.default=void 0,ii.getRectOffset=qo;var El=function(){function a(v){(function(_,w){if(!(_ instanceof w))throw new TypeError("Cannot call a class as a function")})(this,a),ni(this,"states",[]),ni(this,"startOffset",{left:0,right:0,top:0,bottom:0}),ni(this,"startDelta",void 0),ni(this,"result",void 0),ni(this,"endResult",void 0),ni(this,"edges",void 0),ni(this,"interaction",void 0),this.interaction=v,this.result=Cn()}var p,g;return p=a,(g=[{key:"start",value:function(v,_){var w=v.phase,E=this.interaction,S=function(L){var W=L.interactable.options[L.prepared.name],K=W.modifiers;return K&&K.length?K:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(rt){var ut=W[rt];return ut&&ut.enabled&&{options:ut,methods:ut._methods}}).filter(function(rt){return!!rt})}(E);this.prepareStates(S),this.edges=(0,ot.default)({},E.edges),this.startOffset=qo(E.rect,_),this.startDelta={x:0,y:0};var P=this.fillArg({phase:w,pageCoords:_,preEnd:!1});return this.result=Cn(),this.startAll(P),this.result=this.setAll(P)}},{key:"fillArg",value:function(v){var _=this.interaction;return v.interaction=_,v.interactable=_.interactable,v.element=_.element,v.rect=v.rect||_.rect,v.edges=this.edges,v.startOffset=this.startOffset,v}},{key:"startAll",value:function(v){for(var _=0;_<this.states.length;_++){var w=this.states[_];w.methods.start&&(v.state=w,w.methods.start(v))}}},{key:"setAll",value:function(v){var _=v.phase,w=v.preEnd,E=v.skipModifiers,S=v.rect;v.coords=(0,ot.default)({},v.pageCoords),v.rect=(0,ot.default)({},S);for(var P=E?this.states.slice(E):this.states,L=Cn(v.coords,v.rect),W=0;W<P.length;W++){var K,rt=P[W],ut=rt.options,tt=(0,ot.default)({},v.coords),mt=null;(K=rt.methods)!=null&&K.set&&this.shouldDo(ut,w,_)&&(v.state=rt,mt=rt.methods.set(v),pt.addEdges(this.interaction.edges,v.rect,{x:v.coords.x-tt.x,y:v.coords.y-tt.y})),L.eventProps.push(mt)}L.delta.x=v.coords.x-v.pageCoords.x,L.delta.y=v.coords.y-v.pageCoords.y,L.rectDelta.left=v.rect.left-S.left,L.rectDelta.right=v.rect.right-S.right,L.rectDelta.top=v.rect.top-S.top,L.rectDelta.bottom=v.rect.bottom-S.bottom;var Tt=this.result.coords,yt=this.result.rect;if(Tt&&yt){var Et=L.rect.left!==yt.left||L.rect.right!==yt.right||L.rect.top!==yt.top||L.rect.bottom!==yt.bottom;L.changed=Et||Tt.x!==L.coords.x||Tt.y!==L.coords.y}return L}},{key:"applyToInteraction",value:function(v){var _=this.interaction,w=v.phase,E=_.coords.cur,S=_.coords.start,P=this.result,L=this.startDelta,W=P.delta;w==="start"&&(0,ot.default)(this.startDelta,P.delta);for(var K=0;K<[[S,L],[E,W]].length;K++){var rt=Go([[S,L],[E,W]][K],2),ut=rt[0],tt=rt[1];ut.page.x+=tt.x,ut.page.y+=tt.y,ut.client.x+=tt.x,ut.client.y+=tt.y}var mt=this.result.rectDelta,Tt=v.rect||_.rect;Tt.left+=mt.left,Tt.right+=mt.right,Tt.top+=mt.top,Tt.bottom+=mt.bottom,Tt.width=Tt.right-Tt.left,Tt.height=Tt.bottom-Tt.top}},{key:"setAndApply",value:function(v){var _=this.interaction,w=v.phase,E=v.preEnd,S=v.skipModifiers,P=this.setAll(this.fillArg({preEnd:E,phase:w,pageCoords:v.modifiedCoords||_.coords.cur.page}));if(this.result=P,!P.changed&&(!S||S<this.states.length)&&_.interacting())return!1;if(v.modifiedCoords){var L=_.coords.cur.page,W={x:v.modifiedCoords.x-L.x,y:v.modifiedCoords.y-L.y};P.coords.x+=W.x,P.coords.y+=W.y,P.delta.x+=W.x,P.delta.y+=W.y}this.applyToInteraction(v)}},{key:"beforeEnd",value:function(v){var _=v.interaction,w=v.event,E=this.states;if(E&&E.length){for(var S=!1,P=0;P<E.length;P++){var L=E[P];v.state=L;var W=L.options,K=L.methods,rt=K.beforeEnd&&K.beforeEnd(v);if(rt)return this.endResult=rt,!1;S=S||!S&&this.shouldDo(W,!0,v.phase,!0)}S&&_.move({event:w,preEnd:!0})}}},{key:"stop",value:function(v){var _=v.interaction;if(this.states&&this.states.length){var w=(0,ot.default)({states:this.states,interactable:_.interactable,element:_.element,rect:null},v);this.fillArg(w);for(var E=0;E<this.states.length;E++){var S=this.states[E];w.state=S,S.methods.stop&&S.methods.stop(w)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(v){this.states=[];for(var _=0;_<v.length;_++){var w=v[_],E=w.options,S=w.methods,P=w.name;this.states.push({options:E,methods:S,index:_,name:P})}return this.states}},{key:"restoreInteractionCoords",value:function(v){var _=v.interaction,w=_.coords,E=_.rect,S=_.modification;if(S.result){for(var P=S.startDelta,L=S.result,W=L.delta,K=L.rectDelta,rt=[[w.start,P],[w.cur,W]],ut=0;ut<rt.length;ut++){var tt=Go(rt[ut],2),mt=tt[0],Tt=tt[1];mt.page.x-=Tt.x,mt.page.y-=Tt.y,mt.client.x-=Tt.x,mt.client.y-=Tt.y}E.left-=K.left,E.right-=K.right,E.top-=K.top,E.bottom-=K.bottom}}},{key:"shouldDo",value:function(v,_,w,E){return!(!v||v.enabled===!1||E&&!v.endOnly||v.endOnly&&!_||w==="start"&&!v.setStart)}},{key:"copyFrom",value:function(v){this.startOffset=v.startOffset,this.startDelta=v.startDelta,this.edges=v.edges,this.states=v.states.map(function(_){return(0,ei.default)(_)}),this.result=Cn((0,ot.default)({},v.result.coords),(0,ot.default)({},v.result.rect))}},{key:"destroy",value:function(){for(var v in this)this[v]=null}}])&&Pl(p.prototype,g),Object.defineProperty(p,"prototype",{writable:!1}),a}();function Cn(a,p){return{rect:p,coords:a,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function qo(a,p){return a?{left:p.x-a.left,top:p.y-a.top,right:a.right-p.x,bottom:a.bottom-p.y}:{left:0,top:0,right:0,bottom:0}}ii.default=El;var ee={};function wn(a){var p=a.iEvent,g=a.interaction.modification.result;g&&(p.modifiers=g.eventProps)}Object.defineProperty(ee,"__esModule",{value:!0}),ee.addEventModifiers=wn,ee.default=void 0,ee.makeModifier=function(a,p){var g=a.defaults,v={start:a.start,set:a.set,beforeEnd:a.beforeEnd,stop:a.stop},_=function(w){var E=w||{};for(var S in E.enabled=E.enabled!==!1,g)S in E||(E[S]=g[S]);var P={options:E,methods:v,name:p,enable:function(){return E.enabled=!0,P},disable:function(){return E.enabled=!1,P}};return P};return p&&typeof p=="string"&&(_._defaults=g,_._methods=v),_};var Al={id:"modifiers/base",before:["actions"],install:function(a){a.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(a){var p=a.interaction;p.modification=new ii.default(p)},"interactions:before-action-start":function(a){var p=a.interaction.modification;p.start(a,a.interaction.coords.start.page),a.interaction.edges=p.edges,p.applyToInteraction(a)},"interactions:before-action-move":function(a){return a.interaction.modification.setAndApply(a)},"interactions:before-action-end":function(a){return a.interaction.modification.beforeEnd(a)},"interactions:action-start":wn,"interactions:action-move":wn,"interactions:action-end":wn,"interactions:after-action-start":function(a){return a.interaction.modification.restoreInteractionCoords(a)},"interactions:after-action-move":function(a){return a.interaction.modification.restoreInteractionCoords(a)},"interactions:stop":function(a){return a.interaction.modification.stop(a)}}},Ml=Al;ee.default=Ml;var Xi={};Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.defaults=void 0,Xi.defaults={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}};var zi={};function Cr(a){return Cr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},Cr(a)}function kl(a,p){for(var g=0;g<p.length;g++){var v=p[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}function wr(a,p){return wr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,v){return g.__proto__=v,g},wr(a,p)}function Dl(a,p){if(p&&(Cr(p)==="object"||typeof p=="function"))return p;if(p!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zt(a)}function zt(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Sn(a){return Sn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(p){return p.__proto__||Object.getPrototypeOf(p)},Sn(a)}function Ht(a,p,g){return p in a?Object.defineProperty(a,p,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[p]=g,a}Object.defineProperty(zi,"__esModule",{value:!0}),zi.InteractEvent=void 0;var Jo=function(a){(function(S,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(P&&P.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),Object.defineProperty(S,"prototype",{writable:!1}),P&&wr(S,P)})(E,a);var p,g,v,_,w=(v=E,_=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var S,P=Sn(v);if(_){var L=Sn(this).constructor;S=Reflect.construct(P,arguments,L)}else S=P.apply(this,arguments);return Dl(this,S)});function E(S,P,L,W,K,rt,ut){var tt;(function(Wt,Rt){if(!(Wt instanceof Rt))throw new TypeError("Cannot call a class as a function")})(this,E),Ht(zt(tt=w.call(this,S)),"relatedTarget",null),Ht(zt(tt),"screenX",void 0),Ht(zt(tt),"screenY",void 0),Ht(zt(tt),"button",void 0),Ht(zt(tt),"buttons",void 0),Ht(zt(tt),"ctrlKey",void 0),Ht(zt(tt),"shiftKey",void 0),Ht(zt(tt),"altKey",void 0),Ht(zt(tt),"metaKey",void 0),Ht(zt(tt),"page",void 0),Ht(zt(tt),"client",void 0),Ht(zt(tt),"delta",void 0),Ht(zt(tt),"rect",void 0),Ht(zt(tt),"x0",void 0),Ht(zt(tt),"y0",void 0),Ht(zt(tt),"t0",void 0),Ht(zt(tt),"dt",void 0),Ht(zt(tt),"duration",void 0),Ht(zt(tt),"clientX0",void 0),Ht(zt(tt),"clientY0",void 0),Ht(zt(tt),"velocity",void 0),Ht(zt(tt),"speed",void 0),Ht(zt(tt),"swipe",void 0),Ht(zt(tt),"axes",void 0),Ht(zt(tt),"preEnd",void 0),K=K||S.element;var mt=S.interactable,Tt=(mt&&mt.options||Xi.defaults).deltaSource,yt=(0,k.default)(mt,K,L),Et=W==="start",At=W==="end",jt=Et?zt(tt):S.prevEvent,Bt=Et?S.coords.start:At?{page:jt.page,client:jt.client,timeStamp:S.coords.cur.timeStamp}:S.coords.cur;return tt.page=(0,ot.default)({},Bt.page),tt.client=(0,ot.default)({},Bt.client),tt.rect=(0,ot.default)({},S.rect),tt.timeStamp=Bt.timeStamp,At||(tt.page.x-=yt.x,tt.page.y-=yt.y,tt.client.x-=yt.x,tt.client.y-=yt.y),tt.ctrlKey=P.ctrlKey,tt.altKey=P.altKey,tt.shiftKey=P.shiftKey,tt.metaKey=P.metaKey,tt.button=P.button,tt.buttons=P.buttons,tt.target=K,tt.currentTarget=K,tt.preEnd=rt,tt.type=ut||L+(W||""),tt.interactable=mt,tt.t0=Et?S.pointers[S.pointers.length-1].downTime:jt.t0,tt.x0=S.coords.start.page.x-yt.x,tt.y0=S.coords.start.page.y-yt.y,tt.clientX0=S.coords.start.client.x-yt.x,tt.clientY0=S.coords.start.client.y-yt.y,tt.delta=Et||At?{x:0,y:0}:{x:tt[Tt].x-jt[Tt].x,y:tt[Tt].y-jt[Tt].y},tt.dt=S.coords.delta.timeStamp,tt.duration=tt.timeStamp-tt.t0,tt.velocity=(0,ot.default)({},S.coords.velocity[Tt]),tt.speed=(0,H.default)(tt.velocity.x,tt.velocity.y),tt.swipe=At||W==="inertiastart"?tt.getSwipe():null,tt}return p=E,(g=[{key:"getSwipe",value:function(){var S=this._interaction;if(S.prevEvent.speed<600||this.timeStamp-S.prevEvent.timeStamp>150)return null;var P=180*Math.atan2(S.prevEvent.velocityY,S.prevEvent.velocityX)/Math.PI;P<0&&(P+=360);var L=112.5<=P&&P<247.5,W=202.5<=P&&P<337.5;return{up:W,down:!W&&22.5<=P&&P<157.5,left:L,right:!L&&(292.5<=P||P<67.5),angle:P,speed:S.prevEvent.speed,velocity:{x:S.prevEvent.velocityX,y:S.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}])&&kl(p.prototype,g),Object.defineProperty(p,"prototype",{writable:!1}),E}(dt.BaseEvent);zi.InteractEvent=Jo,Object.defineProperties(Jo.prototype,{pageX:{get:function(){return this.page.x},set:function(a){this.page.x=a}},pageY:{get:function(){return this.page.y},set:function(a){this.page.y=a}},clientX:{get:function(){return this.client.x},set:function(a){this.client.x=a}},clientY:{get:function(){return this.client.y},set:function(a){this.client.y=a}},dx:{get:function(){return this.delta.x},set:function(a){this.delta.x=a}},dy:{get:function(){return this.delta.y},set:function(a){this.delta.y=a}},velocityX:{get:function(){return this.velocity.x},set:function(a){this.velocity.x=a}},velocityY:{get:function(){return this.velocity.y},set:function(a){this.velocity.y=a}}});var Yi={};function Qo(a,p){for(var g=0;g<p.length;g++){var v=p[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}function Il(a,p,g){return p&&Qo(a.prototype,p),g&&Qo(a,g),Object.defineProperty(a,"prototype",{writable:!1}),a}function Wi(a,p,g){return p in a?Object.defineProperty(a,p,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[p]=g,a}Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.PointerInfo=void 0;var jl=Il(function a(p,g,v,_,w){(function(E,S){if(!(E instanceof S))throw new TypeError("Cannot call a class as a function")})(this,a),Wi(this,"id",void 0),Wi(this,"pointer",void 0),Wi(this,"event",void 0),Wi(this,"downTime",void 0),Wi(this,"downTarget",void 0),this.id=p,this.pointer=g,this.event=v,this.downTime=_,this.downTarget=w});Yi.PointerInfo=jl;var Tn,On,ue={};function Fl(a,p){for(var g=0;g<p.length;g++){var v=p[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}function Vt(a,p,g){return p in a?Object.defineProperty(a,p,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[p]=g,a}Object.defineProperty(ue,"__esModule",{value:!0}),ue.Interaction=void 0,Object.defineProperty(ue,"PointerInfo",{enumerable:!0,get:function(){return Yi.PointerInfo}}),ue.default=ue._ProxyValues=ue._ProxyMethods=void 0,ue._ProxyValues=Tn,function(a){a.interactable="",a.element="",a.prepared="",a.pointerIsDown="",a.pointerWasMoved="",a._proxy=""}(Tn||(ue._ProxyValues=Tn={})),ue._ProxyMethods=On,function(a){a.start="",a.move="",a.end="",a.stop="",a.interacting=""}(On||(ue._ProxyMethods=On={}));var Rl=0,$o=function(){function a(v){var _=this,w=v.pointerType,E=v.scopeFire;(function(rt,ut){if(!(rt instanceof ut))throw new TypeError("Cannot call a class as a function")})(this,a),Vt(this,"interactable",null),Vt(this,"element",null),Vt(this,"rect",null),Vt(this,"_rects",void 0),Vt(this,"edges",null),Vt(this,"_scopeFire",void 0),Vt(this,"prepared",{name:null,axis:null,edges:null}),Vt(this,"pointerType",void 0),Vt(this,"pointers",[]),Vt(this,"downEvent",null),Vt(this,"downPointer",{}),Vt(this,"_latestPointer",{pointer:null,event:null,eventTarget:null}),Vt(this,"prevEvent",null),Vt(this,"pointerIsDown",!1),Vt(this,"pointerWasMoved",!1),Vt(this,"_interacting",!1),Vt(this,"_ending",!1),Vt(this,"_stopped",!0),Vt(this,"_proxy",null),Vt(this,"simulation",null),Vt(this,"doMove",(0,pe.warnOnce)(function(rt){this.move(rt)},"The interaction.doMove() method has been renamed to interaction.move()")),Vt(this,"coords",{start:j.newCoords(),prev:j.newCoords(),cur:j.newCoords(),delta:j.newCoords(),velocity:j.newCoords()}),Vt(this,"_id",Rl++),this._scopeFire=E,this.pointerType=w;var S=this;this._proxy={};var P=function(rt){Object.defineProperty(_._proxy,rt,{get:function(){return S[rt]}})};for(var L in Tn)P(L);var W=function(rt){Object.defineProperty(_._proxy,rt,{value:function(){return S[rt].apply(S,arguments)}})};for(var K in On)W(K);this._scopeFire("interactions:new",{interaction:this})}var p,g;return p=a,g=[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(v,_,w){var E=this.updatePointer(v,_,w,!0),S=this.pointers[E];this._scopeFire("interactions:down",{pointer:v,event:_,eventTarget:w,pointerIndex:E,pointerInfo:S,type:"down",interaction:this})}},{key:"start",value:function(v,_,w){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(v.name==="gesture"?2:1)||!_.options[v.name].enabled)&&((0,pe.copyAction)(this.prepared,v),this.interactable=_,this.element=w,this.rect=_.getRect(w),this.edges=this.prepared.edges?(0,ot.default)({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(v,_,w){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(v,_,w,!1);var E,S,P=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(E=this.coords.cur.client.x-this.coords.start.client.x,S=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=(0,H.default)(E,S)>this.pointerMoveTolerance);var L=this.getPointerIndex(v),W={pointer:v,pointerIndex:L,pointerInfo:this.pointers[L],event:_,type:"move",eventTarget:w,dx:E,dy:S,duplicate:P,interaction:this};P||j.setCoordVelocity(this.coords.velocity,this.coords.delta),this._scopeFire("interactions:move",W),P||this.simulation||(this.interacting()&&(W.type=null,this.move(W)),this.pointerWasMoved&&j.copyCoords(this.coords.prev,this.coords.cur))}},{key:"move",value:function(v){v&&v.event||j.setZeroCoords(this.coords.delta),(v=(0,ot.default)({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},v||{})).phase="move",this._doPhase(v)}},{key:"pointerUp",value:function(v,_,w,E){var S=this.getPointerIndex(v);S===-1&&(S=this.updatePointer(v,_,w,!1));var P=/cancel$/i.test(_.type)?"cancel":"up";this._scopeFire("interactions:".concat(P),{pointer:v,pointerIndex:S,pointerInfo:this.pointers[S],event:_,eventTarget:w,type:P,curEventTarget:E,interaction:this}),this.simulation||this.end(_),this.removePointer(v,_)}},{key:"documentBlur",value:function(v){this.end(v),this._scopeFire("interactions:blur",{event:v,type:"blur",interaction:this})}},{key:"end",value:function(v){var _;this._ending=!0,v=v||this._latestPointer.event,this.interacting()&&(_=this._doPhase({event:v,interaction:this,phase:"end"})),this._ending=!1,_===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(v){var _=j.getPointerId(v);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:Y.findIndex(this.pointers,function(w){return w.id===_})}},{key:"getPointerInfo",value:function(v){return this.pointers[this.getPointerIndex(v)]}},{key:"updatePointer",value:function(v,_,w,E){var S=j.getPointerId(v),P=this.getPointerIndex(v),L=this.pointers[P];return E=E!==!1&&(E||/(down|start)$/i.test(_.type)),L?L.pointer=v:(L=new Yi.PointerInfo(S,v,_,null,null),P=this.pointers.length,this.pointers.push(L)),j.setCoords(this.coords.cur,this.pointers.map(function(W){return W.pointer}),this._now()),j.setCoordDeltas(this.coords.delta,this.coords.prev,this.coords.cur),E&&(this.pointerIsDown=!0,L.downTime=this.coords.cur.timeStamp,L.downTarget=w,j.pointerExtend(this.downPointer,v),this.interacting()||(j.copyCoords(this.coords.start,this.coords.cur),j.copyCoords(this.coords.prev,this.coords.cur),this.downEvent=_,this.pointerWasMoved=!1)),this._updateLatestPointer(v,_,w),this._scopeFire("interactions:update-pointer",{pointer:v,event:_,eventTarget:w,down:E,pointerInfo:L,pointerIndex:P,interaction:this}),P}},{key:"removePointer",value:function(v,_){var w=this.getPointerIndex(v);if(w!==-1){var E=this.pointers[w];this._scopeFire("interactions:remove-pointer",{pointer:v,event:_,eventTarget:null,pointerIndex:w,pointerInfo:E,interaction:this}),this.pointers.splice(w,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(v,_,w){this._latestPointer.pointer=v,this._latestPointer.event=_,this._latestPointer.eventTarget=w}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(v,_,w,E){return new zi.InteractEvent(this,v,this.prepared.name,_,this.element,w,E)}},{key:"_fireEvent",value:function(v){var _;(_=this.interactable)==null||_.fire(v),(!this.prevEvent||v.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=v)}},{key:"_doPhase",value:function(v){var _=v.event,w=v.phase,E=v.preEnd,S=v.type,P=this.rect;if(P&&w==="move"&&(pt.addEdges(this.edges,P,this.coords.delta[this.interactable.options.deltaSource]),P.width=P.right-P.left,P.height=P.bottom-P.top),this._scopeFire("interactions:before-action-".concat(w),v)===!1)return!1;var L=v.iEvent=this._createPreparedEvent(_,w,E,S);return this._scopeFire("interactions:action-".concat(w),v),w==="start"&&(this.prevEvent=L),this._fireEvent(L),this._scopeFire("interactions:after-action-".concat(w),v),!0}},{key:"_now",value:function(){return Date.now()}}],g&&Fl(p.prototype,g),Object.defineProperty(p,"prototype",{writable:!1}),a}();ue.Interaction=$o;var Ll=$o;ue.default=Ll;var He={};function Zo(a){a.pointerIsDown&&(Tr(a.coords.cur,a.offset.total),a.offset.pending.x=0,a.offset.pending.y=0)}function ts(a){Sr(a.interaction)}function Sr(a){if(!function(g){return!(!g.offset.pending.x&&!g.offset.pending.y)}(a))return!1;var p=a.offset.pending;return Tr(a.coords.cur,p),Tr(a.coords.delta,p),pt.addEdges(a.edges,a.rect,p),p.x=0,p.y=0,!0}function Bl(a){var p=a.x,g=a.y;this.offset.pending.x+=p,this.offset.pending.y+=g,this.offset.total.x+=p,this.offset.total.y+=g}function Tr(a,p){var g=a.page,v=a.client,_=p.x,w=p.y;g.x+=_,g.y+=w,v.x+=_,v.y+=w}Object.defineProperty(He,"__esModule",{value:!0}),He.addTotal=Zo,He.applyPending=Sr,He.default=void 0,ue._ProxyMethods.offsetBy="";var Xl={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(a){a.Interaction.prototype.offsetBy=Bl},listeners:{"interactions:new":function(a){a.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(a){return Zo(a.interaction)},"interactions:before-action-start":ts,"interactions:before-action-move":ts,"interactions:before-action-end":function(a){var p=a.interaction;if(Sr(p))return p.move({offset:!0}),p.end(),!1},"interactions:stop":function(a){var p=a.interaction;p.offset.total.x=0,p.offset.total.y=0,p.offset.pending.x=0,p.offset.pending.y=0}}},zl=Xl;He.default=zl;var ri={};function Yl(a,p){for(var g=0;g<p.length;g++){var v=p[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}function qt(a,p,g){return p in a?Object.defineProperty(a,p,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[p]=g,a}Object.defineProperty(ri,"__esModule",{value:!0}),ri.default=ri.InertiaState=void 0;var es=function(){function a(v){(function(_,w){if(!(_ instanceof w))throw new TypeError("Cannot call a class as a function")})(this,a),qt(this,"active",!1),qt(this,"isModified",!1),qt(this,"smoothEnd",!1),qt(this,"allowResume",!1),qt(this,"modification",void 0),qt(this,"modifierCount",0),qt(this,"modifierArg",void 0),qt(this,"startCoords",void 0),qt(this,"t0",0),qt(this,"v0",0),qt(this,"te",0),qt(this,"targetOffset",void 0),qt(this,"modifiedOffset",void 0),qt(this,"currentOffset",void 0),qt(this,"lambda_v0",0),qt(this,"one_ve_v0",0),qt(this,"timeout",void 0),qt(this,"interaction",void 0),this.interaction=v}var p,g;return p=a,(g=[{key:"start",value:function(v){var _=this.interaction,w=Pn(_);if(!w||!w.enabled)return!1;var E=_.coords.velocity.client,S=(0,H.default)(E.x,E.y),P=this.modification||(this.modification=new ii.default(_));if(P.copyFrom(_.modification),this.t0=_._now(),this.allowResume=w.allowResume,this.v0=S,this.currentOffset={x:0,y:0},this.startCoords=_.coords.cur.page,this.modifierArg=P.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-_.coords.cur.timeStamp<50&&S>w.minSpeed&&S>w.endSpeed)this.startInertia();else{if(P.result=P.setAll(this.modifierArg),!P.result.changed)return!1;this.startSmoothEnd()}return _.modification.result.rect=null,_.offsetBy(this.targetOffset),_._doPhase({interaction:_,event:v,phase:"inertiastart"}),_.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),_.modification.result.rect=null,this.active=!0,_.simulation=this,!0}},{key:"startInertia",value:function(){var v=this,_=this.interaction.coords.velocity.client,w=Pn(this.interaction),E=w.resistance,S=-Math.log(w.endSpeed/this.v0)/E;this.targetOffset={x:(_.x-S)/E,y:(_.y-S)/E},this.te=S,this.lambda_v0=E/this.v0,this.one_ve_v0=1-w.endSpeed/this.v0;var P=this.modification,L=this.modifierArg;L.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},P.result=P.setAll(L),P.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+P.result.delta.x,y:this.targetOffset.y+P.result.delta.y}),this.onNextFrame(function(){return v.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var v=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return v.smoothEndTick()})}},{key:"onNextFrame",value:function(v){var _=this;this.timeout=be.default.request(function(){_.active&&v()})}},{key:"inertiaTick",value:function(){var v,_,w,E,S,P=this,L=this.interaction,W=Pn(L).resistance,K=(L._now()-this.t0)/1e3;if(K<this.te){var rt,ut=1-(Math.exp(-W*K)-this.lambda_v0)/this.one_ve_v0;this.isModified?(v=this.targetOffset.x,_=this.targetOffset.y,w=this.modifiedOffset.x,E=this.modifiedOffset.y,rt={x:is(S=ut,0,v,w),y:is(S,0,_,E)}):rt={x:this.targetOffset.x*ut,y:this.targetOffset.y*ut};var tt={x:rt.x-this.currentOffset.x,y:rt.y-this.currentOffset.y};this.currentOffset.x+=tt.x,this.currentOffset.y+=tt.y,L.offsetBy(tt),L.move(),this.onNextFrame(function(){return P.inertiaTick()})}else L.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var v=this,_=this.interaction,w=_._now()-this.t0,E=Pn(_).smoothEndDuration;if(w<E){var S={x:ns(w,0,this.targetOffset.x,E),y:ns(w,0,this.targetOffset.y,E)},P={x:S.x-this.currentOffset.x,y:S.y-this.currentOffset.y};this.currentOffset.x+=P.x,this.currentOffset.y+=P.y,_.offsetBy(P),_.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return v.smoothEndTick()})}else _.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(v){var _=v.pointer,w=v.event,E=v.eventTarget,S=this.interaction;S.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),S.updatePointer(_,w,E,!0),S._doPhase({interaction:S,event:w,phase:"resume"}),(0,j.copyCoords)(S.coords.prev,S.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,be.default.cancel(this.timeout)}}])&&Yl(p.prototype,g),Object.defineProperty(p,"prototype",{writable:!1}),a}();function Pn(a){var p=a.interactable,g=a.prepared;return p&&p.options&&g.name&&p.options[g.name].inertia}ri.InertiaState=es;var Wl={id:"inertia",before:["modifiers","actions"],install:function(a){var p=a.defaults;a.usePlugin(He.default),a.usePlugin(ee.default),a.actions.phases.inertiastart=!0,a.actions.phases.resume=!0,p.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(a){var p=a.interaction;p.inertia=new es(p)},"interactions:before-action-end":function(a){var p=a.interaction,g=a.event;return(!p._interacting||p.simulation||!p.inertia.start(g))&&null},"interactions:down":function(a){var p=a.interaction,g=a.eventTarget,v=p.inertia;if(v.active)for(var _=g;f.default.element(_);){if(_===p.element){v.resume(a);break}_=z.parentNode(_)}},"interactions:stop":function(a){var p=a.interaction.inertia;p.active&&p.stop()},"interactions:before-action-resume":function(a){var p=a.interaction.modification;p.stop(a),p.start(a,a.interaction.coords.cur.page),p.applyToInteraction(a)},"interactions:before-action-inertiastart":function(a){return a.interaction.modification.setAndApply(a)},"interactions:action-resume":ee.addEventModifiers,"interactions:action-inertiastart":ee.addEventModifiers,"interactions:after-action-inertiastart":function(a){return a.interaction.modification.restoreInteractionCoords(a)},"interactions:after-action-resume":function(a){return a.interaction.modification.restoreInteractionCoords(a)}}};function is(a,p,g,v){var _=1-a;return _*_*p+2*_*a*g+a*a*v}function ns(a,p,g,v){return-g*(a/=v)*(a-2)+p}var Hl=Wl;ri.default=Hl;var Hi={};function Ul(a,p){for(var g=0;g<p.length;g++){var v=p[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}function Ui(a,p,g){return p in a?Object.defineProperty(a,p,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[p]=g,a}function rs(a,p){for(var g=0;g<p.length;g++){var v=p[g];if(a.immediatePropagationStopped)break;v(a)}}Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.Eventable=void 0;var Nl=function(){function a(v){(function(_,w){if(!(_ instanceof w))throw new TypeError("Cannot call a class as a function")})(this,a),Ui(this,"options",void 0),Ui(this,"types",{}),Ui(this,"propagationStopped",!1),Ui(this,"immediatePropagationStopped",!1),Ui(this,"global",void 0),this.options=(0,ot.default)({},v||{})}var p,g;return p=a,(g=[{key:"fire",value:function(v){var _,w=this.global;(_=this.types[v.type])&&rs(v,_),!v.propagationStopped&&w&&(_=w[v.type])&&rs(v,_)}},{key:"on",value:function(v,_){var w=(0,U.default)(v,_);for(v in w)this.types[v]=Y.merge(this.types[v]||[],w[v])}},{key:"off",value:function(v,_){var w=(0,U.default)(v,_);for(v in w){var E=this.types[v];if(E&&E.length)for(var S=0;S<w[v].length;S++){var P=w[v][S],L=E.indexOf(P);L!==-1&&E.splice(L,1)}}}},{key:"getRect",value:function(v){return null}}])&&Ul(p.prototype,g),Object.defineProperty(p,"prototype",{writable:!1}),a}();Hi.Eventable=Nl;var Ni={};Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.default=function(a,p){if(p.phaselessTypes[a])return!0;for(var g in p.map)if(a.indexOf(g)===0&&a.substr(g.length)in p.phases)return!0;return!1};var Or={};Object.defineProperty(Or,"__esModule",{value:!0}),Or.createInteractStatic=function(a){var p=function g(v,_){var w=a.interactables.get(v,_);return w||((w=a.interactables.new(v,_)).events.global=g.globalEvents),w};return p.getPointerAverage=j.pointerAverage,p.getTouchBBox=j.touchBBox,p.getTouchDistance=j.touchDistance,p.getTouchAngle=j.touchAngle,p.getElementRect=z.getElementRect,p.getElementClientRect=z.getElementClientRect,p.matchesSelector=z.matchesSelector,p.closest=z.closest,p.globalEvents={},p.version="1.10.17",p.scope=a,p.use=function(g,v){return this.scope.usePlugin(g,v),this},p.isSet=function(g,v){return!!this.scope.interactables.get(g,v&&v.context)},p.on=(0,pe.warnOnce)(function(g,v,_){if(f.default.string(g)&&g.search(" ")!==-1&&(g=g.trim().split(/ +/)),f.default.array(g)){for(var w=0;w<g.length;w++){var E=g[w];this.on(E,v,_)}return this}if(f.default.object(g)){for(var S in g)this.on(S,g[S],v);return this}return(0,Ni.default)(g,this.scope.actions)?this.globalEvents[g]?this.globalEvents[g].push(v):this.globalEvents[g]=[v]:this.scope.events.add(this.scope.document,g,v,{options:_}),this},"The interact.on() method is being deprecated"),p.off=(0,pe.warnOnce)(function(g,v,_){if(f.default.string(g)&&g.search(" ")!==-1&&(g=g.trim().split(/ +/)),f.default.array(g)){for(var w=0;w<g.length;w++){var E=g[w];this.off(E,v,_)}return this}if(f.default.object(g)){for(var S in g)this.off(S,g[S],v);return this}var P;return(0,Ni.default)(g,this.scope.actions)?g in this.globalEvents&&(P=this.globalEvents[g].indexOf(v))!==-1&&this.globalEvents[g].splice(P,1):this.scope.events.remove(this.scope.document,g,v,_),this},"The interact.off() method is being deprecated"),p.debug=function(){return this.scope},p.supportsTouch=function(){return T.default.supportsTouch},p.supportsPointerEvent=function(){return T.default.supportsPointerEvent},p.stop=function(){for(var g=0;g<this.scope.interactions.list.length;g++)this.scope.interactions.list[g].stop();return this},p.pointerMoveTolerance=function(g){return f.default.number(g)?(this.scope.interactions.pointerMoveTolerance=g,this):this.scope.interactions.pointerMoveTolerance},p.addDocument=function(g,v){this.scope.addDocument(g,v)},p.removeDocument=function(g){this.scope.removeDocument(g)},p};var En={};function Vl(a,p){for(var g=0;g<p.length;g++){var v=p[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}function Re(a,p,g){return p in a?Object.defineProperty(a,p,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[p]=g,a}Object.defineProperty(En,"__esModule",{value:!0}),En.Interactable=void 0;var Gl=function(){function a(v,_,w,E){(function(S,P){if(!(S instanceof P))throw new TypeError("Cannot call a class as a function")})(this,a),Re(this,"options",void 0),Re(this,"_actions",void 0),Re(this,"target",void 0),Re(this,"events",new Hi.Eventable),Re(this,"_context",void 0),Re(this,"_win",void 0),Re(this,"_doc",void 0),Re(this,"_scopeEvents",void 0),Re(this,"_rectChecker",void 0),this._actions=_.actions,this.target=v,this._context=_.context||w,this._win=(0,C.getWindow)((0,z.trySelector)(v)?this._context:v),this._doc=this._win.document,this._scopeEvents=E,this.set(_)}var p,g;return p=a,(g=[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(v,_){return f.default.func(_.onstart)&&this.on("".concat(v,"start"),_.onstart),f.default.func(_.onmove)&&this.on("".concat(v,"move"),_.onmove),f.default.func(_.onend)&&this.on("".concat(v,"end"),_.onend),f.default.func(_.oninertiastart)&&this.on("".concat(v,"inertiastart"),_.oninertiastart),this}},{key:"updatePerActionListeners",value:function(v,_,w){(f.default.array(_)||f.default.object(_))&&this.off(v,_),(f.default.array(w)||f.default.object(w))&&this.on(v,w)}},{key:"setPerAction",value:function(v,_){var w=this._defaults;for(var E in _){var S=E,P=this.options[v],L=_[S];S==="listeners"&&this.updatePerActionListeners(v,P.listeners,L),f.default.array(L)?P[S]=Y.from(L):f.default.plainObject(L)?(P[S]=(0,ot.default)(P[S]||{},(0,ei.default)(L)),f.default.object(w.perAction[S])&&"enabled"in w.perAction[S]&&(P[S].enabled=L.enabled!==!1)):f.default.bool(L)&&f.default.object(w.perAction[S])?P[S].enabled=L:P[S]=L}}},{key:"getRect",value:function(v){return v=v||(f.default.element(this.target)?this.target:null),f.default.string(this.target)&&(v=v||this._context.querySelector(this.target)),(0,z.getElementRect)(v)}},{key:"rectChecker",value:function(v){var _=this;return f.default.func(v)?(this._rectChecker=v,this.getRect=function(w){var E=(0,ot.default)({},_._rectChecker(w));return"width"in E||(E.width=E.right-E.left,E.height=E.bottom-E.top),E},this):v===null?(delete this.getRect,delete this._rectChecker,this):this.getRect}},{key:"_backCompatOption",value:function(v,_){if((0,z.trySelector)(_)||f.default.object(_)){for(var w in this.options[v]=_,this._actions.map)this.options[w][v]=_;return this}return this.options[v]}},{key:"origin",value:function(v){return this._backCompatOption("origin",v)}},{key:"deltaSource",value:function(v){return v==="page"||v==="client"?(this.options.deltaSource=v,this):this.options.deltaSource}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(v){return this._context===v.ownerDocument||(0,z.nodeContains)(this._context,v)}},{key:"testIgnoreAllow",value:function(v,_,w){return!this.testIgnore(v.ignoreFrom,_,w)&&this.testAllow(v.allowFrom,_,w)}},{key:"testAllow",value:function(v,_,w){return!v||!!f.default.element(w)&&(f.default.string(v)?(0,z.matchesUpTo)(w,v,_):!!f.default.element(v)&&(0,z.nodeContains)(v,w))}},{key:"testIgnore",value:function(v,_,w){return!(!v||!f.default.element(w))&&(f.default.string(v)?(0,z.matchesUpTo)(w,v,_):!!f.default.element(v)&&(0,z.nodeContains)(v,w))}},{key:"fire",value:function(v){return this.events.fire(v),this}},{key:"_onOff",value:function(v,_,w,E){f.default.object(_)&&!f.default.array(_)&&(E=w,w=null);var S=v==="on"?"add":"remove",P=(0,U.default)(_,w);for(var L in P){L==="wheel"&&(L=T.default.wheelEvent);for(var W=0;W<P[L].length;W++){var K=P[L][W];(0,Ni.default)(L,this._actions)?this.events[v](L,K):f.default.string(this.target)?this._scopeEvents["".concat(S,"Delegate")](this.target,this._context,L,K,E):this._scopeEvents[S](this.target,L,K,E)}}return this}},{key:"on",value:function(v,_,w){return this._onOff("on",v,_,w)}},{key:"off",value:function(v,_,w){return this._onOff("off",v,_,w)}},{key:"set",value:function(v){var _=this._defaults;for(var w in f.default.object(v)||(v={}),this.options=(0,ei.default)(_.base),this._actions.methodDict){var E=w,S=this._actions.methodDict[E];this.options[E]={},this.setPerAction(E,(0,ot.default)((0,ot.default)({},_.perAction),_.actions[E])),this[S](v[E])}for(var P in v)f.default.func(this[P])&&this[P](v[P]);return this}},{key:"unset",value:function(){if(f.default.string(this.target))for(var v in this._scopeEvents.delegatedEvents)for(var _=this._scopeEvents.delegatedEvents[v],w=_.length-1;w>=0;w--){var E=_[w],S=E.selector,P=E.context,L=E.listeners;S===this.target&&P===this._context&&_.splice(w,1);for(var W=L.length-1;W>=0;W--)this._scopeEvents.removeDelegate(this.target,this._context,v,L[W][0],L[W][1])}else this._scopeEvents.remove(this.target,"all")}}])&&Vl(p.prototype,g),Object.defineProperty(p,"prototype",{writable:!1}),a}();En.Interactable=Gl;var An={};function Kl(a,p){for(var g=0;g<p.length;g++){var v=p[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}function Pr(a,p,g){return p in a?Object.defineProperty(a,p,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[p]=g,a}Object.defineProperty(An,"__esModule",{value:!0}),An.InteractableSet=void 0;var ql=function(){function a(v){var _=this;(function(w,E){if(!(w instanceof E))throw new TypeError("Cannot call a class as a function")})(this,a),Pr(this,"list",[]),Pr(this,"selectorMap",{}),Pr(this,"scope",void 0),this.scope=v,v.addListeners({"interactable:unset":function(w){var E=w.interactable,S=E.target,P=E._context,L=f.default.string(S)?_.selectorMap[S]:S[_.scope.id],W=Y.findIndex(L,function(K){return K.context===P});L[W]&&(L[W].context=null,L[W].interactable=null),L.splice(W,1)}})}var p,g;return p=a,(g=[{key:"new",value:function(v,_){_=(0,ot.default)(_||{},{actions:this.scope.actions});var w=new this.scope.Interactable(v,_,this.scope.document,this.scope.events),E={context:w._context,interactable:w};return this.scope.addDocument(w._doc),this.list.push(w),f.default.string(v)?(this.selectorMap[v]||(this.selectorMap[v]=[]),this.selectorMap[v].push(E)):(w.target[this.scope.id]||Object.defineProperty(v,this.scope.id,{value:[],configurable:!0}),v[this.scope.id].push(E)),this.scope.fire("interactable:new",{target:v,options:_,interactable:w,win:this.scope._win}),w}},{key:"get",value:function(v,_){var w=_&&_.context||this.scope.document,E=f.default.string(v),S=E?this.selectorMap[v]:v[this.scope.id];if(!S)return null;var P=Y.find(S,function(L){return L.context===w&&(E||L.interactable.inContext(v))});return P&&P.interactable}},{key:"forEachMatch",value:function(v,_){for(var w=0;w<this.list.length;w++){var E=this.list[w],S=void 0;if((f.default.string(E.target)?f.default.element(v)&&z.matchesSelector(v,E.target):v===E.target)&&E.inContext(v)&&(S=_(E)),S!==void 0)return S}}}])&&Kl(p.prototype,g),Object.defineProperty(p,"prototype",{writable:!1}),a}();An.InteractableSet=ql;var Mn={};function Jl(a,p){for(var g=0;g<p.length;g++){var v=p[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}function Er(a,p,g){return p in a?Object.defineProperty(a,p,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[p]=g,a}function Ar(a,p){return function(g){if(Array.isArray(g))return g}(a)||function(g,v){var _=g==null?null:typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(_!=null){var w,E,S=[],P=!0,L=!1;try{for(_=_.call(g);!(P=(w=_.next()).done)&&(S.push(w.value),!v||S.length!==v);P=!0);}catch(W){L=!0,E=W}finally{try{P||_.return==null||_.return()}finally{if(L)throw E}}return S}}(a,p)||function(g,v){if(g){if(typeof g=="string")return os(g,v);var _=Object.prototype.toString.call(g).slice(8,-1);return _==="Object"&&g.constructor&&(_=g.constructor.name),_==="Map"||_==="Set"?Array.from(g):_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?os(g,v):void 0}}(a,p)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function os(a,p){(p==null||p>a.length)&&(p=a.length);for(var g=0,v=Array(p);g<p;g++)v[g]=a[g];return v}Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.default=void 0;var Ql=function(){function a(v){(function(_,w){if(!(_ instanceof w))throw new TypeError("Cannot call a class as a function")})(this,a),Er(this,"currentTarget",void 0),Er(this,"originalEvent",void 0),Er(this,"type",void 0),this.originalEvent=v,(0,nt.default)(this,v)}var p,g;return p=a,(g=[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}])&&Jl(p.prototype,g),Object.defineProperty(p,"prototype",{writable:!1}),a}();function Vi(a){if(!f.default.object(a))return{capture:!!a,passive:!1};var p=(0,ot.default)({},a);return p.capture=!!a.capture,p.passive=!!a.passive,p}var $l={id:"events",install:function(a){var p,g=[],v={},_=[],w={add:E,remove:S,addDelegate:function(W,K,rt,ut,tt){var mt=Vi(tt);if(!v[rt]){v[rt]=[];for(var Tt=0;Tt<_.length;Tt++){var yt=_[Tt];E(yt,rt,P),E(yt,rt,L,!0)}}var Et=v[rt],At=Y.find(Et,function(jt){return jt.selector===W&&jt.context===K});At||(At={selector:W,context:K,listeners:[]},Et.push(At)),At.listeners.push([ut,mt])},removeDelegate:function(W,K,rt,ut,tt){var mt,Tt=Vi(tt),yt=v[rt],Et=!1;if(yt)for(mt=yt.length-1;mt>=0;mt--){var At=yt[mt];if(At.selector===W&&At.context===K){for(var jt=At.listeners,Bt=jt.length-1;Bt>=0;Bt--){var Wt=Ar(jt[Bt],2),Rt=Wt[0],Yt=Wt[1],ve=Yt.capture,Be=Yt.passive;if(Rt===ut&&ve===Tt.capture&&Be===Tt.passive){jt.splice(Bt,1),jt.length||(yt.splice(mt,1),S(K,rt,P),S(K,rt,L,!0)),Et=!0;break}}if(Et)break}}},delegateListener:P,delegateUseCapture:L,delegatedEvents:v,documents:_,targets:g,supportsOptions:!1,supportsPassive:!1};function E(W,K,rt,ut){var tt=Vi(ut),mt=Y.find(g,function(Tt){return Tt.eventTarget===W});mt||(mt={eventTarget:W,events:{}},g.push(mt)),mt.events[K]||(mt.events[K]=[]),W.addEventListener&&!Y.contains(mt.events[K],rt)&&(W.addEventListener(K,rt,w.supportsOptions?tt:tt.capture),mt.events[K].push(rt))}function S(W,K,rt,ut){var tt=Vi(ut),mt=Y.findIndex(g,function(Bt){return Bt.eventTarget===W}),Tt=g[mt];if(Tt&&Tt.events)if(K!=="all"){var yt=!1,Et=Tt.events[K];if(Et){if(rt==="all"){for(var At=Et.length-1;At>=0;At--)S(W,K,Et[At],tt);return}for(var jt=0;jt<Et.length;jt++)if(Et[jt]===rt){W.removeEventListener(K,rt,w.supportsOptions?tt:tt.capture),Et.splice(jt,1),Et.length===0&&(delete Tt.events[K],yt=!0);break}}yt&&!Object.keys(Tt.events).length&&g.splice(mt,1)}else for(K in Tt.events)Tt.events.hasOwnProperty(K)&&S(W,K,"all")}function P(W,K){for(var rt=Vi(K),ut=new Ql(W),tt=v[W.type],mt=Ar(j.getEventTargets(W),1)[0],Tt=mt;f.default.element(Tt);){for(var yt=0;yt<tt.length;yt++){var Et=tt[yt],At=Et.selector,jt=Et.context;if(z.matchesSelector(Tt,At)&&z.nodeContains(jt,mt)&&z.nodeContains(jt,Tt)){var Bt=Et.listeners;ut.currentTarget=Tt;for(var Wt=0;Wt<Bt.length;Wt++){var Rt=Ar(Bt[Wt],2),Yt=Rt[0],ve=Rt[1],Be=ve.capture,Kr=ve.passive;Be===rt.capture&&Kr===rt.passive&&Yt(ut)}}}Tt=z.parentNode(Tt)}}function L(W){return P(W,!0)}return(p=a.document)==null||p.createElement("div").addEventListener("test",null,{get capture(){return w.supportsOptions=!0},get passive(){return w.supportsPassive=!0}}),a.events=w,w}};Mn.default=$l;var kn={};Object.defineProperty(kn,"__esModule",{value:!0}),kn.default=void 0;var Dn={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(a){for(var p=0;p<Dn.methodOrder.length;p++){var g;g=Dn.methodOrder[p];var v=Dn[g](a);if(v)return v}return null},simulationResume:function(a){var p=a.pointerType,g=a.eventType,v=a.eventTarget,_=a.scope;if(!/down|start/i.test(g))return null;for(var w=0;w<_.interactions.list.length;w++){var E=_.interactions.list[w],S=v;if(E.simulation&&E.simulation.allowResume&&E.pointerType===p)for(;S;){if(S===E.element)return E;S=z.parentNode(S)}}return null},mouseOrPen:function(a){var p,g=a.pointerId,v=a.pointerType,_=a.eventType,w=a.scope;if(v!=="mouse"&&v!=="pen")return null;for(var E=0;E<w.interactions.list.length;E++){var S=w.interactions.list[E];if(S.pointerType===v){if(S.simulation&&!ss(S,g))continue;if(S.interacting())return S;p||(p=S)}}if(p)return p;for(var P=0;P<w.interactions.list.length;P++){var L=w.interactions.list[P];if(!(L.pointerType!==v||/down/i.test(_)&&L.simulation))return L}return null},hasPointer:function(a){for(var p=a.pointerId,g=a.scope,v=0;v<g.interactions.list.length;v++){var _=g.interactions.list[v];if(ss(_,p))return _}return null},idle:function(a){for(var p=a.pointerType,g=a.scope,v=0;v<g.interactions.list.length;v++){var _=g.interactions.list[v];if(_.pointers.length===1){var w=_.interactable;if(w&&(!w.options.gesture||!w.options.gesture.enabled))continue}else if(_.pointers.length>=2)continue;if(!_.interacting()&&p===_.pointerType)return _}return null}};function ss(a,p){return a.pointers.some(function(g){return g.id===p})}var Zl=Dn;kn.default=Zl;var In={};function Mr(a){return Mr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},Mr(a)}function as(a,p){return function(g){if(Array.isArray(g))return g}(a)||function(g,v){var _=g==null?null:typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(_!=null){var w,E,S=[],P=!0,L=!1;try{for(_=_.call(g);!(P=(w=_.next()).done)&&(S.push(w.value),!v||S.length!==v);P=!0);}catch(W){L=!0,E=W}finally{try{P||_.return==null||_.return()}finally{if(L)throw E}}return S}}(a,p)||function(g,v){if(g){if(typeof g=="string")return ls(g,v);var _=Object.prototype.toString.call(g).slice(8,-1);return _==="Object"&&g.constructor&&(_=g.constructor.name),_==="Map"||_==="Set"?Array.from(g):_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?ls(g,v):void 0}}(a,p)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ls(a,p){(p==null||p>a.length)&&(p=a.length);for(var g=0,v=Array(p);g<p;g++)v[g]=a[g];return v}function tc(a,p){if(!(a instanceof p))throw new TypeError("Cannot call a class as a function")}function ec(a,p){for(var g=0;g<p.length;g++){var v=p[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}function kr(a,p){return kr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,v){return g.__proto__=v,g},kr(a,p)}function ic(a,p){if(p&&(Mr(p)==="object"||typeof p=="function"))return p;if(p!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(a)}function jn(a){return jn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(p){return p.__proto__||Object.getPrototypeOf(p)},jn(a)}Object.defineProperty(In,"__esModule",{value:!0}),In.default=void 0;var Dr=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function cs(a,p){return function(g){var v=p.interactions.list,_=j.getPointerType(g),w=as(j.getEventTargets(g),2),E=w[0],S=w[1],P=[];if(/^touch/.test(g.type)){p.prevTouchTime=p.now();for(var L=0;L<g.changedTouches.length;L++){var W=g.changedTouches[L],K={pointer:W,pointerId:j.getPointerId(W),pointerType:_,eventType:g.type,eventTarget:E,curEventTarget:S,scope:p},rt=us(K);P.push([K.pointer,K.eventTarget,K.curEventTarget,rt])}}else{var ut=!1;if(!T.default.supportsPointerEvent&&/mouse/.test(g.type)){for(var tt=0;tt<v.length&&!ut;tt++)ut=v[tt].pointerType!=="mouse"&&v[tt].pointerIsDown;ut=ut||p.now()-p.prevTouchTime<500||g.timeStamp===0}if(!ut){var mt={pointer:g,pointerId:j.getPointerId(g),pointerType:_,eventType:g.type,curEventTarget:S,eventTarget:E,scope:p},Tt=us(mt);P.push([mt.pointer,mt.eventTarget,mt.curEventTarget,Tt])}}for(var yt=0;yt<P.length;yt++){var Et=as(P[yt],4),At=Et[0],jt=Et[1],Bt=Et[2];Et[3][a](At,g,jt,Bt)}}}function us(a){var p=a.pointerType,g=a.scope,v={interaction:kn.default.search(a),searchDetails:a};return g.fire("interactions:find",v),v.interaction||g.interactions.new({pointerType:p})}function Ir(a,p){var g=a.doc,v=a.scope,_=a.options,w=v.interactions.docEvents,E=v.events,S=E[p];for(var P in v.browser.isIOS&&!_.events&&(_.events={passive:!1}),E.delegatedEvents)S(g,P,E.delegateListener),S(g,P,E.delegateUseCapture,!0);for(var L=_&&_.events,W=0;W<w.length;W++){var K=w[W];S(g,K.type,K.listener,L)}}var nc={id:"core/interactions",install:function(a){for(var p={},g=0;g<Dr.length;g++){var v=Dr[g];p[v]=cs(v,a)}var _,w=T.default.pEventTypes;function E(){for(var S=0;S<a.interactions.list.length;S++){var P=a.interactions.list[S];if(P.pointerIsDown&&P.pointerType==="touch"&&!P._interacting)for(var L=function(){var K=P.pointers[W];a.documents.some(function(rt){var ut=rt.doc;return(0,z.nodeContains)(ut,K.downTarget)})||P.removePointer(K.pointer,K.event)},W=0;W<P.pointers.length;W++)L()}}(_=d.default.PointerEvent?[{type:w.down,listener:E},{type:w.down,listener:p.pointerDown},{type:w.move,listener:p.pointerMove},{type:w.up,listener:p.pointerUp},{type:w.cancel,listener:p.pointerUp}]:[{type:"mousedown",listener:p.pointerDown},{type:"mousemove",listener:p.pointerMove},{type:"mouseup",listener:p.pointerUp},{type:"touchstart",listener:E},{type:"touchstart",listener:p.pointerDown},{type:"touchmove",listener:p.pointerMove},{type:"touchend",listener:p.pointerUp},{type:"touchcancel",listener:p.pointerUp}]).push({type:"blur",listener:function(S){for(var P=0;P<a.interactions.list.length;P++)a.interactions.list[P].documentBlur(S)}}),a.prevTouchTime=0,a.Interaction=function(S){(function(tt,mt){if(typeof mt!="function"&&mt!==null)throw new TypeError("Super expression must either be null or a function");tt.prototype=Object.create(mt&&mt.prototype,{constructor:{value:tt,writable:!0,configurable:!0}}),Object.defineProperty(tt,"prototype",{writable:!1}),mt&&kr(tt,mt)})(ut,S);var P,L,W,K,rt=(W=ut,K=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var tt,mt=jn(W);if(K){var Tt=jn(this).constructor;tt=Reflect.construct(mt,arguments,Tt)}else tt=mt.apply(this,arguments);return ic(this,tt)});function ut(){return tc(this,ut),rt.apply(this,arguments)}return P=ut,(L=[{key:"pointerMoveTolerance",get:function(){return a.interactions.pointerMoveTolerance},set:function(tt){a.interactions.pointerMoveTolerance=tt}},{key:"_now",value:function(){return a.now()}}])&&ec(P.prototype,L),Object.defineProperty(P,"prototype",{writable:!1}),ut}(ue.default),a.interactions={list:[],new:function(S){S.scopeFire=function(L,W){return a.fire(L,W)};var P=new a.Interaction(S);return a.interactions.list.push(P),P},listeners:p,docEvents:_,pointerMoveTolerance:1},a.usePlugin(ti.default)},listeners:{"scope:add-document":function(a){return Ir(a,"add")},"scope:remove-document":function(a){return Ir(a,"remove")},"interactable:unset":function(a,p){for(var g=a.interactable,v=p.interactions.list.length-1;v>=0;v--){var _=p.interactions.list[v];_.interactable===g&&(_.stop(),p.fire("interactions:destroy",{interaction:_}),_.destroy(),p.interactions.list.length>2&&p.interactions.list.splice(v,1))}}},onDocSignal:Ir,doOnInteractions:cs,methodNames:Dr},rc=nc;In.default=rc;var Gi={};function jr(a){return jr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},jr(a)}function Ki(){return Ki=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(a,p,g){var v=oc(a,p);if(v){var _=Object.getOwnPropertyDescriptor(v,p);return _.get?_.get.call(arguments.length<3?a:g):_.value}},Ki.apply(this,arguments)}function oc(a,p){for(;!Object.prototype.hasOwnProperty.call(a,p)&&(a=Ue(a))!==null;);return a}function Fr(a,p){return Fr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,v){return g.__proto__=v,g},Fr(a,p)}function sc(a,p){if(p&&(jr(p)==="object"||typeof p=="function"))return p;if(p!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(a)}function Ue(a){return Ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(p){return p.__proto__||Object.getPrototypeOf(p)},Ue(a)}function fs(a,p){if(!(a instanceof p))throw new TypeError("Cannot call a class as a function")}function hs(a,p){for(var g=0;g<p.length;g++){var v=p[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}function ds(a,p,g){return p&&hs(a.prototype,p),g&&hs(a,g),Object.defineProperty(a,"prototype",{writable:!1}),a}function ie(a,p,g){return p in a?Object.defineProperty(a,p,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[p]=g,a}Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.Scope=void 0,Gi.initScope=ps;var ac=function(){function a(){var p=this;fs(this,a),ie(this,"id","__interact_scope_".concat(Math.floor(100*Math.random()))),ie(this,"isInitialized",!1),ie(this,"listenerMaps",[]),ie(this,"browser",T.default),ie(this,"defaults",(0,ei.default)(Xi.defaults)),ie(this,"Eventable",Hi.Eventable),ie(this,"actions",{map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}}),ie(this,"interactStatic",(0,Or.createInteractStatic)(this)),ie(this,"InteractEvent",zi.InteractEvent),ie(this,"Interactable",void 0),ie(this,"interactables",new An.InteractableSet(this)),ie(this,"_win",void 0),ie(this,"document",void 0),ie(this,"window",void 0),ie(this,"documents",[]),ie(this,"_plugins",{list:[],map:{}}),ie(this,"onWindowUnload",function(v){return p.removeDocument(v.target)});var g=this;this.Interactable=function(v){(function(P,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(L&&L.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),Object.defineProperty(P,"prototype",{writable:!1}),L&&Fr(P,L)})(S,v);var _,w,E=(_=S,w=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var P,L=Ue(_);if(w){var W=Ue(this).constructor;P=Reflect.construct(L,arguments,W)}else P=L.apply(this,arguments);return sc(this,P)});function S(){return fs(this,S),E.apply(this,arguments)}return ds(S,[{key:"_defaults",get:function(){return g.defaults}},{key:"set",value:function(P){return Ki(Ue(S.prototype),"set",this).call(this,P),g.fire("interactable:set",{options:P,interactable:this}),this}},{key:"unset",value:function(){Ki(Ue(S.prototype),"unset",this).call(this);var P=g.interactables.list.indexOf(this);P<0||(Ki(Ue(S.prototype),"unset",this).call(this),g.interactables.list.splice(P,1),g.fire("interactable:unset",{interactable:this}))}}]),S}(En.Interactable)}return ds(a,[{key:"addListeners",value:function(p,g){this.listenerMaps.push({id:g,map:p})}},{key:"fire",value:function(p,g){for(var v=0;v<this.listenerMaps.length;v++){var _=this.listenerMaps[v].map[p];if(_&&_(g,this,p)===!1)return!1}}},{key:"init",value:function(p){return this.isInitialized?this:ps(this,p)}},{key:"pluginIsInstalled",value:function(p){return this._plugins.map[p.id]||this._plugins.list.indexOf(p)!==-1}},{key:"usePlugin",value:function(p,g){if(!this.isInitialized)return this;if(this.pluginIsInstalled(p))return this;if(p.id&&(this._plugins.map[p.id]=p),this._plugins.list.push(p),p.install&&p.install(this,g),p.listeners&&p.before){for(var v=0,_=this.listenerMaps.length,w=p.before.reduce(function(S,P){return S[P]=!0,S[gs(P)]=!0,S},{});v<_;v++){var E=this.listenerMaps[v].id;if(w[E]||w[gs(E)])break}this.listenerMaps.splice(v,0,{id:p.id,map:p.listeners})}else p.listeners&&this.listenerMaps.push({id:p.id,map:p.listeners});return this}},{key:"addDocument",value:function(p,g){if(this.getDocIndex(p)!==-1)return!1;var v=C.getWindow(p);g=g?(0,ot.default)({},g):{},this.documents.push({doc:p,options:g}),this.events.documents.push(p),p!==this.document&&this.events.add(v,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:p,window:v,scope:this,options:g})}},{key:"removeDocument",value:function(p){var g=this.getDocIndex(p),v=C.getWindow(p),_=this.documents[g].options;this.events.remove(v,"unload",this.onWindowUnload),this.documents.splice(g,1),this.events.documents.splice(g,1),this.fire("scope:remove-document",{doc:p,window:v,scope:this,options:_})}},{key:"getDocIndex",value:function(p){for(var g=0;g<this.documents.length;g++)if(this.documents[g].doc===p)return g;return-1}},{key:"getDocOptions",value:function(p){var g=this.getDocIndex(p);return g===-1?null:this.documents[g].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),a}();function ps(a,p){return a.isInitialized=!0,f.default.window(p)&&C.init(p),d.default.init(p),T.default.init(p),be.default.init(p),a.window=p,a.document=p.document,a.usePlugin(In.default),a.usePlugin(Mn.default),a}function gs(a){return a&&a.replace(/\/.*$/,"")}Gi.Scope=ac;var ne={};Object.defineProperty(ne,"__esModule",{value:!0}),ne.default=void 0;var vs=new Gi.Scope,lc=vs.interactStatic;ne.default=lc;var cc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:void 0;vs.init(cc);var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.default=void 0,Fn.default=function(){};var Rn={};Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.default=void 0,Rn.default=function(){};var Ln={};function ms(a,p){return function(g){if(Array.isArray(g))return g}(a)||function(g,v){var _=g==null?null:typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(_!=null){var w,E,S=[],P=!0,L=!1;try{for(_=_.call(g);!(P=(w=_.next()).done)&&(S.push(w.value),!v||S.length!==v);P=!0);}catch(W){L=!0,E=W}finally{try{P||_.return==null||_.return()}finally{if(L)throw E}}return S}}(a,p)||function(g,v){if(g){if(typeof g=="string")return ys(g,v);var _=Object.prototype.toString.call(g).slice(8,-1);return _==="Object"&&g.constructor&&(_=g.constructor.name),_==="Map"||_==="Set"?Array.from(g):_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?ys(g,v):void 0}}(a,p)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ys(a,p){(p==null||p>a.length)&&(p=a.length);for(var g=0,v=Array(p);g<p;g++)v[g]=a[g];return v}Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.default=void 0,Ln.default=function(a){var p=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(v){var _=ms(v,2),w=_[0],E=_[1];return w in a||E in a}),g=function(v,_){for(var w=a.range,E=a.limits,S=E===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:E,P=a.offset,L=P===void 0?{x:0,y:0}:P,W={range:w,grid:a,x:null,y:null},K=0;K<p.length;K++){var rt=ms(p[K],2),ut=rt[0],tt=rt[1],mt=Math.round((v-L.x)/a[ut]),Tt=Math.round((_-L.y)/a[tt]);W[ut]=Math.max(S.left,Math.min(S.right,mt*a[ut]+L.x)),W[tt]=Math.max(S.top,Math.min(S.bottom,Tt*a[tt]+L.y))}return W};return g.grid=a,g.coordFields=p,g};var qi={};Object.defineProperty(qi,"__esModule",{value:!0}),Object.defineProperty(qi,"edgeTarget",{enumerable:!0,get:function(){return Fn.default}}),Object.defineProperty(qi,"elements",{enumerable:!0,get:function(){return Rn.default}}),Object.defineProperty(qi,"grid",{enumerable:!0,get:function(){return Ln.default}});var Bn={};Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.default=void 0;var uc={id:"snappers",install:function(a){var p=a.interactStatic;p.snappers=(0,ot.default)(p.snappers||{},qi),p.createSnapGrid=p.snappers.grid}},fc=uc;Bn.default=fc;var yi={};function bs(a,p){var g=Object.keys(a);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(a);p&&(v=v.filter(function(_){return Object.getOwnPropertyDescriptor(a,_).enumerable})),g.push.apply(g,v)}return g}function Rr(a){for(var p=1;p<arguments.length;p++){var g=arguments[p]!=null?arguments[p]:{};p%2?bs(Object(g),!0).forEach(function(v){hc(a,v,g[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(g)):bs(Object(g)).forEach(function(v){Object.defineProperty(a,v,Object.getOwnPropertyDescriptor(g,v))})}return a}function hc(a,p,g){return p in a?Object.defineProperty(a,p,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[p]=g,a}Object.defineProperty(yi,"__esModule",{value:!0}),yi.default=yi.aspectRatio=void 0;var _s={start:function(a){var p=a.state,g=a.rect,v=a.edges,_=a.pageCoords,w=p.options.ratio,E=p.options,S=E.equalDelta,P=E.modifiers;w==="preserve"&&(w=g.width/g.height),p.startCoords=(0,ot.default)({},_),p.startRect=(0,ot.default)({},g),p.ratio=w,p.equalDelta=S;var L=p.linkedEdges={top:v.top||v.left&&!v.bottom,left:v.left||v.top&&!v.right,bottom:v.bottom||v.right&&!v.top,right:v.right||v.bottom&&!v.left};if(p.xIsPrimaryAxis=!(!v.left&&!v.right),p.equalDelta){var W=(L.left?1:-1)*(L.top?1:-1);p.edgeSign={x:W,y:W}}else p.edgeSign={x:L.left?-1:1,y:L.top?-1:1};if((0,ot.default)(a.edges,L),P&&P.length){var K=new ii.default(a.interaction);K.copyFrom(a.interaction.modification),K.prepareStates(P),p.subModification=K,K.startAll(Rr({},a))}},set:function(a){var p=a.state,g=a.rect,v=a.coords,_=(0,ot.default)({},v),w=p.equalDelta?dc:pc;if(w(p,p.xIsPrimaryAxis,v,g),!p.subModification)return null;var E=(0,ot.default)({},g);(0,pt.addEdges)(p.linkedEdges,E,{x:v.x-_.x,y:v.y-_.y});var S=p.subModification.setAll(Rr(Rr({},a),{},{rect:E,edges:p.linkedEdges,pageCoords:v,prevCoords:v,prevRect:E})),P=S.delta;return S.changed&&(w(p,Math.abs(P.x)>Math.abs(P.y),S.coords,S.rect),(0,ot.default)(v,S.coords)),S.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function dc(a,p,g){var v=a.startCoords,_=a.edgeSign;p?g.y=v.y+(g.x-v.x)*_.y:g.x=v.x+(g.y-v.y)*_.x}function pc(a,p,g,v){var _=a.startRect,w=a.startCoords,E=a.ratio,S=a.edgeSign;if(p){var P=v.width/E;g.y=w.y+(P-_.height)*S.y}else{var L=v.height*E;g.x=w.x+(L-_.width)*S.x}}yi.aspectRatio=_s;var gc=(0,ee.makeModifier)(_s,"aspectRatio");yi.default=gc;var oi={};Object.defineProperty(oi,"__esModule",{value:!0}),oi.default=void 0;var xs=function(){};xs._defaults={};var vc=xs;oi.default=vc;var Lr={};Object.defineProperty(Lr,"__esModule",{value:!0}),Object.defineProperty(Lr,"default",{enumerable:!0,get:function(){return oi.default}});var le={};function Br(a,p,g){return f.default.func(a)?pt.resolveRectLike(a,p.interactable,p.element,[g.x,g.y,p]):pt.resolveRectLike(a,p.interactable,p.element)}Object.defineProperty(le,"__esModule",{value:!0}),le.default=void 0,le.getRestrictionRect=Br,le.restrict=void 0;var Cs={start:function(a){var p=a.rect,g=a.startOffset,v=a.state,_=a.interaction,w=a.pageCoords,E=v.options,S=E.elementRect,P=(0,ot.default)({left:0,top:0,right:0,bottom:0},E.offset||{});if(p&&S){var L=Br(E.restriction,_,w);if(L){var W=L.right-L.left-p.width,K=L.bottom-L.top-p.height;W<0&&(P.left+=W,P.right+=W),K<0&&(P.top+=K,P.bottom+=K)}P.left+=g.left-p.width*S.left,P.top+=g.top-p.height*S.top,P.right+=g.right-p.width*(1-S.right),P.bottom+=g.bottom-p.height*(1-S.bottom)}v.offset=P},set:function(a){var p=a.coords,g=a.interaction,v=a.state,_=v.options,w=v.offset,E=Br(_.restriction,g,p);if(E){var S=pt.xywhToTlbr(E);p.x=Math.max(Math.min(S.right-w.right,p.x),S.left+w.left),p.y=Math.max(Math.min(S.bottom-w.bottom,p.y),S.top+w.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}};le.restrict=Cs;var mc=(0,ee.makeModifier)(Cs,"restrict");le.default=mc;var Pe={};Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.restrictEdges=Pe.default=void 0;var ws={top:1/0,left:1/0,bottom:-1/0,right:-1/0},Ss={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function Ts(a,p){for(var g=["top","left","bottom","right"],v=0;v<g.length;v++){var _=g[v];_ in a||(a[_]=p[_])}return a}var Os={noInner:ws,noOuter:Ss,start:function(a){var p,g=a.interaction,v=a.startOffset,_=a.state,w=_.options;if(w){var E=(0,le.getRestrictionRect)(w.offset,g,g.coords.start.page);p=pt.rectToXY(E)}p=p||{x:0,y:0},_.offset={top:p.y+v.top,left:p.x+v.left,bottom:p.y-v.bottom,right:p.x-v.right}},set:function(a){var p=a.coords,g=a.edges,v=a.interaction,_=a.state,w=_.offset,E=_.options;if(g){var S=(0,ot.default)({},p),P=(0,le.getRestrictionRect)(E.inner,v,S)||{},L=(0,le.getRestrictionRect)(E.outer,v,S)||{};Ts(P,ws),Ts(L,Ss),g.top?p.y=Math.min(Math.max(L.top+w.top,S.y),P.top+w.top):g.bottom&&(p.y=Math.max(Math.min(L.bottom+w.bottom,S.y),P.bottom+w.bottom)),g.left?p.x=Math.min(Math.max(L.left+w.left,S.x),P.left+w.left):g.right&&(p.x=Math.max(Math.min(L.right+w.right,S.x),P.right+w.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}};Pe.restrictEdges=Os;var yc=(0,ee.makeModifier)(Os,"restrictEdges");Pe.default=yc;var bi={};Object.defineProperty(bi,"__esModule",{value:!0}),bi.restrictRect=bi.default=void 0;var bc=(0,ot.default)({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(a){}},le.restrict.defaults),Ps={start:le.restrict.start,set:le.restrict.set,defaults:bc};bi.restrictRect=Ps;var _c=(0,ee.makeModifier)(Ps,"restrictRect");bi.default=_c;var _i={};Object.defineProperty(_i,"__esModule",{value:!0}),_i.restrictSize=_i.default=void 0;var xc={width:-1/0,height:-1/0},Cc={width:1/0,height:1/0},Es={start:function(a){return Pe.restrictEdges.start(a)},set:function(a){var p=a.interaction,g=a.state,v=a.rect,_=a.edges,w=g.options;if(_){var E=pt.tlbrToXywh((0,le.getRestrictionRect)(w.min,p,a.coords))||xc,S=pt.tlbrToXywh((0,le.getRestrictionRect)(w.max,p,a.coords))||Cc;g.options={endOnly:w.endOnly,inner:(0,ot.default)({},Pe.restrictEdges.noInner),outer:(0,ot.default)({},Pe.restrictEdges.noOuter)},_.top?(g.options.inner.top=v.bottom-E.height,g.options.outer.top=v.bottom-S.height):_.bottom&&(g.options.inner.bottom=v.top+E.height,g.options.outer.bottom=v.top+S.height),_.left?(g.options.inner.left=v.right-E.width,g.options.outer.left=v.right-S.width):_.right&&(g.options.inner.right=v.left+E.width,g.options.outer.right=v.left+S.width),Pe.restrictEdges.set(a),g.options=w}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}};_i.restrictSize=Es;var wc=(0,ee.makeModifier)(Es,"restrictSize");_i.default=wc;var Xr={};Object.defineProperty(Xr,"__esModule",{value:!0}),Object.defineProperty(Xr,"default",{enumerable:!0,get:function(){return oi.default}});var Ne={};Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.snap=Ne.default=void 0;var As={start:function(a){var p,g=a.interaction,v=a.interactable,_=a.element,w=a.rect,E=a.state,S=a.startOffset,P=E.options,L=P.offsetWithOrigin?function(rt){var ut=rt.interaction.element;return(0,pt.rectToXY)((0,pt.resolveRectLike)(rt.state.options.origin,null,null,[ut]))||(0,k.default)(rt.interactable,ut,rt.interaction.prepared.name)}(a):{x:0,y:0};if(P.offset==="startCoords")p={x:g.coords.start.page.x,y:g.coords.start.page.y};else{var W=(0,pt.resolveRectLike)(P.offset,v,_,[g]);(p=(0,pt.rectToXY)(W)||{x:0,y:0}).x+=L.x,p.y+=L.y}var K=P.relativePoints;E.offsets=w&&K&&K.length?K.map(function(rt,ut){return{index:ut,relativePoint:rt,x:S.left-w.width*rt.x+p.x,y:S.top-w.height*rt.y+p.y}}):[{index:0,relativePoint:null,x:p.x,y:p.y}]},set:function(a){var p=a.interaction,g=a.coords,v=a.state,_=v.options,w=v.offsets,E=(0,k.default)(p.interactable,p.element,p.prepared.name),S=(0,ot.default)({},g),P=[];_.offsetWithOrigin||(S.x-=E.x,S.y-=E.y);for(var L=0;L<w.length;L++)for(var W=w[L],K=S.x-W.x,rt=S.y-W.y,ut=0,tt=_.targets.length;ut<tt;ut++){var mt,Tt=_.targets[ut];(mt=f.default.func(Tt)?Tt(K,rt,p._proxy,W,ut):Tt)&&P.push({x:(f.default.number(mt.x)?mt.x:K)+W.x,y:(f.default.number(mt.y)?mt.y:rt)+W.y,range:f.default.number(mt.range)?mt.range:_.range,source:Tt,index:ut,offset:W})}for(var yt={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},Et=0;Et<P.length;Et++){var At=P[Et],jt=At.range,Bt=At.x-S.x,Wt=At.y-S.y,Rt=(0,H.default)(Bt,Wt),Yt=Rt<=jt;jt===1/0&&yt.inRange&&yt.range!==1/0&&(Yt=!1),yt.target&&!(Yt?yt.inRange&&jt!==1/0?Rt/jt<yt.distance/yt.range:jt===1/0&&yt.range!==1/0||Rt<yt.distance:!yt.inRange&&Rt<yt.distance)||(yt.target=At,yt.distance=Rt,yt.range=jt,yt.inRange=Yt,yt.delta.x=Bt,yt.delta.y=Wt)}return yt.inRange&&(g.x=yt.target.x,g.y=yt.target.y),v.closest=yt,yt},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}};Ne.snap=As;var Sc=(0,ee.makeModifier)(As,"snap");Ne.default=Sc;var Le={};function Ms(a,p){(p==null||p>a.length)&&(p=a.length);for(var g=0,v=Array(p);g<p;g++)v[g]=a[g];return v}Object.defineProperty(Le,"__esModule",{value:!0}),Le.snapSize=Le.default=void 0;var ks={start:function(a){var p=a.state,g=a.edges,v=p.options;if(!g)return null;a.state={options:{targets:null,relativePoints:[{x:g.left?0:1,y:g.top?0:1}],offset:v.offset||"self",origin:{x:0,y:0},range:v.range}},p.targetFields=p.targetFields||[["width","height"],["x","y"]],Ne.snap.start(a),p.offsets=a.state.offsets,a.state=p},set:function(a){var p,g,v=a.interaction,_=a.state,w=a.coords,E=_.options,S=_.offsets,P={x:w.x-S[0].x,y:w.y-S[0].y};_.options=(0,ot.default)({},E),_.options.targets=[];for(var L=0;L<(E.targets||[]).length;L++){var W=(E.targets||[])[L],K=void 0;if(K=f.default.func(W)?W(P.x,P.y,v):W){for(var rt=0;rt<_.targetFields.length;rt++){var ut=(p=_.targetFields[rt],g=2,function(yt){if(Array.isArray(yt))return yt}(p)||function(yt,Et){var At=yt==null?null:typeof Symbol<"u"&&yt[Symbol.iterator]||yt["@@iterator"];if(At!=null){var jt,Bt,Wt=[],Rt=!0,Yt=!1;try{for(At=At.call(yt);!(Rt=(jt=At.next()).done)&&(Wt.push(jt.value),!Et||Wt.length!==Et);Rt=!0);}catch(ve){Yt=!0,Bt=ve}finally{try{Rt||At.return==null||At.return()}finally{if(Yt)throw Bt}}return Wt}}(p,g)||function(yt,Et){if(yt){if(typeof yt=="string")return Ms(yt,Et);var At=Object.prototype.toString.call(yt).slice(8,-1);return At==="Object"&&yt.constructor&&(At=yt.constructor.name),At==="Map"||At==="Set"?Array.from(yt):At==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(At)?Ms(yt,Et):void 0}}(p,g)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()),tt=ut[0],mt=ut[1];if(tt in K||mt in K){K.x=K[tt],K.y=K[mt];break}}_.options.targets.push(K)}}var Tt=Ne.snap.set(a);return _.options=E,Tt},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}};Le.snapSize=ks;var Tc=(0,ee.makeModifier)(ks,"snapSize");Le.default=Tc;var xi={};Object.defineProperty(xi,"__esModule",{value:!0}),xi.snapEdges=xi.default=void 0;var Ds={start:function(a){var p=a.edges;return p?(a.state.targetFields=a.state.targetFields||[[p.left?"left":"right",p.top?"top":"bottom"]],Le.snapSize.start(a)):null},set:Le.snapSize.set,defaults:(0,ot.default)((0,ei.default)(Le.snapSize.defaults),{targets:null,range:null,offset:{x:0,y:0}})};xi.snapEdges=Ds;var Oc=(0,ee.makeModifier)(Ds,"snapEdges");xi.default=Oc;var zr={};Object.defineProperty(zr,"__esModule",{value:!0}),Object.defineProperty(zr,"default",{enumerable:!0,get:function(){return oi.default}});var Yr={};Object.defineProperty(Yr,"__esModule",{value:!0}),Object.defineProperty(Yr,"default",{enumerable:!0,get:function(){return oi.default}});var Ci={};Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.default=void 0;var Pc={aspectRatio:yi.default,restrictEdges:Pe.default,restrict:le.default,restrictRect:bi.default,restrictSize:_i.default,snapEdges:xi.default,snap:Ne.default,snapSize:Le.default,spring:zr.default,avoid:Lr.default,transform:Yr.default,rubberband:Xr.default};Ci.default=Pc;var Ji={};Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.default=void 0;var Ec={id:"modifiers",install:function(a){var p=a.interactStatic;for(var g in a.usePlugin(ee.default),a.usePlugin(Bn.default),p.modifiers=Ci.default,Ci.default){var v=Ci.default[g],_=v._defaults,w=v._methods;_._methods=w,a.defaults.perAction[g]=_}}},Ac=Ec;Ji.default=Ac;var si={};function Wr(a){return Wr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},Wr(a)}function Mc(a,p){for(var g=0;g<p.length;g++){var v=p[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}function Hr(a,p){return Hr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,v){return g.__proto__=v,g},Hr(a,p)}function kc(a,p){if(p&&(Wr(p)==="object"||typeof p=="function"))return p;if(p!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ur(a)}function Ur(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Xn(a){return Xn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(p){return p.__proto__||Object.getPrototypeOf(p)},Xn(a)}Object.defineProperty(si,"__esModule",{value:!0}),si.default=si.PointerEvent=void 0;var Dc=function(a){(function(S,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(P&&P.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),Object.defineProperty(S,"prototype",{writable:!1}),P&&Hr(S,P)})(E,a);var p,g,v,_,w=(v=E,_=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var S,P=Xn(v);if(_){var L=Xn(this).constructor;S=Reflect.construct(P,arguments,L)}else S=P.apply(this,arguments);return kc(this,S)});function E(S,P,L,W,K,rt){var ut;if(function(Tt,yt){if(!(Tt instanceof yt))throw new TypeError("Cannot call a class as a function")}(this,E),ut=w.call(this,K),j.pointerExtend(Ur(ut),L),L!==P&&j.pointerExtend(Ur(ut),P),ut.timeStamp=rt,ut.originalEvent=L,ut.type=S,ut.pointerId=j.getPointerId(P),ut.pointerType=j.getPointerType(P),ut.target=W,ut.currentTarget=null,S==="tap"){var tt=K.getPointerIndex(P);ut.dt=ut.timeStamp-K.pointers[tt].downTime;var mt=ut.timeStamp-K.tapTime;ut.double=!!K.prevTap&&K.prevTap.type!=="doubletap"&&K.prevTap.target===ut.target&&mt<500}else S==="doubletap"&&(ut.dt=P.timeStamp-K.tapTime,ut.double=!0);return ut}return p=E,(g=[{key:"_subtractOrigin",value:function(S){var P=S.x,L=S.y;return this.pageX-=P,this.pageY-=L,this.clientX-=P,this.clientY-=L,this}},{key:"_addOrigin",value:function(S){var P=S.x,L=S.y;return this.pageX+=P,this.pageY+=L,this.clientX+=P,this.clientY+=L,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}])&&Mc(p.prototype,g),Object.defineProperty(p,"prototype",{writable:!1}),E}(dt.BaseEvent);si.PointerEvent=si.default=Dc;var Qi={};Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.default=void 0;var zn={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(a){a.pointerEvents=zn,a.defaults.actions.pointerEvents=zn.defaults,(0,ot.default)(a.actions.phaselessTypes,zn.types)},listeners:{"interactions:new":function(a){var p=a.interaction;p.prevTap=null,p.tapTime=0},"interactions:update-pointer":function(a){var p=a.down,g=a.pointerInfo;!p&&g.hold||(g.hold={duration:1/0,timeout:null})},"interactions:move":function(a,p){var g=a.interaction,v=a.pointer,_=a.event,w=a.eventTarget;a.duplicate||g.pointerIsDown&&!g.pointerWasMoved||(g.pointerIsDown&&Nr(a),Ve({interaction:g,pointer:v,event:_,eventTarget:w,type:"move"},p))},"interactions:down":function(a,p){(function(g,v){for(var _=g.interaction,w=g.pointer,E=g.event,S=g.eventTarget,P=g.pointerIndex,L=_.pointers[P].hold,W=z.getPath(S),K={interaction:_,pointer:w,event:E,eventTarget:S,type:"hold",targets:[],path:W,node:null},rt=0;rt<W.length;rt++){var ut=W[rt];K.node=ut,v.fire("pointerEvents:collect-targets",K)}if(K.targets.length){for(var tt=1/0,mt=0;mt<K.targets.length;mt++){var Tt=K.targets[mt].eventable.options.holdDuration;Tt<tt&&(tt=Tt)}L.duration=tt,L.timeout=setTimeout(function(){Ve({interaction:_,eventTarget:S,pointer:w,event:E,type:"hold"},v)},tt)}})(a,p),Ve(a,p)},"interactions:up":function(a,p){Nr(a),Ve(a,p),function(g,v){var _=g.interaction,w=g.pointer,E=g.event,S=g.eventTarget;_.pointerWasMoved||Ve({interaction:_,eventTarget:S,pointer:w,event:E,type:"tap"},v)}(a,p)},"interactions:cancel":function(a,p){Nr(a),Ve(a,p)}},PointerEvent:si.PointerEvent,fire:Ve,collectEventTargets:Is,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function Ve(a,p){var g=a.interaction,v=a.pointer,_=a.event,w=a.eventTarget,E=a.type,S=a.targets,P=S===void 0?Is(a,p):S,L=new si.PointerEvent(E,v,_,w,g,p.now());p.fire("pointerEvents:new",{pointerEvent:L});for(var W={interaction:g,pointer:v,event:_,eventTarget:w,targets:P,type:E,pointerEvent:L},K=0;K<P.length;K++){var rt=P[K];for(var ut in rt.props||{})L[ut]=rt.props[ut];var tt=(0,k.default)(rt.eventable,rt.node);if(L._subtractOrigin(tt),L.eventable=rt.eventable,L.currentTarget=rt.node,rt.eventable.fire(L),L._addOrigin(tt),L.immediatePropagationStopped||L.propagationStopped&&K+1<P.length&&P[K+1].node!==L.currentTarget)break}if(p.fire("pointerEvents:fired",W),E==="tap"){var mt=L.double?Ve({interaction:g,pointer:v,event:_,eventTarget:w,type:"doubletap"},p):L;g.prevTap=mt,g.tapTime=mt.timeStamp}return L}function Is(a,p){var g=a.interaction,v=a.pointer,_=a.event,w=a.eventTarget,E=a.type,S=g.getPointerIndex(v),P=g.pointers[S];if(E==="tap"&&(g.pointerWasMoved||!P||P.downTarget!==w))return[];for(var L=z.getPath(w),W={interaction:g,pointer:v,event:_,eventTarget:w,type:E,path:L,targets:[],node:null},K=0;K<L.length;K++){var rt=L[K];W.node=rt,p.fire("pointerEvents:collect-targets",W)}return E==="hold"&&(W.targets=W.targets.filter(function(ut){var tt;return ut.eventable.options.holdDuration===((tt=g.pointers[S])==null?void 0:tt.hold.duration)})),W.targets}function Nr(a){var p=a.interaction,g=a.pointerIndex,v=p.pointers[g].hold;v&&v.timeout&&(clearTimeout(v.timeout),v.timeout=null)}var Ic=zn;Qi.default=Ic;var Yn={};function jc(a){var p=a.interaction;p.holdIntervalHandle&&(clearInterval(p.holdIntervalHandle),p.holdIntervalHandle=null)}Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.default=void 0;var Fc={id:"pointer-events/holdRepeat",install:function(a){a.usePlugin(Qi.default);var p=a.pointerEvents;p.defaults.holdRepeatInterval=0,p.types.holdrepeat=a.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(a,p){return a["pointerEvents:".concat(p)]=jc,a},{"pointerEvents:new":function(a){var p=a.pointerEvent;p.type==="hold"&&(p.count=(p.count||0)+1)},"pointerEvents:fired":function(a,p){var g=a.interaction,v=a.pointerEvent,_=a.eventTarget,w=a.targets;if(v.type==="hold"&&w.length){var E=w[0].eventable.options.holdRepeatInterval;E<=0||(g.holdIntervalHandle=setTimeout(function(){p.pointerEvents.fire({interaction:g,eventTarget:_,type:"hold",pointer:v,event:v},p)},E))}}})},Rc=Fc;Yn.default=Rc;var Wn={};function Lc(a){return(0,ot.default)(this.events.options,a),this}Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.default=void 0;var Bc={id:"pointer-events/interactableTargets",install:function(a){var p=a.Interactable;p.prototype.pointerEvents=Lc;var g=p.prototype._backCompatOption;p.prototype._backCompatOption=function(v,_){var w=g.call(this,v,_);return w===this&&(this.events.options[v]=_),w}},listeners:{"pointerEvents:collect-targets":function(a,p){var g=a.targets,v=a.node,_=a.type,w=a.eventTarget;p.interactables.forEachMatch(v,function(E){var S=E.events,P=S.options;S.types[_]&&S.types[_].length&&E.testIgnoreAllow(P,v,w)&&g.push({node:v,eventable:S,props:{interactable:E}})})},"interactable:new":function(a){var p=a.interactable;p.events.getRect=function(g){return p.getRect(g)}},"interactable:set":function(a,p){var g=a.interactable,v=a.options;(0,ot.default)(g.events.options,p.pointerEvents.defaults),(0,ot.default)(g.events.options,v.pointerEvents||{})}}},Xc=Bc;Wn.default=Xc;var $i={};Object.defineProperty($i,"__esModule",{value:!0}),$i.default=void 0;var zc={id:"pointer-events",install:function(a){a.usePlugin(Qi),a.usePlugin(Yn.default),a.usePlugin(Wn.default)}},Yc=zc;$i.default=Yc;var wi={};function js(a){var p=a.Interactable;a.actions.phases.reflow=!0,p.prototype.reflow=function(g){return function(v,_,w){for(var E=f.default.string(v.target)?Y.from(v._context.querySelectorAll(v.target)):[v.target],S=w.window.Promise,P=S?[]:null,L=function(){var K=E[W],rt=v.getRect(K);if(!rt)return"break";var ut=Y.find(w.interactions.list,function(Et){return Et.interacting()&&Et.interactable===v&&Et.element===K&&Et.prepared.name===_.name}),tt=void 0;if(ut)ut.move(),P&&(tt=ut._reflowPromise||new S(function(Et){ut._reflowResolve=Et}));else{var mt=(0,pt.tlbrToXywh)(rt),Tt={page:{x:mt.x,y:mt.y},client:{x:mt.x,y:mt.y},timeStamp:w.now()},yt=j.coordsToEvent(Tt);tt=function(Et,At,jt,Bt,Wt){var Rt=Et.interactions.new({pointerType:"reflow"}),Yt={interaction:Rt,event:Wt,pointer:Wt,eventTarget:jt,phase:"reflow"};Rt.interactable=At,Rt.element=jt,Rt.prevEvent=Wt,Rt.updatePointer(Wt,Wt,jt,!0),j.setZeroCoords(Rt.coords.delta),(0,pe.copyAction)(Rt.prepared,Bt),Rt._doPhase(Yt);var ve=Et.window.Promise,Be=ve?new ve(function(Kr){Rt._reflowResolve=Kr}):void 0;return Rt._reflowPromise=Be,Rt.start(Bt,At,jt),Rt._interacting?(Rt.move(Yt),Rt.end(Wt)):(Rt.stop(),Rt._reflowResolve()),Rt.removePointer(Wt,Wt),Be}(w,v,K,_,yt)}P&&P.push(tt)},W=0;W<E.length&&L()!=="break";W++);return P&&S.all(P).then(function(){return v})}(this,g,a)}}Object.defineProperty(wi,"__esModule",{value:!0}),wi.default=void 0,wi.install=js;var Wc={id:"reflow",install:js,listeners:{"interactions:stop":function(a,p){var g=a.interaction;g.pointerType==="reflow"&&(g._reflowResolve&&g._reflowResolve(),Y.remove(p.interactions.list,g))}}},Hc=Wc;wi.default=Hc;var ge={exports:{}};function Vr(a){return Vr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},Vr(a)}Object.defineProperty(ge.exports,"__esModule",{value:!0}),ge.exports.default=void 0,ne.default.use(ti.default),ne.default.use(He.default),ne.default.use($i.default),ne.default.use(ri.default),ne.default.use(Ji.default),ne.default.use(Li.default),ne.default.use(Fi.default),ne.default.use(Fe.default),ne.default.use(wi.default);var Uc=ne.default;if(ge.exports.default=Uc,Vr(ge)==="object"&&ge)try{ge.exports=ne.default}catch{}ne.default.default=ne.default,Fi.default,Fe.default,Li.default,ti.default,xn.default,ri.default,ne.default,Ji.default,He.default,$i.default,wi.default,ge=ge.exports;var ai={exports:{}};function Gr(a){return Gr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},Gr(a)}Object.defineProperty(ai.exports,"__esModule",{value:!0}),ai.exports.default=void 0;var Nc=ge.default;if(ai.exports.default=Nc,Gr(ai)==="object"&&ai)try{ai.exports=ge.default}catch{}return ge.default.default=ge.default,ai.exports})})(ol);var Rh=ol.exports;const ua=Th(Rh);var vo={exports:{}};(function(u,o){(function(x,C){C(o)})(Sh,function(x){const C=["scale","scale3d","scaleX","scaleY","scaleZ"],O=B=>{const f=B.trim().split(/\) |\)/);if(f.length===1)return{[f[0]]:!0};const i=l=>l.endsWith("px")?parseFloat(l):Number.isNaN(Number(l))?l:Number(l);return f.reduce((l,c)=>{if(!c)return l;const[e,n]=c.split("("),s=n.split(",").map(r=>i(r.endsWith(")")?r.replace(")",""):r.trim())),h=s.length===1?s[0]:s;return{...l,[e]:h}},{})},A=B=>{const f=(i,l)=>typeof l=="number"&&!C.includes(i)?`${l}px`:l.toString();return Object.keys(B).reduce((i,l)=>{const c=B[l];return c===!0?l:c===!1?i:Array.isArray(c)?`${i} ${l}(${c.map(e=>f(l,e)).join(", ")})`:`${i} ${l}(${f(l,c)})`},"").trim()};x.parse=O,x.stringify=A,Object.defineProperty(x,"__esModule",{value:!0})})})(vo,vo.exports);var qe=vo.exports;function fa(u,o){var x=o.x*u.a+o.y*u.c+0,C=o.x*u.b+o.y*u.d+0;return{x,y:C}}function Lh(u){var o=fa(u,{x:0,y:1}),x=fa(u,{x:1,y:0}),C=180/Math.PI*Math.atan2(o.y,o.x)-90,O=180/Math.PI*Math.atan2(x.y,x.x);return{translateX:u.e,translateY:u.f,scaleX:Math.sqrt(u.a*u.a+u.b*u.b),scaleY:Math.sqrt(u.c*u.c+u.d*u.d),skewX:C,skewY:O,rotation:C}}function Bh(u,o){const x=qe.parse(u.style.transform),C=(+x.translateX||0)+o.dx,O=(+x.translateY||0)+o.dy;u.style.transform=qe.stringify({...x,translateX:C,translateY:O})}const Xh={class:"photo-editor__toolbar"},zh=["src"],Yh=["src"],Wh=Do({__name:"PhotoEditor",props:{template:{},uploadedPhotoUrl:{}},setup(u,{expose:o}){const x=u,C=he(),O=he(),A=he(),B=he({}),f=he(!1),i=he(!0);o({photoEditorElem:C,uploadedImgElem:O,getUploadedImgCoords:n});function l(r=!0){O.value&&(O.value.style.width=`${r?O.value.clientWidth+5:O.value.clientWidth-5}px`)}function c(r=!0){if(!O.value)return;const d=qe.parse(O.value.style.transform),m="rotate"in d?parseInt(d.rotate.toString(),10):0;O.value.style.transform=qe.stringify({...d,rotate:`${r?m-2:m+2}deg`})}function e(){if(!O.value)return;f.value=!f.value;const r=qe.parse(O.value.style.transform);f.value?r.scaleX=-1:delete r.scaleX,O.value.style.transform=qe.stringify(r)}function n(){var d;const r=new DOMMatrix((d=O.value)==null?void 0:d.style.transform);return{x:r.e,y:r.f,rotateAngle:Lh(r).rotation,flip:f.value}}const t={zoomIn(){l(!0)},zoomOut(){l(!1)},rotateLeft(){c(!0)},rotateRight(){c(!1)}};function s(r){t[r](),B.value[r]=setInterval(()=>{t[r]()},r.includes("zoom")?30:50)}function h(r){clearInterval(r)}return Jn(O,()=>{if(O.value.style.width=`${C.value.clientWidth}px`,ua(C.value).draggable({listeners:{move(r){const d=O.value;Bh(d,r)}}}),A.value){let r=function(d){var m=d.target.parentElement,y=parseFloat(m.getAttribute("data-angle"))||0,b={x:parseFloat(m.getAttribute("data-center-x"))||0,y:parseFloat(m.getAttribute("data-center-y"))||0},T=Math.atan2(b.y-d.clientY,b.x-d.clientX);return T-y};ua(A.value).draggable({onstart(d){const m=d.target.parentElement,y=m.getBoundingClientRect();m.setAttribute("data-center-x",y.left+y.width/2),m.setAttribute("data-center-y",y.top+y.height/2),m.setAttribute("data-angle",r(d))},onmove(d){const m=d.target.parentElement,y=qe.parse(m.style.transform),b=r(d)*(180/Math.PI);m.style.transform=m.style.transform=qe.stringify({...y,rotate:`${b}deg`})},onend(d){d.target.parentElement.setAttribute("data-angle",r(d))}})}}),(r,d)=>(me(),Ae("div",{class:"photo-editor",ref_key:"photoEditorElem",ref:C},[za(Ut("div",Xh,[Ut("img",{class:"photo-editor__toolbar-item",src:Mh,alt:"Zoom in",onMousedown:d[0]||(d[0]=m=>s("zoomIn")),onMouseleave:d[1]||(d[1]=m=>h(B.value.zoomIn)),onMouseup:d[2]||(d[2]=m=>h(B.value.zoomIn)),onTouchstart:d[3]||(d[3]=rn(m=>s("zoomIn"),["prevent"])),onTouchend:d[4]||(d[4]=m=>h(B.value.zoomIn))},null,32),Ut("img",{class:"photo-editor__toolbar-item",src:kh,alt:"Zoom out",onMousedown:d[5]||(d[5]=m=>s("zoomOut")),onMouseleave:d[6]||(d[6]=m=>h(B.value.zoomOut)),onMouseup:d[7]||(d[7]=m=>h(B.value.zoomOut)),onTouchstart:d[8]||(d[8]=rn(m=>s("zoomOut"),["prevent"])),onTouchend:d[9]||(d[9]=m=>h(B.value.zoomOut))},null,32),Ut("img",{class:"photo-editor__toolbar-item",src:Dh,alt:"Rotate left",onMousedown:d[10]||(d[10]=m=>s("rotateLeft")),onMouseleave:d[11]||(d[11]=m=>h(B.value.rotateLeft)),onMouseup:d[12]||(d[12]=m=>h(B.value.rotateLeft)),onTouchstart:d[13]||(d[13]=rn(m=>s("rotateLeft"),["prevent"])),onTouchend:d[14]||(d[14]=m=>h(B.value.rotateLeft))},null,32),Ut("img",{class:"photo-editor__toolbar-item",src:Ih,alt:"Rotate right",onMousedown:d[15]||(d[15]=m=>s("rotateRight")),onMouseleave:d[16]||(d[16]=m=>h(B.value.rotateRight)),onMouseup:d[17]||(d[17]=m=>h(B.value.rotateRight)),onTouchstart:d[18]||(d[18]=rn(m=>s("rotateRight"),["prevent"])),onTouchend:d[19]||(d[19]=m=>h(B.value.rotateRight))},null,32),Ut("img",{class:"photo-editor__toolbar-item",src:jh,alt:"Flip",onClick:e}),Ut("img",{class:"photo-editor__toolbar-item",src:Fh,alt:"Eye",onClick:d[20]||(d[20]=m=>i.value=!i.value)})],512),[[rl,r.uploadedPhotoUrl]]),Ut("img",{alt:"Шаблон с лицом для вставки",class:"photo-editor__template",src:x.template.url,style:lr({opacity:i.value?.6:1})},null,12,zh),r.uploadedPhotoUrl?(me(),Ae("div",{key:0,class:"photo-editor__uploaded",ref_key:"uploadedImgElem",ref:O},[Ut("img",{alt:"Загруженное фото",src:r.uploadedPhotoUrl},null,8,Yh),Ut("div",{ref_key:"rotatorElem",ref:A,class:"photo-editor__rotator"},null,512)],512)):el("",!0)],512))}});const Bo=(u,o)=>{const x=u.__vccOpts||u;for(const[C,O]of o)x[C]=O;return x},Hh=Bo(Wh,[["__scopeId","data-v-5e3ee44b"]]),Uh={class:"editor"},Nh={class:"editor__toolbar"},Vh=["disabled"],Gh=!1,Kh=Do({__name:"AppEditor",props:{template:{}},emits:["save","exit"],setup(u,{emit:o}){const x=u,C=he(),O=he(),A=he(),B=he(),f=Lo(()=>A.value&&URL.createObjectURL(A.value));function i(e){const n=e.target;n.files&&n.files[0]&&(A.value=n.files[0])}function l(){C.value&&C.value.click()}function c(){var h,r;if(!O.value||!((h=B.value)!=null&&h.photoEditorElem)||!((r=B.value)!=null&&r.uploadedImgElem))return;const e=B.value.getUploadedImgCoords(),n=new ln.fabric.StaticCanvas(O.value,{width:1333,height:2e3}),t={uploadedImage:!1,templateImage:!1},s=1333/B.value.photoEditorElem.clientWidth;ln.fabric.Image.fromURL(f.value,d=>{d.scaleToWidth(B.value.uploadedImgElem.clientWidth*s),d.set({left:e.x*s,top:e.y*s}),d.flipX=e.flip,d.rotate(e.rotateAngle),n.add(d),t.uploadedImage=!0}),ln.fabric.Image.fromURL(x.template.url,d=>{d.scaleToHeight(n.getHeight()),n.add(d),t.templateImage=!0}),n.on("after:render",()=>{t.uploadedImage&&t.templateImage&&o("save",n.toJSON())})}return(e,n)=>(me(),Ae("div",Uh,[za(Ut("canvas",{ref_key:"canvasElem",ref:O,class:"editor__canvas"},null,512),[[rl,Gh]]),De(Hh,{ref_key:"photoEditor",ref:B,template:x.template,"uploaded-photo-url":f.value},null,8,["template","uploaded-photo-url"]),Ut("div",Nh,[Ut("input",{ref_key:"fileInputElem",ref:C,type:"file",accept:"image/png, image/jpeg",hidden:"",onChange:i},null,544),Ut("button",{class:"editor__btn btn",onClick:l},"Выбрать фото"),Ut("button",{class:"editor__btn btn",onClick:c,disabled:!A.value},"Создать",8,Vh),Ut("button",{class:"editor__btn btn",onClick:n[0]||(n[0]=t=>o("exit"))},"Сменить шаблон")])]))}});const qh=Bo(Kh,[["__scopeId","data-v-cf083386"]]),Jh=u=>(qu("data-v-d7def800"),u=u(),Ju(),u),Qh={class:"container"},$h={key:0,class:"page__title"},Zh={key:2,class:"templates"},td=["onClick"],ed=["src"],id=["disabled"],nd=Jh(()=>Ut("footer",{class:"footer"},[Ut("a",{class:"footer__link",href:"https://mologafest.ru/"},"Вернуться на сайт")],-1)),rd=Do({__name:"App",setup(u){const o=he(),x=he(!1),C=he(),O=he(!1),A=Lo(()=>!!x.value);function B(e){o.value=e}function f(){o.value=void 0}function i(){f(),x.value=!1}async function l(e){x.value=!0,await Ia(),new ln.fabric.StaticCanvas(C.value,{width:1333,height:2e3}).loadFromJSON(e,()=>{})}function c(){C.value&&(O.value=!0,C.value.toBlob(e=>{if(!e){alert("Ошибка загрузки"),O.value=!1;return}O.value=!1;const n=document.createElement("a");n.download="filename.png",n.href=URL.createObjectURL(e),n.click()}))}return(e,n)=>(me(),Ae("div",{class:cr(["page",{"result-page":A.value}])},[Ut("div",Qh,[A.value?(me(),Ae(ye,{key:1},[Ut("canvas",{class:"result-page__canvas",ref_key:"canvasElem",ref:C},null,512),Ut("button",{class:"result-page__btn btn",disabled:O.value,onClick:c},"Скачать",8,id),Ut("button",{class:"result-page__btn btn",onClick:i},"Сменить шаблон")],64)):(me(),Ae(ye,{key:0},[o.value?el("",!0):(me(),Ae("div",$h,"Выбрать шаблон")),o.value?(me(),Za(qh,{key:1,class:"page__editor",template:o.value,onSave:l,onExit:f},null,8,["template"])):(me(),Ae("div",Zh,[(me(!0),Ae(ye,null,bf(Ma(Ah)(),t=>(me(),Ae("a",{class:"templates__item",href:"#",key:t.id,onClick:rn(s=>B(t),["prevent"])},[Ut("img",{class:"templates__img",alt:"Шаблон с лицом для вставки",src:t.url},null,8,ed)],8,td))),128))]))],64)),nd])],2))}});const od=Bo(rd,[["__scopeId","data-v-d7def800"]]);Ch(od).mount("#app");
