(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const O of document.querySelectorAll('link[rel="modulepreload"]'))C(O);new MutationObserver(O=>{for(const A of O)if(A.type==="childList")for(const z of A.addedNodes)z.tagName==="LINK"&&z.rel==="modulepreload"&&C(z)}).observe(document,{childList:!0,subtree:!0});function x(O){const A={};return O.integrity&&(A.integrity=O.integrity),O.referrerPolicy&&(A.referrerPolicy=O.referrerPolicy),O.crossOrigin==="use-credentials"?A.credentials="include":O.crossOrigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function C(O){if(O.ep)return;O.ep=!0;const A=x(O);fetch(O.href,A)}})();function go(u,o){const x=Object.create(null),C=u.split(",");for(let O=0;O<C.length;O++)x[C[O]]=!0;return o?O=>!!x[O.toLowerCase()]:O=>!!x[O]}const Ut={},Si=[],Se=()=>{},Hc=()=>!1,Uc=/^on[^a-z]/,rr=u=>Uc.test(u),vo=u=>u.startsWith("onUpdate:"),Jt=Object.assign,mo=(u,o)=>{const x=u.indexOf(o);x>-1&&u.splice(x,1)},Nc=Object.prototype.hasOwnProperty,Lt=(u,o)=>Nc.call(u,o),It=Array.isArray,rn=u=>or(u)==="[object Map]",Vc=u=>or(u)==="[object Set]",Ft=u=>typeof u=="function",Qt=u=>typeof u=="string",yo=u=>typeof u=="symbol",Kt=u=>u!==null&&typeof u=="object",ca=u=>Kt(u)&&Ft(u.then)&&Ft(u.catch),Gc=Object.prototype.toString,or=u=>Gc.call(u),Kc=u=>or(u).slice(8,-1),qc=u=>or(u)==="[object Object]",bo=u=>Qt(u)&&u!=="NaN"&&u[0]!=="-"&&""+parseInt(u,10)===u,Kn=go(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),sr=u=>{const o=Object.create(null);return x=>o[x]||(o[x]=u(x))},Jc=/-(\w)/g,Pi=sr(u=>u.replace(Jc,(o,x)=>x?x.toUpperCase():"")),Qc=/\B([A-Z])/g,ki=sr(u=>u.replace(Qc,"-$1").toLowerCase()),ua=sr(u=>u.charAt(0).toUpperCase()+u.slice(1)),Kr=sr(u=>u?`on${ua(u)}`:""),ln=(u,o)=>!Object.is(u,o),qr=(u,o)=>{for(let x=0;x<u.length;x++)u[x](o)},$n=(u,o,x)=>{Object.defineProperty(u,o,{configurable:!0,enumerable:!1,value:x})},Zc=u=>{const o=parseFloat(u);return isNaN(o)?u:o};let Is;const io=()=>Is||(Is=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ar(u){if(It(u)){const o={};for(let x=0;x<u.length;x++){const C=u[x],O=Qt(C)?iu(C):ar(C);if(O)for(const A in O)o[A]=O[A]}return o}else{if(Qt(u))return u;if(Kt(u))return u}}const $c=/;(?![^(]*\))/g,tu=/:([^]+)/,eu=/\/\*[^]*?\*\//g;function iu(u){const o={};return u.replace(eu,"").split($c).forEach(x=>{if(x){const C=x.split(tu);C.length>1&&(o[C[0].trim()]=C[1].trim())}}),o}function lr(u){let o="";if(Qt(u))o=u;else if(It(u))for(let x=0;x<u.length;x++){const C=lr(u[x]);C&&(o+=C+" ")}else if(Kt(u))for(const x in u)u[x]&&(o+=x+" ");return o.trim()}const nu="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ru=go(nu);function fa(u){return!!u||u===""}let _e;class ou{constructor(o=!1){this.detached=o,this._active=!0,this.effects=[],this.cleanups=[],this.parent=_e,!o&&_e&&(this.index=(_e.scopes||(_e.scopes=[])).push(this)-1)}get active(){return this._active}run(o){if(this._active){const x=_e;try{return _e=this,o()}finally{_e=x}}}on(){_e=this}off(){_e=this.parent}stop(o){if(this._active){let x,C;for(x=0,C=this.effects.length;x<C;x++)this.effects[x].stop();for(x=0,C=this.cleanups.length;x<C;x++)this.cleanups[x]();if(this.scopes)for(x=0,C=this.scopes.length;x<C;x++)this.scopes[x].stop(!0);if(!this.detached&&this.parent&&!o){const O=this.parent.scopes.pop();O&&O!==this&&(this.parent.scopes[this.index]=O,O.index=this.index)}this.parent=void 0,this._active=!1}}}function su(u,o=_e){o&&o.active&&o.effects.push(u)}function au(){return _e}const _o=u=>{const o=new Set(u);return o.w=0,o.n=0,o},ha=u=>(u.w&Qe)>0,da=u=>(u.n&Qe)>0,lu=({deps:u})=>{if(u.length)for(let o=0;o<u.length;o++)u[o].w|=Qe},cu=u=>{const{deps:o}=u;if(o.length){let x=0;for(let C=0;C<o.length;C++){const O=o[C];ha(O)&&!da(O)?O.delete(u):o[x++]=O,O.w&=~Qe,O.n&=~Qe}o.length=x}},no=new WeakMap;let tn=0,Qe=1;const ro=30;let xe;const hi=Symbol(""),oo=Symbol("");class xo{constructor(o,x=null,C){this.fn=o,this.scheduler=x,this.active=!0,this.deps=[],this.parent=void 0,su(this,C)}run(){if(!this.active)return this.fn();let o=xe,x=qe;for(;o;){if(o===this)return;o=o.parent}try{return this.parent=xe,xe=this,qe=!0,Qe=1<<++tn,tn<=ro?lu(this):js(this),this.fn()}finally{tn<=ro&&cu(this),Qe=1<<--tn,xe=this.parent,qe=x,this.parent=void 0,this.deferStop&&this.stop()}}stop(){xe===this?this.deferStop=!0:this.active&&(js(this),this.onStop&&this.onStop(),this.active=!1)}}function js(u){const{deps:o}=u;if(o.length){for(let x=0;x<o.length;x++)o[x].delete(u);o.length=0}}let qe=!0;const pa=[];function Di(){pa.push(qe),qe=!1}function Ii(){const u=pa.pop();qe=u===void 0?!0:u}function he(u,o,x){if(qe&&xe){let C=no.get(u);C||no.set(u,C=new Map);let O=C.get(x);O||C.set(x,O=_o()),ga(O)}}function ga(u,o){let x=!1;tn<=ro?da(u)||(u.n|=Qe,x=!ha(u)):x=!u.has(xe),x&&(u.add(xe),xe.deps.push(u))}function Xe(u,o,x,C,O,A){const z=no.get(u);if(!z)return;let h=[];if(o==="clear")h=[...z.values()];else if(x==="length"&&It(u)){const r=Number(C);z.forEach((l,c)=>{(c==="length"||c>=r)&&h.push(l)})}else switch(x!==void 0&&h.push(z.get(x)),o){case"add":It(u)?bo(x)&&h.push(z.get("length")):(h.push(z.get(hi)),rn(u)&&h.push(z.get(oo)));break;case"delete":It(u)||(h.push(z.get(hi)),rn(u)&&h.push(z.get(oo)));break;case"set":rn(u)&&h.push(z.get(hi));break}if(h.length===1)h[0]&&so(h[0]);else{const r=[];for(const l of h)l&&r.push(...l);so(_o(r))}}function so(u,o){const x=It(u)?u:[...u];for(const C of x)C.computed&&Fs(C);for(const C of x)C.computed||Fs(C)}function Fs(u,o){(u!==xe||u.allowRecurse)&&(u.scheduler?u.scheduler():u.run())}const uu=go("__proto__,__v_isRef,__isVue"),va=new Set(Object.getOwnPropertyNames(Symbol).filter(u=>u!=="arguments"&&u!=="caller").map(u=>Symbol[u]).filter(yo)),fu=Co(),hu=Co(!1,!0),du=Co(!0),Rs=pu();function pu(){const u={};return["includes","indexOf","lastIndexOf"].forEach(o=>{u[o]=function(...x){const C=zt(this);for(let A=0,z=this.length;A<z;A++)he(C,"get",A+"");const O=C[o](...x);return O===-1||O===!1?C[o](...x.map(zt)):O}}),["push","pop","shift","unshift","splice"].forEach(o=>{u[o]=function(...x){Di();const C=zt(this)[o].apply(this,x);return Ii(),C}}),u}function gu(u){const o=zt(this);return he(o,"has",u),o.hasOwnProperty(u)}function Co(u=!1,o=!1){return function(C,O,A){if(O==="__v_isReactive")return!u;if(O==="__v_isReadonly")return u;if(O==="__v_isShallow")return o;if(O==="__v_raw"&&A===(u?o?ku:xa:o?_a:ba).get(C))return C;const z=It(C);if(!u){if(z&&Lt(Rs,O))return Reflect.get(Rs,O,A);if(O==="hasOwnProperty")return gu}const h=Reflect.get(C,O,A);return(yo(O)?va.has(O):uu(O))||(u||he(C,"get",O),o)?h:ae(h)?z&&bo(O)?h:h.value:Kt(h)?u?Ca(h):To(h):h}}const vu=ma(),mu=ma(!0);function ma(u=!1){return function(x,C,O,A){let z=x[C];if(Ei(z)&&ae(z)&&!ae(O))return!1;if(!u&&(!tr(O)&&!Ei(O)&&(z=zt(z),O=zt(O)),!It(x)&&ae(z)&&!ae(O)))return z.value=O,!0;const h=It(x)&&bo(C)?Number(C)<x.length:Lt(x,C),r=Reflect.set(x,C,O,A);return x===zt(A)&&(h?ln(O,z)&&Xe(x,"set",C,O):Xe(x,"add",C,O)),r}}function yu(u,o){const x=Lt(u,o);u[o];const C=Reflect.deleteProperty(u,o);return C&&x&&Xe(u,"delete",o,void 0),C}function bu(u,o){const x=Reflect.has(u,o);return(!yo(o)||!va.has(o))&&he(u,"has",o),x}function _u(u){return he(u,"iterate",It(u)?"length":hi),Reflect.ownKeys(u)}const ya={get:fu,set:vu,deleteProperty:yu,has:bu,ownKeys:_u},xu={get:du,set(u,o){return!0},deleteProperty(u,o){return!0}},Cu=Jt({},ya,{get:hu,set:mu}),wo=u=>u,cr=u=>Reflect.getPrototypeOf(u);function Wn(u,o,x=!1,C=!1){u=u.__v_raw;const O=zt(u),A=zt(o);x||(o!==A&&he(O,"get",o),he(O,"get",A));const{has:z}=cr(O),h=C?wo:x?Po:cn;if(z.call(O,o))return h(u.get(o));if(z.call(O,A))return h(u.get(A));u!==O&&u.get(o)}function Hn(u,o=!1){const x=this.__v_raw,C=zt(x),O=zt(u);return o||(u!==O&&he(C,"has",u),he(C,"has",O)),u===O?x.has(u):x.has(u)||x.has(O)}function Un(u,o=!1){return u=u.__v_raw,!o&&he(zt(u),"iterate",hi),Reflect.get(u,"size",u)}function Ls(u){u=zt(u);const o=zt(this);return cr(o).has.call(o,u)||(o.add(u),Xe(o,"add",u,u)),this}function Bs(u,o){o=zt(o);const x=zt(this),{has:C,get:O}=cr(x);let A=C.call(x,u);A||(u=zt(u),A=C.call(x,u));const z=O.call(x,u);return x.set(u,o),A?ln(o,z)&&Xe(x,"set",u,o):Xe(x,"add",u,o),this}function zs(u){const o=zt(this),{has:x,get:C}=cr(o);let O=x.call(o,u);O||(u=zt(u),O=x.call(o,u)),C&&C.call(o,u);const A=o.delete(u);return O&&Xe(o,"delete",u,void 0),A}function Xs(){const u=zt(this),o=u.size!==0,x=u.clear();return o&&Xe(u,"clear",void 0,void 0),x}function Nn(u,o){return function(C,O){const A=this,z=A.__v_raw,h=zt(z),r=o?wo:u?Po:cn;return!u&&he(h,"iterate",hi),z.forEach((l,c)=>C.call(O,r(l),r(c),A))}}function Vn(u,o,x){return function(...C){const O=this.__v_raw,A=zt(O),z=rn(A),h=u==="entries"||u===Symbol.iterator&&z,r=u==="keys"&&z,l=O[u](...C),c=x?wo:o?Po:cn;return!o&&he(A,"iterate",r?oo:hi),{next(){const{value:e,done:n}=l.next();return n?{value:e,done:n}:{value:h?[c(e[0]),c(e[1])]:c(e),done:n}},[Symbol.iterator](){return this}}}}function Ge(u){return function(...o){return u==="delete"?!1:this}}function wu(){const u={get(A){return Wn(this,A)},get size(){return Un(this)},has:Hn,add:Ls,set:Bs,delete:zs,clear:Xs,forEach:Nn(!1,!1)},o={get(A){return Wn(this,A,!1,!0)},get size(){return Un(this)},has:Hn,add:Ls,set:Bs,delete:zs,clear:Xs,forEach:Nn(!1,!0)},x={get(A){return Wn(this,A,!0)},get size(){return Un(this,!0)},has(A){return Hn.call(this,A,!0)},add:Ge("add"),set:Ge("set"),delete:Ge("delete"),clear:Ge("clear"),forEach:Nn(!0,!1)},C={get(A){return Wn(this,A,!0,!0)},get size(){return Un(this,!0)},has(A){return Hn.call(this,A,!0)},add:Ge("add"),set:Ge("set"),delete:Ge("delete"),clear:Ge("clear"),forEach:Nn(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(A=>{u[A]=Vn(A,!1,!1),x[A]=Vn(A,!0,!1),o[A]=Vn(A,!1,!0),C[A]=Vn(A,!0,!0)}),[u,x,o,C]}const[Su,Tu,Ou,Pu]=wu();function So(u,o){const x=o?u?Pu:Ou:u?Tu:Su;return(C,O,A)=>O==="__v_isReactive"?!u:O==="__v_isReadonly"?u:O==="__v_raw"?C:Reflect.get(Lt(x,O)&&O in C?x:C,O,A)}const Eu={get:So(!1,!1)},Au={get:So(!1,!0)},Mu={get:So(!0,!1)},ba=new WeakMap,_a=new WeakMap,xa=new WeakMap,ku=new WeakMap;function Du(u){switch(u){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Iu(u){return u.__v_skip||!Object.isExtensible(u)?0:Du(Kc(u))}function To(u){return Ei(u)?u:Oo(u,!1,ya,Eu,ba)}function ju(u){return Oo(u,!1,Cu,Au,_a)}function Ca(u){return Oo(u,!0,xu,Mu,xa)}function Oo(u,o,x,C,O){if(!Kt(u)||u.__v_raw&&!(o&&u.__v_isReactive))return u;const A=O.get(u);if(A)return A;const z=Iu(u);if(z===0)return u;const h=new Proxy(u,z===2?C:x);return O.set(u,h),h}function Ti(u){return Ei(u)?Ti(u.__v_raw):!!(u&&u.__v_isReactive)}function Ei(u){return!!(u&&u.__v_isReadonly)}function tr(u){return!!(u&&u.__v_isShallow)}function wa(u){return Ti(u)||Ei(u)}function zt(u){const o=u&&u.__v_raw;return o?zt(o):u}function Sa(u){return $n(u,"__v_skip",!0),u}const cn=u=>Kt(u)?To(u):u,Po=u=>Kt(u)?Ca(u):u;function Ta(u){qe&&xe&&(u=zt(u),ga(u.dep||(u.dep=_o())))}function Oa(u,o){u=zt(u);const x=u.dep;x&&so(x)}function ae(u){return!!(u&&u.__v_isRef===!0)}function pe(u){return Fu(u,!1)}function Fu(u,o){return ae(u)?u:new Ru(u,o)}class Ru{constructor(o,x){this.__v_isShallow=x,this.dep=void 0,this.__v_isRef=!0,this._rawValue=x?o:zt(o),this._value=x?o:cn(o)}get value(){return Ta(this),this._value}set value(o){const x=this.__v_isShallow||tr(o)||Ei(o);o=x?o:zt(o),ln(o,this._rawValue)&&(this._rawValue=o,this._value=x?o:cn(o),Oa(this))}}function Pa(u){return ae(u)?u.value:u}const Lu={get:(u,o,x)=>Pa(Reflect.get(u,o,x)),set:(u,o,x,C)=>{const O=u[o];return ae(O)&&!ae(x)?(O.value=x,!0):Reflect.set(u,o,x,C)}};function Ea(u){return Ti(u)?u:new Proxy(u,Lu)}class Bu{constructor(o,x,C,O){this._setter=x,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new xo(o,()=>{this._dirty||(this._dirty=!0,Oa(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!O,this.__v_isReadonly=C}get value(){const o=zt(this);return Ta(o),(o._dirty||!o._cacheable)&&(o._dirty=!1,o._value=o.effect.run()),o._value}set value(o){this._setter(o)}}function zu(u,o,x=!1){let C,O;const A=Ft(u);return A?(C=u,O=Se):(C=u.get,O=u.set),new Bu(C,O,A||!O,x)}function Je(u,o,x,C){let O;try{O=C?u(...C):u()}catch(A){ur(A,o,x)}return O}function Te(u,o,x,C){if(Ft(u)){const A=Je(u,o,x,C);return A&&ca(A)&&A.catch(z=>{ur(z,o,x)}),A}const O=[];for(let A=0;A<u.length;A++)O.push(Te(u[A],o,x,C));return O}function ur(u,o,x,C=!0){const O=o?o.vnode:null;if(o){let A=o.parent;const z=o.proxy,h=x;for(;A;){const l=A.ec;if(l){for(let c=0;c<l.length;c++)if(l[c](u,z,h)===!1)return}A=A.parent}const r=o.appContext.config.errorHandler;if(r){Je(r,null,10,[u,z,h]);return}}Xu(u,x,O,C)}function Xu(u,o,x,C=!0){console.error(u)}let un=!1,ao=!1;const oe=[];let ke=0;const Oi=[];let ze=null,ci=0;const Aa=Promise.resolve();let Eo=null;function Ma(u){const o=Eo||Aa;return u?o.then(this?u.bind(this):u):o}function Yu(u){let o=ke+1,x=oe.length;for(;o<x;){const C=o+x>>>1;fn(oe[C])<u?o=C+1:x=C}return o}function Ao(u){(!oe.length||!oe.includes(u,un&&u.allowRecurse?ke+1:ke))&&(u.id==null?oe.push(u):oe.splice(Yu(u.id),0,u),ka())}function ka(){!un&&!ao&&(ao=!0,Eo=Aa.then(Ia))}function Wu(u){const o=oe.indexOf(u);o>ke&&oe.splice(o,1)}function Hu(u){It(u)?Oi.push(...u):(!ze||!ze.includes(u,u.allowRecurse?ci+1:ci))&&Oi.push(u),ka()}function Ys(u,o=un?ke+1:0){for(;o<oe.length;o++){const x=oe[o];x&&x.pre&&(oe.splice(o,1),o--,x())}}function Da(u){if(Oi.length){const o=[...new Set(Oi)];if(Oi.length=0,ze){ze.push(...o);return}for(ze=o,ze.sort((x,C)=>fn(x)-fn(C)),ci=0;ci<ze.length;ci++)ze[ci]();ze=null,ci=0}}const fn=u=>u.id==null?1/0:u.id,Uu=(u,o)=>{const x=fn(u)-fn(o);if(x===0){if(u.pre&&!o.pre)return-1;if(o.pre&&!u.pre)return 1}return x};function Ia(u){ao=!1,un=!0,oe.sort(Uu);const o=Se;try{for(ke=0;ke<oe.length;ke++){const x=oe[ke];x&&x.active!==!1&&Je(x,null,14)}}finally{ke=0,oe.length=0,Da(),un=!1,Eo=null,(oe.length||Oi.length)&&Ia()}}function Nu(u,o,...x){if(u.isUnmounted)return;const C=u.vnode.props||Ut;let O=x;const A=o.startsWith("update:"),z=A&&o.slice(7);if(z&&z in C){const c=`${z==="modelValue"?"model":z}Modifiers`,{number:e,trim:n}=C[c]||Ut;n&&(O=x.map(t=>Qt(t)?t.trim():t)),e&&(O=x.map(Zc))}let h,r=C[h=Kr(o)]||C[h=Kr(Pi(o))];!r&&A&&(r=C[h=Kr(ki(o))]),r&&Te(r,u,6,O);const l=C[h+"Once"];if(l){if(!u.emitted)u.emitted={};else if(u.emitted[h])return;u.emitted[h]=!0,Te(l,u,6,O)}}function ja(u,o,x=!1){const C=o.emitsCache,O=C.get(u);if(O!==void 0)return O;const A=u.emits;let z={},h=!1;if(!Ft(u)){const r=l=>{const c=ja(l,o,!0);c&&(h=!0,Jt(z,c))};!x&&o.mixins.length&&o.mixins.forEach(r),u.extends&&r(u.extends),u.mixins&&u.mixins.forEach(r)}return!A&&!h?(Kt(u)&&C.set(u,null),null):(It(A)?A.forEach(r=>z[r]=null):Jt(z,A),Kt(u)&&C.set(u,z),z)}function fr(u,o){return!u||!rr(o)?!1:(o=o.slice(2).replace(/Once$/,""),Lt(u,o[0].toLowerCase()+o.slice(1))||Lt(u,ki(o))||Lt(u,o))}let Ce=null,hr=null;function er(u){const o=Ce;return Ce=u,hr=u&&u.type.__scopeId||null,o}function Vu(u){hr=u}function Gu(){hr=null}function Ku(u,o=Ce,x){if(!o||u._n)return u;const C=(...O)=>{C._d&&Qs(-1);const A=er(o);let z;try{z=u(...O)}finally{er(A),C._d&&Qs(1)}return z};return C._n=!0,C._c=!0,C._d=!0,C}function Jr(u){const{type:o,vnode:x,proxy:C,withProxy:O,props:A,propsOptions:[z],slots:h,attrs:r,emit:l,render:c,renderCache:e,data:n,setupState:t,ctx:s,inheritAttrs:f}=u;let i,p;const m=er(u);try{if(x.shapeFlag&4){const _=O||C;i=Me(c.call(_,_,e,A,t,n,s)),p=r}else{const _=o;i=Me(_.length>1?_(A,{attrs:r,slots:h,emit:l}):_(A,null)),p=o.props?r:qu(r)}}catch(_){sn.length=0,ur(_,u,1),i=De(pi)}let y=i;if(p&&f!==!1){const _=Object.keys(p),{shapeFlag:T}=y;_.length&&T&7&&(z&&_.some(vo)&&(p=Ju(p,z)),y=Ai(y,p))}return x.dirs&&(y=Ai(y),y.dirs=y.dirs?y.dirs.concat(x.dirs):x.dirs),x.transition&&(y.transition=x.transition),i=y,er(m),i}const qu=u=>{let o;for(const x in u)(x==="class"||x==="style"||rr(x))&&((o||(o={}))[x]=u[x]);return o},Ju=(u,o)=>{const x={};for(const C in u)(!vo(C)||!(C.slice(9)in o))&&(x[C]=u[C]);return x};function Qu(u,o,x){const{props:C,children:O,component:A}=u,{props:z,children:h,patchFlag:r}=o,l=A.emitsOptions;if(o.dirs||o.transition)return!0;if(x&&r>=0){if(r&1024)return!0;if(r&16)return C?Ws(C,z,l):!!z;if(r&8){const c=o.dynamicProps;for(let e=0;e<c.length;e++){const n=c[e];if(z[n]!==C[n]&&!fr(l,n))return!0}}}else return(O||h)&&(!h||!h.$stable)?!0:C===z?!1:C?z?Ws(C,z,l):!0:!!z;return!1}function Ws(u,o,x){const C=Object.keys(o);if(C.length!==Object.keys(u).length)return!0;for(let O=0;O<C.length;O++){const A=C[O];if(o[A]!==u[A]&&!fr(x,A))return!0}return!1}function Zu({vnode:u,parent:o},x){for(;o&&o.subTree===u;)(u=o.vnode).el=x,o=o.parent}const $u=u=>u.__isSuspense;function tf(u,o){o&&o.pendingBranch?It(u)?o.effects.push(...u):o.effects.push(u):Hu(u)}const Gn={};function qn(u,o,x){return Fa(u,o,x)}function Fa(u,o,{immediate:x,deep:C,flush:O,onTrack:A,onTrigger:z}=Ut){var h;const r=au()===((h=se)==null?void 0:h.scope)?se:null;let l,c=!1,e=!1;if(ae(u)?(l=()=>u.value,c=tr(u)):Ti(u)?(l=()=>u,C=!0):It(u)?(e=!0,c=u.some(_=>Ti(_)||tr(_)),l=()=>u.map(_=>{if(ae(_))return _.value;if(Ti(_))return fi(_);if(Ft(_))return Je(_,r,2)})):Ft(u)?o?l=()=>Je(u,r,2):l=()=>{if(!(r&&r.isUnmounted))return n&&n(),Te(u,r,3,[t])}:l=Se,o&&C){const _=l;l=()=>fi(_())}let n,t=_=>{n=m.onStop=()=>{Je(_,r,4)}},s;if(dn)if(t=Se,o?x&&Te(o,r,3,[l(),e?[]:void 0,t]):l(),O==="sync"){const _=Jf();s=_.__watcherHandles||(_.__watcherHandles=[])}else return Se;let f=e?new Array(u.length).fill(Gn):Gn;const i=()=>{if(m.active)if(o){const _=m.run();(C||c||(e?_.some((T,M)=>ln(T,f[M])):ln(_,f)))&&(n&&n(),Te(o,r,3,[_,f===Gn?void 0:e&&f[0]===Gn?[]:f,t]),f=_)}else m.run()};i.allowRecurse=!!o;let p;O==="sync"?p=i:O==="post"?p=()=>fe(i,r&&r.suspense):(i.pre=!0,r&&(i.id=r.uid),p=()=>Ao(i));const m=new xo(l,p);o?x?i():f=m.run():O==="post"?fe(m.run.bind(m),r&&r.suspense):m.run();const y=()=>{m.stop(),r&&r.scope&&mo(r.scope.effects,m)};return s&&s.push(y),y}function ef(u,o,x){const C=this.proxy,O=Qt(u)?u.includes(".")?Ra(C,u):()=>C[u]:u.bind(C,C);let A;Ft(o)?A=o:(A=o.handler,x=o);const z=se;Mi(this);const h=Fa(O,A.bind(C),x);return z?Mi(z):di(),h}function Ra(u,o){const x=o.split(".");return()=>{let C=u;for(let O=0;O<x.length&&C;O++)C=C[x[O]];return C}}function fi(u,o){if(!Kt(u)||u.__v_skip||(o=o||new Set,o.has(u)))return u;if(o.add(u),ae(u))fi(u.value,o);else if(It(u))for(let x=0;x<u.length;x++)fi(u[x],o);else if(Vc(u)||rn(u))u.forEach(x=>{fi(x,o)});else if(qc(u))for(const x in u)fi(u[x],o);return u}function La(u,o){const x=Ce;if(x===null)return u;const C=vr(x)||x.proxy,O=u.dirs||(u.dirs=[]);for(let A=0;A<o.length;A++){let[z,h,r,l=Ut]=o[A];z&&(Ft(z)&&(z={mounted:z,updated:z}),z.deep&&fi(h),O.push({dir:z,instance:C,value:h,oldValue:void 0,arg:r,modifiers:l}))}return u}function ai(u,o,x,C){const O=u.dirs,A=o&&o.dirs;for(let z=0;z<O.length;z++){const h=O[z];A&&(h.oldValue=A[z].value);let r=h.dir[C];r&&(Di(),Te(r,x,8,[u.el,h,u,o]),Ii())}}function Mo(u,o){return Ft(u)?(()=>Jt({name:u.name},o,{setup:u}))():u}const Jn=u=>!!u.type.__asyncLoader,Ba=u=>u.type.__isKeepAlive;function nf(u,o){za(u,"a",o)}function rf(u,o){za(u,"da",o)}function za(u,o,x=se){const C=u.__wdc||(u.__wdc=()=>{let O=x;for(;O;){if(O.isDeactivated)return;O=O.parent}return u()});if(dr(o,C,x),x){let O=x.parent;for(;O&&O.parent;)Ba(O.parent.vnode)&&of(C,o,x,O),O=O.parent}}function of(u,o,x,C){const O=dr(o,u,C,!0);Xa(()=>{mo(C[o],O)},x)}function dr(u,o,x=se,C=!1){if(x){const O=x[u]||(x[u]=[]),A=o.__weh||(o.__weh=(...z)=>{if(x.isUnmounted)return;Di(),Mi(x);const h=Te(o,x,u,z);return di(),Ii(),h});return C?O.unshift(A):O.push(A),A}}const Ye=u=>(o,x=se)=>(!dn||u==="sp")&&dr(u,(...C)=>o(...C),x),sf=Ye("bm"),af=Ye("m"),lf=Ye("bu"),cf=Ye("u"),uf=Ye("bum"),Xa=Ye("um"),ff=Ye("sp"),hf=Ye("rtg"),df=Ye("rtc");function pf(u,o=se){dr("ec",u,o)}const gf=Symbol.for("v-ndc");function vf(u,o,x,C){let O;const A=x&&x[C];if(It(u)||Qt(u)){O=new Array(u.length);for(let z=0,h=u.length;z<h;z++)O[z]=o(u[z],z,void 0,A&&A[z])}else if(typeof u=="number"){O=new Array(u);for(let z=0;z<u;z++)O[z]=o(z+1,z,void 0,A&&A[z])}else if(Kt(u))if(u[Symbol.iterator])O=Array.from(u,(z,h)=>o(z,h,void 0,A&&A[h]));else{const z=Object.keys(u);O=new Array(z.length);for(let h=0,r=z.length;h<r;h++){const l=z[h];O[h]=o(u[l],l,h,A&&A[h])}}else O=[];return x&&(x[C]=O),O}const lo=u=>u?$a(u)?vr(u)||u.proxy:lo(u.parent):null,on=Jt(Object.create(null),{$:u=>u,$el:u=>u.vnode.el,$data:u=>u.data,$props:u=>u.props,$attrs:u=>u.attrs,$slots:u=>u.slots,$refs:u=>u.refs,$parent:u=>lo(u.parent),$root:u=>lo(u.root),$emit:u=>u.emit,$options:u=>ko(u),$forceUpdate:u=>u.f||(u.f=()=>Ao(u.update)),$nextTick:u=>u.n||(u.n=Ma.bind(u.proxy)),$watch:u=>ef.bind(u)}),Qr=(u,o)=>u!==Ut&&!u.__isScriptSetup&&Lt(u,o),mf={get({_:u},o){const{ctx:x,setupState:C,data:O,props:A,accessCache:z,type:h,appContext:r}=u;let l;if(o[0]!=="$"){const t=z[o];if(t!==void 0)switch(t){case 1:return C[o];case 2:return O[o];case 4:return x[o];case 3:return A[o]}else{if(Qr(C,o))return z[o]=1,C[o];if(O!==Ut&&Lt(O,o))return z[o]=2,O[o];if((l=u.propsOptions[0])&&Lt(l,o))return z[o]=3,A[o];if(x!==Ut&&Lt(x,o))return z[o]=4,x[o];co&&(z[o]=0)}}const c=on[o];let e,n;if(c)return o==="$attrs"&&he(u,"get",o),c(u);if((e=h.__cssModules)&&(e=e[o]))return e;if(x!==Ut&&Lt(x,o))return z[o]=4,x[o];if(n=r.config.globalProperties,Lt(n,o))return n[o]},set({_:u},o,x){const{data:C,setupState:O,ctx:A}=u;return Qr(O,o)?(O[o]=x,!0):C!==Ut&&Lt(C,o)?(C[o]=x,!0):Lt(u.props,o)||o[0]==="$"&&o.slice(1)in u?!1:(A[o]=x,!0)},has({_:{data:u,setupState:o,accessCache:x,ctx:C,appContext:O,propsOptions:A}},z){let h;return!!x[z]||u!==Ut&&Lt(u,z)||Qr(o,z)||(h=A[0])&&Lt(h,z)||Lt(C,z)||Lt(on,z)||Lt(O.config.globalProperties,z)},defineProperty(u,o,x){return x.get!=null?u._.accessCache[o]=0:Lt(x,"value")&&this.set(u,o,x.value,null),Reflect.defineProperty(u,o,x)}};function Hs(u){return It(u)?u.reduce((o,x)=>(o[x]=null,o),{}):u}let co=!0;function yf(u){const o=ko(u),x=u.proxy,C=u.ctx;co=!1,o.beforeCreate&&Us(o.beforeCreate,u,"bc");const{data:O,computed:A,methods:z,watch:h,provide:r,inject:l,created:c,beforeMount:e,mounted:n,beforeUpdate:t,updated:s,activated:f,deactivated:i,beforeDestroy:p,beforeUnmount:m,destroyed:y,unmounted:_,render:T,renderTracked:M,renderTriggered:B,errorCaptured:X,serverPrefetch:st,expose:ft,inheritAttrs:vt,components:xt,directives:St,filters:_t}=o;if(l&&bf(l,C,null),z)for(const wt in z){const bt=z[wt];Ft(bt)&&(C[wt]=bt.bind(x))}if(O){const wt=O.call(x,x);Kt(wt)&&(u.data=To(wt))}if(co=!0,A)for(const wt in A){const bt=A[wt],k=Ft(bt)?bt.bind(x,x):Ft(bt.get)?bt.get.bind(x,x):Se,U=!Ft(bt)&&Ft(bt.set)?bt.set.bind(x):Se,N=Fo({get:k,set:U});Object.defineProperty(C,wt,{enumerable:!0,configurable:!0,get:()=>N.value,set:H=>N.value=H})}if(h)for(const wt in h)Ya(h[wt],C,x,wt);if(r){const wt=Ft(r)?r.call(x):r;Reflect.ownKeys(wt).forEach(bt=>{Tf(bt,wt[bt])})}c&&Us(c,u,"c");function pt(wt,bt){It(bt)?bt.forEach(k=>wt(k.bind(x))):bt&&wt(bt.bind(x))}if(pt(sf,e),pt(af,n),pt(lf,t),pt(cf,s),pt(nf,f),pt(rf,i),pt(pf,X),pt(df,M),pt(hf,B),pt(uf,m),pt(Xa,_),pt(ff,st),It(ft))if(ft.length){const wt=u.exposed||(u.exposed={});ft.forEach(bt=>{Object.defineProperty(wt,bt,{get:()=>x[bt],set:k=>x[bt]=k})})}else u.exposed||(u.exposed={});T&&u.render===Se&&(u.render=T),vt!=null&&(u.inheritAttrs=vt),xt&&(u.components=xt),St&&(u.directives=St)}function bf(u,o,x=Se){It(u)&&(u=uo(u));for(const C in u){const O=u[C];let A;Kt(O)?"default"in O?A=Qn(O.from||C,O.default,!0):A=Qn(O.from||C):A=Qn(O),ae(A)?Object.defineProperty(o,C,{enumerable:!0,configurable:!0,get:()=>A.value,set:z=>A.value=z}):o[C]=A}}function Us(u,o,x){Te(It(u)?u.map(C=>C.bind(o.proxy)):u.bind(o.proxy),o,x)}function Ya(u,o,x,C){const O=C.includes(".")?Ra(x,C):()=>x[C];if(Qt(u)){const A=o[u];Ft(A)&&qn(O,A)}else if(Ft(u))qn(O,u.bind(x));else if(Kt(u))if(It(u))u.forEach(A=>Ya(A,o,x,C));else{const A=Ft(u.handler)?u.handler.bind(x):o[u.handler];Ft(A)&&qn(O,A,u)}}function ko(u){const o=u.type,{mixins:x,extends:C}=o,{mixins:O,optionsCache:A,config:{optionMergeStrategies:z}}=u.appContext,h=A.get(o);let r;return h?r=h:!O.length&&!x&&!C?r=o:(r={},O.length&&O.forEach(l=>ir(r,l,z,!0)),ir(r,o,z)),Kt(o)&&A.set(o,r),r}function ir(u,o,x,C=!1){const{mixins:O,extends:A}=o;A&&ir(u,A,x,!0),O&&O.forEach(z=>ir(u,z,x,!0));for(const z in o)if(!(C&&z==="expose")){const h=_f[z]||x&&x[z];u[z]=h?h(u[z],o[z]):o[z]}return u}const _f={data:Ns,props:Vs,emits:Vs,methods:en,computed:en,beforeCreate:ce,created:ce,beforeMount:ce,mounted:ce,beforeUpdate:ce,updated:ce,beforeDestroy:ce,beforeUnmount:ce,destroyed:ce,unmounted:ce,activated:ce,deactivated:ce,errorCaptured:ce,serverPrefetch:ce,components:en,directives:en,watch:Cf,provide:Ns,inject:xf};function Ns(u,o){return o?u?function(){return Jt(Ft(u)?u.call(this,this):u,Ft(o)?o.call(this,this):o)}:o:u}function xf(u,o){return en(uo(u),uo(o))}function uo(u){if(It(u)){const o={};for(let x=0;x<u.length;x++)o[u[x]]=u[x];return o}return u}function ce(u,o){return u?[...new Set([].concat(u,o))]:o}function en(u,o){return u?Jt(Object.create(null),u,o):o}function Vs(u,o){return u?It(u)&&It(o)?[...new Set([...u,...o])]:Jt(Object.create(null),Hs(u),Hs(o??{})):o}function Cf(u,o){if(!u)return o;if(!o)return u;const x=Jt(Object.create(null),u);for(const C in o)x[C]=ce(u[C],o[C]);return x}function Wa(){return{app:null,config:{isNativeTag:Hc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let wf=0;function Sf(u,o){return function(C,O=null){Ft(C)||(C=Jt({},C)),O!=null&&!Kt(O)&&(O=null);const A=Wa(),z=new Set;let h=!1;const r=A.app={_uid:wf++,_component:C,_props:O,_container:null,_context:A,_instance:null,version:Qf,get config(){return A.config},set config(l){},use(l,...c){return z.has(l)||(l&&Ft(l.install)?(z.add(l),l.install(r,...c)):Ft(l)&&(z.add(l),l(r,...c))),r},mixin(l){return A.mixins.includes(l)||A.mixins.push(l),r},component(l,c){return c?(A.components[l]=c,r):A.components[l]},directive(l,c){return c?(A.directives[l]=c,r):A.directives[l]},mount(l,c,e){if(!h){const n=De(C,O);return n.appContext=A,c&&o?o(n,l):u(n,l,e),h=!0,r._container=l,l.__vue_app__=r,vr(n.component)||n.component.proxy}},unmount(){h&&(u(null,r._container),delete r._container.__vue_app__)},provide(l,c){return A.provides[l]=c,r},runWithContext(l){nr=r;try{return l()}finally{nr=null}}};return r}}let nr=null;function Tf(u,o){if(se){let x=se.provides;const C=se.parent&&se.parent.provides;C===x&&(x=se.provides=Object.create(C)),x[u]=o}}function Qn(u,o,x=!1){const C=se||Ce;if(C||nr){const O=C?C.parent==null?C.vnode.appContext&&C.vnode.appContext.provides:C.parent.provides:nr._context.provides;if(O&&u in O)return O[u];if(arguments.length>1)return x&&Ft(o)?o.call(C&&C.proxy):o}}function Of(u,o,x,C=!1){const O={},A={};$n(A,gr,1),u.propsDefaults=Object.create(null),Ha(u,o,O,A);for(const z in u.propsOptions[0])z in O||(O[z]=void 0);x?u.props=C?O:ju(O):u.type.props?u.props=O:u.props=A,u.attrs=A}function Pf(u,o,x,C){const{props:O,attrs:A,vnode:{patchFlag:z}}=u,h=zt(O),[r]=u.propsOptions;let l=!1;if((C||z>0)&&!(z&16)){if(z&8){const c=u.vnode.dynamicProps;for(let e=0;e<c.length;e++){let n=c[e];if(fr(u.emitsOptions,n))continue;const t=o[n];if(r)if(Lt(A,n))t!==A[n]&&(A[n]=t,l=!0);else{const s=Pi(n);O[s]=fo(r,h,s,t,u,!1)}else t!==A[n]&&(A[n]=t,l=!0)}}}else{Ha(u,o,O,A)&&(l=!0);let c;for(const e in h)(!o||!Lt(o,e)&&((c=ki(e))===e||!Lt(o,c)))&&(r?x&&(x[e]!==void 0||x[c]!==void 0)&&(O[e]=fo(r,h,e,void 0,u,!0)):delete O[e]);if(A!==h)for(const e in A)(!o||!Lt(o,e))&&(delete A[e],l=!0)}l&&Xe(u,"set","$attrs")}function Ha(u,o,x,C){const[O,A]=u.propsOptions;let z=!1,h;if(o)for(let r in o){if(Kn(r))continue;const l=o[r];let c;O&&Lt(O,c=Pi(r))?!A||!A.includes(c)?x[c]=l:(h||(h={}))[c]=l:fr(u.emitsOptions,r)||(!(r in C)||l!==C[r])&&(C[r]=l,z=!0)}if(A){const r=zt(x),l=h||Ut;for(let c=0;c<A.length;c++){const e=A[c];x[e]=fo(O,r,e,l[e],u,!Lt(l,e))}}return z}function fo(u,o,x,C,O,A){const z=u[x];if(z!=null){const h=Lt(z,"default");if(h&&C===void 0){const r=z.default;if(z.type!==Function&&!z.skipFactory&&Ft(r)){const{propsDefaults:l}=O;x in l?C=l[x]:(Mi(O),C=l[x]=r.call(null,o),di())}else C=r}z[0]&&(A&&!h?C=!1:z[1]&&(C===""||C===ki(x))&&(C=!0))}return C}function Ua(u,o,x=!1){const C=o.propsCache,O=C.get(u);if(O)return O;const A=u.props,z={},h=[];let r=!1;if(!Ft(u)){const c=e=>{r=!0;const[n,t]=Ua(e,o,!0);Jt(z,n),t&&h.push(...t)};!x&&o.mixins.length&&o.mixins.forEach(c),u.extends&&c(u.extends),u.mixins&&u.mixins.forEach(c)}if(!A&&!r)return Kt(u)&&C.set(u,Si),Si;if(It(A))for(let c=0;c<A.length;c++){const e=Pi(A[c]);Gs(e)&&(z[e]=Ut)}else if(A)for(const c in A){const e=Pi(c);if(Gs(e)){const n=A[c],t=z[e]=It(n)||Ft(n)?{type:n}:Jt({},n);if(t){const s=Js(Boolean,t.type),f=Js(String,t.type);t[0]=s>-1,t[1]=f<0||s<f,(s>-1||Lt(t,"default"))&&h.push(e)}}}const l=[z,h];return Kt(u)&&C.set(u,l),l}function Gs(u){return u[0]!=="$"}function Ks(u){const o=u&&u.toString().match(/^\s*(function|class) (\w+)/);return o?o[2]:u===null?"null":""}function qs(u,o){return Ks(u)===Ks(o)}function Js(u,o){return It(o)?o.findIndex(x=>qs(x,u)):Ft(o)&&qs(o,u)?0:-1}const Na=u=>u[0]==="_"||u==="$stable",Do=u=>It(u)?u.map(Me):[Me(u)],Ef=(u,o,x)=>{if(o._n)return o;const C=Ku((...O)=>Do(o(...O)),x);return C._c=!1,C},Va=(u,o,x)=>{const C=u._ctx;for(const O in u){if(Na(O))continue;const A=u[O];if(Ft(A))o[O]=Ef(O,A,C);else if(A!=null){const z=Do(A);o[O]=()=>z}}},Ga=(u,o)=>{const x=Do(o);u.slots.default=()=>x},Af=(u,o)=>{if(u.vnode.shapeFlag&32){const x=o._;x?(u.slots=zt(o),$n(o,"_",x)):Va(o,u.slots={})}else u.slots={},o&&Ga(u,o);$n(u.slots,gr,1)},Mf=(u,o,x)=>{const{vnode:C,slots:O}=u;let A=!0,z=Ut;if(C.shapeFlag&32){const h=o._;h?x&&h===1?A=!1:(Jt(O,o),!x&&h===1&&delete O._):(A=!o.$stable,Va(o,O)),z=o}else o&&(Ga(u,o),z={default:1});if(A)for(const h in O)!Na(h)&&!(h in z)&&delete O[h]};function ho(u,o,x,C,O=!1){if(It(u)){u.forEach((n,t)=>ho(n,o&&(It(o)?o[t]:o),x,C,O));return}if(Jn(C)&&!O)return;const A=C.shapeFlag&4?vr(C.component)||C.component.proxy:C.el,z=O?null:A,{i:h,r}=u,l=o&&o.r,c=h.refs===Ut?h.refs={}:h.refs,e=h.setupState;if(l!=null&&l!==r&&(Qt(l)?(c[l]=null,Lt(e,l)&&(e[l]=null)):ae(l)&&(l.value=null)),Ft(r))Je(r,h,12,[z,c]);else{const n=Qt(r),t=ae(r);if(n||t){const s=()=>{if(u.f){const f=n?Lt(e,r)?e[r]:c[r]:r.value;O?It(f)&&mo(f,A):It(f)?f.includes(A)||f.push(A):n?(c[r]=[A],Lt(e,r)&&(e[r]=c[r])):(r.value=[A],u.k&&(c[u.k]=r.value))}else n?(c[r]=z,Lt(e,r)&&(e[r]=z)):t&&(r.value=z,u.k&&(c[u.k]=z))};z?(s.id=-1,fe(s,x)):s()}}}const fe=tf;function kf(u){return Df(u)}function Df(u,o){const x=io();x.__VUE__=!0;const{insert:C,remove:O,patchProp:A,createElement:z,createText:h,createComment:r,setText:l,setElementText:c,parentNode:e,nextSibling:n,setScopeId:t=Se,insertStaticContent:s}=u,f=(F,D,R,Y=null,V=null,G=null,J=!1,$=null,lt=!!D.dynamicChildren)=>{if(F===D)return;F&&!Zi(F,D)&&(Y=Z(F),H(F,V,G,!0),F=null),D.patchFlag===-2&&(lt=!1,D.dynamicChildren=null);const{type:et,ref:Q,shapeFlag:ct}=D;switch(et){case pr:i(F,D,R,Y);break;case pi:p(F,D,R,Y);break;case Zr:F==null&&m(D,R,Y,J);break;case ye:xt(F,D,R,Y,V,G,J,$,lt);break;default:ct&1?T(F,D,R,Y,V,G,J,$,lt):ct&6?St(F,D,R,Y,V,G,J,$,lt):(ct&64||ct&128)&&et.process(F,D,R,Y,V,G,J,$,lt,it)}Q!=null&&V&&ho(Q,F&&F.ref,G,D||F,!D)},i=(F,D,R,Y)=>{if(F==null)C(D.el=h(D.children),R,Y);else{const V=D.el=F.el;D.children!==F.children&&l(V,D.children)}},p=(F,D,R,Y)=>{F==null?C(D.el=r(D.children||""),R,Y):D.el=F.el},m=(F,D,R,Y)=>{[F.el,F.anchor]=s(F.children,D,R,Y,F.el,F.anchor)},y=({el:F,anchor:D},R,Y)=>{let V;for(;F&&F!==D;)V=n(F),C(F,R,Y),F=V;C(D,R,Y)},_=({el:F,anchor:D})=>{let R;for(;F&&F!==D;)R=n(F),O(F),F=R;O(D)},T=(F,D,R,Y,V,G,J,$,lt)=>{J=J||D.type==="svg",F==null?M(D,R,Y,V,G,J,$,lt):st(F,D,V,G,J,$,lt)},M=(F,D,R,Y,V,G,J,$)=>{let lt,et;const{type:Q,props:ct,shapeFlag:gt,transition:Ct,dirs:Ot}=F;if(lt=F.el=z(F.type,G,ct&&ct.is,ct),gt&8?c(lt,F.children):gt&16&&X(F.children,lt,null,Y,V,G&&Q!=="foreignObject",J,$),Ot&&ai(F,null,Y,"created"),B(lt,F,F.scopeId,J,Y),ct){for(const Mt in ct)Mt!=="value"&&!Kn(Mt)&&A(lt,Mt,null,ct[Mt],G,F.children,Y,V,q);"value"in ct&&A(lt,"value",null,ct.value),(et=ct.onVnodeBeforeMount)&&Ee(et,Y,F)}Ot&&ai(F,null,Y,"beforeMount");const Pt=(!V||V&&!V.pendingBranch)&&Ct&&!Ct.persisted;Pt&&Ct.beforeEnter(lt),C(lt,D,R),((et=ct&&ct.onVnodeMounted)||Pt||Ot)&&fe(()=>{et&&Ee(et,Y,F),Pt&&Ct.enter(lt),Ot&&ai(F,null,Y,"mounted")},V)},B=(F,D,R,Y,V)=>{if(R&&t(F,R),Y)for(let G=0;G<Y.length;G++)t(F,Y[G]);if(V){let G=V.subTree;if(D===G){const J=V.vnode;B(F,J,J.scopeId,J.slotScopeIds,V.parent)}}},X=(F,D,R,Y,V,G,J,$,lt=0)=>{for(let et=lt;et<F.length;et++){const Q=F[et]=$?Ke(F[et]):Me(F[et]);f(null,Q,D,R,Y,V,G,J,$)}},st=(F,D,R,Y,V,G,J)=>{const $=D.el=F.el;let{patchFlag:lt,dynamicChildren:et,dirs:Q}=D;lt|=F.patchFlag&16;const ct=F.props||Ut,gt=D.props||Ut;let Ct;R&&li(R,!1),(Ct=gt.onVnodeBeforeUpdate)&&Ee(Ct,R,D,F),Q&&ai(D,F,R,"beforeUpdate"),R&&li(R,!0);const Ot=V&&D.type!=="foreignObject";if(et?ft(F.dynamicChildren,et,$,R,Y,Ot,G):J||bt(F,D,$,null,R,Y,Ot,G,!1),lt>0){if(lt&16)vt($,D,ct,gt,R,Y,V);else if(lt&2&&ct.class!==gt.class&&A($,"class",null,gt.class,V),lt&4&&A($,"style",ct.style,gt.style,V),lt&8){const Pt=D.dynamicProps;for(let Mt=0;Mt<Pt.length;Mt++){const Dt=Pt[Mt],Gt=ct[Dt],re=gt[Dt];(re!==Gt||Dt==="value")&&A($,Dt,Gt,re,V,F.children,R,Y,q)}}lt&1&&F.children!==D.children&&c($,D.children)}else!J&&et==null&&vt($,D,ct,gt,R,Y,V);((Ct=gt.onVnodeUpdated)||Q)&&fe(()=>{Ct&&Ee(Ct,R,D,F),Q&&ai(D,F,R,"updated")},Y)},ft=(F,D,R,Y,V,G,J)=>{for(let $=0;$<D.length;$++){const lt=F[$],et=D[$],Q=lt.el&&(lt.type===ye||!Zi(lt,et)||lt.shapeFlag&70)?e(lt.el):R;f(lt,et,Q,null,Y,V,G,J,!0)}},vt=(F,D,R,Y,V,G,J)=>{if(R!==Y){if(R!==Ut)for(const $ in R)!Kn($)&&!($ in Y)&&A(F,$,R[$],null,J,D.children,V,G,q);for(const $ in Y){if(Kn($))continue;const lt=Y[$],et=R[$];lt!==et&&$!=="value"&&A(F,$,et,lt,J,D.children,V,G,q)}"value"in Y&&A(F,"value",R.value,Y.value)}},xt=(F,D,R,Y,V,G,J,$,lt)=>{const et=D.el=F?F.el:h(""),Q=D.anchor=F?F.anchor:h("");let{patchFlag:ct,dynamicChildren:gt,slotScopeIds:Ct}=D;Ct&&($=$?$.concat(Ct):Ct),F==null?(C(et,R,Y),C(Q,R,Y),X(D.children,R,Q,V,G,J,$,lt)):ct>0&&ct&64&&gt&&F.dynamicChildren?(ft(F.dynamicChildren,gt,R,V,G,J,$),(D.key!=null||V&&D===V.subTree)&&Ka(F,D,!0)):bt(F,D,R,Q,V,G,J,$,lt)},St=(F,D,R,Y,V,G,J,$,lt)=>{D.slotScopeIds=$,F==null?D.shapeFlag&512?V.ctx.activate(D,R,Y,J,lt):_t(D,R,Y,V,G,J,lt):ot(F,D,lt)},_t=(F,D,R,Y,V,G,J)=>{const $=F.component=Hf(F,Y,V);if(Ba(F)&&($.ctx.renderer=it),Uf($),$.asyncDep){if(V&&V.registerDep($,pt),!F.el){const lt=$.subTree=De(pi);p(null,lt,D,R)}return}pt($,F,D,R,V,G,J)},ot=(F,D,R)=>{const Y=D.component=F.component;if(Qu(F,D,R))if(Y.asyncDep&&!Y.asyncResolved){wt(Y,D,R);return}else Y.next=D,Wu(Y.update),Y.update();else D.el=F.el,Y.vnode=D},pt=(F,D,R,Y,V,G,J)=>{const $=()=>{if(F.isMounted){let{next:Q,bu:ct,u:gt,parent:Ct,vnode:Ot}=F,Pt=Q,Mt;li(F,!1),Q?(Q.el=Ot.el,wt(F,Q,J)):Q=Ot,ct&&qr(ct),(Mt=Q.props&&Q.props.onVnodeBeforeUpdate)&&Ee(Mt,Ct,Q,Ot),li(F,!0);const Dt=Jr(F),Gt=F.subTree;F.subTree=Dt,f(Gt,Dt,e(Gt.el),Z(Gt),F,V,G),Q.el=Dt.el,Pt===null&&Zu(F,Dt.el),gt&&fe(gt,V),(Mt=Q.props&&Q.props.onVnodeUpdated)&&fe(()=>Ee(Mt,Ct,Q,Ot),V)}else{let Q;const{el:ct,props:gt}=D,{bm:Ct,m:Ot,parent:Pt}=F,Mt=Jn(D);if(li(F,!1),Ct&&qr(Ct),!Mt&&(Q=gt&&gt.onVnodeBeforeMount)&&Ee(Q,Pt,D),li(F,!0),ct&&dt){const Dt=()=>{F.subTree=Jr(F),dt(ct,F.subTree,F,V,null)};Mt?D.type.__asyncLoader().then(()=>!F.isUnmounted&&Dt()):Dt()}else{const Dt=F.subTree=Jr(F);f(null,Dt,R,Y,F,V,G),D.el=Dt.el}if(Ot&&fe(Ot,V),!Mt&&(Q=gt&&gt.onVnodeMounted)){const Dt=D;fe(()=>Ee(Q,Pt,Dt),V)}(D.shapeFlag&256||Pt&&Jn(Pt.vnode)&&Pt.vnode.shapeFlag&256)&&F.a&&fe(F.a,V),F.isMounted=!0,D=R=Y=null}},lt=F.effect=new xo($,()=>Ao(et),F.scope),et=F.update=()=>lt.run();et.id=F.uid,li(F,!0),et()},wt=(F,D,R)=>{D.component=F;const Y=F.vnode.props;F.vnode=D,F.next=null,Pf(F,D.props,Y,R),Mf(F,D.children,R),Di(),Ys(),Ii()},bt=(F,D,R,Y,V,G,J,$,lt=!1)=>{const et=F&&F.children,Q=F?F.shapeFlag:0,ct=D.children,{patchFlag:gt,shapeFlag:Ct}=D;if(gt>0){if(gt&128){U(et,ct,R,Y,V,G,J,$,lt);return}else if(gt&256){k(et,ct,R,Y,V,G,J,$,lt);return}}Ct&8?(Q&16&&q(et,V,G),ct!==et&&c(R,ct)):Q&16?Ct&16?U(et,ct,R,Y,V,G,J,$,lt):q(et,V,G,!0):(Q&8&&c(R,""),Ct&16&&X(ct,R,Y,V,G,J,$,lt))},k=(F,D,R,Y,V,G,J,$,lt)=>{F=F||Si,D=D||Si;const et=F.length,Q=D.length,ct=Math.min(et,Q);let gt;for(gt=0;gt<ct;gt++){const Ct=D[gt]=lt?Ke(D[gt]):Me(D[gt]);f(F[gt],Ct,R,null,V,G,J,$,lt)}et>Q?q(F,V,G,!0,!1,ct):X(D,R,Y,V,G,J,$,lt,ct)},U=(F,D,R,Y,V,G,J,$,lt)=>{let et=0;const Q=D.length;let ct=F.length-1,gt=Q-1;for(;et<=ct&&et<=gt;){const Ct=F[et],Ot=D[et]=lt?Ke(D[et]):Me(D[et]);if(Zi(Ct,Ot))f(Ct,Ot,R,null,V,G,J,$,lt);else break;et++}for(;et<=ct&&et<=gt;){const Ct=F[ct],Ot=D[gt]=lt?Ke(D[gt]):Me(D[gt]);if(Zi(Ct,Ot))f(Ct,Ot,R,null,V,G,J,$,lt);else break;ct--,gt--}if(et>ct){if(et<=gt){const Ct=gt+1,Ot=Ct<Q?D[Ct].el:Y;for(;et<=gt;)f(null,D[et]=lt?Ke(D[et]):Me(D[et]),R,Ot,V,G,J,$,lt),et++}}else if(et>gt)for(;et<=ct;)H(F[et],V,G,!0),et++;else{const Ct=et,Ot=et,Pt=new Map;for(et=Ot;et<=gt;et++){const $t=D[et]=lt?Ke(D[et]):Me(D[et]);$t.key!=null&&Pt.set($t.key,et)}let Mt,Dt=0;const Gt=gt-Ot+1;let re=!1,Zt=0;const Oe=new Array(Gt);for(et=0;et<Gt;et++)Oe[et]=0;for(et=Ct;et<=ct;et++){const $t=F[et];if(Dt>=Gt){H($t,V,G,!0);continue}let te;if($t.key!=null)te=Pt.get($t.key);else for(Mt=Ot;Mt<=gt;Mt++)if(Oe[Mt-Ot]===0&&Zi($t,D[Mt])){te=Mt;break}te===void 0?H($t,V,G,!0):(Oe[te-Ot]=et+1,te>=Zt?Zt=te:re=!0,f($t,D[te],R,null,V,G,J,$,lt),Dt++)}const We=re?If(Oe):Si;for(Mt=We.length-1,et=Gt-1;et>=0;et--){const $t=Ot+et,te=D[$t],gi=$t+1<Q?D[$t+1].el:Y;Oe[et]===0?f(null,te,R,gi,V,G,J,$,lt):re&&(Mt<0||et!==We[Mt]?N(te,R,gi,2):Mt--)}}},N=(F,D,R,Y,V=null)=>{const{el:G,type:J,transition:$,children:lt,shapeFlag:et}=F;if(et&6){N(F.component.subTree,D,R,Y);return}if(et&128){F.suspense.move(D,R,Y);return}if(et&64){J.move(F,D,R,it);return}if(J===ye){C(G,D,R);for(let ct=0;ct<lt.length;ct++)N(lt[ct],D,R,Y);C(F.anchor,D,R);return}if(J===Zr){y(F,D,R);return}if(Y!==2&&et&1&&$)if(Y===0)$.beforeEnter(G),C(G,D,R),fe(()=>$.enter(G),V);else{const{leave:ct,delayLeave:gt,afterLeave:Ct}=$,Ot=()=>C(G,D,R),Pt=()=>{ct(G,()=>{Ot(),Ct&&Ct()})};gt?gt(G,Ot,Pt):Pt()}else C(G,D,R)},H=(F,D,R,Y=!1,V=!1)=>{const{type:G,props:J,ref:$,children:lt,dynamicChildren:et,shapeFlag:Q,patchFlag:ct,dirs:gt}=F;if($!=null&&ho($,null,R,F,!0),Q&256){D.ctx.deactivate(F);return}const Ct=Q&1&&gt,Ot=!Jn(F);let Pt;if(Ot&&(Pt=J&&J.onVnodeBeforeUnmount)&&Ee(Pt,D,F),Q&6)I(F.component,R,Y);else{if(Q&128){F.suspense.unmount(R,Y);return}Ct&&ai(F,null,D,"beforeUnmount"),Q&64?F.type.remove(F,D,R,V,it,Y):et&&(G!==ye||ct>0&&ct&64)?q(et,D,R,!1,!0):(G===ye&&ct&384||!V&&Q&16)&&q(lt,D,R),Y&&nt(F)}(Ot&&(Pt=J&&J.onVnodeUnmounted)||Ct)&&fe(()=>{Pt&&Ee(Pt,D,F),Ct&&ai(F,null,D,"unmounted")},R)},nt=F=>{const{type:D,el:R,anchor:Y,transition:V}=F;if(D===ye){j(R,Y);return}if(D===Zr){_(F);return}const G=()=>{O(R),V&&!V.persisted&&V.afterLeave&&V.afterLeave()};if(F.shapeFlag&1&&V&&!V.persisted){const{leave:J,delayLeave:$}=V,lt=()=>J(R,G);$?$(F.el,G,lt):lt()}else G()},j=(F,D)=>{let R;for(;F!==D;)R=n(F),O(F),F=R;O(D)},I=(F,D,R)=>{const{bum:Y,scope:V,update:G,subTree:J,um:$}=F;Y&&qr(Y),V.stop(),G&&(G.active=!1,H(J,F,D,R)),$&&fe($,D),fe(()=>{F.isUnmounted=!0},D),D&&D.pendingBranch&&!D.isUnmounted&&F.asyncDep&&!F.asyncResolved&&F.suspenseId===D.pendingId&&(D.deps--,D.deps===0&&D.resolve())},q=(F,D,R,Y=!1,V=!1,G=0)=>{for(let J=G;J<F.length;J++)H(F[J],D,R,Y,V)},Z=F=>F.shapeFlag&6?Z(F.component.subTree):F.shapeFlag&128?F.suspense.next():n(F.anchor||F.el),at=(F,D,R)=>{F==null?D._vnode&&H(D._vnode,null,null,!0):f(D._vnode||null,F,D,null,null,null,R),Ys(),Da(),D._vnode=F},it={p:f,um:H,m:N,r:nt,mt:_t,mc:X,pc:bt,pbc:ft,n:Z,o:u};let ht,dt;return o&&([ht,dt]=o(it)),{render:at,hydrate:ht,createApp:Sf(at,ht)}}function li({effect:u,update:o},x){u.allowRecurse=o.allowRecurse=x}function Ka(u,o,x=!1){const C=u.children,O=o.children;if(It(C)&&It(O))for(let A=0;A<C.length;A++){const z=C[A];let h=O[A];h.shapeFlag&1&&!h.dynamicChildren&&((h.patchFlag<=0||h.patchFlag===32)&&(h=O[A]=Ke(O[A]),h.el=z.el),x||Ka(z,h)),h.type===pr&&(h.el=z.el)}}function If(u){const o=u.slice(),x=[0];let C,O,A,z,h;const r=u.length;for(C=0;C<r;C++){const l=u[C];if(l!==0){if(O=x[x.length-1],u[O]<l){o[C]=O,x.push(C);continue}for(A=0,z=x.length-1;A<z;)h=A+z>>1,u[x[h]]<l?A=h+1:z=h;l<u[x[A]]&&(A>0&&(o[C]=x[A-1]),x[A]=C)}}for(A=x.length,z=x[A-1];A-- >0;)x[A]=z,z=o[z];return x}const jf=u=>u.__isTeleport,ye=Symbol.for("v-fgt"),pr=Symbol.for("v-txt"),pi=Symbol.for("v-cmt"),Zr=Symbol.for("v-stc"),sn=[];let we=null;function me(u=!1){sn.push(we=u?null:[])}function Ff(){sn.pop(),we=sn[sn.length-1]||null}let hn=1;function Qs(u){hn+=u}function qa(u){return u.dynamicChildren=hn>0?we||Si:null,Ff(),hn>0&&we&&we.push(u),u}function Ae(u,o,x,C,O,A){return qa(Vt(u,o,x,C,O,A,!0))}function Ja(u,o,x,C,O){return qa(De(u,o,x,C,O,!0))}function Rf(u){return u?u.__v_isVNode===!0:!1}function Zi(u,o){return u.type===o.type&&u.key===o.key}const gr="__vInternal",Qa=({key:u})=>u??null,Zn=({ref:u,ref_key:o,ref_for:x})=>(typeof u=="number"&&(u=""+u),u!=null?Qt(u)||ae(u)||Ft(u)?{i:Ce,r:u,k:o,f:!!x}:u:null);function Vt(u,o=null,x=null,C=0,O=null,A=u===ye?0:1,z=!1,h=!1){const r={__v_isVNode:!0,__v_skip:!0,type:u,props:o,key:o&&Qa(o),ref:o&&Zn(o),scopeId:hr,slotScopeIds:null,children:x,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:A,patchFlag:C,dynamicProps:O,dynamicChildren:null,appContext:null,ctx:Ce};return h?(Io(r,x),A&128&&u.normalize(r)):x&&(r.shapeFlag|=Qt(x)?8:16),hn>0&&!z&&we&&(r.patchFlag>0||A&6)&&r.patchFlag!==32&&we.push(r),r}const De=Lf;function Lf(u,o=null,x=null,C=0,O=null,A=!1){if((!u||u===gf)&&(u=pi),Rf(u)){const h=Ai(u,o,!0);return x&&Io(h,x),hn>0&&!A&&we&&(h.shapeFlag&6?we[we.indexOf(u)]=h:we.push(h)),h.patchFlag|=-2,h}if(Kf(u)&&(u=u.__vccOpts),o){o=Bf(o);let{class:h,style:r}=o;h&&!Qt(h)&&(o.class=lr(h)),Kt(r)&&(wa(r)&&!It(r)&&(r=Jt({},r)),o.style=ar(r))}const z=Qt(u)?1:$u(u)?128:jf(u)?64:Kt(u)?4:Ft(u)?2:0;return Vt(u,o,x,C,O,z,A,!0)}function Bf(u){return u?wa(u)||gr in u?Jt({},u):u:null}function Ai(u,o,x=!1){const{props:C,ref:O,patchFlag:A,children:z}=u,h=o?Xf(C||{},o):C;return{__v_isVNode:!0,__v_skip:!0,type:u.type,props:h,key:h&&Qa(h),ref:o&&o.ref?x&&O?It(O)?O.concat(Zn(o)):[O,Zn(o)]:Zn(o):O,scopeId:u.scopeId,slotScopeIds:u.slotScopeIds,children:z,target:u.target,targetAnchor:u.targetAnchor,staticCount:u.staticCount,shapeFlag:u.shapeFlag,patchFlag:o&&u.type!==ye?A===-1?16:A|16:A,dynamicProps:u.dynamicProps,dynamicChildren:u.dynamicChildren,appContext:u.appContext,dirs:u.dirs,transition:u.transition,component:u.component,suspense:u.suspense,ssContent:u.ssContent&&Ai(u.ssContent),ssFallback:u.ssFallback&&Ai(u.ssFallback),el:u.el,anchor:u.anchor,ctx:u.ctx,ce:u.ce}}function zf(u=" ",o=0){return De(pr,null,u,o)}function Za(u="",o=!1){return o?(me(),Ja(pi,null,u)):De(pi,null,u)}function Me(u){return u==null||typeof u=="boolean"?De(pi):It(u)?De(ye,null,u.slice()):typeof u=="object"?Ke(u):De(pr,null,String(u))}function Ke(u){return u.el===null&&u.patchFlag!==-1||u.memo?u:Ai(u)}function Io(u,o){let x=0;const{shapeFlag:C}=u;if(o==null)o=null;else if(It(o))x=16;else if(typeof o=="object")if(C&65){const O=o.default;O&&(O._c&&(O._d=!1),Io(u,O()),O._c&&(O._d=!0));return}else{x=32;const O=o._;!O&&!(gr in o)?o._ctx=Ce:O===3&&Ce&&(Ce.slots._===1?o._=1:(o._=2,u.patchFlag|=1024))}else Ft(o)?(o={default:o,_ctx:Ce},x=32):(o=String(o),C&64?(x=16,o=[zf(o)]):x=8);u.children=o,u.shapeFlag|=x}function Xf(...u){const o={};for(let x=0;x<u.length;x++){const C=u[x];for(const O in C)if(O==="class")o.class!==C.class&&(o.class=lr([o.class,C.class]));else if(O==="style")o.style=ar([o.style,C.style]);else if(rr(O)){const A=o[O],z=C[O];z&&A!==z&&!(It(A)&&A.includes(z))&&(o[O]=A?[].concat(A,z):z)}else O!==""&&(o[O]=C[O])}return o}function Ee(u,o,x,C=null){Te(u,o,7,[x,C])}const Yf=Wa();let Wf=0;function Hf(u,o,x){const C=u.type,O=(o?o.appContext:u.appContext)||Yf,A={uid:Wf++,vnode:u,type:C,parent:o,appContext:O,root:null,next:null,subTree:null,effect:null,update:null,scope:new ou(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:o?o.provides:Object.create(O.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ua(C,O),emitsOptions:ja(C,O),emit:null,emitted:null,propsDefaults:Ut,inheritAttrs:C.inheritAttrs,ctx:Ut,data:Ut,props:Ut,attrs:Ut,slots:Ut,refs:Ut,setupState:Ut,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:x,suspenseId:x?x.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return A.ctx={_:A},A.root=o?o.root:A,A.emit=Nu.bind(null,A),u.ce&&u.ce(A),A}let se=null,jo,wi,Zs="__VUE_INSTANCE_SETTERS__";(wi=io()[Zs])||(wi=io()[Zs]=[]),wi.push(u=>se=u),jo=u=>{wi.length>1?wi.forEach(o=>o(u)):wi[0](u)};const Mi=u=>{jo(u),u.scope.on()},di=()=>{se&&se.scope.off(),jo(null)};function $a(u){return u.vnode.shapeFlag&4}let dn=!1;function Uf(u,o=!1){dn=o;const{props:x,children:C}=u.vnode,O=$a(u);Of(u,x,O,o),Af(u,C);const A=O?Nf(u,o):void 0;return dn=!1,A}function Nf(u,o){const x=u.type;u.accessCache=Object.create(null),u.proxy=Sa(new Proxy(u.ctx,mf));const{setup:C}=x;if(C){const O=u.setupContext=C.length>1?Gf(u):null;Mi(u),Di();const A=Je(C,u,0,[u.props,O]);if(Ii(),di(),ca(A)){if(A.then(di,di),o)return A.then(z=>{$s(u,z,o)}).catch(z=>{ur(z,u,0)});u.asyncDep=A}else $s(u,A,o)}else tl(u,o)}function $s(u,o,x){Ft(o)?u.type.__ssrInlineRender?u.ssrRender=o:u.render=o:Kt(o)&&(u.setupState=Ea(o)),tl(u,x)}let ta;function tl(u,o,x){const C=u.type;if(!u.render){if(!o&&ta&&!C.render){const O=C.template||ko(u).template;if(O){const{isCustomElement:A,compilerOptions:z}=u.appContext.config,{delimiters:h,compilerOptions:r}=C,l=Jt(Jt({isCustomElement:A,delimiters:h},z),r);C.render=ta(O,l)}}u.render=C.render||Se}Mi(u),Di(),yf(u),Ii(),di()}function Vf(u){return u.attrsProxy||(u.attrsProxy=new Proxy(u.attrs,{get(o,x){return he(u,"get","$attrs"),o[x]}}))}function Gf(u){const o=x=>{u.exposed=x||{}};return{get attrs(){return Vf(u)},slots:u.slots,emit:u.emit,expose:o}}function vr(u){if(u.exposed)return u.exposeProxy||(u.exposeProxy=new Proxy(Ea(Sa(u.exposed)),{get(o,x){if(x in o)return o[x];if(x in on)return on[x](u)},has(o,x){return x in o||x in on}}))}function Kf(u){return Ft(u)&&"__vccOpts"in u}const Fo=(u,o)=>zu(u,o,dn),qf=Symbol.for("v-scx"),Jf=()=>Qn(qf),Qf="3.3.4",Zf="http://www.w3.org/2000/svg",ui=typeof document<"u"?document:null,ea=ui&&ui.createElement("template"),$f={insert:(u,o,x)=>{o.insertBefore(u,x||null)},remove:u=>{const o=u.parentNode;o&&o.removeChild(u)},createElement:(u,o,x,C)=>{const O=o?ui.createElementNS(Zf,u):ui.createElement(u,x?{is:x}:void 0);return u==="select"&&C&&C.multiple!=null&&O.setAttribute("multiple",C.multiple),O},createText:u=>ui.createTextNode(u),createComment:u=>ui.createComment(u),setText:(u,o)=>{u.nodeValue=o},setElementText:(u,o)=>{u.textContent=o},parentNode:u=>u.parentNode,nextSibling:u=>u.nextSibling,querySelector:u=>ui.querySelector(u),setScopeId(u,o){u.setAttribute(o,"")},insertStaticContent(u,o,x,C,O,A){const z=x?x.previousSibling:o.lastChild;if(O&&(O===A||O.nextSibling))for(;o.insertBefore(O.cloneNode(!0),x),!(O===A||!(O=O.nextSibling)););else{ea.innerHTML=C?`<svg>${u}</svg>`:u;const h=ea.content;if(C){const r=h.firstChild;for(;r.firstChild;)h.appendChild(r.firstChild);h.removeChild(r)}o.insertBefore(h,x)}return[z?z.nextSibling:o.firstChild,x?x.previousSibling:o.lastChild]}};function th(u,o,x){const C=u._vtc;C&&(o=(o?[o,...C]:[...C]).join(" ")),o==null?u.removeAttribute("class"):x?u.setAttribute("class",o):u.className=o}function eh(u,o,x){const C=u.style,O=Qt(x);if(x&&!O){if(o&&!Qt(o))for(const A in o)x[A]==null&&po(C,A,"");for(const A in x)po(C,A,x[A])}else{const A=C.display;O?o!==x&&(C.cssText=x):o&&u.removeAttribute("style"),"_vod"in u&&(C.display=A)}}const ia=/\s*!important$/;function po(u,o,x){if(It(x))x.forEach(C=>po(u,o,C));else if(x==null&&(x=""),o.startsWith("--"))u.setProperty(o,x);else{const C=ih(u,o);ia.test(x)?u.setProperty(ki(C),x.replace(ia,""),"important"):u[C]=x}}const na=["Webkit","Moz","ms"],$r={};function ih(u,o){const x=$r[o];if(x)return x;let C=Pi(o);if(C!=="filter"&&C in u)return $r[o]=C;C=ua(C);for(let O=0;O<na.length;O++){const A=na[O]+C;if(A in u)return $r[o]=A}return o}const ra="http://www.w3.org/1999/xlink";function nh(u,o,x,C,O){if(C&&o.startsWith("xlink:"))x==null?u.removeAttributeNS(ra,o.slice(6,o.length)):u.setAttributeNS(ra,o,x);else{const A=ru(o);x==null||A&&!fa(x)?u.removeAttribute(o):u.setAttribute(o,A?"":x)}}function rh(u,o,x,C,O,A,z){if(o==="innerHTML"||o==="textContent"){C&&z(C,O,A),u[o]=x??"";return}const h=u.tagName;if(o==="value"&&h!=="PROGRESS"&&!h.includes("-")){u._value=x;const l=h==="OPTION"?u.getAttribute("value"):u.value,c=x??"";l!==c&&(u.value=c),x==null&&u.removeAttribute(o);return}let r=!1;if(x===""||x==null){const l=typeof u[o];l==="boolean"?x=fa(x):x==null&&l==="string"?(x="",r=!0):l==="number"&&(x=0,r=!0)}try{u[o]=x}catch{}r&&u.removeAttribute(o)}function oh(u,o,x,C){u.addEventListener(o,x,C)}function sh(u,o,x,C){u.removeEventListener(o,x,C)}function ah(u,o,x,C,O=null){const A=u._vei||(u._vei={}),z=A[o];if(C&&z)z.value=C;else{const[h,r]=lh(o);if(C){const l=A[o]=fh(C,O);oh(u,h,l,r)}else z&&(sh(u,h,z,r),A[o]=void 0)}}const oa=/(?:Once|Passive|Capture)$/;function lh(u){let o;if(oa.test(u)){o={};let C;for(;C=u.match(oa);)u=u.slice(0,u.length-C[0].length),o[C[0].toLowerCase()]=!0}return[u[2]===":"?u.slice(3):ki(u.slice(2)),o]}let to=0;const ch=Promise.resolve(),uh=()=>to||(ch.then(()=>to=0),to=Date.now());function fh(u,o){const x=C=>{if(!C._vts)C._vts=Date.now();else if(C._vts<=x.attached)return;Te(hh(C,x.value),o,5,[C])};return x.value=u,x.attached=uh(),x}function hh(u,o){if(It(o)){const x=u.stopImmediatePropagation;return u.stopImmediatePropagation=()=>{x.call(u),u._stopped=!0},o.map(C=>O=>!O._stopped&&C&&C(O))}else return o}const sa=/^on[a-z]/,dh=(u,o,x,C,O=!1,A,z,h,r)=>{o==="class"?th(u,C,O):o==="style"?eh(u,x,C):rr(o)?vo(o)||ah(u,o,x,C,z):(o[0]==="."?(o=o.slice(1),!0):o[0]==="^"?(o=o.slice(1),!1):ph(u,o,C,O))?rh(u,o,C,A,z,h,r):(o==="true-value"?u._trueValue=C:o==="false-value"&&(u._falseValue=C),nh(u,o,C,O))};function ph(u,o,x,C){return C?!!(o==="innerHTML"||o==="textContent"||o in u&&sa.test(o)&&Ft(x)):o==="spellcheck"||o==="draggable"||o==="translate"||o==="form"||o==="list"&&u.tagName==="INPUT"||o==="type"&&u.tagName==="TEXTAREA"||sa.test(o)&&Qt(x)?!1:o in u}const gh=["ctrl","shift","alt","meta"],vh={stop:u=>u.stopPropagation(),prevent:u=>u.preventDefault(),self:u=>u.target!==u.currentTarget,ctrl:u=>!u.ctrlKey,shift:u=>!u.shiftKey,alt:u=>!u.altKey,meta:u=>!u.metaKey,left:u=>"button"in u&&u.button!==0,middle:u=>"button"in u&&u.button!==1,right:u=>"button"in u&&u.button!==2,exact:(u,o)=>gh.some(x=>u[`${x}Key`]&&!o.includes(x))},nn=(u,o)=>(x,...C)=>{for(let O=0;O<o.length;O++){const A=vh[o[O]];if(A&&A(x,o))return}return u(x,...C)},el={beforeMount(u,{value:o},{transition:x}){u._vod=u.style.display==="none"?"":u.style.display,x&&o?x.beforeEnter(u):$i(u,o)},mounted(u,{value:o},{transition:x}){x&&o&&x.enter(u)},updated(u,{value:o,oldValue:x},{transition:C}){!o!=!x&&(C?o?(C.beforeEnter(u),$i(u,!0),C.enter(u)):C.leave(u,()=>{$i(u,!1)}):$i(u,o))},beforeUnmount(u,{value:o}){$i(u,o)}};function $i(u,o){u.style.display=o?u._vod:"none"}const mh=Jt({patchProp:dh},$f);let aa;function yh(){return aa||(aa=kf(mh))}const bh=(...u)=>{const o=yh().createApp(...u),{mount:x}=o;return o.mount=C=>{const O=_h(C);if(!O)return;const A=o._component;!Ft(A)&&!A.render&&!A.template&&(A.template=O.innerHTML),O.innerHTML="";const z=x(O,!1,O instanceof SVGElement);return O instanceof Element&&(O.removeAttribute("v-cloak"),O.setAttribute("data-v-app","")),z},o};function _h(u){return Qt(u)?document.querySelector(u):u}function xh(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}function Ch(u){if(u.__esModule)return u;var o=u.default;if(typeof o=="function"){var x=function C(){return this instanceof C?Reflect.construct(o,arguments,this.constructor):o.apply(this,arguments)};x.prototype=o.prototype}else x={};return Object.defineProperty(x,"__esModule",{value:!0}),Object.keys(u).forEach(function(C){var O=Object.getOwnPropertyDescriptor(u,C);Object.defineProperty(x,C,O.get?O:{enumerable:!0,get:function(){return u[C]}})}),x}var an={};const wh={},Sh=Object.freeze(Object.defineProperty({__proto__:null,default:wh},Symbol.toStringTag,{value:"Module"})),eo=Ch(Sh);(function(u){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var o=o||{version:"5.3.0"};if(u.fabric=o,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?o.document=document:o.document=document.implementation.createHTMLDocument(""),o.window=window;else{var x=eo,C=new x.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;o.document=C.document,o.jsdomImplForWrapper=eo.implForWrapper,o.nodeCanvas=eo.Canvas,o.window=C,DOMParser=o.window.DOMParser}o.isTouchSupported="ontouchstart"in o.window||"ontouchstart"in o.document||o.window&&o.window.navigator&&o.window.navigator.maxTouchPoints>0,o.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",o.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],o.DPI=96,o.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",o.commaWsp="(?:\\s+,?\\s*|,\\s*)",o.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,o.reNonWord=/[ \n\.,;!\?\-]/,o.fontPaths={},o.iMatrix=[1,0,0,1,0,0],o.svgNS="http://www.w3.org/2000/svg",o.perfLimitSizeTotal=2097152,o.maxCacheSideLimit=4096,o.minCacheSideLimit=256,o.charWidthsCache={},o.textureSize=2048,o.disableStyleCopyPaste=!1,o.enableGLFiltering=!0,o.devicePixelRatio=o.window.devicePixelRatio||o.window.webkitDevicePixelRatio||o.window.mozDevicePixelRatio||1,o.browserShadowBlurConstant=1,o.arcToSegmentsCache={},o.boundsOfCurveCache={},o.cachesBoundsOfCurve=!0,o.forceGLPutImageData=!1,o.initFilterBackend=function(){if(o.enableGLFiltering&&o.isWebglSupported&&o.isWebglSupported(o.textureSize))return console.log("max texture size: "+o.maxTextureSize),new o.WebglFilterBackend({tileSize:o.textureSize});if(o.Canvas2dFilterBackend)return new o.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=o),function(){function h(t,s){if(this.__eventListeners[t]){var f=this.__eventListeners[t];s?f[f.indexOf(s)]=!1:o.util.array.fill(f,!1)}}function r(t,s){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var f in t)this.on(f,t[f]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(s);return this}function l(t,s){var f=(function(){s.apply(this,arguments),this.off(t,f)}).bind(this);this.on(t,f)}function c(t,s){if(arguments.length===1)for(var f in t)l.call(this,f,t[f]);else l.call(this,t,s);return this}function e(t,s){if(!this.__eventListeners)return this;if(arguments.length===0)for(t in this.__eventListeners)h.call(this,t);else if(arguments.length===1&&typeof arguments[0]=="object")for(var f in t)h.call(this,f,t[f]);else h.call(this,t,s);return this}function n(t,s){if(!this.__eventListeners)return this;var f=this.__eventListeners[t];if(!f)return this;for(var i=0,p=f.length;i<p;i++)f[i]&&f[i].call(this,s||{});return this.__eventListeners[t]=f.filter(function(m){return m!==!1}),this}o.Observable={fire:n,on:r,once:c,off:e}}(),o.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var h=0,r=arguments.length;h<r;h++)this._onObjectAdded(arguments[h]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(h,r,l){var c=this._objects;return l?c[r]=h:c.splice(r,0,h),this._onObjectAdded&&this._onObjectAdded(h),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var h=this._objects,r,l=!1,c=0,e=arguments.length;c<e;c++)r=h.indexOf(arguments[c]),r!==-1&&(l=!0,h.splice(r,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[c]));return this.renderOnAddRemove&&l&&this.requestRenderAll(),this},forEachObject:function(h,r){for(var l=this.getObjects(),c=0,e=l.length;c<e;c++)h.call(r,l[c],c,l);return this},getObjects:function(h){return typeof h>"u"?this._objects.concat():this._objects.filter(function(r){return r.type===h})},item:function(h){return this._objects[h]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(h,r){return this._objects.indexOf(h)>-1?!0:r?this._objects.some(function(l){return typeof l.contains=="function"&&l.contains(h,!0)}):!1},complexity:function(){return this._objects.reduce(function(h,r){return h+=r.complexity?r.complexity():0,h},0)}},o.CommonMethods={_setOptions:function(h){for(var r in h)this.set(r,h[r])},_initGradient:function(h,r){h&&h.colorStops&&!(h instanceof o.Gradient)&&this.set(r,new o.Gradient(h))},_initPattern:function(h,r,l){h&&h.source&&!(h instanceof o.Pattern)?this.set(r,new o.Pattern(h,l)):l&&l()},_setObject:function(h){for(var r in h)this._set(r,h[r])},set:function(h,r){return typeof h=="object"?this._setObject(h):this._set(h,r),this},_set:function(h,r){this[h]=r},toggle:function(h){var r=this.get(h);return typeof r=="boolean"&&this.set(h,!r),this},get:function(h){return this[h]}},function(h){var r=Math.sqrt,l=Math.atan2,c=Math.pow,e=Math.PI/180,n=Math.PI/2;o.util={cos:function(t){if(t===0)return 1;t<0&&(t=-t);var s=t/n;switch(s){case 1:case 3:return 0;case 2:return-1}return Math.cos(t)},sin:function(t){if(t===0)return 0;var s=t/n,f=1;switch(t<0&&(f=-1),s){case 1:return f;case 2:return 0;case 3:return-f}return Math.sin(t)},removeFromArray:function(t,s){var f=t.indexOf(s);return f!==-1&&t.splice(f,1),t},getRandomInt:function(t,s){return Math.floor(Math.random()*(s-t+1))+t},degreesToRadians:function(t){return t*e},radiansToDegrees:function(t){return t/e},rotatePoint:function(t,s,f){var i=new o.Point(t.x-s.x,t.y-s.y),p=o.util.rotateVector(i,f);return new o.Point(p.x,p.y).addEquals(s)},rotateVector:function(t,s){var f=o.util.sin(s),i=o.util.cos(s),p=t.x*i-t.y*f,m=t.x*f+t.y*i;return{x:p,y:m}},createVector:function(t,s){return new o.Point(s.x-t.x,s.y-t.y)},calcAngleBetweenVectors:function(t,s){return Math.acos((t.x*s.x+t.y*s.y)/(Math.hypot(t.x,t.y)*Math.hypot(s.x,s.y)))},getHatVector:function(t){return new o.Point(t.x,t.y).multiply(1/Math.hypot(t.x,t.y))},getBisector:function(t,s,f){var i=o.util.createVector(t,s),p=o.util.createVector(t,f),m=o.util.calcAngleBetweenVectors(i,p),y=o.util.calcAngleBetweenVectors(o.util.rotateVector(i,m),p),_=m*(y===0?1:-1)/2;return{vector:o.util.getHatVector(o.util.rotateVector(i,_)),angle:m}},projectStrokeOnPoints:function(t,s,f){var i=[],p=s.strokeWidth/2,m=s.strokeUniform?new o.Point(1/s.scaleX,1/s.scaleY):new o.Point(1,1),y=function(_){var T=p/Math.hypot(_.x,_.y);return new o.Point(_.x*T*m.x,_.y*T*m.y)};return t.length<=1||t.forEach(function(_,T){var M=new o.Point(_.x,_.y),B,X;T===0?(X=t[T+1],B=f?y(o.util.createVector(X,M)).addEquals(M):t[t.length-1]):T===t.length-1?(B=t[T-1],X=f?y(o.util.createVector(B,M)).addEquals(M):t[0]):(B=t[T-1],X=t[T+1]);var st=o.util.getBisector(M,B,X),ft=st.vector,vt=st.angle,xt,St;if(s.strokeLineJoin==="miter"&&(xt=-p/Math.sin(vt/2),St=new o.Point(ft.x*xt*m.x,ft.y*xt*m.y),Math.hypot(St.x,St.y)/p<=s.strokeMiterLimit)){i.push(M.add(St)),i.push(M.subtract(St));return}xt=-p*Math.SQRT2,St=new o.Point(ft.x*xt*m.x,ft.y*xt*m.y),i.push(M.add(St)),i.push(M.subtract(St))}),i},transformPoint:function(t,s,f){return f?new o.Point(s[0]*t.x+s[2]*t.y,s[1]*t.x+s[3]*t.y):new o.Point(s[0]*t.x+s[2]*t.y+s[4],s[1]*t.x+s[3]*t.y+s[5])},makeBoundingBoxFromPoints:function(t,s){if(s)for(var f=0;f<t.length;f++)t[f]=o.util.transformPoint(t[f],s);var i=[t[0].x,t[1].x,t[2].x,t[3].x],p=o.util.array.min(i),m=o.util.array.max(i),y=m-p,_=[t[0].y,t[1].y,t[2].y,t[3].y],T=o.util.array.min(_),M=o.util.array.max(_),B=M-T;return{left:p,top:T,width:y,height:B}},invertTransform:function(t){var s=1/(t[0]*t[3]-t[1]*t[2]),f=[s*t[3],-s*t[1],-s*t[2],s*t[0]],i=o.util.transformPoint({x:t[4],y:t[5]},f,!0);return f[4]=-i.x,f[5]=-i.y,f},toFixed:function(t,s){return parseFloat(Number(t).toFixed(s))},parseUnit:function(t,s){var f=/\D{0,2}$/.exec(t),i=parseFloat(t);switch(s||(s=o.Text.DEFAULT_SVG_FONT_SIZE),f[0]){case"mm":return i*o.DPI/25.4;case"cm":return i*o.DPI/2.54;case"in":return i*o.DPI;case"pt":return i*o.DPI/72;case"pc":return i*o.DPI/72*12;case"em":return i*s;default:return i}},falseFunction:function(){return!1},getKlass:function(t,s){return t=o.util.string.camelize(t.charAt(0).toUpperCase()+t.slice(1)),o.util.resolveNamespace(s)[t]},getSvgAttributes:function(t){var s=["instantiated_by_use","style","id","class"];switch(t){case"linearGradient":s=s.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":s=s.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":s=s.concat(["offset","stop-color","stop-opacity"]);break}return s},resolveNamespace:function(t){if(!t)return o;var s=t.split("."),f=s.length,i,p=h||o.window;for(i=0;i<f;++i)p=p[s[i]];return p},loadImage:function(t,s,f,i){if(!t){s&&s.call(f,t);return}var p=o.util.createImage(),m=function(){s&&s.call(f,p,!1),p=p.onload=p.onerror=null};p.onload=m,p.onerror=function(){o.log("Error loading "+p.src),s&&s.call(f,null,!0),p=p.onload=p.onerror=null},t.indexOf("data")!==0&&i!==void 0&&i!==null&&(p.crossOrigin=i),t.substring(0,14)==="data:image/svg"&&(p.onload=null,o.util.loadImageInDom(p,m)),p.src=t},loadImageInDom:function(t,s){var f=o.document.createElement("div");f.style.width=f.style.height="1px",f.style.left=f.style.top="-100%",f.style.position="absolute",f.appendChild(t),o.document.querySelector("body").appendChild(f),t.onload=function(){s(),f.parentNode.removeChild(f),f=null}},enlivenObjects:function(t,s,f,i){t=t||[];var p=[],m=0,y=t.length;function _(){++m===y&&s&&s(p.filter(function(T){return T}))}if(!y){s&&s(p);return}t.forEach(function(T,M){if(!T||!T.type){_();return}var B=o.util.getKlass(T.type,f);B.fromObject(T,function(X,st){st||(p[M]=X),i&&i(T,X,st),_()})})},enlivenObjectEnlivables:function(t,s,f){var i=o.Object.ENLIVEN_PROPS.filter(function(p){return!!t[p]});o.util.enlivenObjects(i.map(function(p){return t[p]}),function(p){var m={};i.forEach(function(y,_){m[y]=p[_],s&&(s[y]=p[_])}),f&&f(m)})},enlivenPatterns:function(t,s){t=t||[];function f(){++p===m&&s&&s(i)}var i=[],p=0,m=t.length;if(!m){s&&s(i);return}t.forEach(function(y,_){y&&y.source?new o.Pattern(y,function(T){i[_]=T,f()}):(i[_]=y,f())})},groupSVGElements:function(t,s,f){var i;return t&&t.length===1?(typeof f<"u"&&(t[0].sourcePath=f),t[0]):(s&&(s.width&&s.height?s.centerPoint={x:s.width/2,y:s.height/2}:(delete s.width,delete s.height)),i=new o.Group(t,s),typeof f<"u"&&(i.sourcePath=f),i)},populateWithProperties:function(t,s,f){if(f&&Array.isArray(f))for(var i=0,p=f.length;i<p;i++)f[i]in t&&(s[f[i]]=t[f[i]])},createCanvasElement:function(){return o.document.createElement("canvas")},copyCanvasElement:function(t){var s=o.util.createCanvasElement();return s.width=t.width,s.height=t.height,s.getContext("2d").drawImage(t,0,0),s},toDataURL:function(t,s,f){return t.toDataURL("image/"+s,f)},createImage:function(){return o.document.createElement("img")},multiplyTransformMatrices:function(t,s,f){return[t[0]*s[0]+t[2]*s[1],t[1]*s[0]+t[3]*s[1],t[0]*s[2]+t[2]*s[3],t[1]*s[2]+t[3]*s[3],f?0:t[0]*s[4]+t[2]*s[5]+t[4],f?0:t[1]*s[4]+t[3]*s[5]+t[5]]},qrDecompose:function(t){var s=l(t[1],t[0]),f=c(t[0],2)+c(t[1],2),i=r(f),p=(t[0]*t[3]-t[2]*t[1])/i,m=l(t[0]*t[2]+t[1]*t[3],f);return{angle:s/e,scaleX:i,scaleY:p,skewX:m/e,skewY:0,translateX:t[4],translateY:t[5]}},calcRotateMatrix:function(t){if(!t.angle)return o.iMatrix.concat();var s=o.util.degreesToRadians(t.angle),f=o.util.cos(s),i=o.util.sin(s);return[f,i,-i,f,0,0]},calcDimensionsMatrix:function(t){var s=typeof t.scaleX>"u"?1:t.scaleX,f=typeof t.scaleY>"u"?1:t.scaleY,i=[t.flipX?-s:s,0,0,t.flipY?-f:f,0,0],p=o.util.multiplyTransformMatrices,m=o.util.degreesToRadians;return t.skewX&&(i=p(i,[1,0,Math.tan(m(t.skewX)),1],!0)),t.skewY&&(i=p(i,[1,Math.tan(m(t.skewY)),0,1],!0)),i},composeMatrix:function(t){var s=[1,0,0,1,t.translateX||0,t.translateY||0],f=o.util.multiplyTransformMatrices;return t.angle&&(s=f(s,o.util.calcRotateMatrix(t))),(t.scaleX!==1||t.scaleY!==1||t.skewX||t.skewY||t.flipX||t.flipY)&&(s=f(s,o.util.calcDimensionsMatrix(t))),s},resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.rotate(0)},saveObjectTransform:function(t){return{scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,angle:t.angle,left:t.left,flipX:t.flipX,flipY:t.flipY,top:t.top}},isTransparent:function(t,s,f,i){i>0&&(s>i?s-=i:s=0,f>i?f-=i:f=0);var p=!0,m,y,_=t.getImageData(s,f,i*2||1,i*2||1),T=_.data.length;for(m=3;m<T&&(y=_.data[m],p=y<=0,p!==!1);m+=4);return _=null,p},parsePreserveAspectRatioAttribute:function(t){var s="meet",f="Mid",i="Mid",p=t.split(" "),m;return p&&p.length&&(s=p.pop(),s!=="meet"&&s!=="slice"?(m=s,s="meet"):p.length&&(m=p.pop())),f=m!=="none"?m.slice(1,4):"none",i=m!=="none"?m.slice(5,8):"none",{meetOrSlice:s,alignX:f,alignY:i}},clearFabricFontCache:function(t){t=(t||"").toLowerCase(),t?o.charWidthsCache[t]&&delete o.charWidthsCache[t]:o.charWidthsCache={}},limitDimsByArea:function(t,s){var f=Math.sqrt(s*t),i=Math.floor(s/f);return{x:Math.floor(f),y:i}},capValue:function(t,s,f){return Math.max(t,Math.min(s,f))},findScaleToFit:function(t,s){return Math.min(s.width/t.width,s.height/t.height)},findScaleToCover:function(t,s){return Math.max(s.width/t.width,s.height/t.height)},matrixToSVG:function(t){return"matrix("+t.map(function(s){return o.util.toFixed(s,o.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(t,s){var f=o.util.invertTransform(s),i=o.util.multiplyTransformMatrices(f,t.calcOwnMatrix());o.util.applyTransformToObject(t,i)},addTransformToObject:function(t,s){o.util.applyTransformToObject(t,o.util.multiplyTransformMatrices(s,t.calcOwnMatrix()))},applyTransformToObject:function(t,s){var f=o.util.qrDecompose(s),i=new o.Point(f.translateX,f.translateY);t.flipX=!1,t.flipY=!1,t.set("scaleX",f.scaleX),t.set("scaleY",f.scaleY),t.skewX=f.skewX,t.skewY=f.skewY,t.angle=f.angle,t.setPositionByOrigin(i,"center","center")},sizeAfterTransform:function(t,s,f){var i=t/2,p=s/2,m=[{x:-i,y:-p},{x:i,y:-p},{x:-i,y:p},{x:i,y:p}],y=o.util.calcDimensionsMatrix(f),_=o.util.makeBoundingBoxFromPoints(m,y);return{x:_.width,y:_.height}},mergeClipPaths:function(t,s){var f=t,i=s;f.inverted&&!i.inverted&&(f=s,i=t),o.util.applyTransformToObject(i,o.util.multiplyTransformMatrices(o.util.invertTransform(f.calcTransformMatrix()),i.calcTransformMatrix()));var p=f.inverted&&i.inverted;return p&&(f.inverted=i.inverted=!1),new o.Group([f],{clipPath:i,inverted:p})},hasStyleChanged:function(t,s,f){return f=f||!1,t.fill!==s.fill||t.stroke!==s.stroke||t.strokeWidth!==s.strokeWidth||t.fontSize!==s.fontSize||t.fontFamily!==s.fontFamily||t.fontWeight!==s.fontWeight||t.fontStyle!==s.fontStyle||t.textBackgroundColor!==s.textBackgroundColor||t.deltaY!==s.deltaY||f&&(t.overline!==s.overline||t.underline!==s.underline||t.linethrough!==s.linethrough)},stylesToArray:function(f,s){for(var f=o.util.object.clone(f,!0),i=s.split(`
`),p=-1,m={},y=[],_=0;_<i.length;_++){if(!f[_]){p+=i[_].length;continue}for(var T=0;T<i[_].length;T++){p++;var M=f[_][T];if(M&&Object.keys(M).length>0){var B=o.util.hasStyleChanged(m,M,!0);B?y.push({start:p,end:p+1,style:M}):y[y.length-1].end++}m=M||{}}}return y},stylesFromArray:function(t,s){if(!Array.isArray(t))return t;for(var f=s.split(`
`),i=-1,p=0,m={},y=0;y<f.length;y++)for(var _=0;_<f[y].length;_++)i++,t[p]&&t[p].start<=i&&i<t[p].end&&(m[y]=m[y]||{},m[y][_]=Object.assign({},t[p].style),i===t[p].end-1&&p++);return m}}}(u),function(){var h=Array.prototype.join,r={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},l={m:"l",M:"L"};function c(k,U,N,H,nt,j,I,q,Z,at,it){var ht=o.util.cos(k),dt=o.util.sin(k),F=o.util.cos(U),D=o.util.sin(U),R=N*nt*F-H*j*D+I,Y=H*nt*F+N*j*D+q,V=at+Z*(-N*nt*dt-H*j*ht),G=it+Z*(-H*nt*dt+N*j*ht),J=R+Z*(N*nt*D+H*j*F),$=Y+Z*(H*nt*D-N*j*F);return["C",V,G,J,$,R,Y]}function e(k,U,N,H,nt,j,I){var q=Math.PI,Z=I*q/180,at=o.util.sin(Z),it=o.util.cos(Z),ht=0,dt=0;N=Math.abs(N),H=Math.abs(H);var F=-it*k*.5-at*U*.5,D=-it*U*.5+at*k*.5,R=N*N,Y=H*H,V=D*D,G=F*F,J=R*Y-R*V-Y*G,$=0;if(J<0){var lt=Math.sqrt(1-J/(R*Y));N*=lt,H*=lt}else $=(nt===j?-1:1)*Math.sqrt(J/(R*V+Y*G));var et=$*N*D/H,Q=-$*H*F/N,ct=it*et-at*Q+k*.5,gt=at*et+it*Q+U*.5,Ct=n(1,0,(F-et)/N,(D-Q)/H),Ot=n((F-et)/N,(D-Q)/H,(-F-et)/N,(-D-Q)/H);j===0&&Ot>0?Ot-=2*q:j===1&&Ot<0&&(Ot+=2*q);for(var Pt=Math.ceil(Math.abs(Ot/q*2)),Mt=[],Dt=Ot/Pt,Gt=8/3*Math.sin(Dt/4)*Math.sin(Dt/4)/Math.sin(Dt/2),re=Ct+Dt,Zt=0;Zt<Pt;Zt++)Mt[Zt]=c(Ct,re,it,at,N,H,ct,gt,Gt,ht,dt),ht=Mt[Zt][5],dt=Mt[Zt][6],Ct=re,re+=Dt;return Mt}function n(k,U,N,H){var nt=Math.atan2(U,k),j=Math.atan2(H,N);return j>=nt?j-nt:2*Math.PI-(nt-j)}function t(k,U,N,H,nt,j,I,q){var Z;if(o.cachesBoundsOfCurve&&(Z=h.call(arguments),o.boundsOfCurveCache[Z]))return o.boundsOfCurveCache[Z];var at=Math.sqrt,it=Math.min,ht=Math.max,dt=Math.abs,F=[],D=[[],[]],R,Y,V,G,J,$,lt,et;Y=6*k-12*N+6*nt,R=-3*k+9*N-9*nt+3*I,V=3*N-3*k;for(var Q=0;Q<2;++Q){if(Q>0&&(Y=6*U-12*H+6*j,R=-3*U+9*H-9*j+3*q,V=3*H-3*U),dt(R)<1e-12){if(dt(Y)<1e-12)continue;G=-V/Y,0<G&&G<1&&F.push(G);continue}lt=Y*Y-4*V*R,!(lt<0)&&(et=at(lt),J=(-Y+et)/(2*R),0<J&&J<1&&F.push(J),$=(-Y-et)/(2*R),0<$&&$<1&&F.push($))}for(var ct,gt,Ct=F.length,Ot=Ct,Pt;Ct--;)G=F[Ct],Pt=1-G,ct=Pt*Pt*Pt*k+3*Pt*Pt*G*N+3*Pt*G*G*nt+G*G*G*I,D[0][Ct]=ct,gt=Pt*Pt*Pt*U+3*Pt*Pt*G*H+3*Pt*G*G*j+G*G*G*q,D[1][Ct]=gt;D[0][Ot]=k,D[1][Ot]=U,D[0][Ot+1]=I,D[1][Ot+1]=q;var Mt=[{x:it.apply(null,D[0]),y:it.apply(null,D[1])},{x:ht.apply(null,D[0]),y:ht.apply(null,D[1])}];return o.cachesBoundsOfCurve&&(o.boundsOfCurveCache[Z]=Mt),Mt}function s(k,U,N){for(var H=N[1],nt=N[2],j=N[3],I=N[4],q=N[5],Z=N[6],at=N[7],it=e(Z-k,at-U,H,nt,I,q,j),ht=0,dt=it.length;ht<dt;ht++)it[ht][1]+=k,it[ht][2]+=U,it[ht][3]+=k,it[ht][4]+=U,it[ht][5]+=k,it[ht][6]+=U;return it}function f(k){var U=0,N=0,H=k.length,nt=0,j=0,I,q,Z,at=[],it,ht,dt;for(q=0;q<H;++q){switch(Z=!1,I=k[q].slice(0),I[0]){case"l":I[0]="L",I[1]+=U,I[2]+=N;case"L":U=I[1],N=I[2];break;case"h":I[1]+=U;case"H":I[0]="L",I[2]=N,U=I[1];break;case"v":I[1]+=N;case"V":I[0]="L",N=I[1],I[1]=U,I[2]=N;break;case"m":I[0]="M",I[1]+=U,I[2]+=N;case"M":U=I[1],N=I[2],nt=I[1],j=I[2];break;case"c":I[0]="C",I[1]+=U,I[2]+=N,I[3]+=U,I[4]+=N,I[5]+=U,I[6]+=N;case"C":ht=I[3],dt=I[4],U=I[5],N=I[6];break;case"s":I[0]="S",I[1]+=U,I[2]+=N,I[3]+=U,I[4]+=N;case"S":it==="C"?(ht=2*U-ht,dt=2*N-dt):(ht=U,dt=N),U=I[3],N=I[4],I[0]="C",I[5]=I[3],I[6]=I[4],I[3]=I[1],I[4]=I[2],I[1]=ht,I[2]=dt,ht=I[3],dt=I[4];break;case"q":I[0]="Q",I[1]+=U,I[2]+=N,I[3]+=U,I[4]+=N;case"Q":ht=I[1],dt=I[2],U=I[3],N=I[4];break;case"t":I[0]="T",I[1]+=U,I[2]+=N;case"T":it==="Q"?(ht=2*U-ht,dt=2*N-dt):(ht=U,dt=N),I[0]="Q",U=I[1],N=I[2],I[1]=ht,I[2]=dt,I[3]=U,I[4]=N;break;case"a":I[0]="A",I[6]+=U,I[7]+=N;case"A":Z=!0,at=at.concat(s(U,N,I)),U=I[6],N=I[7];break;case"z":case"Z":U=nt,N=j;break}Z||at.push(I),it=I[0]}return at}function i(k,U,N,H){return Math.sqrt((N-k)*(N-k)+(H-U)*(H-U))}function p(k){return k*k*k}function m(k){return 3*k*k*(1-k)}function y(k){return 3*k*(1-k)*(1-k)}function _(k){return(1-k)*(1-k)*(1-k)}function T(k,U,N,H,nt,j,I,q){return function(Z){var at=p(Z),it=m(Z),ht=y(Z),dt=_(Z);return{x:I*at+nt*it+N*ht+k*dt,y:q*at+j*it+H*ht+U*dt}}}function M(k,U,N,H,nt,j,I,q){return function(Z){var at=1-Z,it=3*at*at*(N-k)+6*at*Z*(nt-N)+3*Z*Z*(I-nt),ht=3*at*at*(H-U)+6*at*Z*(j-H)+3*Z*Z*(q-j);return Math.atan2(ht,it)}}function B(k){return k*k}function X(k){return 2*k*(1-k)}function st(k){return(1-k)*(1-k)}function ft(k,U,N,H,nt,j){return function(I){var q=B(I),Z=X(I),at=st(I);return{x:nt*q+N*Z+k*at,y:j*q+H*Z+U*at}}}function vt(k,U,N,H,nt,j){return function(I){var q=1-I,Z=2*q*(N-k)+2*I*(nt-N),at=2*q*(H-U)+2*I*(j-H);return Math.atan2(at,Z)}}function xt(k,U,N){var H={x:U,y:N},nt,j=0,I;for(I=1;I<=100;I+=1)nt=k(I/100),j+=i(H.x,H.y,nt.x,nt.y),H=nt;return j}function St(k,U){for(var N=0,H=0,nt=k.iterator,j={x:k.x,y:k.y},I,q,Z=.01,at=k.angleFinder,it;H<U&&Z>1e-4;)I=nt(N),it=N,q=i(j.x,j.y,I.x,I.y),q+H>U?(N-=Z,Z/=2):(j=I,N+=Z,H+=q);return I.angle=at(it),I}function _t(k){for(var U=0,N=k.length,H,nt=0,j=0,I=0,q=0,Z=[],at,it,ht,dt=0;dt<N;dt++){switch(H=k[dt],it={x:nt,y:j,command:H[0]},H[0]){case"M":it.length=0,I=nt=H[1],q=j=H[2];break;case"L":it.length=i(nt,j,H[1],H[2]),nt=H[1],j=H[2];break;case"C":at=T(nt,j,H[1],H[2],H[3],H[4],H[5],H[6]),ht=M(nt,j,H[1],H[2],H[3],H[4],H[5],H[6]),it.iterator=at,it.angleFinder=ht,it.length=xt(at,nt,j),nt=H[5],j=H[6];break;case"Q":at=ft(nt,j,H[1],H[2],H[3],H[4]),ht=vt(nt,j,H[1],H[2],H[3],H[4]),it.iterator=at,it.angleFinder=ht,it.length=xt(at,nt,j),nt=H[3],j=H[4];break;case"Z":case"z":it.destX=I,it.destY=q,it.length=i(nt,j,I,q),nt=I,j=q;break}U+=it.length,Z.push(it)}return Z.push({length:U,x:nt,y:j}),Z}function ot(k,U,N){N||(N=_t(k));for(var H=0;U-N[H].length>0&&H<N.length-2;)U-=N[H].length,H++;var nt=N[H],j=U/nt.length,I=nt.command,q=k[H],Z;switch(I){case"M":return{x:nt.x,y:nt.y,angle:0};case"Z":case"z":return Z=new o.Point(nt.x,nt.y).lerp(new o.Point(nt.destX,nt.destY),j),Z.angle=Math.atan2(nt.destY-nt.y,nt.destX-nt.x),Z;case"L":return Z=new o.Point(nt.x,nt.y).lerp(new o.Point(q[1],q[2]),j),Z.angle=Math.atan2(q[2]-nt.y,q[1]-nt.x),Z;case"C":return St(nt,U);case"Q":return St(nt,U)}}function pt(k){var U=[],N=[],H,nt,j=o.rePathCommand,I="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",q="("+I+")"+o.commaWsp,Z="([01])"+o.commaWsp+"?",at=q+"?"+q+"?"+q+Z+Z+q+"?("+I+")",it=new RegExp(at,"g"),ht,dt,F;if(!k||!k.match)return U;F=k.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var D=0,R,Y=F.length;D<Y;D++){H=F[D],dt=H.slice(1).trim(),N.length=0;var V=H.charAt(0);if(R=[V],V.toLowerCase()==="a")for(var G;G=it.exec(dt);)for(var J=1;J<G.length;J++)N.push(G[J]);else for(;ht=j.exec(dt);)N.push(ht[0]);for(var J=0,$=N.length;J<$;J++)nt=parseFloat(N[J]),isNaN(nt)||R.push(nt);var lt=r[V.toLowerCase()],et=l[V]||V;if(R.length-1>lt)for(var Q=1,ct=R.length;Q<ct;Q+=lt)U.push([V].concat(R.slice(Q,Q+lt))),V=et;else U.push(R)}return U}function wt(k,U){var N=[],H,nt=new o.Point(k[0].x,k[0].y),j=new o.Point(k[1].x,k[1].y),I=k.length,q=1,Z=0,at=I>2;for(U=U||0,at&&(q=k[2].x<j.x?-1:k[2].x===j.x?0:1,Z=k[2].y<j.y?-1:k[2].y===j.y?0:1),N.push(["M",nt.x-q*U,nt.y-Z*U]),H=1;H<I;H++){if(!nt.eq(j)){var it=nt.midPointFrom(j);N.push(["Q",nt.x,nt.y,it.x,it.y])}nt=k[H],H+1<k.length&&(j=k[H+1])}return at&&(q=nt.x>k[H-2].x?1:nt.x===k[H-2].x?0:-1,Z=nt.y>k[H-2].y?1:nt.y===k[H-2].y?0:-1),N.push(["L",nt.x+q*U,nt.y+Z*U]),N}function bt(k,U,N){return N&&(U=o.util.multiplyTransformMatrices(U,[1,0,0,1,-N.x,-N.y])),k.map(function(H){for(var nt=H.slice(0),j={},I=1;I<H.length-1;I+=2)j.x=H[I],j.y=H[I+1],j=o.util.transformPoint(j,U),nt[I]=j.x,nt[I+1]=j.y;return nt})}o.util.joinPath=function(k){return k.map(function(U){return U.join(" ")}).join(" ")},o.util.parsePath=pt,o.util.makePathSimpler=f,o.util.getSmoothPathFromPoints=wt,o.util.getPathSegmentsInfo=_t,o.util.getBoundsOfCurve=t,o.util.getPointOnPath=ot,o.util.transformPath=bt}(),function(){var h=Array.prototype.slice;function r(t,s){for(var f=h.call(arguments,2),i=[],p=0,m=t.length;p<m;p++)i[p]=f.length?t[p][s].apply(t[p],f):t[p][s].call(t[p]);return i}function l(t,s){return n(t,s,function(f,i){return f>=i})}function c(t,s){return n(t,s,function(f,i){return f<i})}function e(t,s){for(var f=t.length;f--;)t[f]=s;return t}function n(t,s,f){if(!(!t||t.length===0)){var i=t.length-1,p=s?t[i][s]:t[i];if(s)for(;i--;)f(t[i][s],p)&&(p=t[i][s]);else for(;i--;)f(t[i],p)&&(p=t[i]);return p}}o.util.array={fill:e,invoke:r,min:c,max:l}}(),function(){function h(l,c,e){if(e)if(!o.isLikelyNode&&c instanceof Element)l=c;else if(c instanceof Array){l=[];for(var n=0,t=c.length;n<t;n++)l[n]=h({},c[n],e)}else if(c&&typeof c=="object")for(var s in c)s==="canvas"||s==="group"?l[s]=null:c.hasOwnProperty(s)&&(l[s]=h({},c[s],e));else l=c;else for(var s in c)l[s]=c[s];return l}function r(l,c){return h({},l,c)}o.util.object={extend:h,clone:r},o.util.object.extend(o.util,o.Observable)}(),function(){function h(n){return n.replace(/-+(.)?/g,function(t,s){return s?s.toUpperCase():""})}function r(n,t){return n.charAt(0).toUpperCase()+(t?n.slice(1):n.slice(1).toLowerCase())}function l(n){return n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function c(n){var t=0,s,f=[];for(t=0,s;t<n.length;t++)(s=e(n,t))!==!1&&f.push(s);return f}function e(n,t){var s=n.charCodeAt(t);if(isNaN(s))return"";if(s<55296||s>57343)return n.charAt(t);if(55296<=s&&s<=56319){if(n.length<=t+1)throw"High surrogate without following low surrogate";var f=n.charCodeAt(t+1);if(56320>f||f>57343)throw"High surrogate without following low surrogate";return n.charAt(t)+n.charAt(t+1)}if(t===0)throw"Low surrogate without preceding high surrogate";var i=n.charCodeAt(t-1);if(55296>i||i>56319)throw"Low surrogate without preceding high surrogate";return!1}o.util.string={camelize:h,capitalize:r,escapeXml:l,graphemeSplit:c}}(),function(){var h=Array.prototype.slice,r=function(){},l=function(){for(var s in{toString:1})if(s==="toString")return!1;return!0}(),c=function(s,f,i){for(var p in f)p in s.prototype&&typeof s.prototype[p]=="function"&&(f[p]+"").indexOf("callSuper")>-1?s.prototype[p]=function(m){return function(){var y=this.constructor.superclass;this.constructor.superclass=i;var _=f[m].apply(this,arguments);if(this.constructor.superclass=y,m!=="initialize")return _}}(p):s.prototype[p]=f[p],l&&(f.toString!==Object.prototype.toString&&(s.prototype.toString=f.toString),f.valueOf!==Object.prototype.valueOf&&(s.prototype.valueOf=f.valueOf))};function e(){}function n(s){for(var f=null,i=this;i.constructor.superclass;){var p=i.constructor.superclass.prototype[s];if(i[s]!==p){f=p;break}i=i.constructor.superclass.prototype}return f?arguments.length>1?f.apply(this,h.call(arguments,1)):f.call(this):console.log("tried to callSuper "+s+", method not found in prototype chain",this)}function t(){var s=null,f=h.call(arguments,0);typeof f[0]=="function"&&(s=f.shift());function i(){this.initialize.apply(this,arguments)}i.superclass=s,i.subclasses=[],s&&(e.prototype=s.prototype,i.prototype=new e,s.subclasses.push(i));for(var p=0,m=f.length;p<m;p++)c(i,f[p],s);return i.prototype.initialize||(i.prototype.initialize=r),i.prototype.constructor=i,i.prototype.callSuper=n,i}o.util.createClass=t}(),function(){var h=!!o.document.createElement("div").attachEvent,r=["touchstart","touchmove","touchend"];o.util.addListener=function(c,e,n,t){c&&c.addEventListener(e,n,h?!1:t)},o.util.removeListener=function(c,e,n,t){c&&c.removeEventListener(e,n,h?!1:t)};function l(c){var e=c.changedTouches;return e&&e[0]?e[0]:c}o.util.getPointer=function(c){var e=c.target,n=o.util.getScrollLeftTop(e),t=l(c);return{x:t.clientX+n.left,y:t.clientY+n.top}},o.util.isTouchEvent=function(c){return r.indexOf(c.type)>-1||c.pointerType==="touch"}}(),function(){function h(t,s){var f=t.style;if(!f)return t;if(typeof s=="string")return t.style.cssText+=";"+s,s.indexOf("opacity")>-1?n(t,s.match(/opacity:\s*(\d?\.?\d*)/)[1]):t;for(var i in s)if(i==="opacity")n(t,s[i]);else{var p=i==="float"||i==="cssFloat"?typeof f.styleFloat>"u"?"cssFloat":"styleFloat":i;f.setProperty(p,s[i])}return t}var r=o.document.createElement("div"),l=typeof r.style.opacity=="string",c=typeof r.style.filter=="string",e=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,n=function(t){return t};l?n=function(t,s){return t.style.opacity=s,t}:c&&(n=function(t,s){var f=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(f.zoom=1),e.test(f.filter)?(s=s>=.9999?"":"alpha(opacity="+s*100+")",f.filter=f.filter.replace(e,s)):f.filter+=" alpha(opacity="+s*100+")",t}),o.util.setStyle=h}(),function(){var h=Array.prototype.slice;function r(_){return typeof _=="string"?o.document.getElementById(_):_}var l,c=function(_){return h.call(_,0)};try{l=c(o.document.childNodes)instanceof Array}catch{}l||(c=function(_){for(var T=new Array(_.length),M=_.length;M--;)T[M]=_[M];return T});function e(_,T){var M=o.document.createElement(_);for(var B in T)B==="class"?M.className=T[B]:B==="for"?M.htmlFor=T[B]:M.setAttribute(B,T[B]);return M}function n(_,T){_&&(" "+_.className+" ").indexOf(" "+T+" ")===-1&&(_.className+=(_.className?" ":"")+T)}function t(_,T,M){return typeof T=="string"&&(T=e(T,M)),_.parentNode&&_.parentNode.replaceChild(T,_),T.appendChild(_),T}function s(_){for(var T=0,M=0,B=o.document.documentElement,X=o.document.body||{scrollLeft:0,scrollTop:0};_&&(_.parentNode||_.host)&&(_=_.parentNode||_.host,_===o.document?(T=X.scrollLeft||B.scrollLeft||0,M=X.scrollTop||B.scrollTop||0):(T+=_.scrollLeft||0,M+=_.scrollTop||0),!(_.nodeType===1&&_.style.position==="fixed")););return{left:T,top:M}}function f(_){var T,M=_&&_.ownerDocument,B={left:0,top:0},X={left:0,top:0},st,ft={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!M)return X;for(var vt in ft)X[ft[vt]]+=parseInt(i(_,vt),10)||0;return T=M.documentElement,typeof _.getBoundingClientRect<"u"&&(B=_.getBoundingClientRect()),st=s(_),{left:B.left+st.left-(T.clientLeft||0)+X.left,top:B.top+st.top-(T.clientTop||0)+X.top}}var i;o.document.defaultView&&o.document.defaultView.getComputedStyle?i=function(_,T){var M=o.document.defaultView.getComputedStyle(_,null);return M?M[T]:void 0}:i=function(_,T){var M=_.style[T];return!M&&_.currentStyle&&(M=_.currentStyle[T]),M},function(){var _=o.document.documentElement.style,T="userSelect"in _?"userSelect":"MozUserSelect"in _?"MozUserSelect":"WebkitUserSelect"in _?"WebkitUserSelect":"KhtmlUserSelect"in _?"KhtmlUserSelect":"";function M(X){return typeof X.onselectstart<"u"&&(X.onselectstart=o.util.falseFunction),T?X.style[T]="none":typeof X.unselectable=="string"&&(X.unselectable="on"),X}function B(X){return typeof X.onselectstart<"u"&&(X.onselectstart=null),T?X.style[T]="":typeof X.unselectable=="string"&&(X.unselectable=""),X}o.util.makeElementUnselectable=M,o.util.makeElementSelectable=B}();function p(_){var T=o.jsdomImplForWrapper(_);return T._canvas||T._image}function m(_){if(o.isLikelyNode){var T=o.jsdomImplForWrapper(_);T&&(T._image=null,T._canvas=null,T._currentSrc=null,T._attributes=null,T._classList=null)}}function y(_,T){_.imageSmoothingEnabled=_.imageSmoothingEnabled||_.webkitImageSmoothingEnabled||_.mozImageSmoothingEnabled||_.msImageSmoothingEnabled||_.oImageSmoothingEnabled,_.imageSmoothingEnabled=T}o.util.setImageSmoothing=y,o.util.getById=r,o.util.toArray=c,o.util.addClass=n,o.util.makeElement=e,o.util.wrapElement=t,o.util.getScrollLeftTop=s,o.util.getElementOffset=f,o.util.getNodeCanvas=p,o.util.cleanUpJsdomNode=m}(),function(){function h(c,e){return c+(/\?/.test(c)?"&":"?")+e}function r(){}function l(c,e){e||(e={});var n=e.method?e.method.toUpperCase():"GET",t=e.onComplete||function(){},s=new o.window.XMLHttpRequest,f=e.body||e.parameters;return s.onreadystatechange=function(){s.readyState===4&&(t(s),s.onreadystatechange=r)},n==="GET"&&(f=null,typeof e.parameters=="string"&&(c=h(c,e.parameters))),s.open(n,c,!0),(n==="POST"||n==="PUT")&&s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(f),s}o.util.request=l}(),o.log=console.log,o.warn=console.warn,function(){var h=o.util.object.extend,r=o.util.object.clone,l=[];o.util.object.extend(l,{cancelAll:function(){var p=this.splice(0);return p.forEach(function(m){m.cancel()}),p},cancelByCanvas:function(p){if(!p)return[];var m=this.filter(function(y){return typeof y.target=="object"&&y.target.canvas===p});return m.forEach(function(y){y.cancel()}),m},cancelByTarget:function(p){var m=this.findAnimationsByTarget(p);return m.forEach(function(y){y.cancel()}),m},findAnimationIndex:function(p){return this.indexOf(this.findAnimation(p))},findAnimation:function(p){return this.find(function(m){return m.cancel===p})},findAnimationsByTarget:function(p){return p?this.filter(function(m){return m.target===p}):[]}});function c(){return!1}function e(p,m,y,_){return-y*Math.cos(p/_*(Math.PI/2))+y+m}function n(p){p||(p={});var m=!1,y,_=function(){var T=o.runningAnimations.indexOf(y);return T>-1&&o.runningAnimations.splice(T,1)[0]};return y=h(r(p),{cancel:function(){return m=!0,_()},currentValue:"startValue"in p?p.startValue:0,completionRate:0,durationRate:0}),o.runningAnimations.push(y),f(function(T){var M=T||+new Date,B=p.duration||500,X=M+B,st,ft=p.onChange||c,vt=p.abort||c,xt=p.onComplete||c,St=p.easing||e,_t="startValue"in p?p.startValue.length>0:!1,ot="startValue"in p?p.startValue:0,pt="endValue"in p?p.endValue:100,wt=p.byValue||(_t?ot.map(function(bt,k){return pt[k]-ot[k]}):pt-ot);p.onStart&&p.onStart(),function bt(k){st=k||+new Date;var U=st>X?B:st-M,N=U/B,H=_t?ot.map(function(j,I){return St(U,ot[I],wt[I],B)}):St(U,ot,wt,B),nt=Math.abs(_t?(H[0]-ot[0])/wt[0]:(H-ot)/wt);if(y.currentValue=_t?H.slice():H,y.completionRate=nt,y.durationRate=N,!m){if(vt(H,nt,N)){_();return}if(st>X){y.currentValue=_t?pt.slice():pt,y.completionRate=1,y.durationRate=1,ft(_t?pt.slice():pt,1,1),xt(pt,1,1),_();return}else ft(H,nt,N),f(bt)}}(M)}),y.cancel}var t=o.window.requestAnimationFrame||o.window.webkitRequestAnimationFrame||o.window.mozRequestAnimationFrame||o.window.oRequestAnimationFrame||o.window.msRequestAnimationFrame||function(p){return o.window.setTimeout(p,1e3/60)},s=o.window.cancelAnimationFrame||o.window.clearTimeout;function f(){return t.apply(o.window,arguments)}function i(){return s.apply(o.window,arguments)}o.util.animate=n,o.util.requestAnimFrame=f,o.util.cancelAnimFrame=i,o.runningAnimations=l}(),function(){function h(l,c,e){var n="rgba("+parseInt(l[0]+e*(c[0]-l[0]),10)+","+parseInt(l[1]+e*(c[1]-l[1]),10)+","+parseInt(l[2]+e*(c[2]-l[2]),10);return n+=","+(l&&c?parseFloat(l[3]+e*(c[3]-l[3])):1),n+=")",n}function r(l,c,e,n){var t=new o.Color(l).getSource(),s=new o.Color(c).getSource(),f=n.onComplete,i=n.onChange;return n=n||{},o.util.animate(o.util.object.extend(n,{duration:e||500,startValue:t,endValue:s,byValue:s,easing:function(p,m,y,_){var T=n.colorEasing?n.colorEasing(p,_):1-Math.cos(p/_*(Math.PI/2));return h(m,y,T)},onComplete:function(p,m,y){if(f)return f(h(s,s,0),m,y)},onChange:function(p,m,y){if(i){if(Array.isArray(p))return i(h(p,p,0),m,y);i(p,m,y)}}}))}o.util.animateColor=r}(),function(){function h(k,U,N,H){return k<Math.abs(U)?(k=U,H=N/4):U===0&&k===0?H=N/(2*Math.PI)*Math.asin(1):H=N/(2*Math.PI)*Math.asin(U/k),{a:k,c:U,p:N,s:H}}function r(k,U,N){return k.a*Math.pow(2,10*(U-=1))*Math.sin((U*N-k.s)*(2*Math.PI)/k.p)}function l(k,U,N,H){return N*((k=k/H-1)*k*k+1)+U}function c(k,U,N,H){return k/=H/2,k<1?N/2*k*k*k+U:N/2*((k-=2)*k*k+2)+U}function e(k,U,N,H){return N*(k/=H)*k*k*k+U}function n(k,U,N,H){return-N*((k=k/H-1)*k*k*k-1)+U}function t(k,U,N,H){return k/=H/2,k<1?N/2*k*k*k*k+U:-N/2*((k-=2)*k*k*k-2)+U}function s(k,U,N,H){return N*(k/=H)*k*k*k*k+U}function f(k,U,N,H){return N*((k=k/H-1)*k*k*k*k+1)+U}function i(k,U,N,H){return k/=H/2,k<1?N/2*k*k*k*k*k+U:N/2*((k-=2)*k*k*k*k+2)+U}function p(k,U,N,H){return-N*Math.cos(k/H*(Math.PI/2))+N+U}function m(k,U,N,H){return N*Math.sin(k/H*(Math.PI/2))+U}function y(k,U,N,H){return-N/2*(Math.cos(Math.PI*k/H)-1)+U}function _(k,U,N,H){return k===0?U:N*Math.pow(2,10*(k/H-1))+U}function T(k,U,N,H){return k===H?U+N:N*(-Math.pow(2,-10*k/H)+1)+U}function M(k,U,N,H){return k===0?U:k===H?U+N:(k/=H/2,k<1?N/2*Math.pow(2,10*(k-1))+U:N/2*(-Math.pow(2,-10*--k)+2)+U)}function B(k,U,N,H){return-N*(Math.sqrt(1-(k/=H)*k)-1)+U}function X(k,U,N,H){return N*Math.sqrt(1-(k=k/H-1)*k)+U}function st(k,U,N,H){return k/=H/2,k<1?-N/2*(Math.sqrt(1-k*k)-1)+U:N/2*(Math.sqrt(1-(k-=2)*k)+1)+U}function ft(k,U,N,H){var nt=1.70158,j=0,I=N;if(k===0)return U;if(k/=H,k===1)return U+N;j||(j=H*.3);var q=h(I,N,j,nt);return-r(q,k,H)+U}function vt(k,U,N,H){var nt=1.70158,j=0,I=N;if(k===0)return U;if(k/=H,k===1)return U+N;j||(j=H*.3);var q=h(I,N,j,nt);return q.a*Math.pow(2,-10*k)*Math.sin((k*H-q.s)*(2*Math.PI)/q.p)+q.c+U}function xt(k,U,N,H){var nt=1.70158,j=0,I=N;if(k===0)return U;if(k/=H/2,k===2)return U+N;j||(j=H*(.3*1.5));var q=h(I,N,j,nt);return k<1?-.5*r(q,k,H)+U:q.a*Math.pow(2,-10*(k-=1))*Math.sin((k*H-q.s)*(2*Math.PI)/q.p)*.5+q.c+U}function St(k,U,N,H,nt){return nt===void 0&&(nt=1.70158),N*(k/=H)*k*((nt+1)*k-nt)+U}function _t(k,U,N,H,nt){return nt===void 0&&(nt=1.70158),N*((k=k/H-1)*k*((nt+1)*k+nt)+1)+U}function ot(k,U,N,H,nt){return nt===void 0&&(nt=1.70158),k/=H/2,k<1?N/2*(k*k*(((nt*=1.525)+1)*k-nt))+U:N/2*((k-=2)*k*(((nt*=1.525)+1)*k+nt)+2)+U}function pt(k,U,N,H){return N-wt(H-k,0,N,H)+U}function wt(k,U,N,H){return(k/=H)<1/2.75?N*(7.5625*k*k)+U:k<2/2.75?N*(7.5625*(k-=1.5/2.75)*k+.75)+U:k<2.5/2.75?N*(7.5625*(k-=2.25/2.75)*k+.9375)+U:N*(7.5625*(k-=2.625/2.75)*k+.984375)+U}function bt(k,U,N,H){return k<H/2?pt(k*2,0,N,H)*.5+U:wt(k*2-H,0,N,H)*.5+N*.5+U}o.util.ease={easeInQuad:function(k,U,N,H){return N*(k/=H)*k+U},easeOutQuad:function(k,U,N,H){return-N*(k/=H)*(k-2)+U},easeInOutQuad:function(k,U,N,H){return k/=H/2,k<1?N/2*k*k+U:-N/2*(--k*(k-2)-1)+U},easeInCubic:function(k,U,N,H){return N*(k/=H)*k*k+U},easeOutCubic:l,easeInOutCubic:c,easeInQuart:e,easeOutQuart:n,easeInOutQuart:t,easeInQuint:s,easeOutQuint:f,easeInOutQuint:i,easeInSine:p,easeOutSine:m,easeInOutSine:y,easeInExpo:_,easeOutExpo:T,easeInOutExpo:M,easeInCirc:B,easeOutCirc:X,easeInOutCirc:st,easeInElastic:ft,easeOutElastic:vt,easeInOutElastic:xt,easeInBack:St,easeOutBack:_t,easeInOutBack:ot,easeInBounce:pt,easeOutBounce:wt,easeInOutBounce:bt}}(),function(h){var r=h.fabric||(h.fabric={}),l=r.util.object.extend,c=r.util.object.clone,e=r.util.toFixed,n=r.util.parseUnit,t=r.util.multiplyTransformMatrices,s=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],f=["symbol","image","marker","pattern","view","svg"],i=["pattern","defs","symbol","metadata","clipPath","mask","desc"],p=["symbol","g","a","svg","clipPath","defs"],m={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},y={stroke:"strokeOpacity",fill:"fillOpacity"},_="font-size",T="clip-path";r.svgValidTagNamesRegEx=X(s),r.svgViewBoxElementsRegEx=X(f),r.svgInvalidAncestorsRegEx=X(i),r.svgValidParentsRegEx=X(p),r.cssRules={},r.gradientDefs={},r.clipPaths={};function M(j){return j in m?m[j]:j}function B(j,I,q,Z){var at=Array.isArray(I),it;if((j==="fill"||j==="stroke")&&I==="none")I="";else{if(j==="strokeUniform")return I==="non-scaling-stroke";if(j==="strokeDashArray")I==="none"?I=null:I=I.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(j==="transformMatrix")q&&q.transformMatrix?I=t(q.transformMatrix,r.parseTransformAttribute(I)):I=r.parseTransformAttribute(I);else if(j==="visible")I=I!=="none"&&I!=="hidden",q&&q.visible===!1&&(I=!1);else if(j==="opacity")I=parseFloat(I),q&&typeof q.opacity<"u"&&(I*=q.opacity);else if(j==="textAnchor")I=I==="start"?"left":I==="end"?"right":"center";else if(j==="charSpacing")it=n(I,Z)/Z*1e3;else if(j==="paintFirst"){var ht=I.indexOf("fill"),dt=I.indexOf("stroke"),I="fill";(ht>-1&&dt>-1&&dt<ht||ht===-1&&dt>-1)&&(I="stroke")}else{if(j==="href"||j==="xlink:href"||j==="font")return I;if(j==="imageSmoothing")return I==="optimizeQuality";it=at?I.map(n):n(I,Z)}}return!at&&isNaN(it)?I:it}function X(j){return new RegExp("^("+j.join("|")+")\\b","i")}function st(j){for(var I in y)if(!(typeof j[y[I]]>"u"||j[I]==="")){if(typeof j[I]>"u"){if(!r.Object.prototype[I])continue;j[I]=r.Object.prototype[I]}if(j[I].indexOf("url(")!==0){var q=new r.Color(j[I]);j[I]=q.setAlpha(e(q.getAlpha()*j[y[I]],2)).toRgba()}}return j}function ft(j,I){var q,Z=[],at,it,ht;for(it=0,ht=I.length;it<ht;it++)q=I[it],at=j.getElementsByTagName(q),Z=Z.concat(Array.prototype.slice.call(at));return Z}r.parseTransformAttribute=function(){function j(Q,ct){var gt=r.util.cos(ct[0]),Ct=r.util.sin(ct[0]),Ot=0,Pt=0;ct.length===3&&(Ot=ct[1],Pt=ct[2]),Q[0]=gt,Q[1]=Ct,Q[2]=-Ct,Q[3]=gt,Q[4]=Ot-(gt*Ot-Ct*Pt),Q[5]=Pt-(Ct*Ot+gt*Pt)}function I(Q,ct){var gt=ct[0],Ct=ct.length===2?ct[1]:ct[0];Q[0]=gt,Q[3]=Ct}function q(Q,ct,gt){Q[gt]=Math.tan(r.util.degreesToRadians(ct[0]))}function Z(Q,ct){Q[4]=ct[0],ct.length===2&&(Q[5]=ct[1])}var at=r.iMatrix,it=r.reNum,ht=r.commaWsp,dt="(?:(skewX)\\s*\\(\\s*("+it+")\\s*\\))",F="(?:(skewY)\\s*\\(\\s*("+it+")\\s*\\))",D="(?:(rotate)\\s*\\(\\s*("+it+")(?:"+ht+"("+it+")"+ht+"("+it+"))?\\s*\\))",R="(?:(scale)\\s*\\(\\s*("+it+")(?:"+ht+"("+it+"))?\\s*\\))",Y="(?:(translate)\\s*\\(\\s*("+it+")(?:"+ht+"("+it+"))?\\s*\\))",V="(?:(matrix)\\s*\\(\\s*("+it+")"+ht+"("+it+")"+ht+"("+it+")"+ht+"("+it+")"+ht+"("+it+")"+ht+"("+it+")\\s*\\))",G="(?:"+V+"|"+Y+"|"+R+"|"+D+"|"+dt+"|"+F+")",J="(?:"+G+"(?:"+ht+"*"+G+")*)",$="^\\s*(?:"+J+"?)\\s*$",lt=new RegExp($),et=new RegExp(G,"g");return function(Q){var ct=at.concat(),gt=[];if(!Q||Q&&!lt.test(Q))return ct;Q.replace(et,function(Ot){var Pt=new RegExp(G).exec(Ot).filter(function(Gt){return!!Gt}),Mt=Pt[1],Dt=Pt.slice(2).map(parseFloat);switch(Mt){case"translate":Z(ct,Dt);break;case"rotate":Dt[0]=r.util.degreesToRadians(Dt[0]),j(ct,Dt);break;case"scale":I(ct,Dt);break;case"skewX":q(ct,Dt,2);break;case"skewY":q(ct,Dt,1);break;case"matrix":ct=Dt;break}gt.push(ct.concat()),ct=at.concat()});for(var Ct=gt[0];gt.length>1;)gt.shift(),Ct=r.util.multiplyTransformMatrices(Ct,gt[0]);return Ct}}();function vt(j,I){var q,Z;j.replace(/;\s*$/,"").split(";").forEach(function(at){var it=at.split(":");q=it[0].trim().toLowerCase(),Z=it[1].trim(),I[q]=Z})}function xt(j,I){var q,Z;for(var at in j)typeof j[at]>"u"||(q=at.toLowerCase(),Z=j[at],I[q]=Z)}function St(j,I){var q={};for(var Z in r.cssRules[I])if(_t(j,Z.split(" ")))for(var at in r.cssRules[I][Z])q[at]=r.cssRules[I][Z][at];return q}function _t(j,I){var q,Z=!0;return q=pt(j,I.pop()),q&&I.length&&(Z=ot(j,I)),q&&Z&&I.length===0}function ot(j,I){for(var q,Z=!0;j.parentNode&&j.parentNode.nodeType===1&&I.length;)Z&&(q=I.pop()),j=j.parentNode,Z=pt(j,q);return I.length===0}function pt(j,I){var q=j.nodeName,Z=j.getAttribute("class"),at=j.getAttribute("id"),it,ht;if(it=new RegExp("^"+q,"i"),I=I.replace(it,""),at&&I.length&&(it=new RegExp("#"+at+"(?![a-zA-Z\\-]+)","i"),I=I.replace(it,"")),Z&&I.length)for(Z=Z.split(" "),ht=Z.length;ht--;)it=new RegExp("\\."+Z[ht]+"(?![a-zA-Z\\-]+)","i"),I=I.replace(it,"");return I.length===0}function wt(j,I){var q;if(j.getElementById&&(q=j.getElementById(I)),q)return q;var Z,at,it,ht=j.getElementsByTagName("*");for(at=0,it=ht.length;at<it;at++)if(Z=ht[at],I===Z.getAttribute("id"))return Z}function bt(j){for(var I=ft(j,["use","svg:use"]),q=0;I.length&&q<I.length;){var Z=I[q],at=Z.getAttribute("xlink:href")||Z.getAttribute("href");if(at===null)return;var it=at.slice(1),ht=Z.getAttribute("x")||0,dt=Z.getAttribute("y")||0,F=wt(j,it).cloneNode(!0),D=(F.getAttribute("transform")||"")+" translate("+ht+", "+dt+")",R,Y=I.length,V,G,J,$,lt=r.svgNS;if(U(F),/^svg$/i.test(F.nodeName)){var et=F.ownerDocument.createElementNS(lt,"g");for(G=0,J=F.attributes,$=J.length;G<$;G++)V=J.item(G),et.setAttributeNS(lt,V.nodeName,V.nodeValue);for(;F.firstChild;)et.appendChild(F.firstChild);F=et}for(G=0,J=Z.attributes,$=J.length;G<$;G++)V=J.item(G),!(V.nodeName==="x"||V.nodeName==="y"||V.nodeName==="xlink:href"||V.nodeName==="href")&&(V.nodeName==="transform"?D=V.nodeValue+" "+D:F.setAttribute(V.nodeName,V.nodeValue));F.setAttribute("transform",D),F.setAttribute("instantiated_by_use","1"),F.removeAttribute("id"),R=Z.parentNode,R.replaceChild(F,Z),I.length===Y&&q++}}var k=new RegExp("^\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*$");function U(j){if(!r.svgViewBoxElementsRegEx.test(j.nodeName))return{};var I=j.getAttribute("viewBox"),q=1,Z=1,at=0,it=0,ht,dt,F,D,R=j.getAttribute("width"),Y=j.getAttribute("height"),V=j.getAttribute("x")||0,G=j.getAttribute("y")||0,J=j.getAttribute("preserveAspectRatio")||"",$=!I||!(I=I.match(k)),lt=!R||!Y||R==="100%"||Y==="100%",et=$&&lt,Q={},ct="",gt=0,Ct=0;if(Q.width=0,Q.height=0,Q.toBeParsed=et,$&&(V||G)&&j.parentNode&&j.parentNode.nodeName!=="#document"&&(ct=" translate("+n(V)+" "+n(G)+") ",F=(j.getAttribute("transform")||"")+ct,j.setAttribute("transform",F),j.removeAttribute("x"),j.removeAttribute("y")),et)return Q;if($)return Q.width=n(R),Q.height=n(Y),Q;if(at=-parseFloat(I[1]),it=-parseFloat(I[2]),ht=parseFloat(I[3]),dt=parseFloat(I[4]),Q.minX=at,Q.minY=it,Q.viewBoxWidth=ht,Q.viewBoxHeight=dt,lt?(Q.width=ht,Q.height=dt):(Q.width=n(R),Q.height=n(Y),q=Q.width/ht,Z=Q.height/dt),J=r.util.parsePreserveAspectRatioAttribute(J),J.alignX!=="none"&&(J.meetOrSlice==="meet"&&(Z=q=q>Z?Z:q),J.meetOrSlice==="slice"&&(Z=q=q>Z?q:Z),gt=Q.width-ht*q,Ct=Q.height-dt*q,J.alignX==="Mid"&&(gt/=2),J.alignY==="Mid"&&(Ct/=2),J.alignX==="Min"&&(gt=0),J.alignY==="Min"&&(Ct=0)),q===1&&Z===1&&at===0&&it===0&&V===0&&G===0)return Q;if((V||G)&&j.parentNode.nodeName!=="#document"&&(ct=" translate("+n(V)+" "+n(G)+") "),F=ct+" matrix("+q+" 0 0 "+Z+" "+(at*q+gt)+" "+(it*Z+Ct)+") ",j.nodeName==="svg"){for(D=j.ownerDocument.createElementNS(r.svgNS,"g");j.firstChild;)D.appendChild(j.firstChild);j.appendChild(D)}else D=j,D.removeAttribute("x"),D.removeAttribute("y"),F=D.getAttribute("transform")+F;return D.setAttribute("transform",F),Q}function N(j,I){for(;j&&(j=j.parentNode);)if(j.nodeName&&I.test(j.nodeName.replace("svg:",""))&&!j.getAttribute("instantiated_by_use"))return!0;return!1}r.parseSVGDocument=function(j,I,q,Z){if(j){bt(j);var at=r.Object.__uid++,it,ht,dt=U(j),F=r.util.toArray(j.getElementsByTagName("*"));if(dt.crossOrigin=Z&&Z.crossOrigin,dt.svgUid=at,F.length===0&&r.isLikelyNode){F=j.selectNodes('//*[name(.)!="svg"]');var D=[];for(it=0,ht=F.length;it<ht;it++)D[it]=F[it];F=D}var R=F.filter(function(V){return U(V),r.svgValidTagNamesRegEx.test(V.nodeName.replace("svg:",""))&&!N(V,r.svgInvalidAncestorsRegEx)});if(!R||R&&!R.length){I&&I([],{});return}var Y={};F.filter(function(V){return V.nodeName.replace("svg:","")==="clipPath"}).forEach(function(V){var G=V.getAttribute("id");Y[G]=r.util.toArray(V.getElementsByTagName("*")).filter(function(J){return r.svgValidTagNamesRegEx.test(J.nodeName.replace("svg:",""))})}),r.gradientDefs[at]=r.getGradientDefs(j),r.cssRules[at]=r.getCSSRules(j),r.clipPaths[at]=Y,r.parseElements(R,function(V,G){I&&(I(V,dt,G,F),delete r.gradientDefs[at],delete r.cssRules[at],delete r.clipPaths[at])},c(dt),q,Z)}};function H(j,I){var q=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],Z="xlink:href",at=I.getAttribute(Z).slice(1),it=wt(j,at);if(it&&it.getAttribute(Z)&&H(j,it),q.forEach(function(dt){it&&!I.hasAttribute(dt)&&it.hasAttribute(dt)&&I.setAttribute(dt,it.getAttribute(dt))}),!I.children.length)for(var ht=it.cloneNode(!0);ht.firstChild;)I.appendChild(ht.firstChild);I.removeAttribute(Z)}var nt=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+r.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+r.reNum+"))?\\s+(.*)");l(r,{parseFontDeclaration:function(j,I){var q=j.match(nt);if(q){var Z=q[1],at=q[3],it=q[4],ht=q[5],dt=q[6];Z&&(I.fontStyle=Z),at&&(I.fontWeight=isNaN(parseFloat(at))?at:parseFloat(at)),it&&(I.fontSize=n(it)),dt&&(I.fontFamily=dt),ht&&(I.lineHeight=ht==="normal"?1:ht)}},getGradientDefs:function(j){var I=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],q=ft(j,I),Z,at=0,it={};for(at=q.length;at--;)Z=q[at],Z.getAttribute("xlink:href")&&H(j,Z),it[Z.getAttribute("id")]=Z;return it},parseAttributes:function(j,I,q){if(j){var Z,at={},it,ht;typeof q>"u"&&(q=j.getAttribute("svgUid")),j.parentNode&&r.svgValidParentsRegEx.test(j.parentNode.nodeName)&&(at=r.parseAttributes(j.parentNode,I,q));var dt=I.reduce(function(J,$){return Z=j.getAttribute($),Z&&(J[$]=Z),J},{}),F=l(St(j,q),r.parseStyleAttribute(j));dt=l(dt,F),F[T]&&j.setAttribute(T,F[T]),it=ht=at.fontSize||r.Text.DEFAULT_SVG_FONT_SIZE,dt[_]&&(dt[_]=it=n(dt[_],ht));var D,R,Y={};for(var V in dt)D=M(V),R=B(D,dt[V],at,it),Y[D]=R;Y&&Y.font&&r.parseFontDeclaration(Y.font,Y);var G=l(at,Y);return r.svgValidParentsRegEx.test(j.nodeName)?G:st(G)}},parseElements:function(j,I,q,Z,at){new r.ElementsParser(j,I,q,Z,at).parse()},parseStyleAttribute:function(j){var I={},q=j.getAttribute("style");return q&&(typeof q=="string"?vt(q,I):xt(q,I)),I},parsePointsAttribute:function(j){if(!j)return null;j=j.replace(/,/g," ").trim(),j=j.split(/\s+/);var I=[],q,Z;for(q=0,Z=j.length;q<Z;q+=2)I.push({x:parseFloat(j[q]),y:parseFloat(j[q+1])});return I},getCSSRules:function(j){var I=j.getElementsByTagName("style"),q,Z,at={},it;for(q=0,Z=I.length;q<Z;q++){var ht=I[q].textContent;ht=ht.replace(/\/\*[\s\S]*?\*\//g,""),ht.trim()!==""&&(it=ht.split("}"),it=it.filter(function(dt){return dt.trim()}),it.forEach(function(dt){var F=dt.split("{"),D={},R=F[1].trim(),Y=R.split(";").filter(function($){return $.trim()});for(q=0,Z=Y.length;q<Z;q++){var V=Y[q].split(":"),G=V[0].trim(),J=V[1].trim();D[G]=J}dt=F[0].trim(),dt.split(",").forEach(function($){$=$.replace(/^svg/i,"").trim(),$!==""&&(at[$]?r.util.object.extend(at[$],D):at[$]=r.util.object.clone(D))})}))}return at},loadSVGFromURL:function(j,I,q,Z){j=j.replace(/^\n\s*/,"").trim(),new r.util.request(j,{method:"get",onComplete:at});function at(it){var ht=it.responseXML;if(!ht||!ht.documentElement)return I&&I(null),!1;r.parseSVGDocument(ht.documentElement,function(dt,F,D,R){I&&I(dt,F,D,R)},q,Z)}},loadSVGFromString:function(j,I,q,Z){var at=new r.window.DOMParser,it=at.parseFromString(j.trim(),"text/xml");r.parseSVGDocument(it.documentElement,function(ht,dt,F,D){I(ht,dt,F,D)},q,Z)}})}(u),o.ElementsParser=function(h,r,l,c,e,n){this.elements=h,this.callback=r,this.options=l,this.reviver=c,this.svgUid=l&&l.svgUid||0,this.parsingOptions=e,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=n},function(h){h.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},h.createObjects=function(){var r=this;this.elements.forEach(function(l,c){l.setAttribute("svgUid",r.svgUid),r.createObject(l,c)})},h.findTag=function(r){return o[o.util.string.capitalize(r.tagName.replace("svg:",""))]},h.createObject=function(r,l){var c=this.findTag(r);if(c&&c.fromElement)try{c.fromElement(r,this.createCallback(l,r),this.options)}catch(e){o.log(e)}else this.checkIfDone()},h.createCallback=function(r,l){var c=this;return function(e){var n;c.resolveGradient(e,l,"fill"),c.resolveGradient(e,l,"stroke"),e instanceof o.Image&&e._originalElement&&(n=e.parsePreserveAspectRatioAttribute(l)),e._removeTransformMatrix(n),c.resolveClipPath(e,l),c.reviver&&c.reviver(l,e),c.instances[r]=e,c.checkIfDone()}},h.extractPropertyDefinition=function(r,l,c){var e=r[l],n=this.regexUrl;if(n.test(e)){n.lastIndex=0;var t=n.exec(e)[1];return n.lastIndex=0,o[c][this.svgUid][t]}},h.resolveGradient=function(r,l,c){var e=this.extractPropertyDefinition(r,c,"gradientDefs");if(e){var n=l.getAttribute(c+"-opacity"),t=o.Gradient.fromElement(e,r,n,this.options);r.set(c,t)}},h.createClipPathCallback=function(r,l){return function(c){c._removeTransformMatrix(),c.fillRule=c.clipRule,l.push(c)}},h.resolveClipPath=function(r,l){var c=this.extractPropertyDefinition(r,"clipPath","clipPaths"),e,n,t,s,f,i;if(c){s=[],t=o.util.invertTransform(r.calcTransformMatrix());for(var p=c[0].parentNode,m=l;m.parentNode&&m.getAttribute("clip-path")!==r.clipPath;)m=m.parentNode;m.parentNode.appendChild(p);for(var y=0;y<c.length;y++)e=c[y],n=this.findTag(e),n.fromElement(e,this.createClipPathCallback(r,s),this.options);s.length===1?c=s[0]:c=new o.Group(s),f=o.util.multiplyTransformMatrices(t,c.calcTransformMatrix()),c.clipPath&&this.resolveClipPath(c,m);var i=o.util.qrDecompose(f);c.flipX=!1,c.flipY=!1,c.set("scaleX",i.scaleX),c.set("scaleY",i.scaleY),c.angle=i.angle,c.skewX=i.skewX,c.skewY=0,c.setPositionByOrigin({x:i.translateX,y:i.translateY},"center","center"),r.clipPath=c}else delete r.clipPath},h.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(r){return r!=null}),this.callback(this.instances,this.elements))}}(o.ElementsParser.prototype),function(h){var r=h.fabric||(h.fabric={});if(r.Point){r.warn("fabric.Point is already defined");return}r.Point=l;function l(c,e){this.x=c,this.y=e}l.prototype={type:"point",constructor:l,add:function(c){return new l(this.x+c.x,this.y+c.y)},addEquals:function(c){return this.x+=c.x,this.y+=c.y,this},scalarAdd:function(c){return new l(this.x+c,this.y+c)},scalarAddEquals:function(c){return this.x+=c,this.y+=c,this},subtract:function(c){return new l(this.x-c.x,this.y-c.y)},subtractEquals:function(c){return this.x-=c.x,this.y-=c.y,this},scalarSubtract:function(c){return new l(this.x-c,this.y-c)},scalarSubtractEquals:function(c){return this.x-=c,this.y-=c,this},multiply:function(c){return new l(this.x*c,this.y*c)},multiplyEquals:function(c){return this.x*=c,this.y*=c,this},divide:function(c){return new l(this.x/c,this.y/c)},divideEquals:function(c){return this.x/=c,this.y/=c,this},eq:function(c){return this.x===c.x&&this.y===c.y},lt:function(c){return this.x<c.x&&this.y<c.y},lte:function(c){return this.x<=c.x&&this.y<=c.y},gt:function(c){return this.x>c.x&&this.y>c.y},gte:function(c){return this.x>=c.x&&this.y>=c.y},lerp:function(c,e){return typeof e>"u"&&(e=.5),e=Math.max(Math.min(1,e),0),new l(this.x+(c.x-this.x)*e,this.y+(c.y-this.y)*e)},distanceFrom:function(c){var e=this.x-c.x,n=this.y-c.y;return Math.sqrt(e*e+n*n)},midPointFrom:function(c){return this.lerp(c)},min:function(c){return new l(Math.min(this.x,c.x),Math.min(this.y,c.y))},max:function(c){return new l(Math.max(this.x,c.x),Math.max(this.y,c.y))},toString:function(){return this.x+","+this.y},setXY:function(c,e){return this.x=c,this.y=e,this},setX:function(c){return this.x=c,this},setY:function(c){return this.y=c,this},setFromPoint:function(c){return this.x=c.x,this.y=c.y,this},swap:function(c){var e=this.x,n=this.y;this.x=c.x,this.y=c.y,c.x=e,c.y=n},clone:function(){return new l(this.x,this.y)}}}(u),function(h){var r=h.fabric||(h.fabric={});if(r.Intersection){r.warn("fabric.Intersection is already defined");return}function l(c){this.status=c,this.points=[]}r.Intersection=l,r.Intersection.prototype={constructor:l,appendPoint:function(c){return this.points.push(c),this},appendPoints:function(c){return this.points=this.points.concat(c),this}},r.Intersection.intersectLineLine=function(c,e,n,t){var s,f=(t.x-n.x)*(c.y-n.y)-(t.y-n.y)*(c.x-n.x),i=(e.x-c.x)*(c.y-n.y)-(e.y-c.y)*(c.x-n.x),p=(t.y-n.y)*(e.x-c.x)-(t.x-n.x)*(e.y-c.y);if(p!==0){var m=f/p,y=i/p;0<=m&&m<=1&&0<=y&&y<=1?(s=new l("Intersection"),s.appendPoint(new r.Point(c.x+m*(e.x-c.x),c.y+m*(e.y-c.y)))):s=new l}else f===0||i===0?s=new l("Coincident"):s=new l("Parallel");return s},r.Intersection.intersectLinePolygon=function(c,e,n){var t=new l,s=n.length,f,i,p,m;for(m=0;m<s;m++)f=n[m],i=n[(m+1)%s],p=l.intersectLineLine(c,e,f,i),t.appendPoints(p.points);return t.points.length>0&&(t.status="Intersection"),t},r.Intersection.intersectPolygonPolygon=function(c,e){var n=new l,t=c.length,s;for(s=0;s<t;s++){var f=c[s],i=c[(s+1)%t],p=l.intersectLinePolygon(f,i,e);n.appendPoints(p.points)}return n.points.length>0&&(n.status="Intersection"),n},r.Intersection.intersectPolygonRectangle=function(c,e,n){var t=e.min(n),s=e.max(n),f=new r.Point(s.x,t.y),i=new r.Point(t.x,s.y),p=l.intersectLinePolygon(t,f,c),m=l.intersectLinePolygon(f,s,c),y=l.intersectLinePolygon(s,i,c),_=l.intersectLinePolygon(i,t,c),T=new l;return T.appendPoints(p.points),T.appendPoints(m.points),T.appendPoints(y.points),T.appendPoints(_.points),T.points.length>0&&(T.status="Intersection"),T}}(u),function(h){var r=h.fabric||(h.fabric={});if(r.Color){r.warn("fabric.Color is already defined.");return}function l(e){e?this._tryParsingColor(e):this.setSource([0,0,0,1])}r.Color=l,r.Color.prototype={_tryParsingColor:function(e){var n;e in l.colorNameMap&&(e=l.colorNameMap[e]),e==="transparent"&&(n=[255,255,255,0]),n||(n=l.sourceFromHex(e)),n||(n=l.sourceFromRgb(e)),n||(n=l.sourceFromHsl(e)),n||(n=[0,0,0,1]),n&&this.setSource(n)},_rgbToHsl:function(e,n,t){e/=255,n/=255,t/=255;var s,f,i,p=r.util.array.max([e,n,t]),m=r.util.array.min([e,n,t]);if(i=(p+m)/2,p===m)s=f=0;else{var y=p-m;switch(f=i>.5?y/(2-p-m):y/(p+m),p){case e:s=(n-t)/y+(n<t?6:0);break;case n:s=(t-e)/y+2;break;case t:s=(e-n)/y+4;break}s/=6}return[Math.round(s*360),Math.round(f*100),Math.round(i*100)]},getSource:function(){return this._source},setSource:function(e){this._source=e},toRgb:function(){var e=this.getSource();return"rgb("+e[0]+","+e[1]+","+e[2]+")"},toRgba:function(){var e=this.getSource();return"rgba("+e[0]+","+e[1]+","+e[2]+","+e[3]+")"},toHsl:function(){var e=this.getSource(),n=this._rgbToHsl(e[0],e[1],e[2]);return"hsl("+n[0]+","+n[1]+"%,"+n[2]+"%)"},toHsla:function(){var e=this.getSource(),n=this._rgbToHsl(e[0],e[1],e[2]);return"hsla("+n[0]+","+n[1]+"%,"+n[2]+"%,"+e[3]+")"},toHex:function(){var e=this.getSource(),n,t,s;return n=e[0].toString(16),n=n.length===1?"0"+n:n,t=e[1].toString(16),t=t.length===1?"0"+t:t,s=e[2].toString(16),s=s.length===1?"0"+s:s,n.toUpperCase()+t.toUpperCase()+s.toUpperCase()},toHexa:function(){var e=this.getSource(),n;return n=Math.round(e[3]*255),n=n.toString(16),n=n.length===1?"0"+n:n,this.toHex()+n.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(e){var n=this.getSource();return n[3]=e,this.setSource(n),this},toGrayscale:function(){var e=this.getSource(),n=parseInt((e[0]*.3+e[1]*.59+e[2]*.11).toFixed(0),10),t=e[3];return this.setSource([n,n,n,t]),this},toBlackWhite:function(e){var n=this.getSource(),t=(n[0]*.3+n[1]*.59+n[2]*.11).toFixed(0),s=n[3];return e=e||127,t=Number(t)<Number(e)?0:255,this.setSource([t,t,t,s]),this},overlayWith:function(e){e instanceof l||(e=new l(e));var n=[],t=this.getAlpha(),s=.5,f=this.getSource(),i=e.getSource(),p;for(p=0;p<3;p++)n.push(Math.round(f[p]*(1-s)+i[p]*s));return n[3]=t,this.setSource(n),this}},r.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,r.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,r.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,r.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function c(e,n,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?e+(n-e)*6*t:t<1/2?n:t<2/3?e+(n-e)*(2/3-t)*6:e}r.Color.fromRgb=function(e){return l.fromSource(l.sourceFromRgb(e))},r.Color.sourceFromRgb=function(e){var n=e.match(l.reRGBa);if(n){var t=parseInt(n[1],10)/(/%$/.test(n[1])?100:1)*(/%$/.test(n[1])?255:1),s=parseInt(n[2],10)/(/%$/.test(n[2])?100:1)*(/%$/.test(n[2])?255:1),f=parseInt(n[3],10)/(/%$/.test(n[3])?100:1)*(/%$/.test(n[3])?255:1);return[parseInt(t,10),parseInt(s,10),parseInt(f,10),n[4]?parseFloat(n[4]):1]}},r.Color.fromRgba=l.fromRgb,r.Color.fromHsl=function(e){return l.fromSource(l.sourceFromHsl(e))},r.Color.sourceFromHsl=function(e){var n=e.match(l.reHSLa);if(n){var t=(parseFloat(n[1])%360+360)%360/360,s=parseFloat(n[2])/(/%$/.test(n[2])?100:1),f=parseFloat(n[3])/(/%$/.test(n[3])?100:1),i,p,m;if(s===0)i=p=m=f;else{var y=f<=.5?f*(s+1):f+s-f*s,_=f*2-y;i=c(_,y,t+1/3),p=c(_,y,t),m=c(_,y,t-1/3)}return[Math.round(i*255),Math.round(p*255),Math.round(m*255),n[4]?parseFloat(n[4]):1]}},r.Color.fromHsla=l.fromHsl,r.Color.fromHex=function(e){return l.fromSource(l.sourceFromHex(e))},r.Color.sourceFromHex=function(e){if(e.match(l.reHex)){var n=e.slice(e.indexOf("#")+1),t=n.length===3||n.length===4,s=n.length===8||n.length===4,f=t?n.charAt(0)+n.charAt(0):n.substring(0,2),i=t?n.charAt(1)+n.charAt(1):n.substring(2,4),p=t?n.charAt(2)+n.charAt(2):n.substring(4,6),m=s?t?n.charAt(3)+n.charAt(3):n.substring(6,8):"FF";return[parseInt(f,16),parseInt(i,16),parseInt(p,16),parseFloat((parseInt(m,16)/255).toFixed(2))]}},r.Color.fromSource=function(e){var n=new l;return n.setSource(e),n}}(u),function(h){var r=h.fabric||(h.fabric={}),l=["e","se","s","sw","w","nw","n","ne","e"],c=["ns","nesw","ew","nwse"],e={},n="left",t="top",s="right",f="bottom",i="center",p={top:f,bottom:t,left:s,right:n,center:i},m=r.util.radiansToDegrees,y=Math.sign||function(D){return(D>0)-(D<0)||+D};function _(D,R){var Y=D.angle+m(Math.atan2(R.y,R.x))+360;return Math.round(Y%360/45)}function T(D,R){var Y=R.transform.target,V=Y.canvas,G=r.util.object.clone(R);G.target=Y,V&&V.fire("object:"+D,G),Y.fire(D,R)}function M(D,R){var Y=R.canvas,V=Y.uniScaleKey,G=D[V];return Y.uniformScaling&&!G||!Y.uniformScaling&&G}function B(D){return D.originX===i&&D.originY===i}function X(D,R,Y){var V=D.lockScalingX,G=D.lockScalingY;return!!(V&&G||!R&&(V||G)&&Y||V&&R==="x"||G&&R==="y")}function st(D,R,Y){var V="not-allowed",G=M(D,Y),J="";if(R.x!==0&&R.y===0?J="x":R.x===0&&R.y!==0&&(J="y"),X(Y,J,G))return V;var $=_(Y,R);return l[$]+"-resize"}function ft(D,R,Y){var V="not-allowed";if(R.x!==0&&Y.lockSkewingY||R.y!==0&&Y.lockSkewingX)return V;var G=_(Y,R)%4;return c[G]+"-resize"}function vt(D,R,Y){return D[Y.canvas.altActionKey]?e.skewCursorStyleHandler(D,R,Y):e.scaleCursorStyleHandler(D,R,Y)}function xt(D,R,Y){var V=D[Y.canvas.altActionKey];if(R.x===0)return V?"skewX":"scaleY";if(R.y===0)return V?"skewY":"scaleX"}function St(D,R,Y){return Y.lockRotation?"not-allowed":R.cursorStyle}function _t(D,R,Y,V){return{e:D,transform:R,pointer:{x:Y,y:V}}}function ot(D){return function(R,Y,V,G){var J=Y.target,$=J.getCenterPoint(),lt=J.translateToOriginPoint($,Y.originX,Y.originY),et=D(R,Y,V,G);return J.setPositionByOrigin(lt,Y.originX,Y.originY),et}}function pt(D,R){return function(Y,V,G,J){var $=R(Y,V,G,J);return $&&T(D,_t(Y,V,G,J)),$}}function wt(D,R,Y,V,G){var J=D.target,$=J.controls[D.corner],lt=J.canvas.getZoom(),et=J.padding/lt,Q=J.toLocalPoint(new r.Point(V,G),R,Y);return Q.x>=et&&(Q.x-=et),Q.x<=-et&&(Q.x+=et),Q.y>=et&&(Q.y-=et),Q.y<=et&&(Q.y+=et),Q.x-=$.offsetX,Q.y-=$.offsetY,Q}function bt(D){return D.flipX!==D.flipY}function k(D,R,Y,V,G){if(D[R]!==0){var J=D._getTransformedDimensions()[V],$=G/J*D[Y];D.set(Y,$)}}function U(D,R,Y,V){var G=R.target,J=G._getTransformedDimensions(0,G.skewY),$=wt(R,R.originX,R.originY,Y,V),lt=Math.abs($.x*2)-J.x,et=G.skewX,Q;lt<2?Q=0:(Q=m(Math.atan2(lt/G.scaleX,J.y/G.scaleY)),R.originX===n&&R.originY===f&&(Q=-Q),R.originX===s&&R.originY===t&&(Q=-Q),bt(G)&&(Q=-Q));var ct=et!==Q;if(ct){var gt=G._getTransformedDimensions().y;G.set("skewX",Q),k(G,"skewY","scaleY","y",gt)}return ct}function N(D,R,Y,V){var G=R.target,J=G._getTransformedDimensions(G.skewX,0),$=wt(R,R.originX,R.originY,Y,V),lt=Math.abs($.y*2)-J.y,et=G.skewY,Q;lt<2?Q=0:(Q=m(Math.atan2(lt/G.scaleY,J.x/G.scaleX)),R.originX===n&&R.originY===f&&(Q=-Q),R.originX===s&&R.originY===t&&(Q=-Q),bt(G)&&(Q=-Q));var ct=et!==Q;if(ct){var gt=G._getTransformedDimensions().x;G.set("skewY",Q),k(G,"skewX","scaleX","x",gt)}return ct}function H(D,R,Y,V){var G=R.target,J=G.skewX,$,lt=R.originY;if(G.lockSkewingX)return!1;if(J===0){var et=wt(R,i,i,Y,V);et.x>0?$=n:$=s}else J>0&&($=lt===t?n:s),J<0&&($=lt===t?s:n),bt(G)&&($=$===n?s:n);R.originX=$;var Q=pt("skewing",ot(U));return Q(D,R,Y,V)}function nt(D,R,Y,V){var G=R.target,J=G.skewY,$,lt=R.originX;if(G.lockSkewingY)return!1;if(J===0){var et=wt(R,i,i,Y,V);et.y>0?$=t:$=f}else J>0&&($=lt===n?t:f),J<0&&($=lt===n?f:t),bt(G)&&($=$===t?f:t);R.originY=$;var Q=pt("skewing",ot(N));return Q(D,R,Y,V)}function j(D,R,Y,V){var G=R,J=G.target,$=J.translateToOriginPoint(J.getCenterPoint(),G.originX,G.originY);if(J.lockRotation)return!1;var lt=Math.atan2(G.ey-$.y,G.ex-$.x),et=Math.atan2(V-$.y,Y-$.x),Q=m(et-lt+G.theta),ct=!0;if(J.snapAngle>0){var gt=J.snapAngle,Ct=J.snapThreshold||gt,Ot=Math.ceil(Q/gt)*gt,Pt=Math.floor(Q/gt)*gt;Math.abs(Q-Pt)<Ct?Q=Pt:Math.abs(Q-Ot)<Ct&&(Q=Ot)}return Q<0&&(Q=360+Q),Q%=360,ct=J.angle!==Q,J.angle=Q,ct}function I(D,R,Y,V,G){G=G||{};var J=R.target,$=J.lockScalingX,lt=J.lockScalingY,et=G.by,Q,ct,gt,Ct,Ot=M(D,J),Pt=X(J,et,Ot),Mt,Dt,Gt=R.gestureScale;if(Pt)return!1;if(Gt)ct=R.scaleX*Gt,gt=R.scaleY*Gt;else{if(Q=wt(R,R.originX,R.originY,Y,V),Mt=et!=="y"?y(Q.x):1,Dt=et!=="x"?y(Q.y):1,R.signX||(R.signX=Mt),R.signY||(R.signY=Dt),J.lockScalingFlip&&(R.signX!==Mt||R.signY!==Dt))return!1;if(Ct=J._getTransformedDimensions(),Ot&&!et){var re=Math.abs(Q.x)+Math.abs(Q.y),Zt=R.original,Oe=Math.abs(Ct.x*Zt.scaleX/J.scaleX)+Math.abs(Ct.y*Zt.scaleY/J.scaleY),We=re/Oe;ct=Zt.scaleX*We,gt=Zt.scaleY*We}else ct=Math.abs(Q.x*J.scaleX/Ct.x),gt=Math.abs(Q.y*J.scaleY/Ct.y);B(R)&&(ct*=2,gt*=2),R.signX!==Mt&&et!=="y"&&(R.originX=p[R.originX],ct*=-1,R.signX=Mt),R.signY!==Dt&&et!=="x"&&(R.originY=p[R.originY],gt*=-1,R.signY=Dt)}var $t=J.scaleX,te=J.scaleY;return et?(et==="x"&&J.set("scaleX",ct),et==="y"&&J.set("scaleY",gt)):(!$&&J.set("scaleX",ct),!lt&&J.set("scaleY",gt)),$t!==J.scaleX||te!==J.scaleY}function q(D,R,Y,V){return I(D,R,Y,V)}function Z(D,R,Y,V){return I(D,R,Y,V,{by:"x"})}function at(D,R,Y,V){return I(D,R,Y,V,{by:"y"})}function it(D,R,Y,V){return D[R.target.canvas.altActionKey]?e.skewHandlerX(D,R,Y,V):e.scalingY(D,R,Y,V)}function ht(D,R,Y,V){return D[R.target.canvas.altActionKey]?e.skewHandlerY(D,R,Y,V):e.scalingX(D,R,Y,V)}function dt(D,R,Y,V){var G=R.target,J=wt(R,R.originX,R.originY,Y,V),$=G.strokeWidth/(G.strokeUniform?G.scaleX:1),lt=B(R)?2:1,et=G.width,Q=Math.abs(J.x*lt/G.scaleX)-$;return G.set("width",Math.max(Q,0)),et!==Q}function F(D,R,Y,V){var G=R.target,J=Y-R.offsetX,$=V-R.offsetY,lt=!G.get("lockMovementX")&&G.left!==J,et=!G.get("lockMovementY")&&G.top!==$;return lt&&G.set("left",J),et&&G.set("top",$),(lt||et)&&T("moving",_t(D,R,Y,V)),lt||et}e.scaleCursorStyleHandler=st,e.skewCursorStyleHandler=ft,e.scaleSkewCursorStyleHandler=vt,e.rotationWithSnapping=pt("rotating",ot(j)),e.scalingEqually=pt("scaling",ot(q)),e.scalingX=pt("scaling",ot(Z)),e.scalingY=pt("scaling",ot(at)),e.scalingYOrSkewingX=it,e.scalingXOrSkewingY=ht,e.changeWidth=pt("resizing",ot(dt)),e.skewHandlerX=H,e.skewHandlerY=nt,e.dragHandler=F,e.scaleOrSkewActionName=xt,e.rotationStyleHandler=St,e.fireEvent=T,e.wrapWithFixedAnchor=ot,e.wrapWithFireEvent=pt,e.getLocalPoint=wt,r.controlsUtils=e}(u),function(h){var r=h.fabric||(h.fabric={}),l=r.util.degreesToRadians,c=r.controlsUtils;function e(t,s,f,i,p){i=i||{};var m=this.sizeX||i.cornerSize||p.cornerSize,y=this.sizeY||i.cornerSize||p.cornerSize,_=typeof i.transparentCorners<"u"?i.transparentCorners:p.transparentCorners,T=_?"stroke":"fill",M=!_&&(i.cornerStrokeColor||p.cornerStrokeColor),B=s,X=f,st;t.save(),t.fillStyle=i.cornerColor||p.cornerColor,t.strokeStyle=i.cornerStrokeColor||p.cornerStrokeColor,m>y?(st=m,t.scale(1,y/m),X=f*m/y):y>m?(st=y,t.scale(m/y,1),B=s*y/m):st=m,t.lineWidth=1,t.beginPath(),t.arc(B,X,st/2,0,2*Math.PI,!1),t[T](),M&&t.stroke(),t.restore()}function n(t,s,f,i,p){i=i||{};var m=this.sizeX||i.cornerSize||p.cornerSize,y=this.sizeY||i.cornerSize||p.cornerSize,_=typeof i.transparentCorners<"u"?i.transparentCorners:p.transparentCorners,T=_?"stroke":"fill",M=!_&&(i.cornerStrokeColor||p.cornerStrokeColor),B=m/2,X=y/2;t.save(),t.fillStyle=i.cornerColor||p.cornerColor,t.strokeStyle=i.cornerStrokeColor||p.cornerStrokeColor,t.lineWidth=1,t.translate(s,f),t.rotate(l(p.angle)),t[T+"Rect"](-B,-X,m,y),M&&t.strokeRect(-B,-X,m,y),t.restore()}c.renderCircleControl=e,c.renderSquareControl=n}(u),function(h){var r=h.fabric||(h.fabric={});function l(c){for(var e in c)this[e]=c[e]}r.Control=l,r.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(c,e){return e.cursorStyle},getActionName:function(c,e){return e.actionName},getVisibility:function(c,e){var n=c._controlsVisibility;return n&&typeof n[e]<"u"?n[e]:this.visible},setVisibility:function(c){this.visible=c},positionHandler:function(c,e){var n=r.util.transformPoint({x:this.x*c.x+this.offsetX,y:this.y*c.y+this.offsetY},e);return n},calcCornerCoords:function(c,e,n,t,s){var f,i,p,m,y=s?this.touchSizeX:this.sizeX,_=s?this.touchSizeY:this.sizeY;if(y&&_&&y!==_){var T=Math.atan2(_,y),M=Math.sqrt(y*y+_*_)/2,B=T-r.util.degreesToRadians(c),X=Math.PI/2-T-r.util.degreesToRadians(c);f=M*r.util.cos(B),i=M*r.util.sin(B),p=M*r.util.cos(X),m=M*r.util.sin(X)}else{var st=y&&_?y:e;M=st*.7071067812;var B=r.util.degreesToRadians(45-c);f=p=M*r.util.cos(B),i=m=M*r.util.sin(B)}return{tl:{x:n-m,y:t-p},tr:{x:n+f,y:t-i},bl:{x:n-f,y:t+i},br:{x:n+m,y:t+p}}},render:function(c,e,n,t,s){switch(t=t||{},t.cornerStyle||s.cornerStyle){case"circle":r.controlsUtils.renderCircleControl.call(this,c,e,n,t,s);break;default:r.controlsUtils.renderSquareControl.call(this,c,e,n,t,s)}}}}(u),function(){function h(n,t){var s=n.getAttribute("style"),f=n.getAttribute("offset")||0,i,p,m,y;if(f=parseFloat(f)/(/%$/.test(f)?100:1),f=f<0?0:f>1?1:f,s){var _=s.split(/\s*;\s*/);for(_[_.length-1]===""&&_.pop(),y=_.length;y--;){var T=_[y].split(/\s*:\s*/),M=T[0].trim(),B=T[1].trim();M==="stop-color"?i=B:M==="stop-opacity"&&(m=B)}}return i||(i=n.getAttribute("stop-color")||"rgb(0,0,0)"),m||(m=n.getAttribute("stop-opacity")),i=new o.Color(i),p=i.getAlpha(),m=isNaN(parseFloat(m))?1:parseFloat(m),m*=p*t,{offset:f,color:i.toRgb(),opacity:m}}function r(n){return{x1:n.getAttribute("x1")||0,y1:n.getAttribute("y1")||0,x2:n.getAttribute("x2")||"100%",y2:n.getAttribute("y2")||0}}function l(n){return{x1:n.getAttribute("fx")||n.getAttribute("cx")||"50%",y1:n.getAttribute("fy")||n.getAttribute("cy")||"50%",r1:0,x2:n.getAttribute("cx")||"50%",y2:n.getAttribute("cy")||"50%",r2:n.getAttribute("r")||"50%"}}var c=o.util.object.clone;o.Gradient=o.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(n){n||(n={}),n.coords||(n.coords={});var t,s=this;Object.keys(n).forEach(function(f){s[f]=n[f]}),this.id?this.id+="_"+o.Object.__uid++:this.id=o.Object.__uid++,t={x1:n.coords.x1||0,y1:n.coords.y1||0,x2:n.coords.x2||0,y2:n.coords.y2||0},this.type==="radial"&&(t.r1=n.coords.r1||0,t.r2=n.coords.r2||0),this.coords=t,this.colorStops=n.colorStops.slice()},addColorStop:function(n){for(var t in n){var s=new o.Color(n[t]);this.colorStops.push({offset:parseFloat(t),color:s.toRgb(),opacity:s.getAlpha()})}return this},toObject:function(n){var t={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return o.util.populateWithProperties(this,t,n),t},toSVG:function(n,p){var s=c(this.coords,!0),f,i,p=p||{},m,y,_=c(this.colorStops,!0),T=s.r1>s.r2,M=this.gradientTransform?this.gradientTransform.concat():o.iMatrix.concat(),B=-this.offsetX,X=-this.offsetY,st=!!p.additionalTransform,ft=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(_.sort(function(ot,pt){return ot.offset-pt.offset}),ft==="objectBoundingBox"?(B/=n.width,X/=n.height):(B+=n.width/2,X+=n.height/2),n.type==="path"&&this.gradientUnits!=="percentage"&&(B-=n.pathOffset.x,X-=n.pathOffset.y),M[4]-=B,M[5]-=X,y='id="SVGID_'+this.id+'" gradientUnits="'+ft+'"',y+=' gradientTransform="'+(st?p.additionalTransform+" ":"")+o.util.matrixToSVG(M)+'" ',this.type==="linear"?m=["<linearGradient ",y,' x1="',s.x1,'" y1="',s.y1,'" x2="',s.x2,'" y2="',s.y2,`">
`]:this.type==="radial"&&(m=["<radialGradient ",y,' cx="',T?s.x1:s.x2,'" cy="',T?s.y1:s.y2,'" r="',T?s.r1:s.r2,'" fx="',T?s.x2:s.x1,'" fy="',T?s.y2:s.y1,`">
`]),this.type==="radial"){if(T)for(_=_.concat(),_.reverse(),f=0,i=_.length;f<i;f++)_[f].offset=1-_[f].offset;var vt=Math.min(s.r1,s.r2);if(vt>0){var xt=Math.max(s.r1,s.r2),St=vt/xt;for(f=0,i=_.length;f<i;f++)_[f].offset+=St*(1-_[f].offset)}}for(f=0,i=_.length;f<i;f++){var _t=_[f];m.push("<stop ",'offset="',_t.offset*100+"%",'" style="stop-color:',_t.color,typeof _t.opacity<"u"?";stop-opacity: "+_t.opacity:";",`"/>
`)}return m.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),m.join("")},toLive:function(n){var t,s=o.util.object.clone(this.coords),f,i;if(this.type){for(this.type==="linear"?t=n.createLinearGradient(s.x1,s.y1,s.x2,s.y2):this.type==="radial"&&(t=n.createRadialGradient(s.x1,s.y1,s.r1,s.x2,s.y2,s.r2)),f=0,i=this.colorStops.length;f<i;f++){var p=this.colorStops[f].color,m=this.colorStops[f].opacity,y=this.colorStops[f].offset;typeof m<"u"&&(p=new o.Color(p).setAlpha(m).toRgba()),t.addColorStop(y,p)}return t}}}),o.util.object.extend(o.Gradient,{fromElement:function(n,t,s,f){var i=parseFloat(s)/(/%$/.test(s)?100:1);i=i<0?0:i>1?1:i,isNaN(i)&&(i=1);var p=n.getElementsByTagName("stop"),m,y=n.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",_=n.getAttribute("gradientTransform")||"",T=[],M,B,X=0,st=0,ft;for(n.nodeName==="linearGradient"||n.nodeName==="LINEARGRADIENT"?(m="linear",M=r(n)):(m="radial",M=l(n)),B=p.length;B--;)T.push(h(p[B],i));ft=o.parseTransformAttribute(_),e(t,M,f,y),y==="pixels"&&(X=-t.left,st=-t.top);var vt=new o.Gradient({id:n.getAttribute("id"),type:m,coords:M,colorStops:T,gradientUnits:y,gradientTransform:ft,offsetX:X,offsetY:st});return vt}});function e(n,t,s,f){var i,p;Object.keys(t).forEach(function(m){i=t[m],i==="Infinity"?p=1:i==="-Infinity"?p=0:(p=parseFloat(t[m],10),typeof i=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(i)&&(p*=.01,f==="pixels"&&((m==="x1"||m==="x2"||m==="r2")&&(p*=s.viewBoxWidth||s.width),(m==="y1"||m==="y2")&&(p*=s.viewBoxHeight||s.height)))),t[m]=p})}}(),function(){var h=o.util.toFixed;o.Pattern=o.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(r,l){if(r||(r={}),this.id=o.Object.__uid++,this.setOptions(r),!r.source||r.source&&typeof r.source!="string"){l&&l(this);return}else{var c=this;this.source=o.util.createImage(),o.util.loadImage(r.source,function(e,n){c.source=e,l&&l(c,n)},null,this.crossOrigin)}},toObject:function(r){var l=o.Object.NUM_FRACTION_DIGITS,c,e;return typeof this.source.src=="string"?c=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(c=this.source.toDataURL()),e={type:"pattern",source:c,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:h(this.offsetX,l),offsetY:h(this.offsetY,l),patternTransform:this.patternTransform?this.patternTransform.concat():null},o.util.populateWithProperties(this,e,r),e},toSVG:function(r){var l=typeof this.source=="function"?this.source():this.source,c=l.width/r.width,e=l.height/r.height,n=this.offsetX/r.width,t=this.offsetY/r.height,s="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(e=1,t&&(e+=Math.abs(t))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(c=1,n&&(c+=Math.abs(n))),l.src?s=l.src:l.toDataURL&&(s=l.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+n+'" y="'+t+'" width="'+c+'" height="'+e+`">
<image x="0" y="0" width="`+l.width+'" height="'+l.height+'" xlink:href="'+s+`"></image>
</pattern>
`},setOptions:function(r){for(var l in r)this[l]=r[l]},toLive:function(r){var l=this.source;return!l||typeof l.src<"u"&&(!l.complete||l.naturalWidth===0||l.naturalHeight===0)?"":r.createPattern(l,this.repeat)}})}(),function(h){var r=h.fabric||(h.fabric={}),l=r.util.toFixed;if(r.Shadow){r.warn("fabric.Shadow is already defined.");return}r.Shadow=r.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(c){typeof c=="string"&&(c=this._parseShadow(c));for(var e in c)this[e]=c[e];this.id=r.Object.__uid++},_parseShadow:function(c){var e=c.trim(),n=r.Shadow.reOffsetsAndBlur.exec(e)||[],t=e.replace(r.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:t.trim(),offsetX:parseFloat(n[1],10)||0,offsetY:parseFloat(n[2],10)||0,blur:parseFloat(n[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(c){var e=40,n=40,t=r.Object.NUM_FRACTION_DIGITS,s=r.util.rotateVector({x:this.offsetX,y:this.offsetY},r.util.degreesToRadians(-c.angle)),f=20,i=new r.Color(this.color);return c.width&&c.height&&(e=l((Math.abs(s.x)+this.blur)/c.width,t)*100+f,n=l((Math.abs(s.y)+this.blur)/c.height,t)*100+f),c.flipX&&(s.x*=-1),c.flipY&&(s.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+n+'%" height="'+(100+2*n)+'%" x="-'+e+'%" width="'+(100+2*e)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+l(this.blur?this.blur/2:0,t)+`"></feGaussianBlur>
	<feOffset dx="`+l(s.x,t)+'" dy="'+l(s.y,t)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+i.toRgb()+'" flood-opacity="'+i.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var c={},e=r.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(n){this[n]!==e[n]&&(c[n]=this[n])},this),c}}),r.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(u),function(){if(o.StaticCanvas){o.warn("fabric.StaticCanvas is already defined.");return}var h=o.util.object.extend,r=o.util.getElementOffset,l=o.util.removeFromArray,c=o.util.toFixed,e=o.util.transformPoint,n=o.util.invertTransform,t=o.util.getNodeCanvas,s=o.util.createCanvasElement,f=new Error("Could not initialize `canvas` element");o.StaticCanvas=o.util.createClass(o.CommonMethods,{initialize:function(i,p){p||(p={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(i,p)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:o.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(i,p){var m=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(i),this._initOptions(p),this.interactive||this._initRetinaScaling(),p.overlayImage&&this.setOverlayImage(p.overlayImage,m),p.backgroundImage&&this.setBackgroundImage(p.backgroundImage,m),p.backgroundColor&&this.setBackgroundColor(p.backgroundColor,m),p.overlayColor&&this.setOverlayColor(p.overlayColor,m),this.calcOffset()},_isRetinaScaling:function(){return o.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,o.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var i=o.devicePixelRatio;this.__initRetinaScaling(i,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(i,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(i,p,m){p.setAttribute("width",this.width*i),p.setAttribute("height",this.height*i),m.scale(i,i)},calcOffset:function(){return this._offset=r(this.lowerCanvasEl),this},setOverlayImage:function(i,p,m){return this.__setBgOverlayImage("overlayImage",i,p,m)},setBackgroundImage:function(i,p,m){return this.__setBgOverlayImage("backgroundImage",i,p,m)},setOverlayColor:function(i,p){return this.__setBgOverlayColor("overlayColor",i,p)},setBackgroundColor:function(i,p){return this.__setBgOverlayColor("backgroundColor",i,p)},__setBgOverlayImage:function(i,p,m,y){return typeof p=="string"?o.util.loadImage(p,function(_,T){if(_){var M=new o.Image(_,y);this[i]=M,M.canvas=this}m&&m(_,T)},this,y&&y.crossOrigin):(y&&p.setOptions(y),this[i]=p,p&&(p.canvas=this),m&&m(p,!1)),this},__setBgOverlayColor:function(i,p,m){return this[i]=p,this._initGradient(p,i),this._initPattern(p,i,m),this},_createCanvasElement:function(){var i=s();if(!i||(i.style||(i.style={}),typeof i.getContext>"u"))throw f;return i},_initOptions:function(i){var p=this.lowerCanvasEl;this._setOptions(i),this.width=this.width||parseInt(p.width,10)||0,this.height=this.height||parseInt(p.height,10)||0,this.lowerCanvasEl.style&&(p.width=this.width,p.height=this.height,p.style.width=this.width+"px",p.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(i){i&&i.getContext?this.lowerCanvasEl=i:this.lowerCanvasEl=o.util.getById(i)||this._createCanvasElement(),o.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(i,p){return this.setDimensions({width:i},p)},setHeight:function(i,p){return this.setDimensions({height:i},p)},setDimensions:function(i,p){var m;p=p||{};for(var y in i)m=i[y],p.cssOnly||(this._setBackstoreDimension(y,i[y]),m+="px",this.hasLostContext=!0),p.backstoreOnly||this._setCssDimension(y,m);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),p.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(i,p){return this.lowerCanvasEl[i]=p,this.upperCanvasEl&&(this.upperCanvasEl[i]=p),this.cacheCanvasEl&&(this.cacheCanvasEl[i]=p),this[i]=p,this},_setCssDimension:function(i,p){return this.lowerCanvasEl.style[i]=p,this.upperCanvasEl&&(this.upperCanvasEl.style[i]=p),this.wrapperEl&&(this.wrapperEl.style[i]=p),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(i){var p=this._activeObject,m=this.backgroundImage,y=this.overlayImage,_,T,M;for(this.viewportTransform=i,T=0,M=this._objects.length;T<M;T++)_=this._objects[T],_.group||_.setCoords(!0);return p&&p.setCoords(),m&&m.setCoords(!0),y&&y.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(i,p){var m=i,y=this.viewportTransform.slice(0);i=e(i,n(this.viewportTransform)),y[0]=p,y[3]=p;var _=e(i,y);return y[4]+=m.x-_.x,y[5]+=m.y-_.y,this.setViewportTransform(y)},setZoom:function(i){return this.zoomToPoint(new o.Point(0,0),i),this},absolutePan:function(i){var p=this.viewportTransform.slice(0);return p[4]=-i.x,p[5]=-i.y,this.setViewportTransform(p)},relativePan:function(i){return this.absolutePan(new o.Point(-i.x-this.viewportTransform[4],-i.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(i){this.stateful&&i.setupState(),i._set("canvas",this),i.setCoords(),this.fire("object:added",{target:i}),i.fire("added")},_onObjectRemoved:function(i){this.fire("object:removed",{target:i}),i.fire("removed"),delete i.canvas},clearContext:function(i){return i.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var i=this.contextContainer;return this.renderCanvas(i,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=o.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var i={},p=this.width,m=this.height,y=n(this.viewportTransform);return i.tl=e({x:0,y:0},y),i.br=e({x:p,y:m},y),i.tr=new o.Point(i.br.x,i.tl.y),i.bl=new o.Point(i.tl.x,i.br.y),this.vptCoords=i,i},cancelRequestedRender:function(){this.isRendering&&(o.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(i,p){var m=this.viewportTransform,y=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(i),o.util.setImageSmoothing(i,this.imageSmoothingEnabled),this.fire("before:render",{ctx:i}),this._renderBackground(i),i.save(),i.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._renderObjects(i,p),i.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(i),y&&(y.canvas=this,y.shouldCache(),y._transformDone=!0,y.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(i)),this._renderOverlay(i),this.controlsAboveOverlay&&this.interactive&&this.drawControls(i),this.fire("after:render",{ctx:i})},drawClipPathOnCanvas:function(i){var p=this.viewportTransform,m=this.clipPath;i.save(),i.transform(p[0],p[1],p[2],p[3],p[4],p[5]),i.globalCompositeOperation="destination-in",m.transform(i),i.scale(1/m.zoomX,1/m.zoomY),i.drawImage(m._cacheCanvas,-m.cacheTranslationX,-m.cacheTranslationY),i.restore()},_renderObjects:function(i,p){var m,y;for(m=0,y=p.length;m<y;++m)p[m]&&p[m].render(i)},_renderBackgroundOrOverlay:function(i,p){var m=this[p+"Color"],y=this[p+"Image"],_=this.viewportTransform,T=this[p+"Vpt"];if(!(!m&&!y)){if(m){i.save(),i.beginPath(),i.moveTo(0,0),i.lineTo(this.width,0),i.lineTo(this.width,this.height),i.lineTo(0,this.height),i.closePath(),i.fillStyle=m.toLive?m.toLive(i,this):m,T&&i.transform(_[0],_[1],_[2],_[3],_[4],_[5]),i.transform(1,0,0,1,m.offsetX||0,m.offsetY||0);var M=m.gradientTransform||m.patternTransform;M&&i.transform(M[0],M[1],M[2],M[3],M[4],M[5]),i.fill(),i.restore()}y&&(i.save(),T&&i.transform(_[0],_[1],_[2],_[3],_[4],_[5]),y.render(i),i.restore())}},_renderBackground:function(i){this._renderBackgroundOrOverlay(i,"background")},_renderOverlay:function(i){this._renderBackgroundOrOverlay(i,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new o.Point(this.width/2,this.height/2)},centerObjectH:function(i){return this._centerObject(i,new o.Point(this.getCenterPoint().x,i.getCenterPoint().y))},centerObjectV:function(i){return this._centerObject(i,new o.Point(i.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(i){var p=this.getCenterPoint();return this._centerObject(i,p)},viewportCenterObject:function(i){var p=this.getVpCenter();return this._centerObject(i,p)},viewportCenterObjectH:function(i){var p=this.getVpCenter();return this._centerObject(i,new o.Point(p.x,i.getCenterPoint().y)),this},viewportCenterObjectV:function(i){var p=this.getVpCenter();return this._centerObject(i,new o.Point(i.getCenterPoint().x,p.y))},getVpCenter:function(){var i=this.getCenterPoint(),p=n(this.viewportTransform);return e(i,p)},_centerObject:function(i,p){return i.setPositionByOrigin(p,"center","center"),i.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(i){return this.toDatalessObject(i)},toObject:function(i){return this._toObjectMethod("toObject",i)},toDatalessObject:function(i){return this._toObjectMethod("toDatalessObject",i)},_toObjectMethod:function(i,p){var m=this.clipPath,y={version:o.version,objects:this._toObjects(i,p)};return m&&!m.excludeFromExport&&(y.clipPath=this._toObject(this.clipPath,i,p)),h(y,this.__serializeBgOverlay(i,p)),o.util.populateWithProperties(this,y,p),y},_toObjects:function(i,p){return this._objects.filter(function(m){return!m.excludeFromExport}).map(function(m){return this._toObject(m,i,p)},this)},_toObject:function(i,p,m){var y;this.includeDefaultValues||(y=i.includeDefaultValues,i.includeDefaultValues=!1);var _=i[p](m);return this.includeDefaultValues||(i.includeDefaultValues=y),_},__serializeBgOverlay:function(i,p){var m={},y=this.backgroundImage,_=this.overlayImage,T=this.backgroundColor,M=this.overlayColor;return T&&T.toObject?T.excludeFromExport||(m.background=T.toObject(p)):T&&(m.background=T),M&&M.toObject?M.excludeFromExport||(m.overlay=M.toObject(p)):M&&(m.overlay=M),y&&!y.excludeFromExport&&(m.backgroundImage=this._toObject(y,i,p)),_&&!_.excludeFromExport&&(m.overlayImage=this._toObject(_,i,p)),m},svgViewportTransformation:!0,toSVG:function(i,p){i||(i={}),i.reviver=p;var m=[];return this._setSVGPreamble(m,i),this._setSVGHeader(m,i),this.clipPath&&m.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(m,"background"),this._setSVGBgOverlayImage(m,"backgroundImage",p),this._setSVGObjects(m,p),this.clipPath&&m.push(`</g>
`),this._setSVGBgOverlayColor(m,"overlay"),this._setSVGBgOverlayImage(m,"overlayImage",p),m.push("</svg>"),m.join("")},_setSVGPreamble:function(i,p){p.suppressPreamble||i.push('<?xml version="1.0" encoding="',p.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(i,p){var m=p.width||this.width,y=p.height||this.height,_,T='viewBox="0 0 '+this.width+" "+this.height+'" ',M=o.Object.NUM_FRACTION_DIGITS;p.viewBox?T='viewBox="'+p.viewBox.x+" "+p.viewBox.y+" "+p.viewBox.width+" "+p.viewBox.height+'" ':this.svgViewportTransformation&&(_=this.viewportTransform,T='viewBox="'+c(-_[4]/_[0],M)+" "+c(-_[5]/_[3],M)+" "+c(this.width/_[0],M)+" "+c(this.height/_[3],M)+'" '),i.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',m,'" ','height="',y,'" ',T,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",o.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(p),`</defs>
`)},createSVGClipPathMarkup:function(i){var p=this.clipPath;return p?(p.clipPathId="CLIPPATH_"+o.Object.__uid++,'<clipPath id="'+p.clipPathId+`" >
`+this.clipPath.toClipPathSVG(i.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var i=this,p=["background","overlay"].map(function(m){var y=i[m+"Color"];if(y&&y.toLive){var _=i[m+"Vpt"],T=i.viewportTransform,M={width:i.width/(_?T[0]:1),height:i.height/(_?T[3]:1)};return y.toSVG(M,{additionalTransform:_?o.util.matrixToSVG(T):""})}});return p.join("")},createSVGFontFacesMarkup:function(){var i="",p={},m,y,_,T,M,B,X,st,ft,vt=o.fontPaths,xt=[];for(this._objects.forEach(function _t(ot){xt.push(ot),ot._objects&&ot._objects.forEach(_t)}),st=0,ft=xt.length;st<ft;st++)if(m=xt[st],y=m.fontFamily,!(m.type.indexOf("text")===-1||p[y]||!vt[y])&&(p[y]=!0,!!m.styles)){_=m.styles;for(M in _){T=_[M];for(X in T)B=T[X],y=B.fontFamily,!p[y]&&vt[y]&&(p[y]=!0)}}for(var St in p)i+=[`		@font-face {
`,"			font-family: '",St,`';
`,"			src: url('",vt[St],`');
`,`		}
`].join("");return i&&(i=['	<style type="text/css">',`<![CDATA[
`,i,"]]>",`</style>
`].join("")),i},_setSVGObjects:function(i,p){var m,y,_,T=this._objects;for(y=0,_=T.length;y<_;y++)m=T[y],!m.excludeFromExport&&this._setSVGObject(i,m,p)},_setSVGObject:function(i,p,m){i.push(p.toSVG(m))},_setSVGBgOverlayImage:function(i,p,m){this[p]&&!this[p].excludeFromExport&&this[p].toSVG&&i.push(this[p].toSVG(m))},_setSVGBgOverlayColor:function(i,p){var m=this[p+"Color"],y=this.viewportTransform,_=this.width,T=this.height;if(m)if(m.toLive){var M=m.repeat,B=o.util.invertTransform(y),X=this[p+"Vpt"],st=X?o.util.matrixToSVG(B):"";i.push('<rect transform="'+st+" translate(",_/2,",",T/2,')"',' x="',m.offsetX-_/2,'" y="',m.offsetY-T/2,'" ','width="',M==="repeat-y"||M==="no-repeat"?m.source.width:_,'" height="',M==="repeat-x"||M==="no-repeat"?m.source.height:T,'" fill="url(#SVGID_'+m.id+')"',`></rect>
`)}else i.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',m,'"',`></rect>
`)},sendToBack:function(i){if(!i)return this;var p=this._activeObject,m,y,_;if(i===p&&i.type==="activeSelection")for(_=p._objects,m=_.length;m--;)y=_[m],l(this._objects,y),this._objects.unshift(y);else l(this._objects,i),this._objects.unshift(i);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(i){if(!i)return this;var p=this._activeObject,m,y,_;if(i===p&&i.type==="activeSelection")for(_=p._objects,m=0;m<_.length;m++)y=_[m],l(this._objects,y),this._objects.push(y);else l(this._objects,i),this._objects.push(i);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(i,p){if(!i)return this;var m=this._activeObject,y,_,T,M,B,X=0;if(i===m&&i.type==="activeSelection")for(B=m._objects,y=0;y<B.length;y++)_=B[y],T=this._objects.indexOf(_),T>0+X&&(M=T-1,l(this._objects,_),this._objects.splice(M,0,_)),X++;else T=this._objects.indexOf(i),T!==0&&(M=this._findNewLowerIndex(i,T,p),l(this._objects,i),this._objects.splice(M,0,i));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(i,p,m){var y,_;if(m)for(y=p,_=p-1;_>=0;--_){var T=i.intersectsWithObject(this._objects[_])||i.isContainedWithinObject(this._objects[_])||this._objects[_].isContainedWithinObject(i);if(T){y=_;break}}else y=p-1;return y},bringForward:function(i,p){if(!i)return this;var m=this._activeObject,y,_,T,M,B,X=0;if(i===m&&i.type==="activeSelection")for(B=m._objects,y=B.length;y--;)_=B[y],T=this._objects.indexOf(_),T<this._objects.length-1-X&&(M=T+1,l(this._objects,_),this._objects.splice(M,0,_)),X++;else T=this._objects.indexOf(i),T!==this._objects.length-1&&(M=this._findNewUpperIndex(i,T,p),l(this._objects,i),this._objects.splice(M,0,i));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(i,p,m){var y,_,T;if(m)for(y=p,_=p+1,T=this._objects.length;_<T;++_){var M=i.intersectsWithObject(this._objects[_])||i.isContainedWithinObject(this._objects[_])||this._objects[_].isContainedWithinObject(i);if(M){y=_;break}}else y=p+1;return y},moveTo:function(i,p){return l(this._objects,i),this._objects.splice(p,0,i),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(o.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(i){i.dispose&&i.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),o.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),o.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),h(o.StaticCanvas.prototype,o.Observable),h(o.StaticCanvas.prototype,o.Collection),h(o.StaticCanvas.prototype,o.DataURLExporter),h(o.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(i){var p=s();if(!p||!p.getContext)return null;var m=p.getContext("2d");if(!m)return null;switch(i){case"setLineDash":return typeof m.setLineDash<"u";default:return null}}}),o.StaticCanvas.prototype.toJSON=o.StaticCanvas.prototype.toObject,o.isLikelyNode&&(o.StaticCanvas.prototype.createPNGStream=function(){var i=t(this.lowerCanvasEl);return i&&i.createPNGStream()},o.StaticCanvas.prototype.createJPEGStream=function(i){var p=t(this.lowerCanvasEl);return p&&p.createJPEGStream(i)})}(),o.BaseBrush=o.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(h){h.strokeStyle=this.color,h.lineWidth=this.width,h.lineCap=this.strokeLineCap,h.miterLimit=this.strokeMiterLimit,h.lineJoin=this.strokeLineJoin,h.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(h){var r=this.canvas.viewportTransform;h.save(),h.transform(r[0],r[1],r[2],r[3],r[4],r[5])},_setShadow:function(){if(this.shadow){var h=this.canvas,r=this.shadow,l=h.contextTop,c=h.getZoom();h&&h._isRetinaScaling()&&(c*=o.devicePixelRatio),l.shadowColor=r.color,l.shadowBlur=r.blur*c,l.shadowOffsetX=r.offsetX*c,l.shadowOffsetY=r.offsetY*c}},needsFullRender:function(){var h=new o.Color(this.color);return h.getAlpha()<1||!!this.shadow},_resetShadow:function(){var h=this.canvas.contextTop;h.shadowColor="",h.shadowBlur=h.shadowOffsetX=h.shadowOffsetY=0},_isOutSideCanvas:function(h){return h.x<0||h.x>this.canvas.getWidth()||h.y<0||h.y>this.canvas.getHeight()}}),function(){o.PencilBrush=o.util.createClass(o.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(h){this.canvas=h,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(h,r,l){var c=r.midPointFrom(l);return h.quadraticCurveTo(r.x,r.y,c.x,c.y),c},onMouseDown:function(h,r){this.canvas._isMainEvent(r.e)&&(this.drawStraightLine=r.e[this.straightLineKey],this._prepareForDrawing(h),this._captureDrawingPath(h),this._render())},onMouseMove:function(h,r){if(this.canvas._isMainEvent(r.e)&&(this.drawStraightLine=r.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(h))&&this._captureDrawingPath(h)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var l=this._points,c=l.length,e=this.canvas.contextTop;this._saveAndTransform(e),this.oldEnd&&(e.beginPath(),e.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(e,l[c-2],l[c-1],!0),e.stroke(),e.restore()}},onMouseUp:function(h){return this.canvas._isMainEvent(h.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(h){var r=new o.Point(h.x,h.y);this._reset(),this._addPoint(r),this.canvas.contextTop.moveTo(r.x,r.y)},_addPoint:function(h){return this._points.length>1&&h.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(h),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(h){var r=new o.Point(h.x,h.y);return this._addPoint(r)},_render:function(h){var r,l,c=this._points[0],e=this._points[1];if(h=h||this.canvas.contextTop,this._saveAndTransform(h),h.beginPath(),this._points.length===2&&c.x===e.x&&c.y===e.y){var n=this.width/1e3;c=new o.Point(c.x,c.y),e=new o.Point(e.x,e.y),c.x-=n,e.x+=n}for(h.moveTo(c.x,c.y),r=1,l=this._points.length;r<l;r++)this._drawSegment(h,c,e),c=this._points[r],e=this._points[r+1];h.lineTo(c.x,c.y),h.stroke(),h.restore()},convertPointsToSVGPath:function(h){var r=this.width/1e3;return o.util.getSmoothPathFromPoints(h,r)},_isEmptySVGPath:function(h){var r=o.util.joinPath(h);return r==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(h){var r=new o.Path(h,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,r.shadow=new o.Shadow(this.shadow)),r},decimatePoints:function(h,r){if(h.length<=2)return h;var l=this.canvas.getZoom(),c=Math.pow(r/l,2),e,n=h.length-1,t=h[0],s=[t],f;for(e=1;e<n-1;e++)f=Math.pow(t.x-h[e].x,2)+Math.pow(t.y-h[e].y,2),f>=c&&(t=h[e],s.push(t));return s.push(h[n]),s},_finalizeAndAddPath:function(){var h=this.canvas.contextTop;h.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var r=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(r)){this.canvas.requestRenderAll();return}var l=this.createPath(r);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:l}),this.canvas.add(l),this.canvas.requestRenderAll(),l.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:l})}})}(),o.CircleBrush=o.util.createClass(o.BaseBrush,{width:10,initialize:function(h){this.canvas=h,this.points=[]},drawDot:function(h){var r=this.addPoint(h),l=this.canvas.contextTop;this._saveAndTransform(l),this.dot(l,r),l.restore()},dot:function(h,r){h.fillStyle=r.fill,h.beginPath(),h.arc(r.x,r.y,r.radius,0,Math.PI*2,!1),h.closePath(),h.fill()},onMouseDown:function(h){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(h)},_render:function(){var h=this.canvas.contextTop,r,l,c=this.points;for(this._saveAndTransform(h),r=0,l=c.length;r<l;r++)this.dot(h,c[r]);h.restore()},onMouseMove:function(h){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(h)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(h),this._render()):this.drawDot(h))},onMouseUp:function(){var h=this.canvas.renderOnAddRemove,r,l;this.canvas.renderOnAddRemove=!1;var c=[];for(r=0,l=this.points.length;r<l;r++){var e=this.points[r],n=new o.Circle({radius:e.radius,left:e.x,top:e.y,originX:"center",originY:"center",fill:e.fill});this.shadow&&(n.shadow=new o.Shadow(this.shadow)),c.push(n)}var t=new o.Group(c);t.canvas=this.canvas,this.canvas.fire("before:path:created",{path:t}),this.canvas.add(t),this.canvas.fire("path:created",{path:t}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=h,this.canvas.requestRenderAll()},addPoint:function(h){var r=new o.Point(h.x,h.y),l=o.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,c=new o.Color(this.color).setAlpha(o.util.getRandomInt(0,100)/100).toRgba();return r.radius=l,r.fill=c,this.points.push(r),r}}),o.SprayBrush=o.util.createClass(o.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(h){this.canvas=h,this.sprayChunks=[]},onMouseDown:function(h){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(h),this.render(this.sprayChunkPoints)},onMouseMove:function(h){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(h)||(this.addSprayChunk(h),this.render(this.sprayChunkPoints))},onMouseUp:function(){var h=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var r=[],l=0,c=this.sprayChunks.length;l<c;l++)for(var e=this.sprayChunks[l],n=0,t=e.length;n<t;n++){var s=new o.Rect({width:e[n].width,height:e[n].width,left:e[n].x+1,top:e[n].y+1,originX:"center",originY:"center",fill:this.color});r.push(s)}this.optimizeOverlapping&&(r=this._getOptimizedRects(r));var f=new o.Group(r);this.shadow&&f.set("shadow",new o.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:f}),this.canvas.add(f),this.canvas.fire("path:created",{path:f}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=h,this.canvas.requestRenderAll()},_getOptimizedRects:function(h){var r={},l,c,e;for(c=0,e=h.length;c<e;c++)l=h[c].left+""+h[c].top,r[l]||(r[l]=h[c]);var n=[];for(l in r)n.push(r[l]);return n},render:function(h){var r=this.canvas.contextTop,l,c;for(r.fillStyle=this.color,this._saveAndTransform(r),l=0,c=h.length;l<c;l++){var e=h[l];typeof e.opacity<"u"&&(r.globalAlpha=e.opacity),r.fillRect(e.x,e.y,e.width,e.width)}r.restore()},_render:function(){var h=this.canvas.contextTop,r,l;for(h.fillStyle=this.color,this._saveAndTransform(h),r=0,l=this.sprayChunks.length;r<l;r++)this.render(this.sprayChunks[r]);h.restore()},addSprayChunk:function(h){this.sprayChunkPoints=[];var r,l,c,e=this.width/2,n;for(n=0;n<this.density;n++){r=o.util.getRandomInt(h.x-e,h.x+e),l=o.util.getRandomInt(h.y-e,h.y+e),this.dotWidthVariance?c=o.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):c=this.dotWidth;var t=new o.Point(r,l);t.width=c,this.randomOpacity&&(t.opacity=o.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(t)}this.sprayChunks.push(this.sprayChunkPoints)}}),o.PatternBrush=o.util.createClass(o.PencilBrush,{getPatternSrc:function(){var h=20,r=5,l=o.util.createCanvasElement(),c=l.getContext("2d");return l.width=l.height=h+r,c.fillStyle=this.color,c.beginPath(),c.arc(h/2,h/2,h/2,0,Math.PI*2,!1),c.closePath(),c.fill(),l},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(h){return h.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(h){this.callSuper("_setBrushStyles",h),h.strokeStyle=this.getPattern(h)},createPath:function(h){var r=this.callSuper("createPath",h),l=r._getLeftTopCoords().scalarAdd(r.strokeWidth/2);return r.stroke=new o.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-l.x,offsetY:-l.y}),r}}),function(){var h=o.util.getPointer,r=o.util.degreesToRadians,l=o.util.isTouchEvent;o.Canvas=o.util.createClass(o.StaticCanvas,{initialize:function(e,n){n||(n={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(e,n),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=o.PencilBrush&&new o.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var e=this.getActiveObjects(),n,t,s;if(e.length>0&&!this.preserveObjectStacking){t=[],s=[];for(var f=0,i=this._objects.length;f<i;f++)n=this._objects[f],e.indexOf(n)===-1?t.push(n):s.push(n);e.length>1&&(this._activeObject._objects=s),t.push.apply(t,s)}else t=this._objects;return t},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var e=this.contextContainer;return this.renderCanvas(e,this._chooseObjectsToRender()),this},renderTopLayer:function(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()},renderTop:function(){var e=this.contextTop;return this.clearContext(e),this.renderTopLayer(e),this.fire("after:render"),this},_normalizePointer:function(e,n){var t=e.calcTransformMatrix(),s=o.util.invertTransform(t),f=this.restorePointerVpt(n);return o.util.transformPoint(f,s)},isTargetTransparent:function(e,n,t){if(e.shouldCache()&&e._cacheCanvas&&e!==this._activeObject){var s=this._normalizePointer(e,{x:n,y:t}),f=Math.max(e.cacheTranslationX+s.x*e.zoomX,0),i=Math.max(e.cacheTranslationY+s.y*e.zoomY,0),_=o.util.isTransparent(e._cacheContext,Math.round(f),Math.round(i),this.targetFindTolerance);return _}var p=this.contextCache,m=e.selectionBackgroundColor,y=this.viewportTransform;e.selectionBackgroundColor="",this.clearContext(p),p.save(),p.transform(y[0],y[1],y[2],y[3],y[4],y[5]),e.render(p),p.restore(),e.selectionBackgroundColor=m;var _=o.util.isTransparent(p,n,t,this.targetFindTolerance);return _},_isSelectionKeyPressed:function(e){var n=!1;return Array.isArray(this.selectionKey)?n=!!this.selectionKey.find(function(t){return e[t]===!0}):n=e[this.selectionKey],n},_shouldClearSelection:function(e,n){var t=this.getActiveObjects(),s=this._activeObject;return!n||n&&s&&t.length>1&&t.indexOf(n)===-1&&s!==n&&!this._isSelectionKeyPressed(e)||n&&!n.evented||n&&!n.selectable&&s&&s!==n},_shouldCenterTransform:function(e,n,t){if(e){var s;return n==="scale"||n==="scaleX"||n==="scaleY"||n==="resizing"?s=this.centeredScaling||e.centeredScaling:n==="rotate"&&(s=this.centeredRotation||e.centeredRotation),s?!t:t}},_getOriginFromCorner:function(e,n){var t={x:e.originX,y:e.originY};return n==="ml"||n==="tl"||n==="bl"?t.x="right":(n==="mr"||n==="tr"||n==="br")&&(t.x="left"),n==="tl"||n==="mt"||n==="tr"?t.y="bottom":(n==="bl"||n==="mb"||n==="br")&&(t.y="top"),t},_getActionFromCorner:function(e,n,t,s){if(!n||!e)return"drag";var f=s.controls[n];return f.getActionName(t,f,s)},_setupCurrentTransform:function(e,n,t){if(n){var s=this.getPointer(e),f=n.__corner,i=n.controls[f],p=t&&f?i.getActionHandler(e,n,i):o.controlsUtils.dragHandler,m=this._getActionFromCorner(t,f,e,n),y=this._getOriginFromCorner(n,f),_=e[this.centeredKey],T={target:n,action:m,actionHandler:p,corner:f,scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,offsetX:s.x-n.left,offsetY:s.y-n.top,originX:y.x,originY:y.y,ex:s.x,ey:s.y,lastX:s.x,lastY:s.y,theta:r(n.angle),width:n.width*n.scaleX,shiftKey:e.shiftKey,altKey:_,original:o.util.saveObjectTransform(n)};this._shouldCenterTransform(n,m,_)&&(T.originX="center",T.originY="center"),T.original.originX=y.x,T.original.originY=y.y,this._currentTransform=T,this._beforeTransform(e)}},setCursor:function(e){this.upperCanvasEl.style.cursor=e},_drawSelection:function(e){var n=this._groupSelector,t=new o.Point(n.ex,n.ey),s=o.util.transformPoint(t,this.viewportTransform),f=new o.Point(n.ex+n.left,n.ey+n.top),i=o.util.transformPoint(f,this.viewportTransform),p=Math.min(s.x,i.x),m=Math.min(s.y,i.y),y=Math.max(s.x,i.x),_=Math.max(s.y,i.y),T=this.selectionLineWidth/2;this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(p,m,y-p,_-m)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,p+=T,m+=T,y-=T,_-=T,o.Object.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(p,m,y-p,_-m))},findTarget:function(e,n){if(!this.skipTargetFind){var t=!0,s=this.getPointer(e,t),f=this._activeObject,i=this.getActiveObjects(),p,m,y=l(e),_=i.length>1&&!n||i.length===1;if(this.targets=[],_&&f._findTargetCorner(s,y)||i.length>1&&!n&&f===this._searchPossibleTargets([f],s))return f;if(i.length===1&&f===this._searchPossibleTargets([f],s))if(this.preserveObjectStacking)p=f,m=this.targets,this.targets=[];else return f;var T=this._searchPossibleTargets(this._objects,s);return e[this.altSelectionKey]&&T&&p&&T!==p&&(T=p,this.targets=m),T}},_checkTarget:function(e,n,t){if(n&&n.visible&&n.evented&&n.containsPoint(e))if((this.perPixelTargetFind||n.perPixelTargetFind)&&!n.isEditing){var s=this.isTargetTransparent(n,t.x,t.y);if(!s)return!0}else return!0},_searchPossibleTargets:function(e,n){for(var t,s=e.length,f;s--;){var i=e[s],p=i.group?this._normalizePointer(i.group,n):n;if(this._checkTarget(p,i,n)){t=e[s],t.subTargetCheck&&t instanceof o.Group&&(f=this._searchPossibleTargets(t._objects,n),f&&this.targets.push(f));break}}return t},restorePointerVpt:function(e){return o.util.transformPoint(e,o.util.invertTransform(this.viewportTransform))},getPointer:function(e,n){if(this._absolutePointer&&!n)return this._absolutePointer;if(this._pointer&&n)return this._pointer;var t=h(e),s=this.upperCanvasEl,f=s.getBoundingClientRect(),i=f.width||0,p=f.height||0,m;(!i||!p)&&("top"in f&&"bottom"in f&&(p=Math.abs(f.top-f.bottom)),"right"in f&&"left"in f&&(i=Math.abs(f.right-f.left))),this.calcOffset(),t.x=t.x-this._offset.left,t.y=t.y-this._offset.top,n||(t=this.restorePointerVpt(t));var y=this.getRetinaScaling();return y!==1&&(t.x/=y,t.y/=y),i===0||p===0?m={width:1,height:1}:m={width:s.width/i,height:s.height/p},{x:t.x*m.width,y:t.y*m.height}},_createUpperCanvas:function(){var e=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),n=this.lowerCanvasEl,t=this.upperCanvasEl;t?t.className="":(t=this._createCanvasElement(),this.upperCanvasEl=t),o.util.addClass(t,"upper-canvas "+e),this.wrapperEl.appendChild(t),this._copyCanvasStyle(n,t),this._applyCanvasStyle(t),this.contextTop=t.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=o.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),o.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),o.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(e){var n=this.width||e.width,t=this.height||e.height;o.util.setStyle(e,{position:"absolute",width:n+"px",height:t+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),e.width=n,e.height=t,o.util.makeElementUnselectable(e)},_copyCanvasStyle:function(e,n){n.style.cssText=e.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var e=this._activeObject;return e?e.type==="activeSelection"&&e._objects?e._objects.slice(0):[e]:[]},_onObjectRemoved:function(e){e===this._activeObject&&(this.fire("before:selection:cleared",{target:e}),this._discardActiveObject(),this.fire("selection:cleared",{target:e}),e.fire("deselected")),e===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",e)},_fireSelectionEvents:function(e,n){var t=!1,s=this.getActiveObjects(),f=[],i=[];e.forEach(function(p){s.indexOf(p)===-1&&(t=!0,p.fire("deselected",{e:n,target:p}),i.push(p))}),s.forEach(function(p){e.indexOf(p)===-1&&(t=!0,p.fire("selected",{e:n,target:p}),f.push(p))}),e.length>0&&s.length>0?t&&this.fire("selection:updated",{e:n,selected:f,deselected:i}):s.length>0?this.fire("selection:created",{e:n,selected:f}):e.length>0&&this.fire("selection:cleared",{e:n,deselected:i})},setActiveObject:function(e,n){var t=this.getActiveObjects();return this._setActiveObject(e,n),this._fireSelectionEvents(t,n),this},_setActiveObject:function(e,n){return this._activeObject===e||!this._discardActiveObject(n,e)||e.onSelect({e:n})?!1:(this._activeObject=e,!0)},_discardActiveObject:function(e,n){var t=this._activeObject;if(t){if(t.onDeselect({e,object:n}))return!1;this._activeObject=null}return!0},discardActiveObject:function(e){var n=this.getActiveObjects(),t=this.getActiveObject();return n.length&&this.fire("before:selection:cleared",{target:t,e}),this._discardActiveObject(e),this._fireSelectionEvents(n,e),this},dispose:function(){var e=this.wrapperEl;return this.removeListeners(),e.removeChild(this.upperCanvasEl),e.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(n){o.util.cleanUpJsdomNode(this[n]),this[n]=void 0}).bind(this)),e.parentNode&&e.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,o.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(e){var n=this._activeObject;n&&n._renderControls(e)},_toObject:function(e,n,t){var s=this._realizeGroupTransformOnObject(e),f=this.callSuper("_toObject",e,n,t);return this._unwindGroupTransformOnObject(e,s),f},_realizeGroupTransformOnObject:function(e){if(e.group&&e.group.type==="activeSelection"&&this._activeObject===e.group){var n=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],t={};return n.forEach(function(s){t[s]=e[s]}),o.util.addTransformToObject(e,this._activeObject.calcOwnMatrix()),t}else return null},_unwindGroupTransformOnObject:function(e,n){n&&e.set(n)},_setSVGObject:function(e,n,t){var s=this._realizeGroupTransformOnObject(n);this.callSuper("_setSVGObject",e,n,t),this._unwindGroupTransformOnObject(n,s)},setViewportTransform:function(e){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),o.StaticCanvas.prototype.setViewportTransform.call(this,e)}});for(var c in o.StaticCanvas)c!=="prototype"&&(o.Canvas[c]=o.StaticCanvas[c])}(),function(){var h=o.util.addListener,r=o.util.removeListener,l=3,c=2,e=1,n={passive:!1};function t(s,f){return s.button&&s.button===f-1}o.util.object.extend(o.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(h,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(s,f){var i=this.upperCanvasEl,p=this._getEventPrefix();s(o.window,"resize",this._onResize),s(i,p+"down",this._onMouseDown),s(i,p+"move",this._onMouseMove,n),s(i,p+"out",this._onMouseOut),s(i,p+"enter",this._onMouseEnter),s(i,"wheel",this._onMouseWheel),s(i,"contextmenu",this._onContextMenu),s(i,"dblclick",this._onDoubleClick),s(i,"dragover",this._onDragOver),s(i,"dragenter",this._onDragEnter),s(i,"dragleave",this._onDragLeave),s(i,"drop",this._onDrop),this.enablePointerEvents||s(i,"touchstart",this._onTouchStart,n),typeof eventjs<"u"&&f in eventjs&&(eventjs[f](i,"gesture",this._onGesture),eventjs[f](i,"drag",this._onDrag),eventjs[f](i,"orientation",this._onOrientationChange),eventjs[f](i,"shake",this._onShake),eventjs[f](i,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(r,"remove");var s=this._getEventPrefix();r(o.document,s+"up",this._onMouseUp),r(o.document,"touchend",this._onTouchEnd,n),r(o.document,s+"move",this._onMouseMove,n),r(o.document,"touchmove",this._onMouseMove,n)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(s,f){this.__onTransformGesture&&this.__onTransformGesture(s,f)},_onDrag:function(s,f){this.__onDrag&&this.__onDrag(s,f)},_onMouseWheel:function(s){this.__onMouseWheel(s)},_onMouseOut:function(s){var f=this._hoveredTarget;this.fire("mouse:out",{target:f,e:s}),this._hoveredTarget=null,f&&f.fire("mouseout",{e:s});var i=this;this._hoveredTargets.forEach(function(p){i.fire("mouse:out",{target:f,e:s}),p&&f.fire("mouseout",{e:s})}),this._hoveredTargets=[]},_onMouseEnter:function(s){!this._currentTransform&&!this.findTarget(s)&&(this.fire("mouse:over",{target:null,e:s}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(s,f){this.__onOrientationChange&&this.__onOrientationChange(s,f)},_onShake:function(s,f){this.__onShake&&this.__onShake(s,f)},_onLongPress:function(s,f){this.__onLongPress&&this.__onLongPress(s,f)},_onDragOver:function(s){s.preventDefault();var f=this._simpleEventHandler("dragover",s);this._fireEnterLeaveEvents(f,s)},_onDrop:function(s){return this._simpleEventHandler("drop:before",s),this._simpleEventHandler("drop",s)},_onContextMenu:function(s){return this.stopContextMenu&&(s.stopPropagation(),s.preventDefault()),!1},_onDoubleClick:function(s){this._cacheTransformEventData(s),this._handleEvent(s,"dblclick"),this._resetTransformEventData(s)},getPointerId:function(s){var f=s.changedTouches;return f?f[0]&&f[0].identifier:this.enablePointerEvents?s.pointerId:-1},_isMainEvent:function(s){return s.isPrimary===!0?!0:s.isPrimary===!1?!1:s.type==="touchend"&&s.touches.length===0?!0:s.changedTouches?s.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(s){s.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(s)),this.__onMouseDown(s),this._resetTransformEventData();var f=this.upperCanvasEl,i=this._getEventPrefix();h(o.document,"touchend",this._onTouchEnd,n),h(o.document,"touchmove",this._onMouseMove,n),r(f,i+"down",this._onMouseDown)},_onMouseDown:function(s){this.__onMouseDown(s),this._resetTransformEventData();var f=this.upperCanvasEl,i=this._getEventPrefix();r(f,i+"move",this._onMouseMove,n),h(o.document,i+"up",this._onMouseUp),h(o.document,i+"move",this._onMouseMove,n)},_onTouchEnd:function(s){if(!(s.touches.length>0)){this.__onMouseUp(s),this._resetTransformEventData(),this.mainTouchId=null;var f=this._getEventPrefix();r(o.document,"touchend",this._onTouchEnd,n),r(o.document,"touchmove",this._onMouseMove,n);var i=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){h(i.upperCanvasEl,f+"down",i._onMouseDown),i._willAddMouseDown=0},400)}},_onMouseUp:function(s){this.__onMouseUp(s),this._resetTransformEventData();var f=this.upperCanvasEl,i=this._getEventPrefix();this._isMainEvent(s)&&(r(o.document,i+"up",this._onMouseUp),r(o.document,i+"move",this._onMouseMove,n),h(f,i+"move",this._onMouseMove,n))},_onMouseMove:function(s){!this.allowTouchScrolling&&s.preventDefault&&s.preventDefault(),this.__onMouseMove(s)},_onResize:function(){this.calcOffset()},_shouldRender:function(s){var f=this._activeObject;return!!f!=!!s||f&&s&&f!==s?!0:(f&&f.isEditing,!1)},__onMouseUp:function(s){var f,i=this._currentTransform,p=this._groupSelector,m=!1,y=!p||p.left===0&&p.top===0;if(this._cacheTransformEventData(s),f=this._target,this._handleEvent(s,"up:before"),t(s,l)){this.fireRightClick&&this._handleEvent(s,"up",l,y);return}if(t(s,c)){this.fireMiddleClick&&this._handleEvent(s,"up",c,y),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(s);return}if(this._isMainEvent(s)){if(i&&(this._finalizeCurrentTransform(s),m=i.actionPerformed),!y){var _=f===this._activeObject;this._maybeGroupObjects(s),m||(m=this._shouldRender(f)||!_&&f===this._activeObject)}var T,M;if(f){if(T=f._findTargetCorner(this.getPointer(s,!0),o.util.isTouchEvent(s)),f.selectable&&f!==this._activeObject&&f.activeOn==="up")this.setActiveObject(f,s),m=!0;else{var B=f.controls[T],X=B&&B.getMouseUpHandler(s,f,B);X&&(M=this.getPointer(s),X(s,i,M.x,M.y))}f.isMoving=!1}if(i&&(i.target!==f||i.corner!==T)){var st=i.target&&i.target.controls[i.corner],ft=st&&st.getMouseUpHandler(s,f,B);M=M||this.getPointer(s),ft&&ft(s,i,M.x,M.y)}this._setCursorFromEvent(s,f),this._handleEvent(s,"up",e,y),this._groupSelector=null,this._currentTransform=null,f&&(f.__corner=0),m?this.requestRenderAll():y||this.renderTop()}},_simpleEventHandler:function(s,f){var i=this.findTarget(f),p=this.targets,m={e:f,target:i,subTargets:p};if(this.fire(s,m),i&&i.fire(s,m),!p)return i;for(var y=0;y<p.length;y++)p[y].fire(s,m);return i},_handleEvent:function(s,f,i,p){var m=this._target,y=this.targets||[],_={e:s,target:m,subTargets:y,button:i||e,isClick:p||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};f==="up"&&(_.currentTarget=this.findTarget(s),_.currentSubTargets=this.targets),this.fire("mouse:"+f,_),m&&m.fire("mouse"+f,_);for(var T=0;T<y.length;T++)y[T].fire("mouse"+f,_)},_finalizeCurrentTransform:function(s){var f=this._currentTransform,i=f.target,p={e:s,target:i,transform:f,action:f.action};i._scaling&&(i._scaling=!1),i.setCoords(),(f.actionPerformed||this.stateful&&i.hasStateChanged())&&this._fire("modified",p)},_onMouseDownInDrawingMode:function(s){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(s).requestRenderAll();var f=this.getPointer(s);this.freeDrawingBrush.onMouseDown(f,{e:s,pointer:f}),this._handleEvent(s,"down")},_onMouseMoveInDrawingMode:function(s){if(this._isCurrentlyDrawing){var f=this.getPointer(s);this.freeDrawingBrush.onMouseMove(f,{e:s,pointer:f})}this.setCursor(this.freeDrawingCursor),this._handleEvent(s,"move")},_onMouseUpInDrawingMode:function(s){var f=this.getPointer(s);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:s,pointer:f}),this._handleEvent(s,"up")},__onMouseDown:function(s){this._cacheTransformEventData(s),this._handleEvent(s,"down:before");var f=this._target;if(t(s,l)){this.fireRightClick&&this._handleEvent(s,"down",l);return}if(t(s,c)){this.fireMiddleClick&&this._handleEvent(s,"down",c);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(s);return}if(this._isMainEvent(s)&&!this._currentTransform){var i=this._pointer;this._previousPointer=i;var p=this._shouldRender(f),m=this._shouldGroup(s,f);if(this._shouldClearSelection(s,f)?this.discardActiveObject(s):m&&(this._handleGrouping(s,f),f=this._activeObject),this.selection&&(!f||!f.selectable&&!f.isEditing&&f!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),f){var y=f===this._activeObject;f.selectable&&f.activeOn==="down"&&this.setActiveObject(f,s);var _=f._findTargetCorner(this.getPointer(s,!0),o.util.isTouchEvent(s));if(f.__corner=_,f===this._activeObject&&(_||!m)){this._setupCurrentTransform(s,f,y);var T=f.controls[_],i=this.getPointer(s),M=T&&T.getMouseDownHandler(s,f,T);M&&M(s,this._currentTransform,i.x,i.y)}}this._handleEvent(s,"down"),(p||m)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(s){this._resetTransformEventData(),this._pointer=this.getPointer(s,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(s)||null},_beforeTransform:function(s){var f=this._currentTransform;this.stateful&&f.target.saveState(),this.fire("before:transform",{e:s,transform:f})},__onMouseMove:function(s){this._handleEvent(s,"move:before"),this._cacheTransformEventData(s);var f,i;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(s);return}if(this._isMainEvent(s)){var p=this._groupSelector;p?(i=this._absolutePointer,p.left=i.x-p.ex,p.top=i.y-p.ey,this.renderTop()):this._currentTransform?this._transformObject(s):(f=this.findTarget(s)||null,this._setCursorFromEvent(s,f),this._fireOverOutEvents(f,s)),this._handleEvent(s,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(s,f){var i=this._hoveredTarget,p=this._hoveredTargets,m=this.targets,y=Math.max(p.length,m.length);this.fireSyntheticInOutEvents(s,f,{oldTarget:i,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var _=0;_<y;_++)this.fireSyntheticInOutEvents(m[_],f,{oldTarget:p[_],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=s,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(s,f){var i=this._draggedoverTarget,p=this._hoveredTargets,m=this.targets,y=Math.max(p.length,m.length);this.fireSyntheticInOutEvents(s,f,{oldTarget:i,evtOut:"dragleave",evtIn:"dragenter"});for(var _=0;_<y;_++)this.fireSyntheticInOutEvents(m[_],f,{oldTarget:p[_],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=s},fireSyntheticInOutEvents:function(s,f,i){var p,m,y=i.oldTarget,_,T,M=y!==s,B=i.canvasEvtIn,X=i.canvasEvtOut;M&&(p={e:f,target:s,previousTarget:y},m={e:f,target:y,nextTarget:s}),T=s&&M,_=y&&M,_&&(X&&this.fire(X,m),y.fire(i.evtOut,m)),T&&(B&&this.fire(B,p),s.fire(i.evtIn,p))},__onMouseWheel:function(s){this._cacheTransformEventData(s),this._handleEvent(s,"wheel"),this._resetTransformEventData()},_transformObject:function(s){var f=this.getPointer(s),i=this._currentTransform;i.reset=!1,i.shiftKey=s.shiftKey,i.altKey=s[this.centeredKey],this._performTransformAction(s,i,f),i.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(s,f,i){var p=i.x,m=i.y,y=f.action,_=!1,T=f.actionHandler;T&&(_=T(s,f,p,m)),y==="drag"&&_&&(f.target.isMoving=!0,this.setCursor(f.target.moveCursor||this.moveCursor)),f.actionPerformed=f.actionPerformed||_},_fire:o.controlsUtils.fireEvent,_setCursorFromEvent:function(s,f){if(!f)return this.setCursor(this.defaultCursor),!1;var i=f.hoverCursor||this.hoverCursor,p=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,m=(!p||!p.contains(f))&&f._findTargetCorner(this.getPointer(s,!0));m?this.setCursor(this.getCornerCursor(m,f,s)):(f.subTargetCheck&&this.targets.concat().reverse().map(function(y){i=y.hoverCursor||i}),this.setCursor(i))},getCornerCursor:function(s,f,i){var p=f.controls[s];return p.cursorStyleHandler(i,p,f)}})}(),function(){var h=Math.min,r=Math.max;o.util.object.extend(o.Canvas.prototype,{_shouldGroup:function(l,c){var e=this._activeObject;return e&&this._isSelectionKeyPressed(l)&&c&&c.selectable&&this.selection&&(e!==c||e.type==="activeSelection")&&!c.onSelect({e:l})},_handleGrouping:function(l,c){var e=this._activeObject;e.__corner||c===e&&(c=this.findTarget(l,!0),!c||!c.selectable)||(e&&e.type==="activeSelection"?this._updateActiveSelection(c,l):this._createActiveSelection(c,l))},_updateActiveSelection:function(l,c){var e=this._activeObject,n=e._objects.slice(0);e.contains(l)?(e.removeWithUpdate(l),this._hoveredTarget=l,this._hoveredTargets=this.targets.concat(),e.size()===1&&this._setActiveObject(e.item(0),c)):(e.addWithUpdate(l),this._hoveredTarget=e,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(n,c)},_createActiveSelection:function(l,c){var e=this.getActiveObjects(),n=this._createGroup(l);this._hoveredTarget=n,this._setActiveObject(n,c),this._fireSelectionEvents(e,c)},_createGroup:function(l){var c=this._objects,e=c.indexOf(this._activeObject)<c.indexOf(l),n=e?[this._activeObject,l]:[l,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new o.ActiveSelection(n,{canvas:this})},_groupSelectedObjects:function(l){var c=this._collectObjects(l),e;c.length===1?this.setActiveObject(c[0],l):c.length>1&&(e=new o.ActiveSelection(c.reverse(),{canvas:this}),this.setActiveObject(e,l))},_collectObjects:function(l){for(var c=[],e,n=this._groupSelector.ex,t=this._groupSelector.ey,s=n+this._groupSelector.left,f=t+this._groupSelector.top,i=new o.Point(h(n,s),h(t,f)),p=new o.Point(r(n,s),r(t,f)),m=!this.selectionFullyContained,y=n===s&&t===f,_=this._objects.length;_--&&(e=this._objects[_],!(!(!e||!e.selectable||!e.visible)&&(m&&e.intersectsWithRect(i,p,!0)||e.isContainedWithinRect(i,p,!0)||m&&e.containsPoint(i,null,!0)||m&&e.containsPoint(p,null,!0))&&(c.push(e),y))););return c.length>1&&(c=c.filter(function(T){return!T.onSelect({e:l})})),c},_maybeGroupObjects:function(l){this.selection&&this._groupSelector&&this._groupSelectedObjects(l),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){o.util.object.extend(o.StaticCanvas.prototype,{toDataURL:function(h){h||(h={});var r=h.format||"png",l=h.quality||1,c=(h.multiplier||1)*(h.enableRetinaScaling?this.getRetinaScaling():1),e=this.toCanvasElement(c,h);return o.util.toDataURL(e,r,l)},toCanvasElement:function(h,r){h=h||1,r=r||{};var l=(r.width||this.width)*h,c=(r.height||this.height)*h,e=this.getZoom(),n=this.width,t=this.height,s=e*h,f=this.viewportTransform,i=(f[4]-(r.left||0))*h,p=(f[5]-(r.top||0))*h,m=this.interactive,y=[s,0,0,s,i,p],_=this.enableRetinaScaling,T=o.util.createCanvasElement(),M=this.contextTop;return T.width=l,T.height=c,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=y,this.width=l,this.height=c,this.calcViewportBoundaries(),this.renderCanvas(T.getContext("2d"),this._objects),this.viewportTransform=f,this.width=n,this.height=t,this.calcViewportBoundaries(),this.interactive=m,this.enableRetinaScaling=_,this.contextTop=M,T}})}(),o.util.object.extend(o.StaticCanvas.prototype,{loadFromJSON:function(h,r,l){if(h){var c=typeof h=="string"?JSON.parse(h):o.util.object.clone(h),e=this,n=c.clipPath,t=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete c.clipPath,this._enlivenObjects(c.objects,function(s){e.clear(),e._setBgOverlay(c,function(){n?e._enlivenObjects([n],function(f){e.clipPath=f[0],e.__setupCanvas.call(e,c,s,t,r)}):e.__setupCanvas.call(e,c,s,t,r)})},l),this}},__setupCanvas:function(h,r,l,c){var e=this;r.forEach(function(n,t){e.insertAt(n,t)}),this.renderOnAddRemove=l,delete h.objects,delete h.backgroundImage,delete h.overlayImage,delete h.background,delete h.overlay,this._setOptions(h),this.renderAll(),c&&c()},_setBgOverlay:function(h,r){var l={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!h.backgroundImage&&!h.overlayImage&&!h.background&&!h.overlay){r&&r();return}var c=function(){l.backgroundImage&&l.overlayImage&&l.backgroundColor&&l.overlayColor&&r&&r()};this.__setBgOverlay("backgroundImage",h.backgroundImage,l,c),this.__setBgOverlay("overlayImage",h.overlayImage,l,c),this.__setBgOverlay("backgroundColor",h.background,l,c),this.__setBgOverlay("overlayColor",h.overlay,l,c)},__setBgOverlay:function(h,r,l,c){var e=this;if(!r){l[h]=!0,c&&c();return}h==="backgroundImage"||h==="overlayImage"?o.util.enlivenObjects([r],function(n){e[h]=n[0],l[h]=!0,c&&c()}):this["set"+o.util.string.capitalize(h,!0)](r,function(){l[h]=!0,c&&c()})},_enlivenObjects:function(h,r,l){if(!h||h.length===0){r&&r([]);return}o.util.enlivenObjects(h,function(c){r&&r(c)},null,l)},_toDataURL:function(h,r){this.clone(function(l){r(l.toDataURL(h))})},_toDataURLWithMultiplier:function(h,r,l){this.clone(function(c){l(c.toDataURLWithMultiplier(h,r))})},clone:function(h,r){var l=JSON.stringify(this.toJSON(r));this.cloneWithoutData(function(c){c.loadFromJSON(l,function(){h&&h(c)})})},cloneWithoutData:function(h){var r=o.util.createCanvasElement();r.width=this.width,r.height=this.height;var l=new o.Canvas(r);this.backgroundImage?(l.setBackgroundImage(this.backgroundImage.src,function(){l.renderAll(),h&&h(l)}),l.backgroundImageOpacity=this.backgroundImageOpacity,l.backgroundImageStretch=this.backgroundImageStretch):h&&h(l)}}),function(h){var r=h.fabric||(h.fabric={}),l=r.util.object.extend,c=r.util.object.clone,e=r.util.toFixed,n=r.util.string.capitalize,t=r.util.degreesToRadians,s=!r.isLikelyNode,f=2;r.Object||(r.Object=r.util.createClass(r.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:s,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(i){i&&this.setOptions(i)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=r.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(i){var p=r.perfLimitSizeTotal,m=i.width,y=i.height,_=r.maxCacheSideLimit,T=r.minCacheSideLimit;if(m<=_&&y<=_&&m*y<=p)return m<T&&(i.width=T),y<T&&(i.height=T),i;var M=m/y,B=r.util.limitDimsByArea(M,p),X=r.util.capValue,st=X(T,B.x,_),ft=X(T,B.y,_);return m>st&&(i.zoomX/=m/st,i.width=st,i.capped=!0),y>ft&&(i.zoomY/=y/ft,i.height=ft,i.capped=!0),i},_getCacheCanvasDimensions:function(){var i=this.getTotalObjectScaling(),p=this._getTransformedDimensions(0,0),m=p.x*i.scaleX/this.scaleX,y=p.y*i.scaleY/this.scaleY;return{width:m+f,height:y+f,zoomX:i.scaleX,zoomY:i.scaleY,x:m,y}},_updateCacheCanvas:function(){var i=this.canvas;if(this.noScaleCache&&i&&i._currentTransform){var p=i._currentTransform.target,m=i._currentTransform.action;if(this===p&&m.slice&&m.slice(0,5)==="scale")return!1}var y=this._cacheCanvas,_=this._limitCacheSize(this._getCacheCanvasDimensions()),T=r.minCacheSideLimit,M=_.width,B=_.height,X,st,ft=_.zoomX,vt=_.zoomY,xt=M!==this.cacheWidth||B!==this.cacheHeight,St=this.zoomX!==ft||this.zoomY!==vt,_t=xt||St,ot=0,pt=0,wt=!1;if(xt){var bt=this._cacheCanvas.width,k=this._cacheCanvas.height,U=M>bt||B>k,N=(M<bt*.9||B<k*.9)&&bt>T&&k>T;wt=U||N,U&&!_.capped&&(M>T||B>T)&&(ot=M*.1,pt=B*.1)}return this instanceof r.Text&&this.path&&(_t=!0,wt=!0,ot+=this.getHeightOfLine(0)*this.zoomX,pt+=this.getHeightOfLine(0)*this.zoomY),_t?(wt?(y.width=Math.ceil(M+ot),y.height=Math.ceil(B+pt)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,y.width,y.height)),X=_.x/2,st=_.y/2,this.cacheTranslationX=Math.round(y.width/2-X)+X,this.cacheTranslationY=Math.round(y.height/2-st)+st,this.cacheWidth=M,this.cacheHeight=B,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(ft,vt),this.zoomX=ft,this.zoomY=vt,!0):!1},setOptions:function(i){this._setOptions(i),this._initGradient(i.fill,"fill"),this._initGradient(i.stroke,"stroke"),this._initPattern(i.fill,"fill"),this._initPattern(i.stroke,"stroke")},transform:function(i){var p=this.group&&!this.group._transformDone||this.group&&this.canvas&&i===this.canvas.contextTop,m=this.calcTransformMatrix(!p);i.transform(m[0],m[1],m[2],m[3],m[4],m[5])},toObject:function(i){var p=r.Object.NUM_FRACTION_DIGITS,m={type:this.type,version:r.version,originX:this.originX,originY:this.originY,left:e(this.left,p),top:e(this.top,p),width:e(this.width,p),height:e(this.height,p),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:e(this.strokeWidth,p),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:e(this.strokeMiterLimit,p),scaleX:e(this.scaleX,p),scaleY:e(this.scaleY,p),angle:e(this.angle,p),flipX:this.flipX,flipY:this.flipY,opacity:e(this.opacity,p),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:e(this.skewX,p),skewY:e(this.skewY,p)};return this.clipPath&&!this.clipPath.excludeFromExport&&(m.clipPath=this.clipPath.toObject(i),m.clipPath.inverted=this.clipPath.inverted,m.clipPath.absolutePositioned=this.clipPath.absolutePositioned),r.util.populateWithProperties(this,m,i),this.includeDefaultValues||(m=this._removeDefaultValues(m)),m},toDatalessObject:function(i){return this.toObject(i)},_removeDefaultValues:function(i){var p=r.util.getKlass(i.type).prototype,m=p.stateProperties;return m.forEach(function(y){y==="left"||y==="top"||(i[y]===p[y]&&delete i[y],Array.isArray(i[y])&&Array.isArray(p[y])&&i[y].length===0&&p[y].length===0&&delete i[y])}),i},toString:function(){return"#<fabric."+n(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var i=r.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(i.scaleX),scaleY:Math.abs(i.scaleY)}},getTotalObjectScaling:function(){var i=this.getObjectScaling(),p=i.scaleX,m=i.scaleY;if(this.canvas){var y=this.canvas.getZoom(),_=this.canvas.getRetinaScaling();p*=y*_,m*=y*_}return{scaleX:p,scaleY:m}},getObjectOpacity:function(){var i=this.opacity;return this.group&&(i*=this.group.getObjectOpacity()),i},_set:function(i,p){var m=i==="scaleX"||i==="scaleY",y=this[i]!==p,_=!1;return m&&(p=this._constrainScale(p)),i==="scaleX"&&p<0?(this.flipX=!this.flipX,p*=-1):i==="scaleY"&&p<0?(this.flipY=!this.flipY,p*=-1):i==="shadow"&&p&&!(p instanceof r.Shadow)?p=new r.Shadow(p):i==="dirty"&&this.group&&this.group.set("dirty",p),this[i]=p,y&&(_=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(i)>-1?(this.dirty=!0,_&&this.group.set("dirty",!0)):_&&this.stateProperties.indexOf(i)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:r.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(i){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(i.save(),this._setupCompositeOperation(i),this.drawSelectionBackground(i),this.transform(i),this._setOpacity(i),this._setShadow(i,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(i)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(i),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),i.restore())},renderCache:function(i){i=i||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,i.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(i,p){if(i.save(),p.inverted?i.globalCompositeOperation="destination-out":i.globalCompositeOperation="destination-in",p.absolutePositioned){var m=r.util.invertTransform(this.calcTransformMatrix());i.transform(m[0],m[1],m[2],m[3],m[4],m[5])}p.transform(i),i.scale(1/p.zoomX,1/p.zoomY),i.drawImage(p._cacheCanvas,-p.cacheTranslationX,-p.cacheTranslationY),i.restore()},drawObject:function(i,p){var m=this.fill,y=this.stroke;p?(this.fill="black",this.stroke="",this._setClippingProperties(i)):this._renderBackground(i),this._render(i),this._drawClipPath(i,this.clipPath),this.fill=m,this.stroke=y},_drawClipPath:function(i,p){p&&(p.canvas=this.canvas,p.shouldCache(),p._transformDone=!0,p.renderCache({forClipping:!0}),this.drawClipPathOnCache(i,p))},drawCacheOnCanvas:function(i){i.scale(1/this.zoomX,1/this.zoomY),i.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(i){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!i&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!i){var p=this.cacheWidth/this.zoomX,m=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-p/2,-m/2,p,m)}return!0}return!1},_renderBackground:function(i){if(this.backgroundColor){var p=this._getNonTransformedDimensions();i.fillStyle=this.backgroundColor,i.fillRect(-p.x/2,-p.y/2,p.x,p.y),this._removeShadow(i)}},_setOpacity:function(i){this.group&&!this.group._transformDone?i.globalAlpha=this.getObjectOpacity():i.globalAlpha*=this.opacity},_setStrokeStyles:function(i,p){var m=p.stroke;m&&(i.lineWidth=p.strokeWidth,i.lineCap=p.strokeLineCap,i.lineDashOffset=p.strokeDashOffset,i.lineJoin=p.strokeLineJoin,i.miterLimit=p.strokeMiterLimit,m.toLive?m.gradientUnits==="percentage"||m.gradientTransform||m.patternTransform?this._applyPatternForTransformedGradient(i,m):(i.strokeStyle=m.toLive(i,this),this._applyPatternGradientTransform(i,m)):i.strokeStyle=p.stroke)},_setFillStyles:function(i,p){var m=p.fill;m&&(m.toLive?(i.fillStyle=m.toLive(i,this),this._applyPatternGradientTransform(i,p.fill)):i.fillStyle=m)},_setClippingProperties:function(i){i.globalAlpha=1,i.strokeStyle="transparent",i.fillStyle="#000000"},_setLineDash:function(i,p){!p||p.length===0||(1&p.length&&p.push.apply(p,p),i.setLineDash(p))},_renderControls:function(i,p){var m=this.getViewportTransform(),y=this.calcTransformMatrix(),_,T,M;p=p||{},T=typeof p.hasBorders<"u"?p.hasBorders:this.hasBorders,M=typeof p.hasControls<"u"?p.hasControls:this.hasControls,y=r.util.multiplyTransformMatrices(m,y),_=r.util.qrDecompose(y),i.save(),i.translate(_.translateX,_.translateY),i.lineWidth=1*this.borderScaleFactor,this.group||(i.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(_.angle-=180),i.rotate(t(this.group?_.angle:this.angle)),p.forActiveSelection||this.group?T&&this.drawBordersInGroup(i,_,p):T&&this.drawBorders(i,p),M&&this.drawControls(i,p),i.restore()},_setShadow:function(i){if(this.shadow){var p=this.shadow,m=this.canvas,y,_=m&&m.viewportTransform[0]||1,T=m&&m.viewportTransform[3]||1;p.nonScaling?y={scaleX:1,scaleY:1}:y=this.getObjectScaling(),m&&m._isRetinaScaling()&&(_*=r.devicePixelRatio,T*=r.devicePixelRatio),i.shadowColor=p.color,i.shadowBlur=p.blur*r.browserShadowBlurConstant*(_+T)*(y.scaleX+y.scaleY)/4,i.shadowOffsetX=p.offsetX*_*y.scaleX,i.shadowOffsetY=p.offsetY*T*y.scaleY}},_removeShadow:function(i){this.shadow&&(i.shadowColor="",i.shadowBlur=i.shadowOffsetX=i.shadowOffsetY=0)},_applyPatternGradientTransform:function(i,p){if(!p||!p.toLive)return{offsetX:0,offsetY:0};var m=p.gradientTransform||p.patternTransform,y=-this.width/2+p.offsetX||0,_=-this.height/2+p.offsetY||0;return p.gradientUnits==="percentage"?i.transform(this.width,0,0,this.height,y,_):i.transform(1,0,0,1,y,_),m&&i.transform(m[0],m[1],m[2],m[3],m[4],m[5]),{offsetX:y,offsetY:_}},_renderPaintInOrder:function(i){this.paintFirst==="stroke"?(this._renderStroke(i),this._renderFill(i)):(this._renderFill(i),this._renderStroke(i))},_render:function(){},_renderFill:function(i){this.fill&&(i.save(),this._setFillStyles(i,this),this.fillRule==="evenodd"?i.fill("evenodd"):i.fill(),i.restore())},_renderStroke:function(i){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(i),i.save(),this.strokeUniform&&this.group){var p=this.getObjectScaling();i.scale(1/p.scaleX,1/p.scaleY)}else this.strokeUniform&&i.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(i,this.strokeDashArray),this._setStrokeStyles(i,this),i.stroke(),i.restore()}},_applyPatternForTransformedGradient:function(i,p){var m=this._limitCacheSize(this._getCacheCanvasDimensions()),y=r.util.createCanvasElement(),_,T=this.canvas.getRetinaScaling(),M=m.x/this.scaleX/T,B=m.y/this.scaleY/T;y.width=M,y.height=B,_=y.getContext("2d"),_.beginPath(),_.moveTo(0,0),_.lineTo(M,0),_.lineTo(M,B),_.lineTo(0,B),_.closePath(),_.translate(M/2,B/2),_.scale(m.zoomX/this.scaleX/T,m.zoomY/this.scaleY/T),this._applyPatternGradientTransform(_,p),_.fillStyle=p.toLive(i),_.fill(),i.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),i.scale(T*this.scaleX/m.zoomX,T*this.scaleY/m.zoomY),i.strokeStyle=_.createPattern(y,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var i=r.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",i.scaleX),this.set("scaleY",i.scaleY),this.angle=i.angle,this.skewX=i.skewX,this.skewY=0}},_removeTransformMatrix:function(i){var p=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),p=r.util.transformPoint(p,this.transformMatrix)),this.transformMatrix=null,i&&(this.scaleX*=i.scaleX,this.scaleY*=i.scaleY,this.cropX=i.cropX,this.cropY=i.cropY,p.x+=i.offsetLeft,p.y+=i.offsetTop,this.width=i.width,this.height=i.height),this.setPositionByOrigin(p,"center","center")},clone:function(i,p){var m=this.toObject(p);this.constructor.fromObject?this.constructor.fromObject(m,i):r.Object._fromObject("Object",m,i)},cloneAsImage:function(i,p){var m=this.toCanvasElement(p);return i&&i(new r.Image(m)),this},toCanvasElement:function(i){i||(i={});var p=r.util,m=p.saveObjectTransform(this),y=this.group,_=this.shadow,T=Math.abs,M=(i.multiplier||1)*(i.enableRetinaScaling?r.devicePixelRatio:1);delete this.group,i.withoutTransform&&p.resetObjectTransform(this),i.withoutShadow&&(this.shadow=null);var B=r.util.createCanvasElement(),X=this.getBoundingRect(!0,!0),st=this.shadow,ft,vt={x:0,y:0},xt,St,_t;st&&(xt=st.blur,st.nonScaling?ft={scaleX:1,scaleY:1}:ft=this.getObjectScaling(),vt.x=2*Math.round(T(st.offsetX)+xt)*T(ft.scaleX),vt.y=2*Math.round(T(st.offsetY)+xt)*T(ft.scaleY)),St=X.width+vt.x,_t=X.height+vt.y,B.width=Math.ceil(St),B.height=Math.ceil(_t);var ot=new r.StaticCanvas(B,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});i.format==="jpeg"&&(ot.backgroundColor="#fff"),this.setPositionByOrigin(new r.Point(ot.width/2,ot.height/2),"center","center");var pt=this.canvas;ot.add(this);var wt=ot.toCanvasElement(M||1,i);return this.shadow=_,this.set("canvas",pt),y&&(this.group=y),this.set(m).setCoords(),ot._objects=[],ot.dispose(),ot=null,wt},toDataURL:function(i){return i||(i={}),r.util.toDataURL(this.toCanvasElement(i),i.format||"png",i.quality||1)},isType:function(i){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===i},complexity:function(){return 1},toJSON:function(i){return this.toObject(i)},rotate:function(i){var p=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return p&&this._setOriginToCenter(),this.set("angle",i),p&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(i,p){p=p||this.canvas.getPointer(i);var m=new r.Point(p.x,p.y),y=this._getLeftTopCoords();return this.angle&&(m=r.util.rotatePoint(m,y,t(-this.angle))),{x:m.x-y.x,y:m.y-y.y}},_setupCompositeOperation:function(i){this.globalCompositeOperation&&(i.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){r.runningAnimations&&r.runningAnimations.cancelByTarget(this)}}),r.util.createAccessors&&r.util.createAccessors(r.Object),l(r.Object.prototype,r.Observable),r.Object.NUM_FRACTION_DIGITS=2,r.Object.ENLIVEN_PROPS=["clipPath"],r.Object._fromObject=function(i,p,m,y){var _=r[i];p=c(p,!0),r.util.enlivenPatterns([p.fill,p.stroke],function(T){typeof T[0]<"u"&&(p.fill=T[0]),typeof T[1]<"u"&&(p.stroke=T[1]),r.util.enlivenObjectEnlivables(p,p,function(){var M=y?new _(p[y],p):new _(p);m&&m(M)})})},r.Object.__uid=0)}(u),function(){var h=o.util.degreesToRadians,r={left:-.5,center:0,right:.5},l={top:-.5,center:0,bottom:.5};o.util.object.extend(o.Object.prototype,{translateToGivenOrigin:function(c,e,n,t,s){var f=c.x,i=c.y,p,m,y;return typeof e=="string"?e=r[e]:e-=.5,typeof t=="string"?t=r[t]:t-=.5,p=t-e,typeof n=="string"?n=l[n]:n-=.5,typeof s=="string"?s=l[s]:s-=.5,m=s-n,(p||m)&&(y=this._getTransformedDimensions(),f=c.x+p*y.x,i=c.y+m*y.y),new o.Point(f,i)},translateToCenterPoint:function(c,e,n){var t=this.translateToGivenOrigin(c,e,n,"center","center");return this.angle?o.util.rotatePoint(t,c,h(this.angle)):t},translateToOriginPoint:function(c,e,n){var t=this.translateToGivenOrigin(c,"center","center",e,n);return this.angle?o.util.rotatePoint(t,c,h(this.angle)):t},getCenterPoint:function(){var c=new o.Point(this.left,this.top);return this.translateToCenterPoint(c,this.originX,this.originY)},getPointByOrigin:function(c,e){var n=this.getCenterPoint();return this.translateToOriginPoint(n,c,e)},toLocalPoint:function(c,e,n){var t=this.getCenterPoint(),s,f;return typeof e<"u"&&typeof n<"u"?s=this.translateToGivenOrigin(t,"center","center",e,n):s=new o.Point(this.left,this.top),f=new o.Point(c.x,c.y),this.angle&&(f=o.util.rotatePoint(f,t,-h(this.angle))),f.subtractEquals(s)},setPositionByOrigin:function(c,e,n){var t=this.translateToCenterPoint(c,e,n),s=this.translateToOriginPoint(t,this.originX,this.originY);this.set("left",s.x),this.set("top",s.y)},adjustPosition:function(c){var e=h(this.angle),n=this.getScaledWidth(),t=o.util.cos(e)*n,s=o.util.sin(e)*n,f,i;typeof this.originX=="string"?f=r[this.originX]:f=this.originX-.5,typeof c=="string"?i=r[c]:i=c-.5,this.left+=t*(i-f),this.top+=s*(i-f),this.setCoords(),this.originX=c},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var c=this.getCenterPoint();this.originX="center",this.originY="center",this.left=c.x,this.top=c.y},_resetOrigin:function(){var c=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=c.x,this.top=c.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function h(n){return[new o.Point(n.tl.x,n.tl.y),new o.Point(n.tr.x,n.tr.y),new o.Point(n.br.x,n.br.y),new o.Point(n.bl.x,n.bl.y)]}var r=o.util,l=r.degreesToRadians,c=r.multiplyTransformMatrices,e=r.transformPoint;r.object.extend(o.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(n,t){return t?n?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),n?this.aCoords:this.lineCoords)},getCoords:function(n,t){return h(this._getCoords(n,t))},intersectsWithRect:function(n,t,s,f){var i=this.getCoords(s,f),p=o.Intersection.intersectPolygonRectangle(i,n,t);return p.status==="Intersection"},intersectsWithObject:function(n,t,s){var f=o.Intersection.intersectPolygonPolygon(this.getCoords(t,s),n.getCoords(t,s));return f.status==="Intersection"||n.isContainedWithinObject(this,t,s)||this.isContainedWithinObject(n,t,s)},isContainedWithinObject:function(n,t,s){for(var f=this.getCoords(t,s),i=t?n.aCoords:n.lineCoords,p=0,m=n._getImageLines(i);p<4;p++)if(!n.containsPoint(f[p],m))return!1;return!0},isContainedWithinRect:function(n,t,s,f){var i=this.getBoundingRect(s,f);return i.left>=n.x&&i.left+i.width<=t.x&&i.top>=n.y&&i.top+i.height<=t.y},containsPoint:function(n,p,s,f){var i=this._getCoords(s,f),p=p||this._getImageLines(i),m=this._findCrossPoints(n,p);return m!==0&&m%2===1},isOnScreen:function(n){if(!this.canvas)return!1;var t=this.canvas.vptCoords.tl,s=this.canvas.vptCoords.br,f=this.getCoords(!0,n);return f.some(function(i){return i.x<=s.x&&i.x>=t.x&&i.y<=s.y&&i.y>=t.y})||this.intersectsWithRect(t,s,!0,n)?!0:this._containsCenterOfCanvas(t,s,n)},_containsCenterOfCanvas:function(n,t,s){var f={x:(n.x+t.x)/2,y:(n.y+t.y)/2};return!!this.containsPoint(f,null,!0,s)},isPartiallyOnScreen:function(n){if(!this.canvas)return!1;var t=this.canvas.vptCoords.tl,s=this.canvas.vptCoords.br;if(this.intersectsWithRect(t,s,!0,n))return!0;var f=this.getCoords(!0,n).every(function(i){return(i.x>=s.x||i.x<=t.x)&&(i.y>=s.y||i.y<=t.y)});return f&&this._containsCenterOfCanvas(t,s,n)},_getImageLines:function(n){var t={topline:{o:n.tl,d:n.tr},rightline:{o:n.tr,d:n.br},bottomline:{o:n.br,d:n.bl},leftline:{o:n.bl,d:n.tl}};return t},_findCrossPoints:function(n,t){var s,f,i,p,m,y=0,_;for(var T in t)if(_=t[T],!(_.o.y<n.y&&_.d.y<n.y)&&!(_.o.y>=n.y&&_.d.y>=n.y)&&(_.o.x===_.d.x&&_.o.x>=n.x?m=_.o.x:(s=0,f=(_.d.y-_.o.y)/(_.d.x-_.o.x),i=n.y-s*n.x,p=_.o.y-f*_.o.x,m=-(i-p)/(s-f)),m>=n.x&&(y+=1),y===2))break;return y},getBoundingRect:function(n,t){var s=this.getCoords(n,t);return r.makeBoundingBoxFromPoints(s)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(n){return Math.abs(n)<this.minScaleLimit?n<0?-this.minScaleLimit:this.minScaleLimit:n===0?1e-4:n},scale:function(n){return this._set("scaleX",n),this._set("scaleY",n),this.setCoords()},scaleToWidth:function(n,t){var s=this.getBoundingRect(t).width/this.getScaledWidth();return this.scale(n/this.width/s)},scaleToHeight:function(n,t){var s=this.getBoundingRect(t).height/this.getScaledHeight();return this.scale(n/this.height/s)},calcLineCoords:function(){var n=this.getViewportTransform(),t=this.padding,s=l(this.angle),f=r.cos(s),i=r.sin(s),p=f*t,m=i*t,y=p+m,_=p-m,T=this.calcACoords(),M={tl:e(T.tl,n),tr:e(T.tr,n),bl:e(T.bl,n),br:e(T.br,n)};return t&&(M.tl.x-=_,M.tl.y-=y,M.tr.x+=y,M.tr.y-=_,M.bl.x-=y,M.bl.y+=_,M.br.x+=_,M.br.y+=y),M},calcOCoords:function(){var n=this._calcRotateMatrix(),t=this._calcTranslateMatrix(),s=this.getViewportTransform(),f=c(s,t),i=c(f,n),i=c(i,[1/s[0],0,0,1/s[3],0,0]),p=this._calculateCurrentDimensions(),m={};return this.forEachControl(function(y,_,T){m[_]=y.positionHandler(p,i,T)}),m},calcACoords:function(){var n=this._calcRotateMatrix(),t=this._calcTranslateMatrix(),s=c(t,n),f=this._getTransformedDimensions(),i=f.x/2,p=f.y/2;return{tl:e({x:-i,y:-p},s),tr:e({x:i,y:-p},s),bl:e({x:-i,y:p},s),br:e({x:i,y:p},s)}},setCoords:function(n){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),n?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return r.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var n=this.getCenterPoint();return[1,0,0,1,n.x,n.y]},transformMatrixKey:function(n){var t="_",s="";return!n&&this.group&&(s=this.group.transformMatrixKey(n)+t),s+this.top+t+this.left+t+this.scaleX+t+this.scaleY+t+this.skewX+t+this.skewY+t+this.angle+t+this.originX+t+this.originY+t+this.width+t+this.height+t+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(n){var t=this.calcOwnMatrix();if(n||!this.group)return t;var s=this.transformMatrixKey(n),f=this.matrixCache||(this.matrixCache={});return f.key===s?f.value:(this.group&&(t=c(this.group.calcTransformMatrix(!1),t)),f.key=s,f.value=t,t)},calcOwnMatrix:function(){var n=this.transformMatrixKey(!0),t=this.ownMatrixCache||(this.ownMatrixCache={});if(t.key===n)return t.value;var s=this._calcTranslateMatrix(),f={angle:this.angle,translateX:s[4],translateY:s[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return t.key=n,t.value=r.composeMatrix(f),t.value},_getNonTransformedDimensions:function(){var n=this.strokeWidth,t=this.width+n,s=this.height+n;return{x:t,y:s}},_getTransformedDimensions:function(n,t){typeof n>"u"&&(n=this.skewX),typeof t>"u"&&(t=this.skewY);var s,f,i,p=n===0&&t===0;if(this.strokeUniform?(f=this.width,i=this.height):(s=this._getNonTransformedDimensions(),f=s.x,i=s.y),p)return this._finalizeDimensions(f*this.scaleX,i*this.scaleY);var m=r.sizeAfterTransform(f,i,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:n,skewY:t});return this._finalizeDimensions(m.x,m.y)},_finalizeDimensions:function(n,t){return this.strokeUniform?{x:n+this.strokeWidth,y:t+this.strokeWidth}:{x:n,y:t}},_calculateCurrentDimensions:function(){var n=this.getViewportTransform(),t=this._getTransformedDimensions(),s=e(t,n,!0);return s.scalarAdd(2*this.padding)}})}(),o.util.object.extend(o.Object.prototype,{sendToBack:function(){return this.group?o.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?o.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(h){return this.group?o.StaticCanvas.prototype.sendBackwards.call(this.group,this,h):this.canvas&&this.canvas.sendBackwards(this,h),this},bringForward:function(h){return this.group?o.StaticCanvas.prototype.bringForward.call(this.group,this,h):this.canvas&&this.canvas.bringForward(this,h),this},moveTo:function(h){return this.group&&this.group.type!=="activeSelection"?o.StaticCanvas.prototype.moveTo.call(this.group,this,h):this.canvas&&this.canvas.moveTo(this,h),this}}),function(){function h(l,c){if(c){if(c.toLive)return l+": url(#SVGID_"+c.id+"); ";var e=new o.Color(c),n=l+": "+e.toRgb()+"; ",t=e.getAlpha();return t!==1&&(n+=l+"-opacity: "+t.toString()+"; "),n}else return l+": none; "}var r=o.util.toFixed;o.util.object.extend(o.Object.prototype,{getSvgStyles:function(l){var c=this.fillRule?this.fillRule:"nonzero",e=this.strokeWidth?this.strokeWidth:"0",n=this.strokeDashArray?this.strokeDashArray.join(" "):"none",t=this.strokeDashOffset?this.strokeDashOffset:"0",s=this.strokeLineCap?this.strokeLineCap:"butt",f=this.strokeLineJoin?this.strokeLineJoin:"miter",i=this.strokeMiterLimit?this.strokeMiterLimit:"4",p=typeof this.opacity<"u"?this.opacity:"1",m=this.visible?"":" visibility: hidden;",y=l?"":this.getSvgFilter(),_=h("fill",this.fill),T=h("stroke",this.stroke);return[T,"stroke-width: ",e,"; ","stroke-dasharray: ",n,"; ","stroke-linecap: ",s,"; ","stroke-dashoffset: ",t,"; ","stroke-linejoin: ",f,"; ","stroke-miterlimit: ",i,"; ",_,"fill-rule: ",c,"; ","opacity: ",p,";",y,m].join("")},getSvgSpanStyles:function(l,c){var e="; ",t=l.fontFamily?"font-family: "+(l.fontFamily.indexOf("'")===-1&&l.fontFamily.indexOf('"')===-1?"'"+l.fontFamily+"'":l.fontFamily)+e:"",n=l.strokeWidth?"stroke-width: "+l.strokeWidth+e:"",t=t,s=l.fontSize?"font-size: "+l.fontSize+"px"+e:"",f=l.fontStyle?"font-style: "+l.fontStyle+e:"",i=l.fontWeight?"font-weight: "+l.fontWeight+e:"",p=l.fill?h("fill",l.fill):"",m=l.stroke?h("stroke",l.stroke):"",y=this.getSvgTextDecoration(l),_=l.deltaY?"baseline-shift: "+-l.deltaY+"; ":"";return y&&(y="text-decoration: "+y+e),[m,n,t,s,f,i,y,p,_,c?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(l){return["overline","underline","line-through"].filter(function(c){return l[c.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(l,c){var e=l?this.calcTransformMatrix():this.calcOwnMatrix(),n='transform="'+o.util.matrixToSVG(e);return n+(c||"")+'" '},_setSVGBg:function(l){if(this.backgroundColor){var c=o.Object.NUM_FRACTION_DIGITS;l.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',r(-this.width/2,c),'" y="',r(-this.height/2,c),'" width="',r(this.width,c),'" height="',r(this.height,c),`"></rect>
`)}},toSVG:function(l){return this._createBaseSVGMarkup(this._toSVG(l),{reviver:l})},toClipPathSVG:function(l){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(l),{reviver:l})},_createBaseClipPathSVGMarkup:function(l,c){c=c||{};var e=c.reviver,n=c.additionalTransform||"",t=[this.getSvgTransform(!0,n),this.getSvgCommons()].join(""),s=l.indexOf("COMMON_PARTS");return l[s]=t,e?e(l.join("")):l.join("")},_createBaseSVGMarkup:function(l,c){c=c||{};var e=c.noStyle,n=c.reviver,t=e?"":'style="'+this.getSvgStyles()+'" ',s=c.withShadow?'style="'+this.getSvgFilter()+'" ':"",f=this.clipPath,i=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",p=f&&f.absolutePositioned,m=this.stroke,y=this.fill,_=this.shadow,T,M=[],B,X=l.indexOf("COMMON_PARTS"),st=c.additionalTransform;return f&&(f.clipPathId="CLIPPATH_"+o.Object.__uid++,B='<clipPath id="'+f.clipPathId+`" >
`+f.toClipPathSVG(n)+`</clipPath>
`),p&&M.push("<g ",s,this.getSvgCommons(),` >
`),M.push("<g ",this.getSvgTransform(!1),p?"":s+this.getSvgCommons(),` >
`),T=[t,i,e?"":this.addPaintOrder()," ",st?'transform="'+st+'" ':""].join(""),l[X]=T,y&&y.toLive&&M.push(y.toSVG(this)),m&&m.toLive&&M.push(m.toSVG(this)),_&&M.push(_.toSVG(this)),f&&M.push(B),M.push(l.join("")),M.push(`</g>
`),p&&M.push(`</g>
`),n?n(M.join("")):M.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var h=o.util.object.extend,r="stateProperties";function l(e,n,t){var s={},f=!0;t.forEach(function(i){s[i]=e[i]}),h(e[n],s,f)}function c(e,n,t){if(e===n)return!0;if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(var s=0,f=e.length;s<f;s++)if(!c(e[s],n[s]))return!1;return!0}else if(e&&typeof e=="object"){var i=Object.keys(e),p;if(!n||typeof n!="object"||!t&&i.length!==Object.keys(n).length)return!1;for(var s=0,f=i.length;s<f;s++)if(p=i[s],!(p==="canvas"||p==="group")&&!c(e[p],n[p]))return!1;return!0}}o.util.object.extend(o.Object.prototype,{hasStateChanged:function(e){e=e||r;var n="_"+e;return Object.keys(this[n]).length<this[e].length?!0:!c(this[n],this,!0)},saveState:function(e){var n=e&&e.propertySet||r,t="_"+n;return this[t]?(l(this,t,this[n]),e&&e.stateProperties&&l(this,t,e.stateProperties),this):this.setupState(e)},setupState:function(e){e=e||{};var n=e.propertySet||r;return e.propertySet=n,this["_"+n]={},this.saveState(e),this}})}(),function(){var h=o.util.degreesToRadians;o.util.object.extend(o.Object.prototype,{_findTargetCorner:function(r,l){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var c=r.x,e=r.y,n,t,s=Object.keys(this.oCoords),f=s.length-1,i;for(this.__corner=0;f>=0;f--)if(i=s[f],!!this.isControlVisible(i)&&(t=this._getImageLines(l?this.oCoords[i].touchCorner:this.oCoords[i].corner),n=this._findCrossPoints({x:c,y:e},t),n!==0&&n%2===1))return this.__corner=i,i;return!1},forEachControl:function(r){for(var l in this.controls)r(this.controls[l],l,this)},_setCornerCoords:function(){var r=this.oCoords;for(var l in r){var c=this.controls[l];r[l].corner=c.calcCornerCoords(this.angle,this.cornerSize,r[l].x,r[l].y,!1),r[l].touchCorner=c.calcCornerCoords(this.angle,this.touchCornerSize,r[l].x,r[l].y,!0)}},drawSelectionBackground:function(r){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;r.save();var l=this.getCenterPoint(),c=this._calculateCurrentDimensions(),e=this.canvas.viewportTransform;return r.translate(l.x,l.y),r.scale(1/e[0],1/e[3]),r.rotate(h(this.angle)),r.fillStyle=this.selectionBackgroundColor,r.fillRect(-c.x/2,-c.y/2,c.x,c.y),r.restore(),this},drawBorders:function(r,l){l=l||{};var c=this._calculateCurrentDimensions(),e=this.borderScaleFactor,n=c.x+e,t=c.y+e,s=typeof l.hasControls<"u"?l.hasControls:this.hasControls,f=!1;return r.save(),r.strokeStyle=l.borderColor||this.borderColor,this._setLineDash(r,l.borderDashArray||this.borderDashArray),r.strokeRect(-n/2,-t/2,n,t),s&&(r.beginPath(),this.forEachControl(function(i,p,m){i.withConnection&&i.getVisibility(m,p)&&(f=!0,r.moveTo(i.x*n,i.y*t),r.lineTo(i.x*n+i.offsetX,i.y*t+i.offsetY))}),f&&r.stroke()),r.restore(),this},drawBordersInGroup:function(r,l,c){c=c||{};var e=o.util.sizeAfterTransform(this.width,this.height,l),n=this.strokeWidth,t=this.strokeUniform,s=this.borderScaleFactor,f=e.x+n*(t?this.canvas.getZoom():l.scaleX)+s,i=e.y+n*(t?this.canvas.getZoom():l.scaleY)+s;return r.save(),this._setLineDash(r,c.borderDashArray||this.borderDashArray),r.strokeStyle=c.borderColor||this.borderColor,r.strokeRect(-f/2,-i/2,f,i),r.restore(),this},drawControls:function(r,l){l=l||{},r.save();var c=this.canvas.getRetinaScaling(),e,n;return r.setTransform(c,0,0,c,0,0),r.strokeStyle=r.fillStyle=l.cornerColor||this.cornerColor,this.transparentCorners||(r.strokeStyle=l.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(r,l.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(e=this.group.calcTransformMatrix()),this.forEachControl(function(t,s,f){n=f.oCoords[s],t.getVisibility(f,s)&&(e&&(n=o.util.transformPoint(n,e)),t.render(r,n.x,n.y,l,f))}),r.restore(),this},isControlVisible:function(r){return this.controls[r]&&this.controls[r].getVisibility(this,r)},setControlVisible:function(r,l){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[r]=l,this},setControlsVisibility:function(r){r||(r={});for(var l in r)this.setControlVisible(l,r[l]);return this},onDeselect:function(){},onSelect:function(){}})}(),o.util.object.extend(o.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(h,r){r=r||{};var l=function(){},c=r.onComplete||l,e=r.onChange||l,n=this;return o.util.animate({target:this,startValue:h.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(t){h.set("left",t),n.requestRenderAll(),e()},onComplete:function(){h.setCoords(),c()}})},fxCenterObjectV:function(h,r){r=r||{};var l=function(){},c=r.onComplete||l,e=r.onChange||l,n=this;return o.util.animate({target:this,startValue:h.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(t){h.set("top",t),n.requestRenderAll(),e()},onComplete:function(){h.setCoords(),c()}})},fxRemove:function(h,r){r=r||{};var l=function(){},c=r.onComplete||l,e=r.onChange||l,n=this;return o.util.animate({target:this,startValue:h.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(t){h.set("opacity",t),n.requestRenderAll(),e()},onComplete:function(){n.remove(h),c()}})}}),o.util.object.extend(o.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var h=[],r,l,c=[];for(r in arguments[0])h.push(r);for(var e=0,n=h.length;e<n;e++)r=h[e],l=e!==n-1,c.push(this._animate(r,arguments[0][r],arguments[1],l));return c}else return this._animate.apply(this,arguments)},_animate:function(h,r,l,c){var e=this,n;r=r.toString(),l?l=o.util.object.clone(l):l={},~h.indexOf(".")&&(n=h.split("."));var t=e.colorProperties.indexOf(h)>-1||n&&e.colorProperties.indexOf(n[1])>-1,s=n?this.get(n[0])[n[1]]:this.get(h);"from"in l||(l.from=s),t||(~r.indexOf("=")?r=s+parseFloat(r.replace("=","")):r=parseFloat(r));var f={target:this,startValue:l.from,endValue:r,byValue:l.by,easing:l.easing,duration:l.duration,abort:l.abort&&function(i,p,m){return l.abort.call(e,i,p,m)},onChange:function(i,p,m){n?e[n[0]][n[1]]=i:e.set(h,i),!c&&l.onChange&&l.onChange(i,p,m)},onComplete:function(i,p,m){c||(e.setCoords(),l.onComplete&&l.onComplete(i,p,m))}};return t?o.util.animateColor(f.startValue,f.endValue,f.duration,f):o.util.animate(f)}}),function(h){var r=h.fabric||(h.fabric={}),l=r.util.object.extend,c=r.util.object.clone,e={x1:1,x2:1,y1:1,y2:1};if(r.Line){r.warn("fabric.Line is already defined");return}r.Line=r.util.createClass(r.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:r.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(t,s){t||(t=[0,0,0,0]),this.callSuper("initialize",s),this.set("x1",t[0]),this.set("y1",t[1]),this.set("x2",t[2]),this.set("y2",t[3]),this._setWidthHeight(s)},_setWidthHeight:function(t){t||(t={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in t?t.left:this._getLeftToOriginX(),this.top="top"in t?t.top:this._getTopToOriginY()},_set:function(t,s){return this.callSuper("_set",t,s),typeof e[t]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:n({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:n({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(t){t.beginPath();var s=this.calcLinePoints();t.moveTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineWidth=this.strokeWidth;var f=t.strokeStyle;t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=f},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(t){return l(this.callSuper("toObject",t),this.calcLinePoints())},_getNonTransformedDimensions:function(){var t=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(t.y-=this.strokeWidth),this.height===0&&(t.x-=this.strokeWidth)),t},calcLinePoints:function(){var t=this.x1<=this.x2?-1:1,s=this.y1<=this.y2?-1:1,f=t*this.width*.5,i=s*this.height*.5,p=t*this.width*-.5,m=s*this.height*-.5;return{x1:f,x2:p,y1:i,y2:m}},_toSVG:function(){var t=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',t.x1,'" y1="',t.y1,'" x2="',t.x2,'" y2="',t.y2,`" />
`]}}),r.Line.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),r.Line.fromElement=function(t,s,f){f=f||{};var i=r.parseAttributes(t,r.Line.ATTRIBUTE_NAMES),p=[i.x1||0,i.y1||0,i.x2||0,i.y2||0];s(new r.Line(p,l(i,f)))},r.Line.fromObject=function(t,s){function f(p){delete p.points,s&&s(p)}var i=c(t,!0);i.points=[t.x1,t.y1,t.x2,t.y2],r.Object._fromObject("Line",i,f,"points")};function n(t,s){var f=t.origin,i=t.axis1,p=t.axis2,m=t.dimension,y=s.nearest,_=s.center,T=s.farthest;return function(){switch(this.get(f)){case y:return Math.min(this.get(i),this.get(p));case _:return Math.min(this.get(i),this.get(p))+.5*this.get(m);case T:return Math.max(this.get(i),this.get(p))}}}}(u),function(h){var r=h.fabric||(h.fabric={}),l=r.util.degreesToRadians;if(r.Circle){r.warn("fabric.Circle is already defined.");return}r.Circle=r.util.createClass(r.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:r.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(e,n){return this.callSuper("_set",e,n),e==="radius"&&this.setRadius(n),this},toObject:function(e){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(e))},_toSVG:function(){var e,n=0,t=0,s=(this.endAngle-this.startAngle)%360;if(s===0)e=["<circle ","COMMON_PARTS",'cx="'+n+'" cy="'+t+'" ','r="',this.radius,`" />
`];else{var f=l(this.startAngle),i=l(this.endAngle),p=this.radius,m=r.util.cos(f)*p,y=r.util.sin(f)*p,_=r.util.cos(i)*p,T=r.util.sin(i)*p,M=s>180?"1":"0";e=['<path d="M '+m+" "+y," A "+p+" "+p," 0 ",+M+" 1"," "+_+" "+T,'" ',"COMMON_PARTS",` />
`]}return e},_render:function(e){e.beginPath(),e.arc(0,0,this.radius,l(this.startAngle),l(this.endAngle),!1),this._renderPaintInOrder(e)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(e){return this.radius=e,this.set("width",e*2).set("height",e*2)}}),r.Circle.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),r.Circle.fromElement=function(e,n){var t=r.parseAttributes(e,r.Circle.ATTRIBUTE_NAMES);if(!c(t))throw new Error("value of `r` attribute is required and can not be negative");t.left=(t.left||0)-t.radius,t.top=(t.top||0)-t.radius,n(new r.Circle(t))};function c(e){return"radius"in e&&e.radius>=0}r.Circle.fromObject=function(e,n){r.Object._fromObject("Circle",e,n)}}(u),function(h){var r=h.fabric||(h.fabric={});if(r.Triangle){r.warn("fabric.Triangle is already defined");return}r.Triangle=r.util.createClass(r.Object,{type:"triangle",width:100,height:100,_render:function(l){var c=this.width/2,e=this.height/2;l.beginPath(),l.moveTo(-c,e),l.lineTo(0,-e),l.lineTo(c,e),l.closePath(),this._renderPaintInOrder(l)},_toSVG:function(){var l=this.width/2,c=this.height/2,e=[-l+" "+c,"0 "+-c,l+" "+c].join(",");return["<polygon ","COMMON_PARTS",'points="',e,'" />']}}),r.Triangle.fromObject=function(l,c){return r.Object._fromObject("Triangle",l,c)}}(u),function(h){var r=h.fabric||(h.fabric={}),l=Math.PI*2;if(r.Ellipse){r.warn("fabric.Ellipse is already defined.");return}r.Ellipse=r.util.createClass(r.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:r.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(c){this.callSuper("initialize",c),this.set("rx",c&&c.rx||0),this.set("ry",c&&c.ry||0)},_set:function(c,e){switch(this.callSuper("_set",c,e),c){case"rx":this.rx=e,this.set("width",e*2);break;case"ry":this.ry=e,this.set("height",e*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(c){return this.callSuper("toObject",["rx","ry"].concat(c))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(c){c.beginPath(),c.save(),c.transform(1,0,0,this.ry/this.rx,0,0),c.arc(0,0,this.rx,0,l,!1),c.restore(),this._renderPaintInOrder(c)}}),r.Ellipse.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),r.Ellipse.fromElement=function(c,e){var n=r.parseAttributes(c,r.Ellipse.ATTRIBUTE_NAMES);n.left=(n.left||0)-n.rx,n.top=(n.top||0)-n.ry,e(new r.Ellipse(n))},r.Ellipse.fromObject=function(c,e){r.Object._fromObject("Ellipse",c,e)}}(u),function(h){var r=h.fabric||(h.fabric={}),l=r.util.object.extend;if(r.Rect){r.warn("fabric.Rect is already defined");return}r.Rect=r.util.createClass(r.Object,{stateProperties:r.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:r.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(c){this.callSuper("initialize",c),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(c){var e=this.rx?Math.min(this.rx,this.width/2):0,n=this.ry?Math.min(this.ry,this.height/2):0,t=this.width,s=this.height,f=-this.width/2,i=-this.height/2,p=e!==0||n!==0,m=1-.5522847498;c.beginPath(),c.moveTo(f+e,i),c.lineTo(f+t-e,i),p&&c.bezierCurveTo(f+t-m*e,i,f+t,i+m*n,f+t,i+n),c.lineTo(f+t,i+s-n),p&&c.bezierCurveTo(f+t,i+s-m*n,f+t-m*e,i+s,f+t-e,i+s),c.lineTo(f+e,i+s),p&&c.bezierCurveTo(f+m*e,i+s,f,i+s-m*n,f,i+s-n),c.lineTo(f,i+n),p&&c.bezierCurveTo(f,i+m*n,f+m*e,i,f+e,i),c.closePath(),this._renderPaintInOrder(c)},toObject:function(c){return this.callSuper("toObject",["rx","ry"].concat(c))},_toSVG:function(){var c=-this.width/2,e=-this.height/2;return["<rect ","COMMON_PARTS",'x="',c,'" y="',e,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),r.Rect.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),r.Rect.fromElement=function(c,e,n){if(!c)return e(null);n=n||{};var t=r.parseAttributes(c,r.Rect.ATTRIBUTE_NAMES);t.left=t.left||0,t.top=t.top||0,t.height=t.height||0,t.width=t.width||0;var s=new r.Rect(l(n?r.util.object.clone(n):{},t));s.visible=s.visible&&s.width>0&&s.height>0,e(s)},r.Rect.fromObject=function(c,e){return r.Object._fromObject("Rect",c,e)}}(u),function(h){var r=h.fabric||(h.fabric={}),l=r.util.object.extend,c=r.util.array.min,e=r.util.array.max,n=r.util.toFixed,t=r.util.projectStrokeOnPoints;if(r.Polyline){r.warn("fabric.Polyline is already defined");return}r.Polyline=r.util.createClass(r.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:r.Object.prototype.cacheProperties.concat("points"),initialize:function(s,f){f=f||{},this.points=s||[],this.callSuper("initialize",f),this._setPositionDimensions(f)},_projectStrokeOnPoints:function(){return t(this.points,this,!0)},_setPositionDimensions:function(s){var f=this._calcDimensions(s),i,p=this.exactBoundingBox?this.strokeWidth:0;this.width=f.width-p,this.height=f.height-p,s.fromSVG||(i=this.translateToGivenOrigin({x:f.left-this.strokeWidth/2+p/2,y:f.top-this.strokeWidth/2+p/2},"left","top",this.originX,this.originY)),typeof s.left>"u"&&(this.left=s.fromSVG?f.left:i.x),typeof s.top>"u"&&(this.top=s.fromSVG?f.top:i.y),this.pathOffset={x:f.left+this.width/2+p/2,y:f.top+this.height/2+p/2}},_calcDimensions:function(){var s=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,f=c(s,"x")||0,i=c(s,"y")||0,p=e(s,"x")||0,m=e(s,"y")||0,y=p-f,_=m-i;return{left:f,top:i,width:y,height:_}},toObject:function(s){return l(this.callSuper("toObject",s),{points:this.points.concat()})},_toSVG:function(){for(var s=[],f=this.pathOffset.x,i=this.pathOffset.y,p=r.Object.NUM_FRACTION_DIGITS,m=0,y=this.points.length;m<y;m++)s.push(n(this.points[m].x-f,p),",",n(this.points[m].y-i,p)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',s.join(""),`" />
`]},commonRender:function(s){var f,i=this.points.length,p=this.pathOffset.x,m=this.pathOffset.y;if(!i||isNaN(this.points[i-1].y))return!1;s.beginPath(),s.moveTo(this.points[0].x-p,this.points[0].y-m);for(var y=0;y<i;y++)f=this.points[y],s.lineTo(f.x-p,f.y-m);return!0},_render:function(s){this.commonRender(s)&&this._renderPaintInOrder(s)},complexity:function(){return this.get("points").length}}),r.Polyline.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(),r.Polyline.fromElementGenerator=function(s){return function(f,i,p){if(!f)return i(null);p||(p={});var m=r.parsePointsAttribute(f.getAttribute("points")),y=r.parseAttributes(f,r[s].ATTRIBUTE_NAMES);y.fromSVG=!0,i(new r[s](m,l(y,p)))}},r.Polyline.fromElement=r.Polyline.fromElementGenerator("Polyline"),r.Polyline.fromObject=function(s,f){return r.Object._fromObject("Polyline",s,f,"points")}}(u),function(h){var r=h.fabric||(h.fabric={}),l=r.util.projectStrokeOnPoints;if(r.Polygon){r.warn("fabric.Polygon is already defined");return}r.Polygon=r.util.createClass(r.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return l(this.points,this)},_render:function(c){this.commonRender(c)&&(c.closePath(),this._renderPaintInOrder(c))}}),r.Polygon.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(),r.Polygon.fromElement=r.Polyline.fromElementGenerator("Polygon"),r.Polygon.fromObject=function(c,e){r.Object._fromObject("Polygon",c,e,"points")}}(u),function(h){var r=h.fabric||(h.fabric={}),l=r.util.array.min,c=r.util.array.max,e=r.util.object.extend,n=r.util.object.clone,t=r.util.toFixed;if(r.Path){r.warn("fabric.Path is already defined");return}r.Path=r.util.createClass(r.Object,{type:"path",path:null,cacheProperties:r.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:r.Object.prototype.stateProperties.concat("path"),initialize:function(s,f){f=n(f||{}),delete f.path,this.callSuper("initialize",f),this._setPath(s||[],f)},_setPath:function(s,f){this.path=r.util.makePathSimpler(Array.isArray(s)?s:r.util.parsePath(s)),r.Polyline.prototype._setPositionDimensions.call(this,f||{})},_renderPathCommands:function(s){var f,i=0,p=0,m=0,y=0,_=0,T=0,M=-this.pathOffset.x,B=-this.pathOffset.y;s.beginPath();for(var X=0,st=this.path.length;X<st;++X)switch(f=this.path[X],f[0]){case"L":m=f[1],y=f[2],s.lineTo(m+M,y+B);break;case"M":m=f[1],y=f[2],i=m,p=y,s.moveTo(m+M,y+B);break;case"C":m=f[5],y=f[6],_=f[3],T=f[4],s.bezierCurveTo(f[1]+M,f[2]+B,_+M,T+B,m+M,y+B);break;case"Q":s.quadraticCurveTo(f[1]+M,f[2]+B,f[3]+M,f[4]+B),m=f[3],y=f[4],_=f[1],T=f[2];break;case"z":case"Z":m=i,y=p,s.closePath();break}},_render:function(s){this._renderPathCommands(s),this._renderPaintInOrder(s)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(s){return e(this.callSuper("toObject",s),{path:this.path.map(function(f){return f.slice()})})},toDatalessObject:function(s){var f=this.toObject(["sourcePath"].concat(s));return f.sourcePath&&delete f.path,f},_toSVG:function(){var s=r.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',s,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var s=r.Object.NUM_FRACTION_DIGITS;return" translate("+t(-this.pathOffset.x,s)+", "+t(-this.pathOffset.y,s)+")"},toClipPathSVG:function(s){var f=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:s,additionalTransform:f})},toSVG:function(s){var f=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:s,additionalTransform:f})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var s=[],f=[],i,p=0,m=0,y=0,_=0,T,M=0,B=this.path.length;M<B;++M){switch(i=this.path[M],i[0]){case"L":y=i[1],_=i[2],T=[];break;case"M":y=i[1],_=i[2],p=y,m=_,T=[];break;case"C":T=r.util.getBoundsOfCurve(y,_,i[1],i[2],i[3],i[4],i[5],i[6]),y=i[5],_=i[6];break;case"Q":T=r.util.getBoundsOfCurve(y,_,i[1],i[2],i[1],i[2],i[3],i[4]),y=i[3],_=i[4];break;case"z":case"Z":y=p,_=m;break}T.forEach(function(_t){s.push(_t.x),f.push(_t.y)}),s.push(y),f.push(_)}var X=l(s)||0,st=l(f)||0,ft=c(s)||0,vt=c(f)||0,xt=ft-X,St=vt-st;return{left:X,top:st,width:xt,height:St}}}),r.Path.fromObject=function(s,f){if(typeof s.sourcePath=="string"){var i=s.sourcePath;r.loadSVGFromURL(i,function(p){var m=p[0];m.setOptions(s),s.clipPath?r.util.enlivenObjects([s.clipPath],function(y){m.clipPath=y[0],f&&f(m)}):f&&f(m)})}else r.Object._fromObject("Path",s,f,"path")},r.Path.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(["d"]),r.Path.fromElement=function(s,f,i){var p=r.parseAttributes(s,r.Path.ATTRIBUTE_NAMES);p.fromSVG=!0,f(new r.Path(p.d,e(p,i)))}}(u),function(h){var r=h.fabric||(h.fabric={}),l=r.util.array.min,c=r.util.array.max;r.Group||(r.Group=r.util.createClass(r.Object,r.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(e,n,t){n=n||{},this._objects=[],t&&this.callSuper("initialize",n),this._objects=e||[];for(var s=this._objects.length;s--;)this._objects[s].group=this;if(t)this._updateObjectsACoords();else{var f=n&&n.centerPoint;n.originX!==void 0&&(this.originX=n.originX),n.originY!==void 0&&(this.originY=n.originY),f||this._calcBounds(),this._updateObjectsCoords(f),delete n.centerPoint,this.callSuper("initialize",n)}this.setCoords()},_updateObjectsACoords:function(){for(var e=!0,n=this._objects.length;n--;)this._objects[n].setCoords(e)},_updateObjectsCoords:function(n){for(var n=n||this.getCenterPoint(),t=this._objects.length;t--;)this._updateObjectCoords(this._objects[t],n)},_updateObjectCoords:function(e,n){var t=e.left,s=e.top,f=!0;e.set({left:t-n.x,top:s-n.y}),e.group=this,e.setCoords(f)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(e){var n=!!this.group;return this._restoreObjectsState(),r.util.resetObjectTransform(this),e&&(n&&r.util.removeTransformFromObject(e,this.group.calcTransformMatrix()),this._objects.push(e),e.group=this,e._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,n?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(e){return this._restoreObjectsState(),r.util.resetObjectTransform(this),this.remove(e),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(e){this.dirty=!0,e.group=this,e._set("canvas",this.canvas)},_onObjectRemoved:function(e){this.dirty=!0,delete e.group},_set:function(e,n){var t=this._objects.length;if(this.useSetOnGroup)for(;t--;)this._objects[t].setOnGroup(e,n);if(e==="canvas")for(;t--;)this._objects[t]._set(e,n);r.Object.prototype._set.call(this,e,n)},toObject:function(e){var n=this.includeDefaultValues,t=this._objects.filter(function(f){return!f.excludeFromExport}).map(function(f){var i=f.includeDefaultValues;f.includeDefaultValues=n;var p=f.toObject(e);return f.includeDefaultValues=i,p}),s=r.Object.prototype.toObject.call(this,e);return s.objects=t,s},toDatalessObject:function(e){var n,t=this.sourcePath;if(t)n=t;else{var s=this.includeDefaultValues;n=this._objects.map(function(i){var p=i.includeDefaultValues;i.includeDefaultValues=s;var m=i.toDatalessObject(e);return i.includeDefaultValues=p,m})}var f=r.Object.prototype.toDatalessObject.call(this,e);return f.objects=n,f},render:function(e){this._transformDone=!0,this.callSuper("render",e),this._transformDone=!1},shouldCache:function(){var e=r.Object.prototype.shouldCache.call(this);if(e){for(var n=0,t=this._objects.length;n<t;n++)if(this._objects[n].willDrawShadow())return this.ownCaching=!1,!1}return e},willDrawShadow:function(){if(r.Object.prototype.willDrawShadow.call(this))return!0;for(var e=0,n=this._objects.length;e<n;e++)if(this._objects[e].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(e){for(var n=0,t=this._objects.length;n<t;n++)this._objects[n].render(e);this._drawClipPath(e,this.clipPath)},isCacheDirty:function(e){if(this.callSuper("isCacheDirty",e))return!0;if(!this.statefullCache)return!1;for(var n=0,t=this._objects.length;n<t;n++)if(this._objects[n].isCacheDirty(!0)){if(this._cacheCanvas){var s=this.cacheWidth/this.zoomX,f=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-s/2,-f/2,s,f)}return!0}return!1},_restoreObjectsState:function(){var e=this.calcOwnMatrix();return this._objects.forEach(function(n){r.util.addTransformToObject(n,e),delete n.group,n.setCoords()}),this},destroy:function(){return this._objects.forEach(function(e){e.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(e){e.dispose&&e.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var e=this._objects,n=this.canvas;this._objects=[];var t=this.toObject();delete t.objects;var s=new r.ActiveSelection([]);return s.set(t),s.type="activeSelection",n.remove(this),e.forEach(function(f){f.group=s,f.dirty=!0,n.add(f)}),s.canvas=n,s._objects=e,n._activeObject=s,s.setCoords(),s}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var e=!0;return this.forEachObject(function(n){n.setCoords(e)}),this},_calcBounds:function(e){for(var n=[],t=[],s,f,i,p=["tr","br","bl","tl"],m=0,y=this._objects.length,_,T=p.length;m<y;++m){for(s=this._objects[m],i=s.calcACoords(),_=0;_<T;_++)f=p[_],n.push(i[f].x),t.push(i[f].y);s.aCoords=i}this._getBounds(n,t,e)},_getBounds:function(e,n,t){var s=new r.Point(l(e),l(n)),f=new r.Point(c(e),c(n)),i=s.y||0,p=s.x||0,m=f.x-s.x||0,y=f.y-s.y||0;this.width=m,this.height=y,t||this.setPositionByOrigin({x:p,y:i},"left","top")},_toSVG:function(e){for(var n=["<g ","COMMON_PARTS",` >
`],t=0,s=this._objects.length;t<s;t++)n.push("		",this._objects[t].toSVG(e));return n.push(`</g>
`),n},getSvgStyles:function(){var e=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",n=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),n].join("")},toClipPathSVG:function(e){for(var n=[],t=0,s=this._objects.length;t<s;t++)n.push("	",this._objects[t].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(n,{reviver:e})}}),r.Group.fromObject=function(e,n){var t=e.objects,s=r.util.object.clone(e,!0);if(delete s.objects,typeof t=="string"){r.loadSVGFromURL(t,function(f){var i=r.util.groupSVGElements(f,e,t),p=s.clipPath;delete s.clipPath,i.set(s),p?r.util.enlivenObjects([p],function(m){i.clipPath=m[0],n&&n(i)}):n&&n(i)});return}r.util.enlivenObjects(t,function(f){r.util.enlivenObjectEnlivables(e,s,function(){n&&n(new r.Group(f,s,!0))})})})}(u),function(h){var r=h.fabric||(h.fabric={});r.ActiveSelection||(r.ActiveSelection=r.util.createClass(r.Group,{type:"activeSelection",initialize:function(l,c){c=c||{},this._objects=l||[];for(var e=this._objects.length;e--;)this._objects[e].group=this;c.originX&&(this.originX=c.originX),c.originY&&(this.originY=c.originY),this._calcBounds(),this._updateObjectsCoords(),r.Object.prototype.initialize.call(this,c),this.setCoords()},toGroup:function(){var l=this._objects.concat();this._objects=[];var c=r.Object.prototype.toObject.call(this),e=new r.Group([]);if(delete c.type,e.set(c),l.forEach(function(t){t.canvas.remove(t),t.group=e}),e._objects=l,!this.canvas)return e;var n=this.canvas;return n.add(e),n._activeObject=e,e.setCoords(),e},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(l,c,e){l.save(),l.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",l,c),e=e||{},typeof e.hasControls>"u"&&(e.hasControls=!1),e.forActiveSelection=!0;for(var n=0,t=this._objects.length;n<t;n++)this._objects[n]._renderControls(l,e);l.restore()}}),r.ActiveSelection.fromObject=function(l,c){r.util.enlivenObjects(l.objects,function(e){delete l.objects,c&&c(new r.ActiveSelection(e,l,!0))})})}(u),function(h){var r=o.util.object.extend;if(h.fabric||(h.fabric={}),h.fabric.Image){o.warn("fabric.Image is already defined.");return}o.Image=o.util.createClass(o.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:o.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:o.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(l,c){c||(c={}),this.filters=[],this.cacheKey="texture"+o.Object.__uid++,this.callSuper("initialize",c),this._initElement(l,c)},getElement:function(){return this._element||{}},setElement:function(l,c){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=l,this._originalElement=l,this._initConfig(c),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(l){var c=o.filterBackend;c&&c.evictCachesForKey&&c.evictCachesForKey(l)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(l){o.util.cleanUpJsdomNode(this[l]),this[l]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var l=this.getElement();return{width:l.naturalWidth||l.width,height:l.naturalHeight||l.height}},_stroke:function(l){if(!(!this.stroke||this.strokeWidth===0)){var c=this.width/2,e=this.height/2;l.beginPath(),l.moveTo(-c,-e),l.lineTo(c,-e),l.lineTo(c,e),l.lineTo(-c,e),l.lineTo(-c,-e),l.closePath()}},toObject:function(l){var c=[];this.filters.forEach(function(n){n&&c.push(n.toObject())});var e=r(this.callSuper("toObject",["cropX","cropY"].concat(l)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:c});return this.resizeFilter&&(e.resizeFilter=this.resizeFilter.toObject()),e},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var l=[],c=[],e,n=this._element,t=-this.width/2,s=-this.height/2,f="",i="";if(!n)return[];if(this.hasCrop()){var p=o.Object.__uid++;l.push('<clipPath id="imageCrop_'+p+`">
`,'	<rect x="'+t+'" y="'+s+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),f=' clip-path="url(#imageCrop_'+p+')" '}if(this.imageSmoothing||(i='" image-rendering="optimizeSpeed'),c.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',t-this.cropX,'" y="',s-this.cropY,'" width="',n.width||n.naturalWidth,'" height="',n.height||n.height,i,'"',f,`></image>
`),this.stroke||this.strokeDashArray){var m=this.fill;this.fill=null,e=["	<rect ",'x="',t,'" y="',s,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=m}return this.paintFirst!=="fill"?l=l.concat(e,c):l=l.concat(c,e),l},getSrc:function(l){var c=l?this._element:this._originalElement;return c?c.toDataURL?c.toDataURL():this.srcFromAttribute?c.getAttribute("src"):c.src:this.src||""},setSrc:function(l,c,e){return o.util.loadImage(l,function(n,t){this.setElement(n,e),this._setWidthHeight(),c&&c(this,t)},this,e&&e.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var l=this.resizeFilter,c=this.minimumScaleTrigger,e=this.getTotalObjectScaling(),n=e.scaleX,t=e.scaleY,s=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!l||n>c&&t>c){this._element=s,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=n,this._lastScaleY=t;return}o.filterBackend||(o.filterBackend=o.initFilterBackend());var f=o.util.createCanvasElement(),i=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,p=s.width,m=s.height;f.width=p,f.height=m,this._element=f,this._lastScaleX=l.scaleX=n,this._lastScaleY=l.scaleY=t,o.filterBackend.applyFilters([l],s,p,m,this._element,i),this._filterScalingX=f.width/this._originalElement.width,this._filterScalingY=f.height/this._originalElement.height},applyFilters:function(l){if(l=l||this.filters||[],l=l.filter(function(s){return s&&!s.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),l.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var c=this._originalElement,e=c.naturalWidth||c.width,n=c.naturalHeight||c.height;if(this._element===this._originalElement){var t=o.util.createCanvasElement();t.width=e,t.height=n,this._element=t,this._filteredEl=t}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,e,n),this._lastScaleX=1,this._lastScaleY=1;return o.filterBackend||(o.filterBackend=o.initFilterBackend()),o.filterBackend.applyFilters(l,this._originalElement,e,n,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(l){o.util.setImageSmoothing(l,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(l),this._renderPaintInOrder(l)},drawCacheOnCanvas:function(l){o.util.setImageSmoothing(l,this.imageSmoothing),o.Object.prototype.drawCacheOnCanvas.call(this,l)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(l){var c=this._element;if(c){var e=this._filterScalingX,n=this._filterScalingY,t=this.width,s=this.height,f=Math.min,i=Math.max,p=i(this.cropX,0),m=i(this.cropY,0),y=c.naturalWidth||c.width,_=c.naturalHeight||c.height,T=p*e,M=m*n,B=f(t*e,y-T),X=f(s*n,_-M),st=-t/2,ft=-s/2,vt=f(t,y/e-p),xt=f(s,_/n-m);c&&l.drawImage(c,T,M,B,X,st,ft,vt,xt)}},_needsResize:function(){var l=this.getTotalObjectScaling();return l.scaleX!==this._lastScaleX||l.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(l,c){this.setElement(o.util.getById(l),c),o.util.addClass(this.getElement(),o.Image.CSS_CANVAS)},_initConfig:function(l){l||(l={}),this.setOptions(l),this._setWidthHeight(l)},_initFilters:function(l,c){l&&l.length?o.util.enlivenObjects(l,function(e){c&&c(e)},"fabric.Image.filters"):c&&c()},_setWidthHeight:function(l){l||(l={});var c=this.getElement();this.width=l.width||c.naturalWidth||c.width||0,this.height=l.height||c.naturalHeight||c.height||0},parsePreserveAspectRatioAttribute:function(){var l=o.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),c=this._element.width,e=this._element.height,n=1,t=1,s=0,f=0,i=0,p=0,m,y=this.width,_=this.height,T={width:y,height:_};return l&&(l.alignX!=="none"||l.alignY!=="none")?(l.meetOrSlice==="meet"&&(n=t=o.util.findScaleToFit(this._element,T),m=(y-c*n)/2,l.alignX==="Min"&&(s=-m),l.alignX==="Max"&&(s=m),m=(_-e*t)/2,l.alignY==="Min"&&(f=-m),l.alignY==="Max"&&(f=m)),l.meetOrSlice==="slice"&&(n=t=o.util.findScaleToCover(this._element,T),m=c-y/n,l.alignX==="Mid"&&(i=m/2),l.alignX==="Max"&&(i=m),m=e-_/t,l.alignY==="Mid"&&(p=m/2),l.alignY==="Max"&&(p=m),c=y/n,e=_/t)):(n=y/c,t=_/e),{width:c,height:e,scaleX:n,scaleY:t,offsetLeft:s,offsetTop:f,cropX:i,cropY:p}}}),o.Image.CSS_CANVAS="canvas-img",o.Image.prototype.getSvgSrc=o.Image.prototype.getSrc,o.Image.fromObject=function(l,c){var e=o.util.object.clone(l);o.util.loadImage(e.src,function(n,t){if(t){c&&c(null,!0);return}o.Image.prototype._initFilters.call(e,e.filters,function(s){e.filters=s||[],o.Image.prototype._initFilters.call(e,[e.resizeFilter],function(f){e.resizeFilter=f[0],o.util.enlivenObjectEnlivables(e,e,function(){var i=new o.Image(n,e);c(i,!1)})})})},null,e.crossOrigin)},o.Image.fromURL=function(l,c,e){o.util.loadImage(l,function(n,t){c&&c(new o.Image(n,e),t)},null,e&&e.crossOrigin)},o.Image.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),o.Image.fromElement=function(l,c,e){var n=o.parseAttributes(l,o.Image.ATTRIBUTE_NAMES);o.Image.fromURL(n["xlink:href"],c,r(e?o.util.object.clone(e):{},n))}}(u),o.util.object.extend(o.Object.prototype,{_getAngleValueForStraighten:function(){var h=this.angle%360;return h>0?Math.round((h-1)/90)*90:Math.round(h/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(h){h=h||{};var r=function(){},l=h.onComplete||r,c=h.onChange||r,e=this;return o.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(n){e.rotate(n),c()},onComplete:function(){e.setCoords(),l()}})}}),o.util.object.extend(o.StaticCanvas.prototype,{straightenObject:function(h){return h.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(h){return h.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function h(l,c){var e="precision "+c+` float;
void main(){}`,n=l.createShader(l.FRAGMENT_SHADER);return l.shaderSource(n,e),l.compileShader(n),!!l.getShaderParameter(n,l.COMPILE_STATUS)}o.isWebglSupported=function(l){if(o.isLikelyNode)return!1;l=l||o.WebglFilterBackend.prototype.tileSize;var c=document.createElement("canvas"),e=c.getContext("webgl")||c.getContext("experimental-webgl"),n=!1;if(e){o.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),n=o.maxTextureSize>=l;for(var t=["highp","mediump","lowp"],s=0;s<3;s++)if(h(e,t[s])){o.webGlPrecision=t[s];break}}return this.isSupported=n,n},o.WebglFilterBackend=r;function r(l){l&&l.tileSize&&(this.tileSize=l.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}r.prototype={tileSize:2048,resources:{},setupGLContext:function(l,c){this.dispose(),this.createWebGLCanvas(l,c),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(l,c)},chooseFastestCopyGLTo2DMethod:function(l,c){var e=typeof window.performance<"u",n;try{new ImageData(1,1),n=!0}catch{n=!1}var t=typeof ArrayBuffer<"u",s=typeof Uint8ClampedArray<"u";if(e&&n&&t&&s){var f=o.util.createCanvasElement(),i=new ArrayBuffer(l*c*4);if(o.forceGLPutImageData){this.imageBuffer=i,this.copyGLTo2D=z;return}var p={imageBuffer:i,destinationWidth:l,destinationHeight:c,targetCanvas:f},m,y,_;f.width=l,f.height=c,m=window.performance.now(),A.call(p,this.gl,p),y=window.performance.now()-m,m=window.performance.now(),z.call(p,this.gl,p),_=window.performance.now()-m,y>_?(this.imageBuffer=i,this.copyGLTo2D=z):this.copyGLTo2D=A}},createWebGLCanvas:function(l,c){var e=o.util.createCanvasElement();e.width=l,e.height=c;var n={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},t=e.getContext("webgl",n);t||(t=e.getContext("experimental-webgl",n)),t&&(t.clearColor(0,0,0,0),this.canvas=e,this.gl=t)},applyFilters:function(l,c,e,n,t,s){var f=this.gl,i;s&&(i=this.getCachedTexture(s,c));var p={originalWidth:c.width||c.originalWidth,originalHeight:c.height||c.originalHeight,sourceWidth:e,sourceHeight:n,destinationWidth:e,destinationHeight:n,context:f,sourceTexture:this.createTexture(f,e,n,!i&&c),targetTexture:this.createTexture(f,e,n),originalTexture:i||this.createTexture(f,e,n,!i&&c),passes:l.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:t},m=f.createFramebuffer();return f.bindFramebuffer(f.FRAMEBUFFER,m),l.forEach(function(y){y&&y.applyTo(p)}),O(p),this.copyGLTo2D(f,p),f.bindTexture(f.TEXTURE_2D,null),f.deleteTexture(p.sourceTexture),f.deleteTexture(p.targetTexture),f.deleteFramebuffer(m),t.getContext("2d").setTransform(1,0,0,1,0,0),p},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(l,c,e,n,t){var s=l.createTexture();return l.bindTexture(l.TEXTURE_2D,s),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,t||l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,t||l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),n?l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,n):l.texImage2D(l.TEXTURE_2D,0,l.RGBA,c,e,0,l.RGBA,l.UNSIGNED_BYTE,null),s},getCachedTexture:function(l,c){if(this.textureCache[l])return this.textureCache[l];var e=this.createTexture(this.gl,c.width,c.height,c);return this.textureCache[l]=e,e},evictCachesForKey:function(l){this.textureCache[l]&&(this.gl.deleteTexture(this.textureCache[l]),delete this.textureCache[l])},copyGLTo2D:A,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var l=this.gl,c={renderer:"",vendor:""};if(!l)return c;var e=l.getExtension("WEBGL_debug_renderer_info");if(e){var n=l.getParameter(e.UNMASKED_RENDERER_WEBGL),t=l.getParameter(e.UNMASKED_VENDOR_WEBGL);n&&(c.renderer=n.toLowerCase()),t&&(c.vendor=t.toLowerCase())}return this.gpuInfo=c,c}}}();function O(h){var r=h.targetCanvas,l=r.width,c=r.height,e=h.destinationWidth,n=h.destinationHeight;(l!==e||c!==n)&&(r.width=e,r.height=n)}function A(h,r){var l=h.canvas,c=r.targetCanvas,e=c.getContext("2d");e.translate(0,c.height),e.scale(1,-1);var n=l.height-c.height;e.drawImage(l,0,n,c.width,c.height,0,0,c.width,c.height)}function z(h,r){var l=r.targetCanvas,c=l.getContext("2d"),e=r.destinationWidth,n=r.destinationHeight,t=e*n*4,s=new Uint8Array(this.imageBuffer,0,t),f=new Uint8ClampedArray(this.imageBuffer,0,t);h.readPixels(0,0,e,n,h.RGBA,h.UNSIGNED_BYTE,s);var i=new ImageData(f,e,n);c.putImageData(i,0,0)}(function(){var h=function(){};o.Canvas2dFilterBackend=r;function r(){}r.prototype={evictCachesForKey:h,dispose:h,clearWebGLCaches:h,resources:{},applyFilters:function(l,c,e,n,t){var s=t.getContext("2d");s.drawImage(c,0,0,e,n);var f=s.getImageData(0,0,e,n),i=s.getImageData(0,0,e,n),p={sourceWidth:e,sourceHeight:n,imageData:f,originalEl:c,originalImageData:i,canvasEl:t,ctx:s,filterBackend:this};return l.forEach(function(m){m.applyTo(p)}),(p.imageData.width!==e||p.imageData.height!==n)&&(t.width=p.imageData.width,t.height=p.imageData.height),s.putImageData(p.imageData,0,0),p}}})(),o.Image=o.Image||{},o.Image.filters=o.Image.filters||{},o.Image.filters.BaseFilter=o.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(h){h&&this.setOptions(h)},setOptions:function(h){for(var r in h)this[r]=h[r]},createProgram:function(h,r,l){r=r||this.fragmentSource,l=l||this.vertexSource,o.webGlPrecision!=="highp"&&(r=r.replace(/precision highp float/g,"precision "+o.webGlPrecision+" float"));var c=h.createShader(h.VERTEX_SHADER);if(h.shaderSource(c,l),h.compileShader(c),!h.getShaderParameter(c,h.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+h.getShaderInfoLog(c));var e=h.createShader(h.FRAGMENT_SHADER);if(h.shaderSource(e,r),h.compileShader(e),!h.getShaderParameter(e,h.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+h.getShaderInfoLog(e));var n=h.createProgram();if(h.attachShader(n,c),h.attachShader(n,e),h.linkProgram(n),!h.getProgramParameter(n,h.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+h.getProgramInfoLog(n));var t=this.getAttributeLocations(h,n),s=this.getUniformLocations(h,n)||{};return s.uStepW=h.getUniformLocation(n,"uStepW"),s.uStepH=h.getUniformLocation(n,"uStepH"),{program:n,attributeLocations:t,uniformLocations:s}},getAttributeLocations:function(h,r){return{aPosition:h.getAttribLocation(r,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(h,r,l){var c=r.aPosition,e=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,e),h.enableVertexAttribArray(c),h.vertexAttribPointer(c,2,h.FLOAT,!1,0,0),h.bufferData(h.ARRAY_BUFFER,l,h.STATIC_DRAW)},_setupFrameBuffer:function(h){var r=h.context,l,c;h.passes>1?(l=h.destinationWidth,c=h.destinationHeight,(h.sourceWidth!==l||h.sourceHeight!==c)&&(r.deleteTexture(h.targetTexture),h.targetTexture=h.filterBackend.createTexture(r,l,c)),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,h.targetTexture,0)):(r.bindFramebuffer(r.FRAMEBUFFER,null),r.finish())},_swapTextures:function(h){h.passes--,h.pass++;var r=h.targetTexture;h.targetTexture=h.sourceTexture,h.sourceTexture=r},isNeutralState:function(){var h=this.mainParameter,r=o.Image.filters[this.type].prototype;if(h)if(Array.isArray(r[h])){for(var l=r[h].length;l--;)if(this[h][l]!==r[h][l])return!1;return!0}else return r[h]===this[h];else return!1},applyTo:function(h){h.webgl?(this._setupFrameBuffer(h),this.applyToWebGL(h),this._swapTextures(h)):this.applyTo2d(h)},retrieveShader:function(h){return h.programCache.hasOwnProperty(this.type)||(h.programCache[this.type]=this.createProgram(h.context)),h.programCache[this.type]},applyToWebGL:function(h){var r=h.context,l=this.retrieveShader(h);h.pass===0&&h.originalTexture?r.bindTexture(r.TEXTURE_2D,h.originalTexture):r.bindTexture(r.TEXTURE_2D,h.sourceTexture),r.useProgram(l.program),this.sendAttributeData(r,l.attributeLocations,h.aPosition),r.uniform1f(l.uniformLocations.uStepW,1/h.sourceWidth),r.uniform1f(l.uniformLocations.uStepH,1/h.sourceHeight),this.sendUniformData(r,l.uniformLocations),r.viewport(0,0,h.destinationWidth,h.destinationHeight),r.drawArrays(r.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(h,r,l){h.activeTexture(l),h.bindTexture(h.TEXTURE_2D,r),h.activeTexture(h.TEXTURE0)},unbindAdditionalTexture:function(h,r){h.activeTexture(r),h.bindTexture(h.TEXTURE_2D,null),h.activeTexture(h.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(h){this[this.mainParameter]=h},sendUniformData:function(){},createHelpLayer:function(h){if(!h.helpLayer){var r=document.createElement("canvas");r.width=h.sourceWidth,r.height=h.sourceHeight,h.helpLayer=r}},toObject:function(){var h={type:this.type},r=this.mainParameter;return r&&(h[r]=this[r]),h},toJSON:function(){return this.toObject()}}),o.Image.filters.BaseFilter.fromObject=function(h,r){var l=new o.Image.filters[h.type](h);return r&&r(l),l},function(h){var r=h.fabric||(h.fabric={}),l=r.Image.filters,c=r.util.createClass;l.ColorMatrix=c(l.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(e){this.callSuper("initialize",e),this.matrix=this.matrix.slice(0)},applyTo2d:function(e){var n=e.imageData,t=n.data,s=t.length,f=this.matrix,i,p,m,y,_,T=this.colorsOnly;for(_=0;_<s;_+=4)i=t[_],p=t[_+1],m=t[_+2],T?(t[_]=i*f[0]+p*f[1]+m*f[2]+f[4]*255,t[_+1]=i*f[5]+p*f[6]+m*f[7]+f[9]*255,t[_+2]=i*f[10]+p*f[11]+m*f[12]+f[14]*255):(y=t[_+3],t[_]=i*f[0]+p*f[1]+m*f[2]+y*f[3]+f[4]*255,t[_+1]=i*f[5]+p*f[6]+m*f[7]+y*f[8]+f[9]*255,t[_+2]=i*f[10]+p*f[11]+m*f[12]+y*f[13]+f[14]*255,t[_+3]=i*f[15]+p*f[16]+m*f[17]+y*f[18]+f[19]*255)},getUniformLocations:function(e,n){return{uColorMatrix:e.getUniformLocation(n,"uColorMatrix"),uConstants:e.getUniformLocation(n,"uConstants")}},sendUniformData:function(e,n){var t=this.matrix,s=[t[0],t[1],t[2],t[3],t[5],t[6],t[7],t[8],t[10],t[11],t[12],t[13],t[15],t[16],t[17],t[18]],f=[t[4],t[9],t[14],t[19]];e.uniformMatrix4fv(n.uColorMatrix,!1,s),e.uniform4fv(n.uConstants,f)}}),r.Image.filters.ColorMatrix.fromObject=r.Image.filters.BaseFilter.fromObject}(u),function(h){var r=h.fabric||(h.fabric={}),l=r.Image.filters,c=r.util.createClass;l.Brightness=c(l.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(e){if(this.brightness!==0){var n=e.imageData,t=n.data,s,f=t.length,i=Math.round(this.brightness*255);for(s=0;s<f;s+=4)t[s]=t[s]+i,t[s+1]=t[s+1]+i,t[s+2]=t[s+2]+i}},getUniformLocations:function(e,n){return{uBrightness:e.getUniformLocation(n,"uBrightness")}},sendUniformData:function(e,n){e.uniform1f(n.uBrightness,this.brightness)}}),r.Image.filters.Brightness.fromObject=r.Image.filters.BaseFilter.fromObject}(u),function(h){var r=h.fabric||(h.fabric={}),l=r.util.object.extend,c=r.Image.filters,e=r.util.createClass;c.Convolute=e(c.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(n){var t=Math.sqrt(this.matrix.length),s=this.type+"_"+t+"_"+(this.opaque?1:0),f=this.fragmentSource[s];return n.programCache.hasOwnProperty(s)||(n.programCache[s]=this.createProgram(n.context,f)),n.programCache[s]},applyTo2d:function(n){var t=n.imageData,s=t.data,f=this.matrix,i=Math.round(Math.sqrt(f.length)),p=Math.floor(i/2),m=t.width,y=t.height,_=n.ctx.createImageData(m,y),T=_.data,M=this.opaque?1:0,B,X,st,ft,vt,xt,St,_t,ot,pt,wt,bt,k;for(wt=0;wt<y;wt++)for(pt=0;pt<m;pt++){for(vt=(wt*m+pt)*4,B=0,X=0,st=0,ft=0,k=0;k<i;k++)for(bt=0;bt<i;bt++)St=wt+k-p,xt=pt+bt-p,!(St<0||St>=y||xt<0||xt>=m)&&(_t=(St*m+xt)*4,ot=f[k*i+bt],B+=s[_t]*ot,X+=s[_t+1]*ot,st+=s[_t+2]*ot,M||(ft+=s[_t+3]*ot));T[vt]=B,T[vt+1]=X,T[vt+2]=st,M?T[vt+3]=s[vt+3]:T[vt+3]=ft}n.imageData=_},getUniformLocations:function(n,t){return{uMatrix:n.getUniformLocation(t,"uMatrix"),uOpaque:n.getUniformLocation(t,"uOpaque"),uHalfSize:n.getUniformLocation(t,"uHalfSize"),uSize:n.getUniformLocation(t,"uSize")}},sendUniformData:function(n,t){n.uniform1fv(t.uMatrix,this.matrix)},toObject:function(){return l(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),r.Image.filters.Convolute.fromObject=r.Image.filters.BaseFilter.fromObject}(u),function(h){var r=h.fabric||(h.fabric={}),l=r.Image.filters,c=r.util.createClass;l.Grayscale=c(l.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(e){var n=e.imageData,t=n.data,s,f=t.length,i,p=this.mode;for(s=0;s<f;s+=4)p==="average"?i=(t[s]+t[s+1]+t[s+2])/3:p==="lightness"?i=(Math.min(t[s],t[s+1],t[s+2])+Math.max(t[s],t[s+1],t[s+2]))/2:p==="luminosity"&&(i=.21*t[s]+.72*t[s+1]+.07*t[s+2]),t[s]=i,t[s+1]=i,t[s+2]=i},retrieveShader:function(e){var n=this.type+"_"+this.mode;if(!e.programCache.hasOwnProperty(n)){var t=this.fragmentSource[this.mode];e.programCache[n]=this.createProgram(e.context,t)}return e.programCache[n]},getUniformLocations:function(e,n){return{uMode:e.getUniformLocation(n,"uMode")}},sendUniformData:function(e,n){var t=1;e.uniform1i(n.uMode,t)},isNeutralState:function(){return!1}}),r.Image.filters.Grayscale.fromObject=r.Image.filters.BaseFilter.fromObject}(u),function(h){var r=h.fabric||(h.fabric={}),l=r.Image.filters,c=r.util.createClass;l.Invert=c(l.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(e){var n=e.imageData,t=n.data,s,f=t.length;for(s=0;s<f;s+=4)t[s]=255-t[s],t[s+1]=255-t[s+1],t[s+2]=255-t[s+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(e,n){return{uInvert:e.getUniformLocation(n,"uInvert")}},sendUniformData:function(e,n){e.uniform1i(n.uInvert,this.invert)}}),r.Image.filters.Invert.fromObject=r.Image.filters.BaseFilter.fromObject}(u),function(h){var r=h.fabric||(h.fabric={}),l=r.util.object.extend,c=r.Image.filters,e=r.util.createClass;c.Noise=e(c.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(n){if(this.noise!==0){var t=n.imageData,s=t.data,f,i=s.length,p=this.noise,m;for(f=0,i=s.length;f<i;f+=4)m=(.5-Math.random())*p,s[f]+=m,s[f+1]+=m,s[f+2]+=m}},getUniformLocations:function(n,t){return{uNoise:n.getUniformLocation(t,"uNoise"),uSeed:n.getUniformLocation(t,"uSeed")}},sendUniformData:function(n,t){n.uniform1f(t.uNoise,this.noise/255),n.uniform1f(t.uSeed,Math.random())},toObject:function(){return l(this.callSuper("toObject"),{noise:this.noise})}}),r.Image.filters.Noise.fromObject=r.Image.filters.BaseFilter.fromObject}(u),function(h){var r=h.fabric||(h.fabric={}),l=r.Image.filters,c=r.util.createClass;l.Pixelate=c(l.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(e){var n=e.imageData,t=n.data,s=n.height,f=n.width,i,p,m,y,_,T,M,B,X,st,ft;for(p=0;p<s;p+=this.blocksize)for(m=0;m<f;m+=this.blocksize)for(i=p*4*f+m*4,y=t[i],_=t[i+1],T=t[i+2],M=t[i+3],st=Math.min(p+this.blocksize,s),ft=Math.min(m+this.blocksize,f),B=p;B<st;B++)for(X=m;X<ft;X++)i=B*4*f+X*4,t[i]=y,t[i+1]=_,t[i+2]=T,t[i+3]=M},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(e,n){return{uBlocksize:e.getUniformLocation(n,"uBlocksize"),uStepW:e.getUniformLocation(n,"uStepW"),uStepH:e.getUniformLocation(n,"uStepH")}},sendUniformData:function(e,n){e.uniform1f(n.uBlocksize,this.blocksize)}}),r.Image.filters.Pixelate.fromObject=r.Image.filters.BaseFilter.fromObject}(u),function(h){var r=h.fabric||(h.fabric={}),l=r.util.object.extend,c=r.Image.filters,e=r.util.createClass;c.RemoveColor=e(c.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(n){var t=n.imageData,s=t.data,f,i=this.distance*255,p,m,y,_=new r.Color(this.color).getSource(),T=[_[0]-i,_[1]-i,_[2]-i],M=[_[0]+i,_[1]+i,_[2]+i];for(f=0;f<s.length;f+=4)p=s[f],m=s[f+1],y=s[f+2],p>T[0]&&m>T[1]&&y>T[2]&&p<M[0]&&m<M[1]&&y<M[2]&&(s[f+3]=0)},getUniformLocations:function(n,t){return{uLow:n.getUniformLocation(t,"uLow"),uHigh:n.getUniformLocation(t,"uHigh")}},sendUniformData:function(n,t){var s=new r.Color(this.color).getSource(),f=parseFloat(this.distance),i=[0+s[0]/255-f,0+s[1]/255-f,0+s[2]/255-f,1],p=[s[0]/255+f,s[1]/255+f,s[2]/255+f,1];n.uniform4fv(t.uLow,i),n.uniform4fv(t.uHigh,p)},toObject:function(){return l(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),r.Image.filters.RemoveColor.fromObject=r.Image.filters.BaseFilter.fromObject}(u),function(h){var r=h.fabric||(h.fabric={}),l=r.Image.filters,c=r.util.createClass,e={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var n in e)l[n]=c(l.ColorMatrix,{type:n,matrix:e[n],mainParameter:!1,colorsOnly:!0}),r.Image.filters[n].fromObject=r.Image.filters.BaseFilter.fromObject}(u),function(h){var r=h.fabric,l=r.Image.filters,c=r.util.createClass;l.BlendColor=c(l.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(e){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[e]+`}
}`},retrieveShader:function(e){var n=this.type+"_"+this.mode,t;return e.programCache.hasOwnProperty(n)||(t=this.buildSource(this.mode),e.programCache[n]=this.createProgram(e.context,t)),e.programCache[n]},applyTo2d:function(e){var n=e.imageData,t=n.data,s=t.length,f,i,p,m,y,_,T,M=1-this.alpha;T=new r.Color(this.color).getSource(),f=T[0]*this.alpha,i=T[1]*this.alpha,p=T[2]*this.alpha;for(var B=0;B<s;B+=4)switch(m=t[B],y=t[B+1],_=t[B+2],this.mode){case"multiply":t[B]=m*f/255,t[B+1]=y*i/255,t[B+2]=_*p/255;break;case"screen":t[B]=255-(255-m)*(255-f)/255,t[B+1]=255-(255-y)*(255-i)/255,t[B+2]=255-(255-_)*(255-p)/255;break;case"add":t[B]=m+f,t[B+1]=y+i,t[B+2]=_+p;break;case"diff":case"difference":t[B]=Math.abs(m-f),t[B+1]=Math.abs(y-i),t[B+2]=Math.abs(_-p);break;case"subtract":t[B]=m-f,t[B+1]=y-i,t[B+2]=_-p;break;case"darken":t[B]=Math.min(m,f),t[B+1]=Math.min(y,i),t[B+2]=Math.min(_,p);break;case"lighten":t[B]=Math.max(m,f),t[B+1]=Math.max(y,i),t[B+2]=Math.max(_,p);break;case"overlay":t[B]=f<128?2*m*f/255:255-2*(255-m)*(255-f)/255,t[B+1]=i<128?2*y*i/255:255-2*(255-y)*(255-i)/255,t[B+2]=p<128?2*_*p/255:255-2*(255-_)*(255-p)/255;break;case"exclusion":t[B]=f+m-2*f*m/255,t[B+1]=i+y-2*i*y/255,t[B+2]=p+_-2*p*_/255;break;case"tint":t[B]=f+m*M,t[B+1]=i+y*M,t[B+2]=p+_*M}},getUniformLocations:function(e,n){return{uColor:e.getUniformLocation(n,"uColor")}},sendUniformData:function(e,n){var t=new r.Color(this.color).getSource();t[0]=this.alpha*t[0]/255,t[1]=this.alpha*t[1]/255,t[2]=this.alpha*t[2]/255,t[3]=this.alpha,e.uniform4fv(n.uColor,t)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),r.Image.filters.BlendColor.fromObject=r.Image.filters.BaseFilter.fromObject}(u),function(h){var r=h.fabric,l=r.Image.filters,c=r.util.createClass;l.BlendImage=c(l.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(e){var n=this.type+"_"+this.mode,t=this.fragmentSource[this.mode];return e.programCache.hasOwnProperty(n)||(e.programCache[n]=this.createProgram(e.context,t)),e.programCache[n]},applyToWebGL:function(e){var n=e.context,t=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(n,t,n.TEXTURE1),this.callSuper("applyToWebGL",e),this.unbindAdditionalTexture(n,n.TEXTURE1)},createTexture:function(e,n){return e.getCachedTexture(n.cacheKey,n._element)},calculateMatrix:function(){var e=this.image,n=e._element.width,t=e._element.height;return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/n,-e.top/t,1]},applyTo2d:function(e){var n=e.imageData,t=e.filterBackend.resources,s=n.data,f=s.length,i=n.width,p=n.height,m,y,_,T,M,B,X,st,ft,vt,xt=this.image,St;t.blendImage||(t.blendImage=r.util.createCanvasElement()),ft=t.blendImage,vt=ft.getContext("2d"),ft.width!==i||ft.height!==p?(ft.width=i,ft.height=p):vt.clearRect(0,0,i,p),vt.setTransform(xt.scaleX,0,0,xt.scaleY,xt.left,xt.top),vt.drawImage(xt._element,0,0,i,p),St=vt.getImageData(0,0,i,p).data;for(var _t=0;_t<f;_t+=4)switch(M=s[_t],B=s[_t+1],X=s[_t+2],st=s[_t+3],m=St[_t],y=St[_t+1],_=St[_t+2],T=St[_t+3],this.mode){case"multiply":s[_t]=M*m/255,s[_t+1]=B*y/255,s[_t+2]=X*_/255,s[_t+3]=st*T/255;break;case"mask":s[_t+3]=T;break}},getUniformLocations:function(e,n){return{uTransformMatrix:e.getUniformLocation(n,"uTransformMatrix"),uImage:e.getUniformLocation(n,"uImage")}},sendUniformData:function(e,n){var t=this.calculateMatrix();e.uniform1i(n.uImage,1),e.uniformMatrix3fv(n.uTransformMatrix,!1,t)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),r.Image.filters.BlendImage.fromObject=function(e,n){r.Image.fromObject(e.image,function(t){var s=r.util.object.clone(e);s.image=t,n(new r.Image.filters.BlendImage(s))})}}(u),function(h){var r=h.fabric||(h.fabric={}),l=Math.pow,c=Math.floor,e=Math.sqrt,n=Math.abs,t=Math.round,s=Math.sin,f=Math.ceil,i=r.Image.filters,p=r.util.createClass;i.Resize=p(i.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(m,y){return{uDelta:m.getUniformLocation(y,"uDelta"),uTaps:m.getUniformLocation(y,"uTaps")}},sendUniformData:function(m,y){m.uniform2fv(y.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),m.uniform1fv(y.uTaps,this.taps)},retrieveShader:function(m){var y=this.getFilterWindow(),_=this.type+"_"+y;if(!m.programCache.hasOwnProperty(_)){var T=this.generateShader(y);m.programCache[_]=this.createProgram(m.context,T)}return m.programCache[_]},getFilterWindow:function(){var m=this.tempScale;return Math.ceil(this.lanczosLobes/m)},getTaps:function(){for(var m=this.lanczosCreate(this.lanczosLobes),y=this.tempScale,_=this.getFilterWindow(),T=new Array(_),M=1;M<=_;M++)T[M-1]=m(M*y);return T},generateShader:function(T){for(var y=new Array(T),_=this.fragmentSourceTOP,T,M=1;M<=T;M++)y[M-1]=M+".0 * uDelta";return _+="uniform float uTaps["+T+`];
`,_+=`void main() {
`,_+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,_+=`  float sum = 1.0;
`,y.forEach(function(B,X){_+="  color += texture2D(uTexture, vTexCoord + "+B+") * uTaps["+X+`];
`,_+="  color += texture2D(uTexture, vTexCoord - "+B+") * uTaps["+X+`];
`,_+="  sum += 2.0 * uTaps["+X+`];
`}),_+=`  gl_FragColor = color / sum;
`,_+="}",_},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(m){m.webgl?(m.passes++,this.width=m.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=m.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),m.destinationWidth=this.dW,this._setupFrameBuffer(m),this.applyToWebGL(m),this._swapTextures(m),m.sourceWidth=m.destinationWidth,this.height=m.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),m.destinationHeight=this.dH,this._setupFrameBuffer(m),this.applyToWebGL(m),this._swapTextures(m),m.sourceHeight=m.destinationHeight):this.applyTo2d(m)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(m){return function(y){if(y>=m||y<=-m)return 0;if(y<11920929e-14&&y>-11920929e-14)return 1;y*=Math.PI;var _=y/m;return s(y)/y*s(_)/_}},applyTo2d:function(m){var y=m.imageData,_=this.scaleX,T=this.scaleY;this.rcpScaleX=1/_,this.rcpScaleY=1/T;var M=y.width,B=y.height,X=t(M*_),st=t(B*T),ft;this.resizeType==="sliceHack"?ft=this.sliceByTwo(m,M,B,X,st):this.resizeType==="hermite"?ft=this.hermiteFastResize(m,M,B,X,st):this.resizeType==="bilinear"?ft=this.bilinearFiltering(m,M,B,X,st):this.resizeType==="lanczos"&&(ft=this.lanczosResize(m,M,B,X,st)),m.imageData=ft},sliceByTwo:function(m,y,_,T,M){var B=m.imageData,X=.5,st=!1,ft=!1,vt=y*X,xt=_*X,St=r.filterBackend.resources,_t,ot,pt=0,wt=0,bt=y,k=0;for(St.sliceByTwo||(St.sliceByTwo=document.createElement("canvas")),_t=St.sliceByTwo,(_t.width<y*1.5||_t.height<_)&&(_t.width=y*1.5,_t.height=_),ot=_t.getContext("2d"),ot.clearRect(0,0,y*1.5,_),ot.putImageData(B,0,0),T=c(T),M=c(M);!st||!ft;)y=vt,_=xt,T<c(vt*X)?vt=c(vt*X):(vt=T,st=!0),M<c(xt*X)?xt=c(xt*X):(xt=M,ft=!0),ot.drawImage(_t,pt,wt,y,_,bt,k,vt,xt),pt=bt,wt=k,k+=xt;return ot.getImageData(pt,wt,T,M)},lanczosResize:function(m,y,_,T,M){function B(N){var H,nt,j,I,q,Z,at,it,ht,dt,F;for(k.x=(N+.5)*xt,U.x=c(k.x),H=0;H<M;H++){for(k.y=(H+.5)*St,U.y=c(k.y),q=0,Z=0,at=0,it=0,ht=0,nt=U.x-pt;nt<=U.x+pt;nt++)if(!(nt<0||nt>=y)){dt=c(1e3*n(nt-k.x)),bt[dt]||(bt[dt]={});for(var D=U.y-wt;D<=U.y+wt;D++)D<0||D>=_||(F=c(1e3*n(D-k.y)),bt[dt][F]||(bt[dt][F]=vt(e(l(dt*_t,2)+l(F*ot,2))/1e3)),j=bt[dt][F],j>0&&(I=(D*y+nt)*4,q+=j,Z+=j*X[I],at+=j*X[I+1],it+=j*X[I+2],ht+=j*X[I+3]))}I=(H*T+N)*4,ft[I]=Z/q,ft[I+1]=at/q,ft[I+2]=it/q,ft[I+3]=ht/q}return++N<T?B(N):st}var X=m.imageData.data,st=m.ctx.createImageData(T,M),ft=st.data,vt=this.lanczosCreate(this.lanczosLobes),xt=this.rcpScaleX,St=this.rcpScaleY,_t=2/this.rcpScaleX,ot=2/this.rcpScaleY,pt=f(xt*this.lanczosLobes/2),wt=f(St*this.lanczosLobes/2),bt={},k={},U={};return B(0)},bilinearFiltering:function(m,y,_,T,M){var B,X,st,ft,vt,xt,St,_t,ot,pt,wt,bt,k=0,U,N=this.rcpScaleX,H=this.rcpScaleY,nt=4*(y-1),j=m.imageData,I=j.data,q=m.ctx.createImageData(T,M),Z=q.data;for(St=0;St<M;St++)for(_t=0;_t<T;_t++)for(vt=c(N*_t),xt=c(H*St),ot=N*_t-vt,pt=H*St-xt,U=4*(xt*y+vt),wt=0;wt<4;wt++)B=I[U+wt],X=I[U+4+wt],st=I[U+nt+wt],ft=I[U+nt+4+wt],bt=B*(1-ot)*(1-pt)+X*ot*(1-pt)+st*pt*(1-ot)+ft*ot*pt,Z[k++]=bt;return q},hermiteFastResize:function(m,y,_,T,M){for(var B=this.rcpScaleX,X=this.rcpScaleY,st=f(B/2),ft=f(X/2),vt=m.imageData,xt=vt.data,St=m.ctx.createImageData(T,M),_t=St.data,ot=0;ot<M;ot++)for(var pt=0;pt<T;pt++){for(var wt=(pt+ot*T)*4,bt=0,k=0,U=0,N=0,H=0,nt=0,j=0,I=(ot+.5)*X,q=c(ot*X);q<(ot+1)*X;q++)for(var Z=n(I-(q+.5))/ft,at=(pt+.5)*B,it=Z*Z,ht=c(pt*B);ht<(pt+1)*B;ht++){var dt=n(at-(ht+.5))/st,F=e(it+dt*dt);F>1&&F<-1||(bt=2*F*F*F-3*F*F+1,bt>0&&(dt=4*(ht+q*y),j+=bt*xt[dt+3],U+=bt,xt[dt+3]<255&&(bt=bt*xt[dt+3]/250),N+=bt*xt[dt],H+=bt*xt[dt+1],nt+=bt*xt[dt+2],k+=bt))}_t[wt]=N/k,_t[wt+1]=H/k,_t[wt+2]=nt/k,_t[wt+3]=j/U}return St},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),r.Image.filters.Resize.fromObject=r.Image.filters.BaseFilter.fromObject}(u),function(h){var r=h.fabric||(h.fabric={}),l=r.Image.filters,c=r.util.createClass;l.Contrast=c(l.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(e){if(this.contrast!==0){var n=e.imageData,t,f,s=n.data,f=s.length,i=Math.floor(this.contrast*255),p=259*(i+255)/(255*(259-i));for(t=0;t<f;t+=4)s[t]=p*(s[t]-128)+128,s[t+1]=p*(s[t+1]-128)+128,s[t+2]=p*(s[t+2]-128)+128}},getUniformLocations:function(e,n){return{uContrast:e.getUniformLocation(n,"uContrast")}},sendUniformData:function(e,n){e.uniform1f(n.uContrast,this.contrast)}}),r.Image.filters.Contrast.fromObject=r.Image.filters.BaseFilter.fromObject}(u),function(h){var r=h.fabric||(h.fabric={}),l=r.Image.filters,c=r.util.createClass;l.Saturation=c(l.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(e){if(this.saturation!==0){var n=e.imageData,t=n.data,s=t.length,f=-this.saturation,i,p;for(i=0;i<s;i+=4)p=Math.max(t[i],t[i+1],t[i+2]),t[i]+=p!==t[i]?(p-t[i])*f:0,t[i+1]+=p!==t[i+1]?(p-t[i+1])*f:0,t[i+2]+=p!==t[i+2]?(p-t[i+2])*f:0}},getUniformLocations:function(e,n){return{uSaturation:e.getUniformLocation(n,"uSaturation")}},sendUniformData:function(e,n){e.uniform1f(n.uSaturation,-this.saturation)}}),r.Image.filters.Saturation.fromObject=r.Image.filters.BaseFilter.fromObject}(u),function(h){var r=h.fabric||(h.fabric={}),l=r.Image.filters,c=r.util.createClass;l.Vibrance=c(l.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(e){if(this.vibrance!==0){var n=e.imageData,t=n.data,s=t.length,f=-this.vibrance,i,p,m,y;for(i=0;i<s;i+=4)p=Math.max(t[i],t[i+1],t[i+2]),m=(t[i]+t[i+1]+t[i+2])/3,y=Math.abs(p-m)*2/255*f,t[i]+=p!==t[i]?(p-t[i])*y:0,t[i+1]+=p!==t[i+1]?(p-t[i+1])*y:0,t[i+2]+=p!==t[i+2]?(p-t[i+2])*y:0}},getUniformLocations:function(e,n){return{uVibrance:e.getUniformLocation(n,"uVibrance")}},sendUniformData:function(e,n){e.uniform1f(n.uVibrance,-this.vibrance)}}),r.Image.filters.Vibrance.fromObject=r.Image.filters.BaseFilter.fromObject}(u),function(h){var r=h.fabric||(h.fabric={}),l=r.Image.filters,c=r.util.createClass;l.Blur=c(l.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(e){e.webgl?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)},applyTo2d:function(e){e.imageData=this.simpleBlur(e)},simpleBlur:function(e){var n=e.filterBackend.resources,t,s,f=e.imageData.width,i=e.imageData.height;n.blurLayer1||(n.blurLayer1=r.util.createCanvasElement(),n.blurLayer2=r.util.createCanvasElement()),t=n.blurLayer1,s=n.blurLayer2,(t.width!==f||t.height!==i)&&(s.width=t.width=f,s.height=t.height=i);var p=t.getContext("2d"),m=s.getContext("2d"),y=15,_,T,M,B,X=this.blur*.06*.5;for(p.putImageData(e.imageData,0,0),m.clearRect(0,0,f,i),B=-y;B<=y;B++)_=(Math.random()-.5)/4,T=B/y,M=X*T*f+_,m.globalAlpha=1-Math.abs(T),m.drawImage(t,M,_),p.drawImage(s,0,0),m.globalAlpha=1,m.clearRect(0,0,s.width,s.height);for(B=-y;B<=y;B++)_=(Math.random()-.5)/4,T=B/y,M=X*T*i+_,m.globalAlpha=1-Math.abs(T),m.drawImage(t,_,M),p.drawImage(s,0,0),m.globalAlpha=1,m.clearRect(0,0,s.width,s.height);e.ctx.drawImage(t,0,0);var st=e.ctx.getImageData(0,0,t.width,t.height);return p.globalAlpha=1,p.clearRect(0,0,t.width,t.height),st},getUniformLocations:function(e,n){return{delta:e.getUniformLocation(n,"uDelta")}},sendUniformData:function(e,n){var t=this.chooseRightDelta();e.uniform2fv(n.delta,t)},chooseRightDelta:function(){var e=1,n=[0,0],t;return this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio),t=e*this.blur*.12,this.horizontal?n[0]=t:n[1]=t,n}}),l.Blur.fromObject=r.Image.filters.BaseFilter.fromObject}(u),function(h){var r=h.fabric||(h.fabric={}),l=r.Image.filters,c=r.util.createClass;l.Gamma=c(l.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(e){this.gamma=[1,1,1],l.BaseFilter.prototype.initialize.call(this,e)},applyTo2d:function(e){var n=e.imageData,t=n.data,s=this.gamma,f=t.length,i=1/s[0],p=1/s[1],m=1/s[2],y;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),y=0,f=256;y<f;y++)this.rVals[y]=Math.pow(y/255,i)*255,this.gVals[y]=Math.pow(y/255,p)*255,this.bVals[y]=Math.pow(y/255,m)*255;for(y=0,f=t.length;y<f;y+=4)t[y]=this.rVals[t[y]],t[y+1]=this.gVals[t[y+1]],t[y+2]=this.bVals[t[y+2]]},getUniformLocations:function(e,n){return{uGamma:e.getUniformLocation(n,"uGamma")}},sendUniformData:function(e,n){e.uniform3fv(n.uGamma,this.gamma)}}),r.Image.filters.Gamma.fromObject=r.Image.filters.BaseFilter.fromObject}(u),function(h){var r=h.fabric||(h.fabric={}),l=r.Image.filters,c=r.util.createClass;l.Composed=c(l.BaseFilter,{type:"Composed",subFilters:[],initialize:function(e){this.callSuper("initialize",e),this.subFilters=this.subFilters.slice(0)},applyTo:function(e){e.passes+=this.subFilters.length-1,this.subFilters.forEach(function(n){n.applyTo(e)})},toObject:function(){return r.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(e){return e.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(e){return!e.isNeutralState()})}}),r.Image.filters.Composed.fromObject=function(e,n){var t=e.subFilters||[],s=t.map(function(i){return new r.Image.filters[i.type](i)}),f=new r.Image.filters.Composed({subFilters:s});return n&&n(f),f}}(u),function(h){var r=h.fabric||(h.fabric={}),l=r.Image.filters,c=r.util.createClass;l.HueRotation=c(l.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var e=this.rotation*Math.PI,n=r.util.cos(e),t=r.util.sin(e),s=1/3,f=Math.sqrt(s)*t,i=1-n;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=n+i/3,this.matrix[1]=s*i-f,this.matrix[2]=s*i+f,this.matrix[5]=s*i+f,this.matrix[6]=n+s*i,this.matrix[7]=s*i-f,this.matrix[10]=s*i-f,this.matrix[11]=s*i+f,this.matrix[12]=n+s*i},isNeutralState:function(e){return this.calculateMatrix(),l.BaseFilter.prototype.isNeutralState.call(this,e)},applyTo:function(e){this.calculateMatrix(),l.BaseFilter.prototype.applyTo.call(this,e)}}),r.Image.filters.HueRotation.fromObject=r.Image.filters.BaseFilter.fromObject}(u),function(h){var r=h.fabric||(h.fabric={}),l=r.util.object.clone;if(r.Text){r.warn("fabric.Text is already defined");return}var c="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");r.Text=r.util.createClass(r.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:r.Object.prototype.stateProperties.concat(c),cacheProperties:r.Object.prototype.cacheProperties.concat(c),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(e,n){this.styles=n?n.styles||{}:{},this.text=e,this.__skipDimension=!0,this.callSuper("initialize",n),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var e=this.path;e&&(e.segmentsInfo=r.util.getPathSegmentsInfo(e.path))},getMeasuringContext:function(){return r._measuringContext||(r._measuringContext=this.canvas&&this.canvas.contextCache||r.util.createCanvasElement().getContext("2d")),r._measuringContext},_splitText:function(){var e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var e,n,t,s,f,i,p,m=0,y=this._textLines.length;m<y;m++)if(!(this.textAlign!=="justify"&&(m===y-1||this.isEndOfWrapping(m)))&&(s=0,f=this._textLines[m],n=this.getLineWidth(m),n<this.width&&(p=this.textLines[m].match(this._reSpacesAndTabs)))){t=p.length,e=(this.width-n)/t;for(var _=0,T=f.length;_<=T;_++)i=this.__charBounds[m][_],this._reSpaceAndTab.test(f[_])?(i.width+=e,i.kernedWidth+=e,i.left+=s,s+=e):i.left+=s}},isEndOfWrapping:function(e){return e===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var e=this.callSuper("_getCacheCanvasDimensions"),n=this.fontSize;return e.width+=n*e.zoomX,e.height+=n*e.zoomY,e},_render:function(e){var n=this.path;n&&!n.isNotVisible()&&n._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")},_renderText:function(e){this.paintFirst==="stroke"?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))},_setTextStyles:function(e,n,t){if(e.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":e.textBaseline="middle";break;case"ascender":e.textBaseline="top";break;case"descender":e.textBaseline="bottom";break}e.font=this._getFontDeclaration(n,t)},calcTextWidth:function(){for(var e=this.getLineWidth(0),n=1,t=this._textLines.length;n<t;n++){var s=this.getLineWidth(n);s>e&&(e=s)}return e},_renderTextLine:function(e,n,t,s,f,i){this._renderChars(e,n,t,s,f,i)},_renderTextLinesBackground:function(e){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var n,t,s=e.fillStyle,f,i,p=this._getLeftOffset(),m=this._getTopOffset(),y=0,_=0,T,M,B=this.path,X,st=0,ft=this._textLines.length;st<ft;st++){if(n=this.getHeightOfLine(st),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",st)){m+=n;continue}f=this._textLines[st],t=this._getLineLeftOffset(st),_=0,y=0,i=this.getValueOfPropertyAt(st,0,"textBackgroundColor");for(var vt=0,xt=f.length;vt<xt;vt++)T=this.__charBounds[st][vt],M=this.getValueOfPropertyAt(st,vt,"textBackgroundColor"),B?(e.save(),e.translate(T.renderLeft,T.renderTop),e.rotate(T.angle),e.fillStyle=M,M&&e.fillRect(-T.width/2,-n/this.lineHeight*(1-this._fontSizeFraction),T.width,n/this.lineHeight),e.restore()):M!==i?(X=p+t+y,this.direction==="rtl"&&(X=this.width-X-_),e.fillStyle=i,i&&e.fillRect(X,m,_,n/this.lineHeight),y=T.left,_=T.width,i=M):_+=T.kernedWidth;M&&!B&&(X=p+t+y,this.direction==="rtl"&&(X=this.width-X-_),e.fillStyle=M,e.fillRect(X,m,_,n/this.lineHeight)),m+=n}e.fillStyle=s,this._removeShadow(e)}},getFontCache:function(e){var n=e.fontFamily.toLowerCase();r.charWidthsCache[n]||(r.charWidthsCache[n]={});var t=r.charWidthsCache[n],s=e.fontStyle.toLowerCase()+"_"+(e.fontWeight+"").toLowerCase();return t[s]||(t[s]={}),t[s]},_measureChar:function(e,n,t,s){var f=this.getFontCache(n),i=this._getFontDeclaration(n),p=this._getFontDeclaration(s),m=t+e,y=i===p,_,T,M,B=n.fontSize/this.CACHE_FONT_SIZE,X;if(t&&f[t]!==void 0&&(M=f[t]),f[e]!==void 0&&(X=_=f[e]),y&&f[m]!==void 0&&(T=f[m],X=T-M),_===void 0||M===void 0||T===void 0){var st=this.getMeasuringContext();this._setTextStyles(st,n,!0)}return _===void 0&&(X=_=st.measureText(e).width,f[e]=_),M===void 0&&y&&t&&(M=st.measureText(t).width,f[t]=M),y&&T===void 0&&(T=st.measureText(m).width,f[m]=T,X=T-M),{width:_*B,kernedWidth:X*B}},getHeightOfChar:function(e,n){return this.getValueOfPropertyAt(e,n,"fontSize")},measureLine:function(e){var n=this._measureLine(e);return this.charSpacing!==0&&(n.width-=this._getWidthOfCharSpacing()),n.width<0&&(n.width=0),n},_measureLine:function(e){var n=0,t,s,f=this._textLines[e],i,p,m=0,y=new Array(f.length),_=0,T,M,B=this.path,X=this.pathSide==="right";for(this.__charBounds[e]=y,t=0;t<f.length;t++)s=f[t],p=this._getGraphemeBox(s,e,t,i),y[t]=p,n+=p.kernedWidth,i=s;if(y[t]={left:p?p.left+p.width:0,width:0,kernedWidth:0,height:this.fontSize},B){switch(M=B.segmentsInfo[B.segmentsInfo.length-1].length,T=r.util.getPointOnPath(B.path,0,B.segmentsInfo),T.x+=B.pathOffset.x,T.y+=B.pathOffset.y,this.textAlign){case"left":_=X?M-n:0;break;case"center":_=(M-n)/2;break;case"right":_=X?0:M-n;break}for(_+=this.pathStartOffset*(X?-1:1),t=X?f.length-1:0;X?t>=0:t<f.length;X?t--:t++)p=y[t],_>M?_%=M:_<0&&(_+=M),this._setGraphemeOnPath(_,p,T),_+=p.kernedWidth}return{width:n,numOfSpaces:m}},_setGraphemeOnPath:function(e,n,t){var s=e+n.kernedWidth/2,f=this.path,i=r.util.getPointOnPath(f.path,s,f.segmentsInfo);n.renderLeft=i.x-t.x,n.renderTop=i.y-t.y,n.angle=i.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(e,n,t,s,f){var i=this.getCompleteStyleDeclaration(n,t),p=s?this.getCompleteStyleDeclaration(n,t-1):{},m=this._measureChar(e,i,s,p),y=m.kernedWidth,_=m.width,T;this.charSpacing!==0&&(T=this._getWidthOfCharSpacing(),_+=T,y+=T);var M={width:_,left:0,height:i.fontSize,kernedWidth:y,deltaY:i.deltaY};if(t>0&&!f){var B=this.__charBounds[n][t-1];M.left=B.left+B.width+m.kernedWidth-m.width}return M},getHeightOfLine:function(e){if(this.__lineHeights[e])return this.__lineHeights[e];for(var n=this._textLines[e],t=this.getHeightOfChar(e,0),s=1,f=n.length;s<f;s++)t=Math.max(this.getHeightOfChar(e,s),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var e,n=0,t=0,s=this._textLines.length;t<s;t++)e=this.getHeightOfLine(t),n+=t===s-1?e/this.lineHeight:e;return n},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(e,n){e.save();for(var t=0,s=this._getLeftOffset(),f=this._getTopOffset(),i=0,p=this._textLines.length;i<p;i++){var m=this.getHeightOfLine(i),y=m/this.lineHeight,_=this._getLineLeftOffset(i);this._renderTextLine(n,e,this._textLines[i],s+_,f+t+y,i),t+=m}e.restore()},_renderTextFill:function(e){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(e,"fillText")},_renderTextStroke:function(e){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())},_renderChars:function(e,n,t,s,f,i){var p=this.getHeightOfLine(i),m=this.textAlign.indexOf("justify")!==-1,y,_,T="",M,B=0,X,st=this.path,ft=!m&&this.charSpacing===0&&this.isEmptyStyles(i)&&!st,vt=this.direction==="ltr",xt=this.direction==="ltr"?1:-1,St,_t=n.canvas.getAttribute("dir");if(n.save(),_t!==this.direction&&(n.canvas.setAttribute("dir",vt?"ltr":"rtl"),n.direction=vt?"ltr":"rtl",n.textAlign=vt?"left":"right"),f-=p*this._fontSizeFraction/this.lineHeight,ft){this._renderChar(e,n,i,0,t.join(""),s,f,p),n.restore();return}for(var ot=0,pt=t.length-1;ot<=pt;ot++)X=ot===pt||this.charSpacing||st,T+=t[ot],M=this.__charBounds[i][ot],B===0?(s+=xt*(M.kernedWidth-M.width),B+=M.width):B+=M.kernedWidth,m&&!X&&this._reSpaceAndTab.test(t[ot])&&(X=!0),X||(y=y||this.getCompleteStyleDeclaration(i,ot),_=this.getCompleteStyleDeclaration(i,ot+1),X=r.util.hasStyleChanged(y,_,!1)),X&&(st?(n.save(),n.translate(M.renderLeft,M.renderTop),n.rotate(M.angle),this._renderChar(e,n,i,ot,T,-B/2,0,p),n.restore()):(St=s,this._renderChar(e,n,i,ot,T,St,f,p)),T="",y=_,s+=xt*B,B=0);n.restore()},_applyPatternGradientTransformText:function(e){var n=r.util.createCanvasElement(),t,s=this.width+this.strokeWidth,f=this.height+this.strokeWidth;return n.width=s,n.height=f,t=n.getContext("2d"),t.beginPath(),t.moveTo(0,0),t.lineTo(s,0),t.lineTo(s,f),t.lineTo(0,f),t.closePath(),t.translate(s/2,f/2),t.fillStyle=e.toLive(t),this._applyPatternGradientTransform(t,e),t.fill(),t.createPattern(n,"no-repeat")},handleFiller:function(e,n,t){var s,f;return t.toLive?t.gradientUnits==="percentage"||t.gradientTransform||t.patternTransform?(s=-this.width/2,f=-this.height/2,e.translate(s,f),e[n]=this._applyPatternGradientTransformText(t),{offsetX:s,offsetY:f}):(e[n]=t.toLive(e,this),this._applyPatternGradientTransform(e,t)):(e[n]=t,{offsetX:0,offsetY:0})},_setStrokeStyles:function(e,n){return e.lineWidth=n.strokeWidth,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",n.stroke)},_setFillStyles:function(e,n){return this.handleFiller(e,"fillStyle",n.fill)},_renderChar:function(e,n,t,s,f,i,p){var m=this._getStyleDeclaration(t,s),y=this.getCompleteStyleDeclaration(t,s),_=e==="fillText"&&y.fill,T=e==="strokeText"&&y.stroke&&y.strokeWidth,M,B;!T&&!_||(n.save(),_&&(M=this._setFillStyles(n,y)),T&&(B=this._setStrokeStyles(n,y)),n.font=this._getFontDeclaration(y),m&&m.textBackgroundColor&&this._removeShadow(n),m&&m.deltaY&&(p+=m.deltaY),_&&n.fillText(f,i-M.offsetX,p-M.offsetY),T&&n.strokeText(f,i-B.offsetX,p-B.offsetY),n.restore())},setSuperscript:function(e,n){return this._setScript(e,n,this.superscript)},setSubscript:function(e,n){return this._setScript(e,n,this.subscript)},_setScript:function(e,n,t){var s=this.get2DCursorLocation(e,!0),f=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"fontSize"),i=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"deltaY"),p={fontSize:f*t.size,deltaY:i+f*t.baseline};return this.setSelectionStyles(p,e,n),this},_getLineLeftOffset:function(e){var n=this.getLineWidth(e),t=this.width-n,s=this.textAlign,f=this.direction,p,i=0,p=this.isEndOfWrapping(e);return s==="justify"||s==="justify-center"&&!p||s==="justify-right"&&!p||s==="justify-left"&&!p?0:(s==="center"&&(i=t/2),s==="right"&&(i=t),s==="justify-center"&&(i=t/2),s==="justify-right"&&(i=t),f==="rtl"&&(i-=t),i)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var e=this._forceClearCache;return e||(e=this.hasStateChanged("_dimensionAffectingProps")),e&&(this.dirty=!0,this._forceClearCache=!1),e},getLineWidth:function(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];var n=this.measureLine(e),t=n.width;return this.__lineWidths[e]=t,t},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(e,n,t){var s=this._getStyleDeclaration(e,n);return s&&typeof s[t]<"u"?s[t]:this[t]},_renderTextDecoration:function(e,n){if(!(!this[n]&&!this.styleHas(n))){for(var t,s,f,i,p,m,y,_,T=this._getLeftOffset(),M=this._getTopOffset(),B,X,st,ft,vt,xt,St,_t,ot=this.path,pt=this._getWidthOfCharSpacing(),wt=this.offsets[n],bt=0,k=this._textLines.length;bt<k;bt++){if(t=this.getHeightOfLine(bt),!this[n]&&!this.styleHas(n,bt)){M+=t;continue}y=this._textLines[bt],xt=t/this.lineHeight,i=this._getLineLeftOffset(bt),X=0,st=0,_=this.getValueOfPropertyAt(bt,0,n),_t=this.getValueOfPropertyAt(bt,0,"fill"),B=M+xt*(1-this._fontSizeFraction),s=this.getHeightOfChar(bt,0),p=this.getValueOfPropertyAt(bt,0,"deltaY");for(var U=0,N=y.length;U<N;U++)if(ft=this.__charBounds[bt][U],vt=this.getValueOfPropertyAt(bt,U,n),St=this.getValueOfPropertyAt(bt,U,"fill"),f=this.getHeightOfChar(bt,U),m=this.getValueOfPropertyAt(bt,U,"deltaY"),ot&&vt&&St)e.save(),e.fillStyle=_t,e.translate(ft.renderLeft,ft.renderTop),e.rotate(ft.angle),e.fillRect(-ft.kernedWidth/2,wt*f+m,ft.kernedWidth,this.fontSize/15),e.restore();else if((vt!==_||St!==_t||f!==s||m!==p)&&st>0){var H=T+i+X;this.direction==="rtl"&&(H=this.width-H-st),_&&_t&&(e.fillStyle=_t,e.fillRect(H,B+wt*s+p,st,this.fontSize/15)),X=ft.left,st=ft.width,_=vt,_t=St,s=f,p=m}else st+=ft.kernedWidth;var H=T+i+X;this.direction==="rtl"&&(H=this.width-H-st),e.fillStyle=St,vt&&St&&e.fillRect(H,B+wt*s+p,st-pt,this.fontSize/15),M+=t}this._removeShadow(e)}},_getFontDeclaration:function(e,n){var t=e||this,s=this.fontFamily,f=r.Text.genericFonts.indexOf(s.toLowerCase())>-1,i=s===void 0||s.indexOf("'")>-1||s.indexOf(",")>-1||s.indexOf('"')>-1||f?t.fontFamily:'"'+t.fontFamily+'"';return[r.isLikelyNode?t.fontWeight:t.fontStyle,r.isLikelyNode?t.fontStyle:t.fontWeight,n?this.CACHE_FONT_SIZE+"px":t.fontSize+"px",i].join(" ")},render:function(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",e)))},_splitTextIntoLines:function(e){for(var n=e.split(this._reNewline),t=new Array(n.length),s=[`
`],f=[],i=0;i<n.length;i++)t[i]=r.util.string.graphemeSplit(n[i]),f=f.concat(t[i],s);return f.pop(),{_unwrappedLines:t,lines:n,graphemeText:f,graphemeLines:t}},toObject:function(e){var n=c.concat(e),t=this.callSuper("toObject",n);return t.styles=r.util.stylesToArray(this.styles,this.text),t.path&&(t.path=this.path.toObject()),t},set:function(e,n){this.callSuper("set",e,n);var t=!1,s=!1;if(typeof e=="object")for(var f in e)f==="path"&&this.setPathInfo(),t=t||this._dimensionAffectingProps.indexOf(f)!==-1,s=s||f==="path";else t=this._dimensionAffectingProps.indexOf(e)!==-1,s=e==="path";return s&&this.setPathInfo(),t&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),r.Text.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),r.Text.DEFAULT_SVG_FONT_SIZE=16,r.Text.fromElement=function(e,n,t){if(!e)return n(null);var s=r.parseAttributes(e,r.Text.ATTRIBUTE_NAMES),f=s.textAnchor||"left";if(t=r.util.object.extend(t?l(t):{},s),t.top=t.top||0,t.left=t.left||0,s.textDecoration){var i=s.textDecoration;i.indexOf("underline")!==-1&&(t.underline=!0),i.indexOf("overline")!==-1&&(t.overline=!0),i.indexOf("line-through")!==-1&&(t.linethrough=!0),delete t.textDecoration}"dx"in s&&(t.left+=s.dx),"dy"in s&&(t.top+=s.dy),"fontSize"in t||(t.fontSize=r.Text.DEFAULT_SVG_FONT_SIZE);var p="";"textContent"in e?p=e.textContent:"firstChild"in e&&e.firstChild!==null&&"data"in e.firstChild&&e.firstChild.data!==null&&(p=e.firstChild.data),p=p.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var m=t.strokeWidth;t.strokeWidth=0;var y=new r.Text(p,t),_=y.getScaledHeight()/y.height,T=(y.height+y.strokeWidth)*y.lineHeight-y.height,M=T*_,B=y.getScaledHeight()+M,X=0;f==="center"&&(X=y.getScaledWidth()/2),f==="right"&&(X=y.getScaledWidth()),y.set({left:y.left-X,top:y.top-(B-y.fontSize*(.07+y._fontSizeFraction))/y.lineHeight,strokeWidth:typeof m<"u"?m:1}),n(y)},r.Text.fromObject=function(e,n){var t=l(e),s=e.path;return delete t.path,r.Object._fromObject("Text",t,function(f){f.styles=r.util.stylesFromArray(e.styles,e.text),s?r.Object._fromObject("Path",s,function(i){f.set("path",i),n(f)},"path"):n(f)},"text")},r.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],r.util.createAccessors&&r.util.createAccessors(r.Text)}(u),function(){o.util.object.extend(o.Text.prototype,{isEmptyStyles:function(h){if(!this.styles||typeof h<"u"&&!this.styles[h])return!0;var r=typeof h>"u"?this.styles:{line:this.styles[h]};for(var l in r)for(var c in r[l])for(var e in r[l][c])return!1;return!0},styleHas:function(h,r){if(!this.styles||!h||h===""||typeof r<"u"&&!this.styles[r])return!1;var l=typeof r>"u"?this.styles:{0:this.styles[r]};for(var c in l)for(var e in l[c])if(typeof l[c][e][h]<"u")return!0;return!1},cleanStyle:function(h){if(!this.styles||!h||h==="")return!1;var r=this.styles,l=0,c,e,n=!0,t=0,s;for(var f in r){c=0;for(var i in r[f]){var s=r[f][i],p=s.hasOwnProperty(h);l++,p?(e?s[h]!==e&&(n=!1):e=s[h],s[h]===this[h]&&delete s[h]):n=!1,Object.keys(s).length!==0?c++:delete r[f][i]}c===0&&delete r[f]}for(var m=0;m<this._textLines.length;m++)t+=this._textLines[m].length;n&&l===t&&(this[h]=e,this.removeStyle(h))},removeStyle:function(h){if(!(!this.styles||!h||h==="")){var r=this.styles,l,c,e;for(c in r){l=r[c];for(e in l)delete l[e][h],Object.keys(l[e]).length===0&&delete l[e];Object.keys(l).length===0&&delete r[c]}}},_extendStyles:function(h,r){var l=this.get2DCursorLocation(h);this._getLineStyle(l.lineIndex)||this._setLineStyle(l.lineIndex),this._getStyleDeclaration(l.lineIndex,l.charIndex)||this._setStyleDeclaration(l.lineIndex,l.charIndex,{}),o.util.object.extend(this._getStyleDeclaration(l.lineIndex,l.charIndex),r)},get2DCursorLocation:function(h,r){typeof h>"u"&&(h=this.selectionStart);for(var l=r?this._unwrappedTextLines:this._textLines,c=l.length,e=0;e<c;e++){if(h<=l[e].length)return{lineIndex:e,charIndex:h};h-=l[e].length+this.missingNewlineOffset(e)}return{lineIndex:e-1,charIndex:l[e-1].length<h?l[e-1].length:h}},getSelectionStyles:function(h,r,l){typeof h>"u"&&(h=this.selectionStart||0),typeof r>"u"&&(r=this.selectionEnd||h);for(var c=[],e=h;e<r;e++)c.push(this.getStyleAtPosition(e,l));return c},getStyleAtPosition:function(h,r){var l=this.get2DCursorLocation(h),c=r?this.getCompleteStyleDeclaration(l.lineIndex,l.charIndex):this._getStyleDeclaration(l.lineIndex,l.charIndex);return c||{}},setSelectionStyles:function(h,r,l){typeof r>"u"&&(r=this.selectionStart||0),typeof l>"u"&&(l=this.selectionEnd||r);for(var c=r;c<l;c++)this._extendStyles(c,h);return this._forceClearCache=!0,this},_getStyleDeclaration:function(h,r){var l=this.styles&&this.styles[h];return l?l[r]:null},getCompleteStyleDeclaration:function(h,r){for(var l=this._getStyleDeclaration(h,r)||{},c={},e,n=0;n<this._styleProperties.length;n++)e=this._styleProperties[n],c[e]=typeof l[e]>"u"?this[e]:l[e];return c},_setStyleDeclaration:function(h,r,l){this.styles[h][r]=l},_deleteStyleDeclaration:function(h,r){delete this.styles[h][r]},_getLineStyle:function(h){return!!this.styles[h]},_setLineStyle:function(h){this.styles[h]={}},_deleteLineStyle:function(h){delete this.styles[h]}})}(),function(){function h(r){r.textDecoration&&(r.textDecoration.indexOf("underline")>-1&&(r.underline=!0),r.textDecoration.indexOf("line-through")>-1&&(r.linethrough=!0),r.textDecoration.indexOf("overline")>-1&&(r.overline=!0),delete r.textDecoration)}o.IText=o.util.createClass(o.Text,o.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(r,l){this.callSuper("initialize",r,l),this.initBehavior()},setSelectionStart:function(r){r=Math.max(r,0),this._updateAndFire("selectionStart",r)},setSelectionEnd:function(r){r=Math.min(r,this.text.length),this._updateAndFire("selectionEnd",r)},_updateAndFire:function(r,l){this[r]!==l&&(this._fireSelectionChanged(),this[r]=l),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(r){this.clearContextTop(),this.callSuper("render",r),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(r){this.callSuper("_render",r)},clearContextTop:function(r){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var l=this.canvas.contextTop,c=this.canvas.viewportTransform;l.save(),l.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this.transform(l),this._clearTextArea(l),r||l.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var r=this._getCursorBoundaries(),l=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(r,l):this.renderSelection(r,l),l.restore()}},_clearTextArea:function(r){var l=this.width+4,c=this.height+4;r.clearRect(-l/2,-c/2,l,c)},_getCursorBoundaries:function(r){typeof r>"u"&&(r=this.selectionStart);var l=this._getLeftOffset(),c=this._getTopOffset(),e=this._getCursorBoundariesOffsets(r);return{left:l,top:c,leftOffset:e.left,topOffset:e.top}},_getCursorBoundariesOffsets:function(r){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var l,c,e,n=0,t=0,s,f=this.get2DCursorLocation(r);e=f.charIndex,c=f.lineIndex;for(var i=0;i<c;i++)n+=this.getHeightOfLine(i);l=this._getLineLeftOffset(c);var p=this.__charBounds[c][e];return p&&(t=p.left),this.charSpacing!==0&&e===this._textLines[c].length&&(t-=this._getWidthOfCharSpacing()),s={top:n,left:l+(t>0?t:0)},this.direction==="rtl"&&(s.left*=-1),this.cursorOffsetCache=s,this.cursorOffsetCache},renderCursor:function(r,l){var c=this.get2DCursorLocation(),e=c.lineIndex,n=c.charIndex>0?c.charIndex-1:0,t=this.getValueOfPropertyAt(e,n,"fontSize"),s=this.scaleX*this.canvas.getZoom(),f=this.cursorWidth/s,i=r.topOffset,p=this.getValueOfPropertyAt(e,n,"deltaY");i+=(1-this._fontSizeFraction)*this.getHeightOfLine(e)/this.lineHeight-t*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(r,l),l.fillStyle=this.cursorColor||this.getValueOfPropertyAt(e,n,"fill"),l.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,l.fillRect(r.left+r.leftOffset-f/2,i+r.top+p,f,t)},renderSelection:function(r,l){for(var c=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,e=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,n=this.textAlign.indexOf("justify")!==-1,t=this.get2DCursorLocation(c),s=this.get2DCursorLocation(e),f=t.lineIndex,i=s.lineIndex,p=t.charIndex<0?0:t.charIndex,m=s.charIndex<0?0:s.charIndex,y=f;y<=i;y++){var _=this._getLineLeftOffset(y)||0,T=this.getHeightOfLine(y),M=0,B=0,X=0;if(y===f&&(B=this.__charBounds[f][p].left),y>=f&&y<i)X=n&&!this.isEndOfWrapping(y)?this.width:this.getLineWidth(y)||5;else if(y===i)if(m===0)X=this.__charBounds[i][m].left;else{var st=this._getWidthOfCharSpacing();X=this.__charBounds[i][m-1].left+this.__charBounds[i][m-1].width-st}M=T,(this.lineHeight<1||y===i&&this.lineHeight>1)&&(T/=this.lineHeight);var ft=r.left+_+B,vt=X-B,xt=T,St=0;this.inCompositionMode?(l.fillStyle=this.compositionColor||"black",xt=1,St=T):l.fillStyle=this.selectionColor,this.direction==="rtl"&&(ft=this.width-ft-vt),l.fillRect(ft,r.top+r.topOffset+St,vt,xt),r.topOffset+=M}},getCurrentCharFontSize:function(){var r=this._getCurrentCharIndex();return this.getValueOfPropertyAt(r.l,r.c,"fontSize")},getCurrentCharColor:function(){var r=this._getCurrentCharIndex();return this.getValueOfPropertyAt(r.l,r.c,"fill")},_getCurrentCharIndex:function(){var r=this.get2DCursorLocation(this.selectionStart,!0),l=r.charIndex>0?r.charIndex-1:0;return{l:r.lineIndex,c:l}}}),o.IText.fromObject=function(r,l){var c=o.util.stylesFromArray(r.styles,r.text),e=Object.assign({},r,{styles:c});if(h(e),e.styles)for(var n in e.styles)for(var t in e.styles[n])h(e.styles[n][t]);o.Object._fromObject("IText",e,l,"text")}}(),function(){var h=o.util.object.clone;o.util.object.extend(o.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var r=this;this.on("added",function(){var l=r.canvas;l&&(l._hasITextHandlers||(l._hasITextHandlers=!0,r._initCanvasHandlers(l)),l._iTextInstances=l._iTextInstances||[],l._iTextInstances.push(r))})},initRemovedHandler:function(){var r=this;this.on("removed",function(){var l=r.canvas;l&&(l._iTextInstances=l._iTextInstances||[],o.util.removeFromArray(l._iTextInstances,r),l._iTextInstances.length===0&&(l._hasITextHandlers=!1,r._removeCanvasHandlers(l)))})},_initCanvasHandlers:function(r){r._mouseUpITextHandler=function(){r._iTextInstances&&r._iTextInstances.forEach(function(l){l.__isMousedown=!1})},r.on("mouse:up",r._mouseUpITextHandler)},_removeCanvasHandlers:function(r){r.off("mouse:up",r._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(r,l,c,e){var n;return n={isAborted:!1,abort:function(){this.isAborted=!0}},r.animate("_currentCursorOpacity",l,{duration:c,onComplete:function(){n.isAborted||r[e]()},onChange:function(){r.canvas&&r.selectionStart===r.selectionEnd&&r.renderCursorOrSelection()},abort:function(){return n.isAborted}}),n},_onTickComplete:function(){var r=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){r._currentTickCompleteState=r._animateCursor(r,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(r){var l=this,c=r?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){l._tick()},c)},abortCursorAnimation:function(){var r=this._currentTickState||this._currentTickCompleteState,l=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,r&&l&&l.clearContext(l.contextTop||l.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(r){var l=0,c=r-1;if(this._reSpace.test(this._text[c]))for(;this._reSpace.test(this._text[c]);)l++,c--;for(;/\S/.test(this._text[c])&&c>-1;)l++,c--;return r-l},findWordBoundaryRight:function(r){var l=0,c=r;if(this._reSpace.test(this._text[c]))for(;this._reSpace.test(this._text[c]);)l++,c++;for(;/\S/.test(this._text[c])&&c<this._text.length;)l++,c++;return r+l},findLineBoundaryLeft:function(r){for(var l=0,c=r-1;!/\n/.test(this._text[c])&&c>-1;)l++,c--;return r-l},findLineBoundaryRight:function(r){for(var l=0,c=r;!/\n/.test(this._text[c])&&c<this._text.length;)l++,c++;return r+l},searchWordBoundary:function(r,l){for(var c=this._text,e=this._reSpace.test(c[r])?r-1:r,n=c[e],t=o.reNonWord;!t.test(n)&&e>0&&e<c.length;)e+=l,n=c[e];return t.test(n)&&(e+=l===1?0:1),e},selectWord:function(r){r=r||this.selectionStart;var l=this.searchWordBoundary(r,-1),c=this.searchWordBoundary(r,1);this.selectionStart=l,this.selectionEnd=c,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(r){r=r||this.selectionStart;var l=this.findLineBoundaryLeft(r),c=this.findLineBoundaryRight(r);return this.selectionStart=l,this.selectionEnd=c,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(r){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(r),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(r){r._iTextInstances&&r._iTextInstances.forEach(function(l){l.selected=!1,l.isEditing&&l.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(r){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var l=this.getSelectionStartFromPointer(r.e),c=this.selectionStart,e=this.selectionEnd;(l!==this.__selectionStartOnMouseDown||c===e)&&(c===l||e===l)||(l>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=l):(this.selectionStart=l,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==c||this.selectionEnd!==e)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(r,l,c){var e=c.slice(0,r),n=o.util.string.graphemeSplit(e).length;if(r===l)return{selectionStart:n,selectionEnd:n};var t=c.slice(r,l),s=o.util.string.graphemeSplit(t).length;return{selectionStart:n,selectionEnd:n+s}},fromGraphemeToStringSelection:function(r,l,c){var e=c.slice(0,r),n=e.join("").length;if(r===l)return{selectionStart:n,selectionEnd:n};var t=c.slice(r,l),s=t.join("").length;return{selectionStart:n,selectionEnd:n+s}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var r=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=r.selectionStart,this.hiddenTextarea.selectionEnd=r.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var r=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=r.selectionEnd,this.inCompositionMode||(this.selectionStart=r.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var r=this._calcTextareaPosition();this.hiddenTextarea.style.left=r.left,this.hiddenTextarea.style.top=r.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var r=this.inCompositionMode?this.compositionStart:this.selectionStart,l=this._getCursorBoundaries(r),c=this.get2DCursorLocation(r),e=c.lineIndex,n=c.charIndex,t=this.getValueOfPropertyAt(e,n,"fontSize")*this.lineHeight,s=l.leftOffset,f=this.calcTransformMatrix(),i={x:l.left+s,y:l.top+l.topOffset+t},p=this.canvas.getRetinaScaling(),m=this.canvas.upperCanvasEl,y=m.width/p,_=m.height/p,T=y-t,M=_-t,B=m.clientWidth/y,X=m.clientHeight/_;return i=o.util.transformPoint(i,f),i=o.util.transformPoint(i,this.canvas.viewportTransform),i.x*=B,i.y*=X,i.x<0&&(i.x=0),i.x>T&&(i.x=T),i.y<0&&(i.y=0),i.y>M&&(i.y=M),i.x+=this.canvas._offset.left,i.y+=this.canvas._offset.top,{left:i.x+"px",top:i.y+"px",fontSize:t+"px",charHeight:t}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var r=this._textBeforeEdit!==this.text,l=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,l&&(l.blur&&l.blur(),l.parentNode&&l.parentNode.removeChild(l)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),r&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),r&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var r in this.styles)this._textLines[r]||delete this.styles[r]},removeStyleFromTo:function(r,l){var c=this.get2DCursorLocation(r,!0),e=this.get2DCursorLocation(l,!0),n=c.lineIndex,t=c.charIndex,s=e.lineIndex,f=e.charIndex,i,p;if(n!==s){if(this.styles[n])for(i=t;i<this._unwrappedTextLines[n].length;i++)delete this.styles[n][i];if(this.styles[s])for(i=f;i<this._unwrappedTextLines[s].length;i++)p=this.styles[s][i],p&&(this.styles[n]||(this.styles[n]={}),this.styles[n][t+i-f]=p);for(i=n+1;i<=s;i++)delete this.styles[i];this.shiftLineStyles(s,n-s)}else if(this.styles[n]){p=this.styles[n];var m=f-t,y,_;for(i=t;i<f;i++)delete p[i];for(_ in this.styles[n])y=parseInt(_,10),y>=f&&(p[y-m]=p[_],delete p[_])}},shiftLineStyles:function(r,l){var c=h(this.styles);for(var e in this.styles){var n=parseInt(e,10);n>r&&(this.styles[n+l]=c[n],c[n-l]||delete this.styles[n])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(r,l,c,e){var n,t={},s=!1,f=this._unwrappedTextLines[r].length===l;c||(c=1),this.shiftLineStyles(r,c),this.styles[r]&&(n=this.styles[r][l===0?l:l-1]);for(var i in this.styles[r]){var p=parseInt(i,10);p>=l&&(s=!0,t[p-l]=this.styles[r][i],f&&l===0||delete this.styles[r][i])}var m=!1;for(s&&!f&&(this.styles[r+c]=t,m=!0),m&&c--;c>0;)e&&e[c-1]?this.styles[r+c]={0:h(e[c-1])}:n?this.styles[r+c]={0:h(n)}:delete this.styles[r+c],c--;this._forceClearCache=!0},insertCharStyleObject:function(r,l,c,e){this.styles||(this.styles={});var n=this.styles[r],t=n?h(n):{};c||(c=1);for(var s in t){var f=parseInt(s,10);f>=l&&(n[f+c]=t[f],t[f-c]||delete n[f])}if(this._forceClearCache=!0,e){for(;c--;)Object.keys(e[c]).length&&(this.styles[r]||(this.styles[r]={}),this.styles[r][l+c]=h(e[c]));return}if(n)for(var i=n[l?l-1:1];i&&c--;)this.styles[r][l+c]=h(i)},insertNewStyleBlock:function(r,l,c){for(var e=this.get2DCursorLocation(l,!0),n=[0],t=0,s=0;s<r.length;s++)r[s]===`
`?(t++,n[t]=0):n[t]++;n[0]>0&&(this.insertCharStyleObject(e.lineIndex,e.charIndex,n[0],c),c=c&&c.slice(n[0]+1)),t&&this.insertNewlineStyleObject(e.lineIndex,e.charIndex+n[0],t);for(var s=1;s<t;s++)n[s]>0?this.insertCharStyleObject(e.lineIndex+s,0,n[s],c):c&&this.styles[e.lineIndex+s]&&c[0]&&(this.styles[e.lineIndex+s][0]=c[0]),c=c&&c.slice(n[s]+1);n[s]>0&&this.insertCharStyleObject(e.lineIndex+s,0,n[s],c)},setSelectionStartEndWithShift:function(r,l,c){c<=r?(l===r?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=r),this.selectionStart=c):c>r&&c<l?this._selectionDirection==="right"?this.selectionEnd=c:this.selectionStart=c:(l===r?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=l),this.selectionEnd=c)},setSelectionInBoundaries:function(){var r=this.text.length;this.selectionStart>r?this.selectionStart=r:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>r?this.selectionEnd=r:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),o.util.object.extend(o.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(h){if(this.canvas){this.__newClickTime=+new Date;var r=h.pointer;this.isTripleClick(r)&&(this.fire("tripleclick",h),this._stopEvent(h.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=r,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(h){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===h.x&&this.__lastPointer.y===h.y},_stopEvent:function(h){h.preventDefault&&h.preventDefault(),h.stopPropagation&&h.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(h){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(h.e))},tripleClickHandler:function(h){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(h.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(h){!this.canvas||!this.editable||h.e.button&&h.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(h.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(h){!this.canvas||!this.editable||h.e.button&&h.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(h){if(this.__isMousedown=!1,!(!this.editable||this.group||h.transform&&h.transform.actionPerformed||h.e.button&&h.e.button!==1)){if(this.canvas){var r=this.canvas._activeObject;if(r&&r!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(h.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(h){var r=this.getSelectionStartFromPointer(h),l=this.selectionStart,c=this.selectionEnd;h.shiftKey?this.setSelectionStartEndWithShift(l,c,r):(this.selectionStart=r,this.selectionEnd=r),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(h){for(var r=this.getLocalPointer(h),l=0,c=0,e=0,n=0,t=0,s,f,i=0,p=this._textLines.length;i<p&&e<=r.y;i++)e+=this.getHeightOfLine(i)*this.scaleY,t=i,i>0&&(n+=this._textLines[i-1].length+this.missingNewlineOffset(i-1));s=this._getLineLeftOffset(t),c=s*this.scaleX,f=this._textLines[t],this.direction==="rtl"&&(r.x=this.width*this.scaleX-r.x+c);for(var m=0,y=f.length;m<y&&(l=c,c+=this.__charBounds[t][m].kernedWidth*this.scaleX,c<=r.x);m++)n++;return this._getNewSelectionStartFromOffset(r,l,c,n,y)},_getNewSelectionStartFromOffset:function(h,r,l,c,e){var n=h.x-r,t=l-h.x,s=t>n||t<0?0:1,f=c+s;return this.flipX&&(f=e-f),f>this._text.length&&(f=this._text.length),f}}),o.util.object.extend(o.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=o.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var h=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+h.top+"; left: "+h.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+h.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):o.document.body.appendChild(this.hiddenTextarea),o.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),o.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),o.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),o.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),o.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),o.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),o.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),o.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),o.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(o.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(h){if(this.isEditing){var r=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(h.keyCode in r)this[r[h.keyCode]](h);else if(h.keyCode in this.ctrlKeysMapDown&&(h.ctrlKey||h.metaKey))this[this.ctrlKeysMapDown[h.keyCode]](h);else return;h.stopImmediatePropagation(),h.preventDefault(),h.keyCode>=33&&h.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(h){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(h.keyCode in this.ctrlKeysMapUp&&(h.ctrlKey||h.metaKey))this[this.ctrlKeysMapUp[h.keyCode]](h);else return;h.stopImmediatePropagation(),h.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(h){var r=this.fromPaste;if(this.fromPaste=!1,h&&h.stopPropagation(),!!this.isEditing){var l=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,c=this._text.length,e=l.length,n,t,s=e-c,f=this.selectionStart,i=this.selectionEnd,p=f!==i,m,y,_;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var T=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),M=f>T.selectionStart;p?(n=this._text.slice(f,i),s+=i-f):e<c&&(M?n=this._text.slice(i+s,i):n=this._text.slice(f,f-s)),t=l.slice(T.selectionEnd-s,T.selectionEnd),n&&n.length&&(t.length&&(m=this.getSelectionStyles(f,f+1,!1),m=t.map(function(){return m[0]})),p?(y=f,_=i):M?(y=i-n.length,_=i):(y=i,_=i+n.length),this.removeStyleFromTo(y,_)),t.length&&(r&&t.join("")===o.copiedText&&!o.disableStyleCopyPaste&&(m=o.copiedTextStyle),this.insertNewStyleBlock(t,f,m)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(h){this.compositionStart=h.target.selectionStart,this.compositionEnd=h.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(o.copiedText=this.getSelectedText(),o.disableStyleCopyPaste?o.copiedTextStyle=null:o.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(h){return h&&h.clipboardData||o.window.clipboardData},_getWidthBeforeCursor:function(h,r){var l=this._getLineLeftOffset(h),c;return r>0&&(c=this.__charBounds[h][r-1],l+=c.left+c.width),l},getDownCursorOffset:function(h,r){var l=this._getSelectionForOffset(h,r),c=this.get2DCursorLocation(l),e=c.lineIndex;if(e===this._textLines.length-1||h.metaKey||h.keyCode===34)return this._text.length-l;var n=c.charIndex,t=this._getWidthBeforeCursor(e,n),s=this._getIndexOnLine(e+1,t),f=this._textLines[e].slice(n);return f.length+s+1+this.missingNewlineOffset(e)},_getSelectionForOffset:function(h,r){return h.shiftKey&&this.selectionStart!==this.selectionEnd&&r?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(h,r){var l=this._getSelectionForOffset(h,r),c=this.get2DCursorLocation(l),e=c.lineIndex;if(e===0||h.metaKey||h.keyCode===33)return-l;var n=c.charIndex,t=this._getWidthBeforeCursor(e,n),s=this._getIndexOnLine(e-1,t),f=this._textLines[e].slice(0,n),i=this.missingNewlineOffset(e-1);return-this._textLines[e-1].length+s-f.length+(1-i)},_getIndexOnLine:function(h,r){for(var l=this._textLines[h],c=this._getLineLeftOffset(h),e=c,n=0,t,s,f=0,i=l.length;f<i;f++)if(t=this.__charBounds[h][f].width,e+=t,e>r){s=!0;var p=e-t,m=e,y=Math.abs(p-r),_=Math.abs(m-r);n=_<y?f:f-1;break}return s||(n=l.length-1),n},moveCursorDown:function(h){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",h)},moveCursorUp:function(h){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",h)},_moveCursorUpOrDown:function(h,r){var l="get"+h+"CursorOffset",c=this[l](r,this._selectionDirection==="right");r.shiftKey?this.moveCursorWithShift(c):this.moveCursorWithoutShift(c),c!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(h){var r=this._selectionDirection==="left"?this.selectionStart+h:this.selectionEnd+h;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,r),h!==0},moveCursorWithoutShift:function(h){return h<0?(this.selectionStart+=h,this.selectionEnd=this.selectionStart):(this.selectionEnd+=h,this.selectionStart=this.selectionEnd),h!==0},moveCursorLeft:function(h){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",h)},_move:function(h,r,l){var c;if(h.altKey)c=this["findWordBoundary"+l](this[r]);else if(h.metaKey||h.keyCode===35||h.keyCode===36)c=this["findLineBoundary"+l](this[r]);else return this[r]+=l==="Left"?-1:1,!0;if(typeof c<"u"&&this[r]!==c)return this[r]=c,!0},_moveLeft:function(h,r){return this._move(h,r,"Left")},_moveRight:function(h,r){return this._move(h,r,"Right")},moveCursorLeftWithoutShift:function(h){var r=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(r=this._moveLeft(h,"selectionStart")),this.selectionEnd=this.selectionStart,r},moveCursorLeftWithShift:function(h){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(h,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(h,"selectionStart")},moveCursorRight:function(h){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",h)},_moveCursorLeftOrRight:function(h,r){var l="moveCursor"+h+"With";this._currentCursorOpacity=1,r.shiftKey?l+="Shift":l+="outShift",this[l](r)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(h){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(h,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(h,"selectionEnd")},moveCursorRightWithoutShift:function(h){var r=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(r=this._moveRight(h,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,r},removeChars:function(h,r){typeof r>"u"&&(r=h+1),this.removeStyleFromTo(h,r),this._text.splice(h,r-h),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(h,r,l,c){typeof c>"u"&&(c=l),c>l&&this.removeStyleFromTo(l,c);var e=o.util.string.graphemeSplit(h);this.insertNewStyleBlock(e,l,r),this._text=[].concat(this._text.slice(0,l),e,this._text.slice(c)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var h=o.util.toFixed,r=/  +/g;o.util.object.extend(o.Text.prototype,{_toSVG:function(){var l=this._getSVGLeftTopOffsets(),c=this._getSVGTextAndBg(l.textTop,l.textLeft);return this._wrapSVGTextAndBg(c)},toSVG:function(l){return this._createBaseSVGMarkup(this._toSVG(),{reviver:l,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(l){var c=!0,e=this.getSvgTextDecoration(this);return[l.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",e?'text-decoration="'+e+'" ':"",'style="',this.getSvgStyles(c),'"',this.addPaintOrder()," >",l.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(l,c){var e=[],n=[],t=l,s;this._setSVGBg(n);for(var f=0,i=this._textLines.length;f<i;f++)s=this._getLineLeftOffset(f),(this.textBackgroundColor||this.styleHas("textBackgroundColor",f))&&this._setSVGTextLineBg(n,f,c+s,t),this._setSVGTextLineText(e,f,c+s,t),t+=this.getHeightOfLine(f);return{textSpans:e,textBgRects:n}},_createTextCharSpan:function(l,c,e,n){var t=l!==l.trim()||l.match(r),s=this.getSvgSpanStyles(c,t),f=s?'style="'+s+'"':"",i=c.deltaY,p="",m=o.Object.NUM_FRACTION_DIGITS;return i&&(p=' dy="'+h(i,m)+'" '),['<tspan x="',h(e,m),'" y="',h(n,m),'" ',p,f,">",o.util.string.escapeXml(l),"</tspan>"].join("")},_setSVGTextLineText:function(l,c,e,n){var t=this.getHeightOfLine(c),s=this.textAlign.indexOf("justify")!==-1,f,i,p="",m,y,_=0,T=this._textLines[c],M;n+=t*(1-this._fontSizeFraction)/this.lineHeight;for(var B=0,X=T.length-1;B<=X;B++)M=B===X||this.charSpacing,p+=T[B],m=this.__charBounds[c][B],_===0?(e+=m.kernedWidth-m.width,_+=m.width):_+=m.kernedWidth,s&&!M&&this._reSpaceAndTab.test(T[B])&&(M=!0),M||(f=f||this.getCompleteStyleDeclaration(c,B),i=this.getCompleteStyleDeclaration(c,B+1),M=o.util.hasStyleChanged(f,i,!0)),M&&(y=this._getStyleDeclaration(c,B)||{},l.push(this._createTextCharSpan(p,y,e,n)),p="",f=i,e+=_,_=0)},_pushTextBgRect:function(l,c,e,n,t,s){var f=o.Object.NUM_FRACTION_DIGITS;l.push("		<rect ",this._getFillAttributes(c),' x="',h(e,f),'" y="',h(n,f),'" width="',h(t,f),'" height="',h(s,f),`"></rect>
`)},_setSVGTextLineBg:function(l,c,e,n){for(var t=this._textLines[c],s=this.getHeightOfLine(c)/this.lineHeight,f=0,i=0,p,m,y=this.getValueOfPropertyAt(c,0,"textBackgroundColor"),_=0,T=t.length;_<T;_++)p=this.__charBounds[c][_],m=this.getValueOfPropertyAt(c,_,"textBackgroundColor"),m!==y?(y&&this._pushTextBgRect(l,y,e+i,n,f,s),i=p.left,f=p.width,y=m):f+=p.kernedWidth;m&&this._pushTextBgRect(l,m,e+i,n,f,s)},_getFillAttributes:function(l){var c=l&&typeof l=="string"?new o.Color(l):"";return!c||!c.getSource()||c.getAlpha()===1?'fill="'+l+'"':'opacity="'+c.getAlpha()+'" fill="'+c.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(l){for(var c=0,e=0,n=0;n<l;n++)c+=this.getHeightOfLine(n);return e=this.getHeightOfLine(n),{lineTop:c,offset:(this._fontSizeMult-this._fontSizeFraction)*e/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(l){var c=o.Object.prototype.getSvgStyles.call(this,l);return c+" white-space: pre;"}})}(),function(h){var r=h.fabric||(h.fabric={});r.Textbox=r.util.createClass(r.IText,r.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:r.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(l){for(var c=0,e=0,n=0,t={},s=0;s<l.graphemeLines.length;s++)l.graphemeText[n]===`
`&&s>0?(e=0,n++,c++):!this.splitByGrapheme&&this._reSpaceAndTab.test(l.graphemeText[n])&&s>0&&(e++,n++),t[s]={line:c,offset:e},n+=l.graphemeLines[s].length,e+=l.graphemeLines[s].length;return t},styleHas:function(l,c){if(this._styleMap&&!this.isWrapping){var e=this._styleMap[c];e&&(c=e.line)}return r.Text.prototype.styleHas.call(this,l,c)},isEmptyStyles:function(l){if(!this.styles)return!0;var c=0,e=l+1,n,t,s=!1,f=this._styleMap[l],i=this._styleMap[l+1];f&&(l=f.line,c=f.offset),i&&(e=i.line,s=e===l,n=i.offset),t=typeof l>"u"?this.styles:{line:this.styles[l]};for(var p in t)for(var m in t[p])if(m>=c&&(!s||m<n))for(var y in t[p][m])return!1;return!0},_getStyleDeclaration:function(l,c){if(this._styleMap&&!this.isWrapping){var e=this._styleMap[l];if(!e)return null;l=e.line,c=e.offset+c}return this.callSuper("_getStyleDeclaration",l,c)},_setStyleDeclaration:function(l,c,e){var n=this._styleMap[l];l=n.line,c=n.offset+c,this.styles[l][c]=e},_deleteStyleDeclaration:function(l,c){var e=this._styleMap[l];l=e.line,c=e.offset+c,delete this.styles[l][c]},_getLineStyle:function(l){var c=this._styleMap[l];return!!this.styles[c.line]},_setLineStyle:function(l){var c=this._styleMap[l];this.styles[c.line]={}},_wrapText:function(l,c){var e=[],n;for(this.isWrapping=!0,n=0;n<l.length;n++)e=e.concat(this._wrapLine(l[n],n,c));return this.isWrapping=!1,e},_measureWord:function(l,c,e){var n=0,t,s=!0;e=e||0;for(var f=0,i=l.length;f<i;f++){var p=this._getGraphemeBox(l[f],c,f+e,t,s);n+=p.kernedWidth,t=l[f]}return n},_wrapLine:function(l,c,e,ft){var t=0,s=this.splitByGrapheme,f=[],i=[],p=s?r.util.string.graphemeSplit(l):l.split(this._wordJoiners),m="",y=0,_=s?"":" ",T=0,M=0,B=0,X=!0,st=this._getWidthOfCharSpacing(),ft=ft||0;p.length===0&&p.push([]),e-=ft;for(var vt=0;vt<p.length;vt++)m=s?p[vt]:r.util.string.graphemeSplit(p[vt]),T=this._measureWord(m,c,y),y+=m.length,t+=M+T-st,t>e&&!X?(f.push(i),i=[],t=T,X=!0):t+=st,!X&&!s&&i.push(_),i=i.concat(m),M=s?0:this._measureWord([_],c,y),y++,X=!1,T>B&&(B=T);return vt&&f.push(i),B+ft>this.dynamicMinWidth&&(this.dynamicMinWidth=B-st+ft),f},isEndOfWrapping:function(l){return!this._styleMap[l+1]||this._styleMap[l+1].line!==this._styleMap[l].line},missingNewlineOffset:function(l){return this.splitByGrapheme?this.isEndOfWrapping(l)?1:0:1},_splitTextIntoLines:function(l){for(var c=r.Text.prototype._splitTextIntoLines.call(this,l),e=this._wrapText(c.lines,this.width),n=new Array(e.length),t=0;t<e.length;t++)n[t]=e[t].join("");return c.lines=n,c.graphemeLines=e,c},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var l={};for(var c in this._styleMap)this._textLines[c]&&(l[this._styleMap[c].line]=1);for(var c in this.styles)l[c]||delete this.styles[c]},toObject:function(l){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(l))}}),r.Textbox.fromObject=function(l,c){var e=r.util.stylesFromArray(l.styles,l.text),n=Object.assign({},l,{styles:e});return r.Object._fromObject("Textbox",n,c,"text")}}(u),function(){var h=o.controlsUtils,r=h.scaleSkewCursorStyleHandler,l=h.scaleCursorStyleHandler,c=h.scalingEqually,e=h.scalingYOrSkewingX,n=h.scalingXOrSkewingY,t=h.scaleOrSkewActionName,s=o.Object.prototype.controls;if(s.ml=new o.Control({x:-.5,y:0,cursorStyleHandler:r,actionHandler:n,getActionName:t}),s.mr=new o.Control({x:.5,y:0,cursorStyleHandler:r,actionHandler:n,getActionName:t}),s.mb=new o.Control({x:0,y:.5,cursorStyleHandler:r,actionHandler:e,getActionName:t}),s.mt=new o.Control({x:0,y:-.5,cursorStyleHandler:r,actionHandler:e,getActionName:t}),s.tl=new o.Control({x:-.5,y:-.5,cursorStyleHandler:l,actionHandler:c}),s.tr=new o.Control({x:.5,y:-.5,cursorStyleHandler:l,actionHandler:c}),s.bl=new o.Control({x:-.5,y:.5,cursorStyleHandler:l,actionHandler:c}),s.br=new o.Control({x:.5,y:.5,cursorStyleHandler:l,actionHandler:c}),s.mtr=new o.Control({x:0,y:-.5,actionHandler:h.rotationWithSnapping,cursorStyleHandler:h.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),o.Textbox){var f=o.Textbox.prototype.controls={};f.mtr=s.mtr,f.tr=s.tr,f.br=s.br,f.tl=s.tl,f.bl=s.bl,f.mt=s.mt,f.mb=s.mb,f.mr=new o.Control({x:.5,y:0,actionHandler:h.changeWidth,cursorStyleHandler:r,actionName:"resizing"}),f.ml=new o.Control({x:-.5,y:0,actionHandler:h.changeWidth,cursorStyleHandler:r,actionName:"resizing"})}}()})(an);function Th(){return["/images/templates/1.png","/images/templates/2.png","/images/templates/3.png","/images/templates/4.png","/images/templates/5.png","/images/templates/6.png","/images/templates/7.png","/images/templates/8.png","/images/templates/9.png","/images/templates/10.png","/images/templates/11.png","/images/templates/12.png"].map((u,o)=>({id:o,url:u}))}const Oh="data:image/webp;base64,UklGRtQDAABXRUJQVlA4WAoAAAAQAAAAIAAAIQAAQUxQSLwBAAABkCvbtmlb49m2bdtmaNu2bSMyU9u2bdu21YM91zr7/kFETIDsBB0Pvf74/sPH67NyKdyml3F/nJs5hCz7AT5dPXvh2T/gbf2ICjwGjnTNHl1KUnfJN2BYBLlvw6t60eXMvxXo6LcHTmeX9xT4U8qnCzzNrGDSDKljBLQA9sVwJb0AzWSu//ympJHsNtR31YM9MqNdgGqGmsEO12JoZ+kcVLEyPuR+GsdVXiVxHIPKluZDS8dLLseVMp18cvv6N3hy/cGjFpIGQj/He7ZHk4rhO0ZSexjqeMuRmFKeTz79JPWAwY5HPEooxS5VvUKZ69A7b9UqqSVNgi6OQ/wsJvswVJYZbSc/Kzl6wxIrxkWoZpWC43IW+ceTLIYueCyH6S4thjVWnW5tUxiN4HU6j4JvYY7hrvgVBsq3B7A4oU/997BS/sOA6y2jWaU3AozO18hL3QFurh7SuNP8Y18I/vzDOC9VPoXv0wErCA70UpxmKz9aJwdlV0OD/l6S0hZu1atblaxxJS2y6BuBd6GLFsNCU6orFsNCU6YLFqNCU9pjFtNCU9IL1p7wlOZE4Fr6KFCKg3Azk6I0y5MHuSRWUDgg8gEAALALAJ0BKiEAIgA+nUCfSiWjoyGquqlYsBOJaQATjPwA7AawN8n8o/nBf7Pkd+h/YD/kH9C/WjtIehL+qv//CwfylJVS+lqu9Shr5zEq8DkrYYKO1qBVR8OcB6Iqw+vA2v+za0pMAAD+mT/9N5MeB58JXrOUt5kQKbW/nL6RtfT1EbLZj7pDgYvKqvyIsz1j+7c4pXY1YmvIvuiRBlGS/1hp9fo5coOYwLl3bOHvseZGQUFtaq9BnrYZBja8E6c1Eza0ATOzsOsV0MuIj1yW/jVwy+ezNYbTqxjFW1IIzHgHWvtU+32WGfgg9LtRi1SS6fJAEH3/Ble4PSZTgLJ+yycd+ov0s3flvtMsm//kW4qZVhPajgfDOsG5+byavIQ1UGUff1WiGsEAHPrWkQAyC3KfqOWbaN8Orj7mBAn5tBVunmgH8VDx9w6+vfy3a24sxdvVSROsyPkINFvwUVoy9JRlHKReb3LSeGiVbp779DiieUmXqtrvfsfIZ9zuKvzIW8blaDfhb254hwUGSIyN19gqd6FB9qC3ucf2/3ZJhFXQm4ADJ7XiDGnWIJVpWCian7Rm4b8HVTYZKxRXGg3FPWZaYCKX7tv/N6zvqQaf2OcD/TBYYD3krxwpp8D31f7I4T/9+ldC+a4a+CXe37/vEoAAAA==",Ph="data:image/webp;base64,UklGRoADAABXRUJQVlA4WAoAAAAQAAAAIAAAIQAAQUxQSI0BAAABkHPbtrG9qvdnxLZtp3KqlLZt2zYqs7Vt27ZtWyu4+iJiAmRO1nbf87ev37y9PK2AwjY8j/3tzJwBcu0GeHfx5JlHv4CXtb2K3QcOdMwbKaWqueATMMij4HV4VitS1qIbgbZuO+B4XjlPgB8VXDrAw5zynAO7omypz0Aj+aa5DrVttWCH/BvBFtt8aBUg+11uZ7Jc5FmqAJoNTS1POR8v5Tj64Lr5zr0mkvpCL8trNkdIZXAdIak1DLS85EC0VOidSy9JXaC/5R73kkuxFWpUMVermlHSOOhg2cfXMvKP2MrXypbusCBABTgsa6lfPMjltxgm2zQfVnjVg+dZHIq/hBkelT5CX7l2AeYnd6n9GpbKfRBwuWmEqeJagOFF6jmpM8DV5QPqt5t96AP/f/3BKCdVOYbrwz5L+L+vk+IaLX1rOtovr+oa6O0kKXPJZt06Vc0dL2meiZ4eziXOmhgUTBkumBgUTDnOmBgWTJkPmZgUTKnPmHaEU6Yj/13KmgRKtxeu5lCS5npwp4AEAFZQOCDMAQAAkAoAnQEqIQAiAD6dRJxLJaOioaq1WViwE4lpAAsARwIQD+J81r/neSb8n/xPsDfyL+kb5B+pI09x6vxhR4TUxwpQK8ev4GZPWHZAAFylNbHMfaQgYEGp7J8ZMqFQAP62ofYauxemdYxC+rfuhmAOWrRN3+nThP2wWtcMH0Z89NRdF9Ao8ArdC78C3+dWHsSemG2ZMRmp5Kdz5e9pj/jB8CwiutiPOunai0SoW0FPN2vEoIRhB/QAMiykYyZ1kj0lZ5O5K4VIyHfyTHw5gEMPbJ2AD96LMB8HX7W0z0tXiRZGRWfoXqpNxnCWr1dP3LwSJP8uV7VMcpUYE7USwByddeH8I1Ts+25+D37yhdu/EW8YK2Zc/Egwwdi+1KeKAR+BEx+mVhhN1NJBCtKltd3na7vGMPGH+EA/pOFp3d3fHi5+0ZV3ultaQWCdxm9XkOjtoS3+Tq+mt/mxnwpasg0hdWN3eunt0n6/XVnj1S+RHi7r6bp/w2+OTcPSIZjZVaKjxfnz1zdAX4BxhbqqSXWSPckoUU/tvql9rndyQkLqEEf9jTPepEIP2MwGnkGnPsGC6FJOT/5QHxk9P/uvqYWQqFvBetW0Fn/vEoAAAA==",Eh="data:image/webp;base64,UklGRiADAABXRUJQVlA4WAoAAAAQAAAAHQAAIQAAQUxQSEQBAAABkHPbtrG90vdnm51R2jZiJ61t26nU2Ulp27aNyra5i3Of89wvIiYA+tZz0JKzeb8FMk+TO+1N+ktyk63SC5T3x03rlRrhymcetf/fruyg8uhyla5PVim8d9DmfCdgxHcLXK9AxmHT1e6DN943cY0CmGzYBABtDxg4QYP8IyT3CGC0gWkaYPgv7jZhgGGnDkVP7jpgsWCKDnE9PBwCPopRLtQLxW57TeKtvcC3JL/Yw32Sn49funRpg517JD+R5D8PK49JfnlOkvU2sv6Q/LxRLLIxgSQv9xTfoy08FnMiv5LkanfjKHOxQrCdm5z/4jgQ/1v8adQVfqCsBDBQ8G9/zciflEshNwjyRP8IAB4JY6/QeM3X4LHfQL67efzso280346G41aT/ngwlHPdzfWEuvCg6vvGHLgumnrhk3yze3QKnAFWUDggtgEAALAKAJ0BKh4AIgA+mUCYSCWkIqE1VAgAsBMJaQAT1z9Q5TQ9w3A1pIubms+aPYC/if9X6s365ewh+xATt/fmts9ZCo8SY7ZDfAa+7X7VEF3sChfqannsEDKKiyO8ReAA/c0vnF2T/3zrC02wbOQ3eGUCG/9ZWzl3ayLUM6ZA3VjFm88+6wasenNOMUh8ErRgU5aaJNfgK9JJpj0hunyyZPd4HfwhLYb109xr3/RHYGx+hnkf/5+M8Xj89JZvyg8UM3xqK3lFWGPA0jv0Hossbd42j6dastXLg9LcA9aKER+8L/lqYmg8uF2/9z7BLMF/6hFVbvojvYc0o+hf1ltcXJpfrKTl3ygcRG/J640Yow+YpbhCtsCkL1l3yMCYBIleXEljS3XV3jdY2ZbbYT0gglapRZWiJdtGNAOqNQpwOqwpBrmkKOeC7oBTAyOOG32c7m5YSXYf5EdrUp7R/t1E1grBLkmjJ3ql1dz+tT5vYmgfX/Yr7fH+2iaP+vrLXp6PpjQWcL8kD/Jt+ncDn/s6Dow3toO+435f7Jj36UfS5l/UvrDbh9b/9o+vO99TVEf/vtXlgAAAAA==",Ah="data:image/webp;base64,UklGRjYDAABXRUJQVlA4WAoAAAAQAAAAHQAAIQAAQUxQSEIBAAABkHLb1rHtsvdrm82Itv1+tqpt219Ss78v2rZtI9k2dziXnoiYANjOaQ2P3udsj+wkT2d7YBPJv5OcRKX3mjbuPuWFcqsOK9/+p+k8P6Oak7S+2sVLN58ud/hq1tPh9xHQrqH6/sbB3a+qDmdBO4HKA20BYJNiMvQZVI6Gcg/JI4Uw3KkYAPVu/hoO0zTKxdDefVIC41HiY5DGq0cCzHeLhXD+VrRw94Xk22B3n0neh/tPJO+52XDp0qXjX0g+duL1jyQ/k/yT46KRJJ9fJskJLhaJjXPEYwex30XPfMFxdqtJ8ms0jov/eTbtKFcA1YIfis2a/4jfiQCWCv4cadL/L+VAAPC/JsgrY5O8AET1P0HlBihjbyvIb4/OHr/5jur9XiqEHleZb4Wh91y7uTDP2/jd6GAxrNNG737zSV6YWgI9VlA4IM4BAAAwCwCdASoeACIAPp08mkiloyKhNVQIALATiWkAE4o/EaUAj1kv7/e+Tv6E/5XuBfx3+leiB69P2A9g/9UAngIOOs7QA7WFs0xzufvmzzdJ9i9uK/fn/sfU1mmqlP57fDKJ4AD+0y3xdSXKrC9VYtfO+aRPR6cpBCC9Mykxb2GnlSTeQATVu6t7qMk8mbaytB48fQRZDwu45e58r6QixW3irVkbypM9jSVMAOo+8YIO1wuSYJfk04nTQGrZlM/GK59nEPBjIcy0j78XaTEnYviveAgwPj5mCYUViWd4Ox0y6jLKnk1n4Wm/CutSonH8KN/Z0jwv87fShr/7EiIsuwMTD+kIu6Ml/QNEskCHZ/jP+ZAAvRTi0S3w06kQsSsL5Zgxx4te6tn/wSxsGhWx+2pnjUjaot3SGklcaE48qWlcAW6XmZ6M5v6eVC9RnESOePoN7Xr8BKRmOdmwAoM/m1zXLGYzcqZBufeVKR4+w+P8FXmlLCEAx8OmdShfv+KRJnv0ejVCYU72/d756Mk8H/Nz61JCW54O//Hb/+ly1GMzGTNkzLH+jipMgqsv+8cihzEvaDrrYQfSYP7P/9XP4Fum4hij//itIMzC8EgAAAA=",Mh="data:image/webp;base64,UklGRgADAABXRUJQVlA4WAoAAAAQAAAAGwAAIQAAQUxQSEEBAAABkHNb27G5qq+x2bl0bNu2bXW27dRs09pOStu2y/Gc4NFExATI2n3D8dtv3945saGH/o85+7WTjInLnuH4bFmSVAD7DeM+APy8ceLEjR8AHycoFXb/tx/4sadbsiQld939HdiY/Jsdkk4DGzPkmLYBuP+FHYo9Al/ayDPpNMAOtYAPWXLPH9thfoUh/eLdfLknVWHepYCJPy0HQyhzgLlUMwK4crgOWr5hW7ClVfdgS6Cx/HoIbA4yBu78x6YAo4CHD3lZDhu8RmDa1xBY7zEcyxW1B9Y5jcB2VeoBrHUYhsMVST2B1ZYh+Ki0DPYaJuA3qAIWGfr5zQPGyNywwuW6NAcYJ3vjSoczmgKMk2uTCtuhocB4uTeutPwCJsi3SZUJmCT/5jWWyQrZsobbd2CKwrak4jtTFXrYB9YrfFYn1SUAVlA4IJgBAABQCQCdASocACIAPpk6mUgloyKhNVgIALATCWkAE9SfbDnUv7ryZfRXsBfyX+o74f+tJ0tRSi/TkgcLXHUVVzAgS+hLpab2ksEUzQu1fQuQC+U3AAD+3uyIfhW3485uWb1rG22fxDVuh0bAqIgCb80y4PTDLzpmg19a3YOXKch+chR232Xw9kLXPv0hmrOTTecICFvTH/9lWpm4hJt5j2r6a1YaeLacP9WNp/WcAfLjN8qDac/FIWiUnT3T+xI+IbwR0oHVHH4jEfvyR8JtikVeQHWLI7IwZ4jov0pgr8370sCF0pYg4zq9BjXnAIsF1XbgSXQ0bRp75wciXkVOtQujNjP9nVwfl/k7Fn2cKAG+cB5uxKyQBdH8fe2wYb/wCNuOqnN0e8EfOvidiPq04qtjN6vItYDtDtmxbX8w6Sm9pr+vrlBnEYz/LirZSdm3Yt1yn6h9lKRZf4NxEElCpnCK4xGZii83yra8qGTvhpNRGBP53JE7Gdg3I59hrbgkfVma/lzdDqU6n9toTWaCalz+AH//V6gAAAA=",kh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC40lEQVR4nO2Yz0tVQRTHNfAJgj60P6B9+nhWoEQZtIiQwgTRqKX/QMvAVRjopl/2+oH/gBQYLaxVP4iEFq6s7BdFC1tIVBZaBmV94tAJHsPcmbn3vfuCx/3CwOXe8z3nzJ0zZ86ZhoYMGTJkyJChQgAtwAAwDswBL4AV4LuOFX03pzIi2/K/nW4EDgKzwDfiQzizqqOx1s4fARapHhZFZy0c3wbcJj3cEhtp/vVVh/HXQAk4ChSBDqBJhzx367eLwCuHntWqrwYwBvyOMHgT2J1AZ6/uAZteeTdWLecvRDj+MInjFv09wP0IG+crVT5pUboJnAK2VOq8kdFOAD8s9iYakgAYtSj7COz38ArAFLAEfNWxpCvZ5eH2Ae8tdkfjOi8bbsPifLeD0wxcAX5FhMO/1bsE5Dw/4IPB23DZNhXkNaOU4wuww+N8VBzbcM8ziSLw2eCIT/mQCUxbMsKAh3OV+Ch5dB62rOZ0SEYwSZMeTsHCWQaGgFYdg8BLSzh1enSfNjhip8eVCRYMwhPXUkekWXG+wyLXrt/Kcc6jWw7BxwZnwVo7Af2W0Ol1GVDeM4M35JAdNmSfBh545mHXbxOcN4Su+ZQrb83gtTpk2wzZtUAbMwZvPmQCMylMIJ9wAtdDJmALIfuGcYfQoEN2JEEI7QkNIdsmljq9KeYmlmzTbpHbCryLuYmbgedBm9iRRsc9Rro0JZZjWTdsm44Ri/PC2e7RfSY4jToOMiEd8nCkPIiLKY/OYUvouA8yRykhx3rRwckBd2M4f8cVmvyNhPVEpYSjmJMCq+CZRMkSTuXY1ErV5fwuSx0UXsx5ymkpdfd5eJ2yOSXD6F9c1+ezATF/APhUcTntaWh+ptTQnIxYvYm0WsoHIaVGgP4+4FEqLWVAUy/vbsTtjfWP79WbOlJt6mNcq7wBLgPHpPnRgyunQ553Ase1a3tb02uVurjYqourxbq53K2L6/UMGTJkyFAX+AN9Goz3BOQxdwAAAABJRU5ErkJggg==";var il={exports:{}};(function(u,o){(function(x){u.exports=x()})(function(){var x={};Object.defineProperty(x,"__esModule",{value:!0}),x.default=void 0,x.default=function(a){return!(!a||!a.Window)&&a instanceof a.Window};var C={};Object.defineProperty(C,"__esModule",{value:!0}),C.getWindow=function(a){return(0,x.default)(a)?a:(a.ownerDocument||a).defaultView||A.window},C.init=z,C.window=C.realWindow=void 0;var O=void 0;C.realWindow=O;var A=void 0;function z(a){C.realWindow=O=a;var d=a.document.createTextNode("");d.ownerDocument!==a.document&&typeof a.wrap=="function"&&a.wrap(d)===d&&(a=a.wrap(a)),C.window=A=a}C.window=A,typeof window<"u"&&window&&z(window);var h={};function r(a){return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},r(a)}Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var l=function(a){return!!a&&r(a)==="object"},c=function(a){return typeof a=="function"},e={window:function(a){return a===C.window||(0,x.default)(a)},docFrag:function(a){return l(a)&&a.nodeType===11},object:l,func:c,number:function(a){return typeof a=="number"},bool:function(a){return typeof a=="boolean"},string:function(a){return typeof a=="string"},element:function(a){if(!a||r(a)!=="object")return!1;var d=C.getWindow(a)||C.window;return/object|function/.test(typeof Element>"u"?"undefined":r(Element))?a instanceof Element||a instanceof d.Element:a.nodeType===1&&typeof a.nodeName=="string"},plainObject:function(a){return l(a)&&!!a.constructor&&/function Object\b/.test(a.constructor.toString())},array:function(a){return l(a)&&a.length!==void 0&&c(a.splice)}};h.default=e;var n={};function t(a){var d=a.interaction;if(d.prepared.name==="drag"){var g=d.prepared.axis;g==="x"?(d.coords.cur.page.y=d.coords.start.page.y,d.coords.cur.client.y=d.coords.start.client.y,d.coords.velocity.client.y=0,d.coords.velocity.page.y=0):g==="y"&&(d.coords.cur.page.x=d.coords.start.page.x,d.coords.cur.client.x=d.coords.start.client.x,d.coords.velocity.client.x=0,d.coords.velocity.page.x=0)}}function s(a){var d=a.iEvent,g=a.interaction;if(g.prepared.name==="drag"){var v=g.prepared.axis;if(v==="x"||v==="y"){var b=v==="x"?"y":"x";d.page[b]=g.coords.start.page[b],d.client[b]=g.coords.start.client[b],d.delta[b]=0}}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var f={id:"actions/drag",install:function(a){var d=a.actions,g=a.Interactable,v=a.defaults;g.prototype.draggable=f.draggable,d.map.drag=f,d.methodDict.drag="draggable",v.actions.drag=f.defaults},listeners:{"interactions:before-action-move":t,"interactions:action-resume":t,"interactions:action-move":s,"auto-start:check":function(a){var d=a.interaction,g=a.interactable,v=a.buttons,b=g.options.drag;if(b&&b.enabled&&(!d.pointerIsDown||!/mouse|pointer/.test(d.pointerType)||v&g.options.drag.mouseButtons))return a.action={name:"drag",axis:b.lockAxis==="start"?b.startAxis:b.lockAxis},!1}},draggable:function(a){return h.default.object(a)?(this.options.drag.enabled=a.enabled!==!1,this.setPerAction("drag",a),this.setOnEvents("drag",a),/^(xy|x|y|start)$/.test(a.lockAxis)&&(this.options.drag.lockAxis=a.lockAxis),/^(xy|x|y)$/.test(a.startAxis)&&(this.options.drag.startAxis=a.startAxis),this):h.default.bool(a)?(this.options.drag.enabled=a,this):this.options.drag},beforeMove:t,move:s,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"}},i=f;n.default=i;var p={};Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var m={init:function(a){var d=a;m.document=d.document,m.DocumentFragment=d.DocumentFragment||y,m.SVGElement=d.SVGElement||y,m.SVGSVGElement=d.SVGSVGElement||y,m.SVGElementInstance=d.SVGElementInstance||y,m.Element=d.Element||y,m.HTMLElement=d.HTMLElement||m.Element,m.Event=d.Event,m.Touch=d.Touch||y,m.PointerEvent=d.PointerEvent||d.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function y(){}var _=m;p.default=_;var T={};Object.defineProperty(T,"__esModule",{value:!0}),T.default=void 0;var M={init:function(a){var d=p.default.Element,g=a.navigator||{};M.supportsTouch="ontouchstart"in a||h.default.func(a.DocumentTouch)&&p.default.document instanceof a.DocumentTouch,M.supportsPointerEvent=g.pointerEnabled!==!1&&!!p.default.PointerEvent,M.isIOS=/iP(hone|od|ad)/.test(g.platform),M.isIOS7=/iP(hone|od|ad)/.test(g.platform)&&/OS 7[^\d]/.test(g.appVersion),M.isIe9=/MSIE 9/.test(g.userAgent),M.isOperaMobile=g.appName==="Opera"&&M.supportsTouch&&/Presto/.test(g.userAgent),M.prefixedMatchesSelector="matches"in d.prototype?"matches":"webkitMatchesSelector"in d.prototype?"webkitMatchesSelector":"mozMatchesSelector"in d.prototype?"mozMatchesSelector":"oMatchesSelector"in d.prototype?"oMatchesSelector":"msMatchesSelector",M.pEventTypes=M.supportsPointerEvent?p.default.PointerEvent===a.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,M.wheelEvent=p.default.document&&"onmousewheel"in p.default.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},B=M;T.default=B;var X={};function st(a){var d=a.parentNode;if(h.default.docFrag(d)){for(;(d=d.host)&&h.default.docFrag(d););return d}return d}function ft(a,d){return C.window!==C.realWindow&&(d=d.replace(/\/deep\//g," ")),a[T.default.prefixedMatchesSelector](d)}Object.defineProperty(X,"__esModule",{value:!0}),X.closest=function(a,d){for(;h.default.element(a);){if(ft(a,d))return a;a=st(a)}return null},X.getActualElement=function(a){return a.correspondingUseElement||a},X.getElementClientRect=_t,X.getElementRect=function(a){var d=_t(a);if(!T.default.isIOS7&&d){var g=St(C.getWindow(a));d.left+=g.x,d.right+=g.x,d.top+=g.y,d.bottom+=g.y}return d},X.getPath=function(a){for(var d=[];a;)d.push(a),a=st(a);return d},X.getScrollXY=St,X.indexOfDeepestElement=function(a){for(var d,g=[],v=0;v<a.length;v++){var b=a[v],w=a[d];if(b&&v!==d)if(w){var E=vt(b),S=vt(w);if(E!==b.ownerDocument)if(S!==b.ownerDocument)if(E!==S){g=g.length?g:xt(w);var P=void 0;if(w instanceof p.default.HTMLElement&&b instanceof p.default.SVGElement&&!(b instanceof p.default.SVGSVGElement)){if(b===S)continue;P=b.ownerSVGElement}else P=b;for(var L=xt(P,w.ownerDocument),W=0;L[W]&&L[W]===g[W];)W++;var K=[L[W-1],L[W],g[W]];if(K[0])for(var rt=K[0].lastChild;rt;){if(rt===K[1]){d=v,g=L;break}if(rt===K[2])break;rt=rt.previousSibling}}else ut=b,tt=w,(parseInt(C.getWindow(ut).getComputedStyle(ut).zIndex,10)||0)>=(parseInt(C.getWindow(tt).getComputedStyle(tt).zIndex,10)||0)&&(d=v);else d=v}else d=v}var ut,tt;return d},X.matchesSelector=ft,X.matchesUpTo=function(a,d,g){for(;h.default.element(a);){if(ft(a,d))return!0;if((a=st(a))===g)return ft(a,d)}return!1},X.nodeContains=function(a,d){if(a.contains)return a.contains(d);for(;d;){if(d===a)return!0;d=d.parentNode}return!1},X.parentNode=st,X.trySelector=function(a){return!!h.default.string(a)&&(p.default.document.querySelector(a),!0)};var vt=function(a){return a.parentNode||a.host};function xt(a,d){for(var g,v=[],b=a;(g=vt(b))&&b!==d&&g!==b.ownerDocument;)v.unshift(b),b=g;return v}function St(a){return{x:(a=a||C.window).scrollX||a.document.documentElement.scrollLeft,y:a.scrollY||a.document.documentElement.scrollTop}}function _t(a){var d=a instanceof p.default.SVGElement?a.getBoundingClientRect():a.getClientRects()[0];return d&&{left:d.left,right:d.right,top:d.top,bottom:d.bottom,width:d.width||d.right-d.left,height:d.height||d.bottom-d.top}}var ot={};Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=function(a,d){for(var g in d)a[g]=d[g];return a};var pt={};function wt(a,d){(d==null||d>a.length)&&(d=a.length);for(var g=0,v=Array(d);g<d;g++)v[g]=a[g];return v}function bt(a,d,g){return a==="parent"?(0,X.parentNode)(g):a==="self"?d.getRect(g):(0,X.closest)(g,a)}Object.defineProperty(pt,"__esModule",{value:!0}),pt.addEdges=function(a,d,g){a.left&&(d.left+=g.x),a.right&&(d.right+=g.x),a.top&&(d.top+=g.y),a.bottom&&(d.bottom+=g.y),d.width=d.right-d.left,d.height=d.bottom-d.top},pt.getStringOptionResult=bt,pt.rectToXY=function(a){return a&&{x:"x"in a?a.x:a.left,y:"y"in a?a.y:a.top}},pt.resolveRectLike=function(a,d,g,v){var b,w=a;return h.default.string(w)?w=bt(w,d,g):h.default.func(w)&&(w=w.apply(void 0,function(E){if(Array.isArray(E))return wt(E)}(b=v)||function(E){if(typeof Symbol<"u"&&E[Symbol.iterator]!=null||E["@@iterator"]!=null)return Array.from(E)}(b)||function(E,S){if(E){if(typeof E=="string")return wt(E,S);var P=Object.prototype.toString.call(E).slice(8,-1);return P==="Object"&&E.constructor&&(P=E.constructor.name),P==="Map"||P==="Set"?Array.from(E):P==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(P)?wt(E,S):void 0}}(b)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())),h.default.element(w)&&(w=(0,X.getElementRect)(w)),w},pt.tlbrToXywh=function(a){return!a||"x"in a&&"y"in a||((a=(0,ot.default)({},a)).x=a.left||0,a.y=a.top||0,a.width=a.width||(a.right||0)-a.x,a.height=a.height||(a.bottom||0)-a.y),a},pt.xywhToTlbr=function(a){return!a||"left"in a&&"top"in a||((a=(0,ot.default)({},a)).left=a.x||0,a.top=a.y||0,a.right=a.right||a.left+a.width,a.bottom=a.bottom||a.top+a.height),a};var k={};Object.defineProperty(k,"__esModule",{value:!0}),k.default=function(a,d,g){var v=a.options[g],b=v&&v.origin||a.options.origin,w=(0,pt.resolveRectLike)(b,a,d,[a&&d]);return(0,pt.rectToXY)(w)||{x:0,y:0}};var U={};function N(a){return a.trim().split(/ +/)}Object.defineProperty(U,"__esModule",{value:!0}),U.default=function a(d,g,v){if(v=v||{},h.default.string(d)&&d.search(" ")!==-1&&(d=N(d)),h.default.array(d))return d.reduce(function(P,L){return(0,ot.default)(P,a(L,g,v))},v);if(h.default.object(d)&&(g=d,d=""),h.default.func(g))v[d]=v[d]||[],v[d].push(g);else if(h.default.array(g))for(var b=0;b<g.length;b++){var w;w=g[b],a(d,w,v)}else if(h.default.object(g))for(var E in g){var S=N(E).map(function(P){return"".concat(d).concat(P)});a(S,g[E],v)}return v};var H={};Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0,H.default=function(a,d){return Math.sqrt(a*a+d*d)};var nt={};Object.defineProperty(nt,"__esModule",{value:!0}),nt.default=function(a,d){a.__set||(a.__set={});var g=function(b){typeof a[b]!="function"&&b!=="__set"&&Object.defineProperty(a,b,{get:function(){return b in a.__set?a.__set[b]:a.__set[b]=d[b]},set:function(w){a.__set[b]=w},configurable:!0})};for(var v in d)g(v);return a};var j={};function I(a){return a instanceof p.default.Event||a instanceof p.default.Touch}function q(a,d,g){return a=a||"page",(g=g||{}).x=d[a+"X"],g.y=d[a+"Y"],g}function Z(a,d){return d=d||{x:0,y:0},T.default.isOperaMobile&&I(a)?(q("screen",a,d),d.x+=window.scrollX,d.y+=window.scrollY):q("page",a,d),d}function at(a,d){return d=d||{},T.default.isOperaMobile&&I(a)?q("screen",a,d):q("client",a,d),d}function it(a){var d=[];return h.default.array(a)?(d[0]=a[0],d[1]=a[1]):a.type==="touchend"?a.touches.length===1?(d[0]=a.touches[0],d[1]=a.changedTouches[0]):a.touches.length===0&&(d[0]=a.changedTouches[0],d[1]=a.changedTouches[1]):(d[0]=a.touches[0],d[1]=a.touches[1]),d}function ht(a){for(var d={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},g=0;g<a.length;g++){var v=a[g];for(var b in d)d[b]+=v[b]}for(var w in d)d[w]/=a.length;return d}Object.defineProperty(j,"__esModule",{value:!0}),j.coordsToEvent=function(a){return{coords:a,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}},j.copyCoords=function(a,d){a.page=a.page||{},a.page.x=d.page.x,a.page.y=d.page.y,a.client=a.client||{},a.client.x=d.client.x,a.client.y=d.client.y,a.timeStamp=d.timeStamp},j.getClientXY=at,j.getEventTargets=function(a){var d=h.default.func(a.composedPath)?a.composedPath():a.path;return[X.getActualElement(d?d[0]:a.target),X.getActualElement(a.currentTarget)]},j.getPageXY=Z,j.getPointerId=function(a){return h.default.number(a.pointerId)?a.pointerId:a.identifier},j.getPointerType=function(a){return h.default.string(a.pointerType)?a.pointerType:h.default.number(a.pointerType)?[void 0,void 0,"touch","pen","mouse"][a.pointerType]:/touch/.test(a.type||"")||a instanceof p.default.Touch?"touch":"mouse"},j.getTouchPair=it,j.getXY=q,j.isNativePointer=I,j.newCoords=function(){return{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},j.pointerAverage=ht,Object.defineProperty(j,"pointerExtend",{enumerable:!0,get:function(){return nt.default}}),j.setCoordDeltas=function(a,d,g){a.page.x=g.page.x-d.page.x,a.page.y=g.page.y-d.page.y,a.client.x=g.client.x-d.client.x,a.client.y=g.client.y-d.client.y,a.timeStamp=g.timeStamp-d.timeStamp},j.setCoordVelocity=function(a,d){var g=Math.max(d.timeStamp/1e3,.001);a.page.x=d.page.x/g,a.page.y=d.page.y/g,a.client.x=d.client.x/g,a.client.y=d.client.y/g,a.timeStamp=g},j.setCoords=function(a,d,g){var v=d.length>1?ht(d):d[0];Z(v,a.page),at(v,a.client),a.timeStamp=g},j.setZeroCoords=function(a){a.page.x=0,a.page.y=0,a.client.x=0,a.client.y=0},j.touchAngle=function(a,d){var g=d+"X",v=d+"Y",b=it(a),w=b[1][g]-b[0][g],E=b[1][v]-b[0][v];return 180*Math.atan2(E,w)/Math.PI},j.touchBBox=function(a){if(!a.length)return null;var d=it(a),g=Math.min(d[0].pageX,d[1].pageX),v=Math.min(d[0].pageY,d[1].pageY),b=Math.max(d[0].pageX,d[1].pageX),w=Math.max(d[0].pageY,d[1].pageY);return{x:g,y:v,left:g,top:v,right:b,bottom:w,width:b-g,height:w-v}},j.touchDistance=function(a,d){var g=d+"X",v=d+"Y",b=it(a),w=b[0][g]-b[1][g],E=b[0][v]-b[1][v];return(0,H.default)(w,E)};var dt={};function F(a,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}function D(a,d,g){return d in a?Object.defineProperty(a,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[d]=g,a}Object.defineProperty(dt,"__esModule",{value:!0}),dt.BaseEvent=void 0;var R=function(){function a(v){(function(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")})(this,a),D(this,"immediatePropagationStopped",!1),D(this,"propagationStopped",!1),this._interaction=v}var d,g;return d=a,(g=[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&F(d.prototype,g),Object.defineProperty(d,"prototype",{writable:!1}),a}();dt.BaseEvent=R,Object.defineProperty(R.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var Y={};Object.defineProperty(Y,"__esModule",{value:!0}),Y.remove=Y.merge=Y.from=Y.findIndex=Y.find=Y.contains=void 0,Y.contains=function(a,d){return a.indexOf(d)!==-1},Y.remove=function(a,d){return a.splice(a.indexOf(d),1)};var V=function(a,d){for(var g=0;g<d.length;g++){var v=d[g];a.push(v)}return a};Y.merge=V,Y.from=function(a){return V([],a)};var G=function(a,d){for(var g=0;g<a.length;g++)if(d(a[g],g,a))return g;return-1};Y.findIndex=G,Y.find=function(a,d){return a[G(a,d)]};var J={};function $(a){return $=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},$(a)}function lt(a,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}function et(a,d){return et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,v){return g.__proto__=v,g},et(a,d)}function Q(a,d){if(d&&($(d)==="object"||typeof d=="function"))return d;if(d!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ct(a)}function ct(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function gt(a){return gt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)},gt(a)}function Ct(a,d,g){return d in a?Object.defineProperty(a,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[d]=g,a}Object.defineProperty(J,"__esModule",{value:!0}),J.DropEvent=void 0;var Ot=function(a){(function(S,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(P&&P.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),Object.defineProperty(S,"prototype",{writable:!1}),P&&et(S,P)})(E,a);var d,g,v,b,w=(v=E,b=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var S,P=gt(v);if(b){var L=gt(this).constructor;S=Reflect.construct(P,arguments,L)}else S=P.apply(this,arguments);return Q(this,S)});function E(S,P,L){var W;(function(tt,mt){if(!(tt instanceof mt))throw new TypeError("Cannot call a class as a function")})(this,E),Ct(ct(W=w.call(this,P._interaction)),"dropzone",void 0),Ct(ct(W),"dragEvent",void 0),Ct(ct(W),"relatedTarget",void 0),Ct(ct(W),"draggable",void 0),Ct(ct(W),"propagationStopped",!1),Ct(ct(W),"immediatePropagationStopped",!1);var K=L==="dragleave"?S.prev:S.cur,rt=K.element,ut=K.dropzone;return W.type=L,W.target=rt,W.currentTarget=rt,W.dropzone=ut,W.dragEvent=P,W.relatedTarget=P.target,W.draggable=P.interactable,W.timeStamp=P.timeStamp,W}return d=E,(g=[{key:"reject",value:function(){var S=this,P=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&P.cur.dropzone===this.dropzone&&P.cur.element===this.target)if(P.prev.dropzone=this.dropzone,P.prev.element=this.target,P.rejected=!0,P.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var L=P.activeDrops,W=Y.findIndex(L,function(rt){var ut=rt.dropzone,tt=rt.element;return ut===S.dropzone&&tt===S.target});P.activeDrops.splice(W,1);var K=new E(P,this.dragEvent,"dropdeactivate");K.dropzone=this.dropzone,K.target=this.target,this.dropzone.fire(K)}else this.dropzone.fire(new E(P,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&lt(d.prototype,g),Object.defineProperty(d,"prototype",{writable:!1}),E}(dt.BaseEvent);J.DropEvent=Ot;var Pt={};function Mt(a,d){for(var g=0;g<a.slice().length;g++){var v=a.slice()[g],b=v.dropzone,w=v.element;d.dropzone=b,d.target=w,b.fire(d),d.propagationStopped=d.immediatePropagationStopped=!1}}function Dt(a,d){for(var g=function(w,E){for(var S=w.interactables,P=[],L=0;L<S.list.length;L++){var W=S.list[L];if(W.options.drop.enabled){var K=W.options.drop.accept;if(!(h.default.element(K)&&K!==E||h.default.string(K)&&!X.matchesSelector(E,K)||h.default.func(K)&&!K({dropzone:W,draggableElement:E})))for(var rt=h.default.string(W.target)?W._context.querySelectorAll(W.target):h.default.array(W.target)?W.target:[W.target],ut=0;ut<rt.length;ut++){var tt=rt[ut];tt!==E&&P.push({dropzone:W,element:tt,rect:W.getRect(tt)})}}}return P}(a,d),v=0;v<g.length;v++){var b=g[v];b.rect=b.dropzone.getRect(b.element)}return g}function Gt(a,d,g){for(var v=a.dropState,b=a.interactable,w=a.element,E=[],S=0;S<v.activeDrops.length;S++){var P=v.activeDrops[S],L=P.dropzone,W=P.element,K=P.rect;E.push(L.dropCheck(d,g,b,w,W,K)?W:null)}var rt=X.indexOfDeepestElement(E);return v.activeDrops[rt]||null}function re(a,d,g){var v=a.dropState,b={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return g.type==="dragstart"&&(b.activate=new J.DropEvent(v,g,"dropactivate"),b.activate.target=null,b.activate.dropzone=null),g.type==="dragend"&&(b.deactivate=new J.DropEvent(v,g,"dropdeactivate"),b.deactivate.target=null,b.deactivate.dropzone=null),v.rejected||(v.cur.element!==v.prev.element&&(v.prev.dropzone&&(b.leave=new J.DropEvent(v,g,"dragleave"),g.dragLeave=b.leave.target=v.prev.element,g.prevDropzone=b.leave.dropzone=v.prev.dropzone),v.cur.dropzone&&(b.enter=new J.DropEvent(v,g,"dragenter"),g.dragEnter=v.cur.element,g.dropzone=v.cur.dropzone)),g.type==="dragend"&&v.cur.dropzone&&(b.drop=new J.DropEvent(v,g,"drop"),g.dropzone=v.cur.dropzone,g.relatedTarget=v.cur.element),g.type==="dragmove"&&v.cur.dropzone&&(b.move=new J.DropEvent(v,g,"dropmove"),b.move.dragmove=g,g.dropzone=v.cur.dropzone)),b}function Zt(a,d){var g=a.dropState,v=g.activeDrops,b=g.cur,w=g.prev;d.leave&&w.dropzone.fire(d.leave),d.enter&&b.dropzone.fire(d.enter),d.move&&b.dropzone.fire(d.move),d.drop&&b.dropzone.fire(d.drop),d.deactivate&&Mt(v,d.deactivate),g.prev.dropzone=b.dropzone,g.prev.element=b.element}function Oe(a,d){var g=a.interaction,v=a.iEvent,b=a.event;if(v.type==="dragmove"||v.type==="dragend"){var w=g.dropState;d.dynamicDrop&&(w.activeDrops=Dt(d,g.element));var E=v,S=Gt(g,E,b);w.rejected=w.rejected&&!!S&&S.dropzone===w.cur.dropzone&&S.element===w.cur.element,w.cur.dropzone=S&&S.dropzone,w.cur.element=S&&S.element,w.events=re(g,0,E)}}Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.default=void 0;var We={id:"actions/drop",install:function(a){var d=a.actions,g=a.interactStatic,v=a.Interactable,b=a.defaults;a.usePlugin(n.default),v.prototype.dropzone=function(w){return function(E,S){if(h.default.object(S)){if(E.options.drop.enabled=S.enabled!==!1,S.listeners){var P=(0,U.default)(S.listeners),L=Object.keys(P).reduce(function(W,K){return W[/^(enter|leave)/.test(K)?"drag".concat(K):/^(activate|deactivate|move)/.test(K)?"drop".concat(K):K]=P[K],W},{});E.off(E.options.drop.listeners),E.on(L),E.options.drop.listeners=L}return h.default.func(S.ondrop)&&E.on("drop",S.ondrop),h.default.func(S.ondropactivate)&&E.on("dropactivate",S.ondropactivate),h.default.func(S.ondropdeactivate)&&E.on("dropdeactivate",S.ondropdeactivate),h.default.func(S.ondragenter)&&E.on("dragenter",S.ondragenter),h.default.func(S.ondragleave)&&E.on("dragleave",S.ondragleave),h.default.func(S.ondropmove)&&E.on("dropmove",S.ondropmove),/^(pointer|center)$/.test(S.overlap)?E.options.drop.overlap=S.overlap:h.default.number(S.overlap)&&(E.options.drop.overlap=Math.max(Math.min(1,S.overlap),0)),"accept"in S&&(E.options.drop.accept=S.accept),"checker"in S&&(E.options.drop.checker=S.checker),E}return h.default.bool(S)?(E.options.drop.enabled=S,E):E.options.drop}(this,w)},v.prototype.dropCheck=function(w,E,S,P,L,W){return function(K,rt,ut,tt,mt,Tt,yt){var Et=!1;if(!(yt=yt||K.getRect(Tt)))return!!K.options.drop.checker&&K.options.drop.checker(rt,ut,Et,K,Tt,tt,mt);var At=K.options.drop.overlap;if(At==="pointer"){var jt=(0,k.default)(tt,mt,"drag"),Bt=j.getPageXY(rt);Bt.x+=jt.x,Bt.y+=jt.y;var Wt=Bt.x>yt.left&&Bt.x<yt.right,Rt=Bt.y>yt.top&&Bt.y<yt.bottom;Et=Wt&&Rt}var Yt=tt.getRect(mt);if(Yt&&At==="center"){var ve=Yt.left+Yt.width/2,Be=Yt.top+Yt.height/2;Et=ve>=yt.left&&ve<=yt.right&&Be>=yt.top&&Be<=yt.bottom}return Yt&&h.default.number(At)&&(Et=Math.max(0,Math.min(yt.right,Yt.right)-Math.max(yt.left,Yt.left))*Math.max(0,Math.min(yt.bottom,Yt.bottom)-Math.max(yt.top,Yt.top))/(Yt.width*Yt.height)>=At),K.options.drop.checker&&(Et=K.options.drop.checker(rt,ut,Et,K,Tt,tt,mt)),Et}(this,w,E,S,P,L,W)},g.dynamicDrop=function(w){return h.default.bool(w)?(a.dynamicDrop=w,g):a.dynamicDrop},(0,ot.default)(d.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),d.methodDict.drop="dropzone",a.dynamicDrop=!1,b.actions.drop=We.defaults},listeners:{"interactions:before-action-start":function(a){var d=a.interaction;d.prepared.name==="drag"&&(d.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(a,d){var g=a.interaction,v=(a.event,a.iEvent);if(g.prepared.name==="drag"){var b=g.dropState;b.activeDrops=null,b.events=null,b.activeDrops=Dt(d,g.element),b.events=re(g,0,v),b.events.activate&&(Mt(b.activeDrops,b.events.activate),d.fire("actions/drop:start",{interaction:g,dragEvent:v}))}},"interactions:action-move":Oe,"interactions:after-action-move":function(a,d){var g=a.interaction,v=a.iEvent;g.prepared.name==="drag"&&(Zt(g,g.dropState.events),d.fire("actions/drop:move",{interaction:g,dragEvent:v}),g.dropState.events={})},"interactions:action-end":function(a,d){if(a.interaction.prepared.name==="drag"){var g=a.interaction,v=a.iEvent;Oe(a,d),Zt(g,g.dropState.events),d.fire("actions/drop:end",{interaction:g,dragEvent:v})}},"interactions:stop":function(a){var d=a.interaction;if(d.prepared.name==="drag"){var g=d.dropState;g&&(g.activeDrops=null,g.events=null,g.cur.dropzone=null,g.cur.element=null,g.prev.dropzone=null,g.prev.element=null,g.rejected=!1)}}},getActiveDrops:Dt,getDrop:Gt,getDropEvents:re,fireDropEvents:Zt,defaults:{enabled:!1,accept:null,overlap:"pointer"}},$t=We;Pt.default=$t;var te={};function gi(a){var d=a.interaction,g=a.iEvent,v=a.phase;if(d.prepared.name==="gesture"){var b=d.pointers.map(function(L){return L.pointer}),w=v==="start",E=v==="end",S=d.interactable.options.deltaSource;if(g.touches=[b[0],b[1]],w)g.distance=j.touchDistance(b,S),g.box=j.touchBBox(b),g.scale=1,g.ds=0,g.angle=j.touchAngle(b,S),g.da=0,d.gesture.startDistance=g.distance,d.gesture.startAngle=g.angle;else if(E){var P=d.prevEvent;g.distance=P.distance,g.box=P.box,g.scale=P.scale,g.ds=0,g.angle=P.angle,g.da=0}else g.distance=j.touchDistance(b,S),g.box=j.touchBBox(b),g.scale=g.distance/d.gesture.startDistance,g.angle=j.touchAngle(b,S),g.ds=g.scale-d.gesture.scale,g.da=g.angle-d.gesture.angle;d.gesture.distance=g.distance,d.gesture.angle=g.angle,h.default.number(g.scale)&&g.scale!==1/0&&!isNaN(g.scale)&&(d.gesture.scale=g.scale)}}Object.defineProperty(te,"__esModule",{value:!0}),te.default=void 0;var mr={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(a){var d=a.actions,g=a.Interactable,v=a.defaults;g.prototype.gesturable=function(b){return h.default.object(b)?(this.options.gesture.enabled=b.enabled!==!1,this.setPerAction("gesture",b),this.setOnEvents("gesture",b),this):h.default.bool(b)?(this.options.gesture.enabled=b,this):this.options.gesture},d.map.gesture=mr,d.methodDict.gesture="gesturable",v.actions.gesture=mr.defaults},listeners:{"interactions:action-start":gi,"interactions:action-move":gi,"interactions:action-end":gi,"interactions:new":function(a){a.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(a){if(!(a.interaction.pointers.length<2)){var d=a.interactable.options.gesture;if(d&&d.enabled)return a.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""}},nl=mr;te.default=nl;var pn={};function rl(a,d,g,v,b,w,E){if(!d)return!1;if(d===!0){var S=h.default.number(w.width)?w.width:w.right-w.left,P=h.default.number(w.height)?w.height:w.bottom-w.top;if(E=Math.min(E,Math.abs((a==="left"||a==="right"?S:P)/2)),S<0&&(a==="left"?a="right":a==="right"&&(a="left")),P<0&&(a==="top"?a="bottom":a==="bottom"&&(a="top")),a==="left"){var L=S>=0?w.left:w.right;return g.x<L+E}if(a==="top"){var W=P>=0?w.top:w.bottom;return g.y<W+E}if(a==="right")return g.x>(S>=0?w.right:w.left)-E;if(a==="bottom")return g.y>(P>=0?w.bottom:w.top)-E}return!!h.default.element(v)&&(h.default.element(d)?d===v:X.matchesUpTo(v,d,b))}function Lo(a){var d=a.iEvent,g=a.interaction;if(g.prepared.name==="resize"&&g.resizeAxes){var v=d;g.interactable.options.resize.square?(g.resizeAxes==="y"?v.delta.x=v.delta.y:v.delta.y=v.delta.x,v.axes="xy"):(v.axes=g.resizeAxes,g.resizeAxes==="x"?v.delta.y=0:g.resizeAxes==="y"&&(v.delta.x=0))}}Object.defineProperty(pn,"__esModule",{value:!0}),pn.default=void 0;var Ie={id:"actions/resize",before:["actions/drag"],install:function(a){var d=a.actions,g=a.browser,v=a.Interactable,b=a.defaults;Ie.cursors=function(w){return w.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(g),Ie.defaultMargin=g.supportsTouch||g.supportsPointerEvent?20:10,v.prototype.resizable=function(w){return function(E,S,P){return h.default.object(S)?(E.options.resize.enabled=S.enabled!==!1,E.setPerAction("resize",S),E.setOnEvents("resize",S),h.default.string(S.axis)&&/^x$|^y$|^xy$/.test(S.axis)?E.options.resize.axis=S.axis:S.axis===null&&(E.options.resize.axis=P.defaults.actions.resize.axis),h.default.bool(S.preserveAspectRatio)?E.options.resize.preserveAspectRatio=S.preserveAspectRatio:h.default.bool(S.square)&&(E.options.resize.square=S.square),E):h.default.bool(S)?(E.options.resize.enabled=S,E):E.options.resize}(this,w,a)},d.map.resize=Ie,d.methodDict.resize="resizable",b.actions.resize=Ie.defaults},listeners:{"interactions:new":function(a){a.interaction.resizeAxes="xy"},"interactions:action-start":function(a){(function(d){var g=d.iEvent,v=d.interaction;if(v.prepared.name==="resize"&&v.prepared.edges){var b=g,w=v.rect;v._rects={start:(0,ot.default)({},w),corrected:(0,ot.default)({},w),previous:(0,ot.default)({},w),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},b.edges=v.prepared.edges,b.rect=v._rects.corrected,b.deltaRect=v._rects.delta}})(a),Lo(a)},"interactions:action-move":function(a){(function(d){var g=d.iEvent,v=d.interaction;if(v.prepared.name==="resize"&&v.prepared.edges){var b=g,w=v.interactable.options.resize.invert,E=w==="reposition"||w==="negate",S=v.rect,P=v._rects,L=P.start,W=P.corrected,K=P.delta,rt=P.previous;if((0,ot.default)(rt,W),E){if((0,ot.default)(W,S),w==="reposition"){if(W.top>W.bottom){var ut=W.top;W.top=W.bottom,W.bottom=ut}if(W.left>W.right){var tt=W.left;W.left=W.right,W.right=tt}}}else W.top=Math.min(S.top,L.bottom),W.bottom=Math.max(S.bottom,L.top),W.left=Math.min(S.left,L.right),W.right=Math.max(S.right,L.left);for(var mt in W.width=W.right-W.left,W.height=W.bottom-W.top,W)K[mt]=W[mt]-rt[mt];b.edges=v.prepared.edges,b.rect=W,b.deltaRect=K}})(a),Lo(a)},"interactions:action-end":function(a){var d=a.iEvent,g=a.interaction;if(g.prepared.name==="resize"&&g.prepared.edges){var v=d;v.edges=g.prepared.edges,v.rect=g._rects.corrected,v.deltaRect=g._rects.delta}},"auto-start:check":function(a){var d=a.interaction,g=a.interactable,v=a.element,b=a.rect,w=a.buttons;if(b){var E=(0,ot.default)({},d.coords.cur.page),S=g.options.resize;if(S&&S.enabled&&(!d.pointerIsDown||!/mouse|pointer/.test(d.pointerType)||w&S.mouseButtons)){if(h.default.object(S.edges)){var P={left:!1,right:!1,top:!1,bottom:!1};for(var L in P)P[L]=rl(L,S.edges[L],E,d._latestPointer.eventTarget,v,b,S.margin||Ie.defaultMargin);P.left=P.left&&!P.right,P.top=P.top&&!P.bottom,(P.left||P.right||P.top||P.bottom)&&(a.action={name:"resize",edges:P})}else{var W=S.axis!=="y"&&E.x>b.right-Ie.defaultMargin,K=S.axis!=="x"&&E.y>b.bottom-Ie.defaultMargin;(W||K)&&(a.action={name:"resize",axes:(W?"x":"")+(K?"y":"")})}return!a.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(a){var d=a.edges,g=a.axis,v=a.name,b=Ie.cursors,w=null;if(g)w=b[v+g];else if(d){for(var E="",S=["top","bottom","left","right"],P=0;P<S.length;P++){var L=S[P];d[L]&&(E+=L)}w=b[E]}return w},defaultMargin:null},ol=Ie;pn.default=ol;var ji={};Object.defineProperty(ji,"__esModule",{value:!0}),ji.default=void 0;var sl={id:"actions",install:function(a){a.usePlugin(te.default),a.usePlugin(pn.default),a.usePlugin(n.default),a.usePlugin(Pt.default)}};ji.default=sl;var be={};Object.defineProperty(be,"__esModule",{value:!0}),be.default=void 0;var je,Ze,Bo=0,al={request:function(a){return je(a)},cancel:function(a){return Ze(a)},init:function(a){if(je=a.requestAnimationFrame,Ze=a.cancelAnimationFrame,!je)for(var d=["ms","moz","webkit","o"],g=0;g<d.length;g++){var v=d[g];je=a["".concat(v,"RequestAnimationFrame")],Ze=a["".concat(v,"CancelAnimationFrame")]||a["".concat(v,"CancelRequestAnimationFrame")]}je=je&&je.bind(a),Ze=Ze&&Ze.bind(a),je||(je=function(b){var w=Date.now(),E=Math.max(0,16-(w-Bo)),S=a.setTimeout(function(){b(w+E)},E);return Bo=w+E,S},Ze=function(b){return clearTimeout(b)})}};be.default=al;var Fe={};Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.default=void 0,Fe.getContainer=gn,Fe.getScroll=Fi,Fe.getScrollSize=function(a){return h.default.window(a)&&(a=window.document.body),{x:a.scrollWidth,y:a.scrollHeight}},Fe.getScrollSizeDelta=function(a,d){var g=a.interaction,v=a.element,b=g&&g.interactable.options[g.prepared.name].autoScroll;if(!b||!b.enabled)return d(),{x:0,y:0};var w=gn(b.container,g.interactable,v),E=Fi(w);d();var S=Fi(w);return{x:S.x-E.x,y:S.y-E.y}};var kt={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(a){kt.isScrolling=!0,be.default.cancel(kt.i),a.autoScroll=kt,kt.interaction=a,kt.prevTime=kt.now(),kt.i=be.default.request(kt.scroll)},stop:function(){kt.isScrolling=!1,kt.interaction&&(kt.interaction.autoScroll=null),be.default.cancel(kt.i)},scroll:function(){var a=kt.interaction,d=a.interactable,g=a.element,v=a.prepared.name,b=d.options[v].autoScroll,w=gn(b.container,d,g),E=kt.now(),S=(E-kt.prevTime)/1e3,P=b.speed*S;if(P>=1){var L={x:kt.x*P,y:kt.y*P};if(L.x||L.y){var W=Fi(w);h.default.window(w)?w.scrollBy(L.x,L.y):w&&(w.scrollLeft+=L.x,w.scrollTop+=L.y);var K=Fi(w),rt={x:K.x-W.x,y:K.y-W.y};(rt.x||rt.y)&&d.fire({type:"autoscroll",target:g,interactable:d,delta:rt,interaction:a,container:w})}kt.prevTime=E}kt.isScrolling&&(be.default.cancel(kt.i),kt.i=be.default.request(kt.scroll))},check:function(a,d){var g;return(g=a.options[d].autoScroll)==null?void 0:g.enabled},onInteractionMove:function(a){var d=a.interaction,g=a.pointer;if(d.interacting()&&kt.check(d.interactable,d.prepared.name))if(d.simulation)kt.x=kt.y=0;else{var v,b,w,E,S=d.interactable,P=d.element,L=d.prepared.name,W=S.options[L].autoScroll,K=gn(W.container,S,P);if(h.default.window(K))E=g.clientX<kt.margin,v=g.clientY<kt.margin,b=g.clientX>K.innerWidth-kt.margin,w=g.clientY>K.innerHeight-kt.margin;else{var rt=X.getElementClientRect(K);E=g.clientX<rt.left+kt.margin,v=g.clientY<rt.top+kt.margin,b=g.clientX>rt.right-kt.margin,w=g.clientY>rt.bottom-kt.margin}kt.x=b?1:E?-1:0,kt.y=w?1:v?-1:0,kt.isScrolling||(kt.margin=W.margin,kt.speed=W.speed,kt.start(d))}}};function gn(a,d,g){return(h.default.string(a)?(0,pt.getStringOptionResult)(a,d,g):a)||(0,C.getWindow)(g)}function Fi(a){return h.default.window(a)&&(a=window.document.body),{x:a.scrollLeft,y:a.scrollTop}}var ll={id:"auto-scroll",install:function(a){var d=a.defaults,g=a.actions;a.autoScroll=kt,kt.now=function(){return a.now()},g.phaselessTypes.autoscroll=!0,d.perAction.autoScroll=kt.defaults},listeners:{"interactions:new":function(a){a.interaction.autoScroll=null},"interactions:destroy":function(a){a.interaction.autoScroll=null,kt.stop(),kt.interaction&&(kt.interaction=null)},"interactions:stop":kt.stop,"interactions:action-move":function(a){return kt.onInteractionMove(a)}}},cl=ll;Fe.default=cl;var de={};Object.defineProperty(de,"__esModule",{value:!0}),de.copyAction=function(a,d){return a.name=d.name,a.axis=d.axis,a.edges=d.edges,a},de.sign=void 0,de.warnOnce=function(a,d){var g=!1;return function(){return g||(C.window.console.warn(d),g=!0),a.apply(this,arguments)}},de.sign=function(a){return a>=0?1:-1};var vn={};function ul(a){return h.default.bool(a)?(this.options.styleCursor=a,this):a===null?(delete this.options.styleCursor,this):this.options.styleCursor}function fl(a){return h.default.func(a)?(this.options.actionChecker=a,this):a===null?(delete this.options.actionChecker,this):this.options.actionChecker}Object.defineProperty(vn,"__esModule",{value:!0}),vn.default=void 0;var hl={id:"auto-start/interactableMethods",install:function(a){var d=a.Interactable;d.prototype.getAction=function(g,v,b,w){var E=function(S,P,L,W,K){var rt=S.getRect(W),ut={action:null,interactable:S,interaction:L,element:W,rect:rt,buttons:P.buttons||{0:1,1:4,3:8,4:16}[P.button]};return K.fire("auto-start:check",ut),ut.action}(this,v,b,w,a);return this.options.actionChecker?this.options.actionChecker(g,v,E,this,w,b):E},d.prototype.ignoreFrom=(0,de.warnOnce)(function(g){return this._backCompatOption("ignoreFrom",g)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),d.prototype.allowFrom=(0,de.warnOnce)(function(g){return this._backCompatOption("allowFrom",g)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),d.prototype.actionChecker=fl,d.prototype.styleCursor=ul}};vn.default=hl;var vi={};function zo(a,d,g,v,b){return d.testIgnoreAllow(d.options[a.name],g,v)&&d.options[a.name].enabled&&mn(d,g,a,b)?a:null}function dl(a,d,g,v,b,w,E){for(var S=0,P=v.length;S<P;S++){var L=v[S],W=b[S],K=L.getAction(d,g,a,W);if(K){var rt=zo(K,L,W,w,E);if(rt)return{action:rt,interactable:L,element:W}}}return{action:null,interactable:null,element:null}}function Xo(a,d,g,v,b){var w=[],E=[],S=v;function P(W){w.push(W),E.push(S)}for(;h.default.element(S);){w=[],E=[],b.interactables.forEachMatch(S,P);var L=dl(a,d,g,w,E,v,b);if(L.action&&!L.interactable.options[L.action.name].manualStart)return L;S=X.parentNode(S)}return{action:null,interactable:null,element:null}}function Yo(a,d,g){var v=d.action,b=d.interactable,w=d.element;v=v||{name:null},a.interactable=b,a.element=w,(0,de.copyAction)(a.prepared,v),a.rect=b&&v.name?b.getRect(w):null,Ho(a,g),g.fire("autoStart:prepared",{interaction:a})}function mn(a,d,g,v){var b=a.options,w=b[g.name].max,E=b[g.name].maxPerElement,S=v.autoStart.maxInteractions,P=0,L=0,W=0;if(!(w&&E&&S))return!1;for(var K=0;K<v.interactions.list.length;K++){var rt=v.interactions.list[K],ut=rt.prepared.name;if(rt.interacting()&&(++P>=S||rt.interactable===a&&((L+=ut===g.name?1:0)>=w||rt.element===d&&(W++,ut===g.name&&W>=E))))return!1}return S>0}function Wo(a,d){return h.default.number(a)?(d.autoStart.maxInteractions=a,this):d.autoStart.maxInteractions}function yr(a,d,g){var v=g.autoStart.cursorElement;v&&v!==a&&(v.style.cursor=""),a.ownerDocument.documentElement.style.cursor=d,a.style.cursor=d,g.autoStart.cursorElement=d?a:null}function Ho(a,d){var g=a.interactable,v=a.element,b=a.prepared;if(a.pointerType==="mouse"&&g&&g.options.styleCursor){var w="";if(b.name){var E=g.options[b.name].cursorChecker;w=h.default.func(E)?E(b,g,v,a._interacting):d.actions.map[b.name].getCursor(b)}yr(a.element,w||"",d)}else d.autoStart.cursorElement&&yr(d.autoStart.cursorElement,"",d)}Object.defineProperty(vi,"__esModule",{value:!0}),vi.default=void 0;var pl={id:"auto-start/base",before:["actions"],install:function(a){var d=a.interactStatic,g=a.defaults;a.usePlugin(vn.default),g.base.actionChecker=null,g.base.styleCursor=!0,(0,ot.default)(g.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),d.maxInteractions=function(v){return Wo(v,a)},a.autoStart={maxInteractions:1/0,withinInteractionLimit:mn,cursorElement:null}},listeners:{"interactions:down":function(a,d){var g=a.interaction,v=a.pointer,b=a.event,w=a.eventTarget;g.interacting()||Yo(g,Xo(g,v,b,w,d),d)},"interactions:move":function(a,d){(function(g,v){var b=g.interaction,w=g.pointer,E=g.event,S=g.eventTarget;b.pointerType!=="mouse"||b.pointerIsDown||b.interacting()||Yo(b,Xo(b,w,E,S,v),v)})(a,d),function(g,v){var b=g.interaction;if(b.pointerIsDown&&!b.interacting()&&b.pointerWasMoved&&b.prepared.name){v.fire("autoStart:before-start",g);var w=b.interactable,E=b.prepared.name;E&&w&&(w.options[E].manualStart||!mn(w,b.element,b.prepared,v)?b.stop():(b.start(b.prepared,w,b.element),Ho(b,v)))}}(a,d)},"interactions:stop":function(a,d){var g=a.interaction,v=g.interactable;v&&v.options.styleCursor&&yr(g.element,"",d)}},maxInteractions:Wo,withinInteractionLimit:mn,validateAction:zo},gl=pl;vi.default=gl;var yn={};Object.defineProperty(yn,"__esModule",{value:!0}),yn.default=void 0;var vl={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(a,d){var g=a.interaction,v=a.eventTarget,b=a.dx,w=a.dy;if(g.prepared.name==="drag"){var E=Math.abs(b),S=Math.abs(w),P=g.interactable.options.drag,L=P.startAxis,W=E>S?"x":E<S?"y":"xy";if(g.prepared.axis=P.lockAxis==="start"?W[0]:P.lockAxis,W!=="xy"&&L!=="xy"&&L!==W){g.prepared.name=null;for(var K=v,rt=function(tt){if(tt!==g.interactable){var mt=g.interactable.options.drag;if(!mt.manualStart&&tt.testIgnoreAllow(mt,K,v)){var Tt=tt.getAction(g.downPointer,g.downEvent,g,K);if(Tt&&Tt.name==="drag"&&function(yt,Et){if(!Et)return!1;var At=Et.options.drag.startAxis;return yt==="xy"||At==="xy"||At===yt}(W,tt)&&vi.default.validateAction(Tt,tt,K,v,d))return tt}}};h.default.element(K);){var ut=d.interactables.forEachMatch(K,rt);if(ut){g.prepared.name="drag",g.interactable=ut,g.element=K;break}K=(0,X.parentNode)(K)}}}}}};yn.default=vl;var bn={};function br(a){var d=a.prepared&&a.prepared.name;if(!d)return null;var g=a.interactable.options;return g[d].hold||g[d].delay}Object.defineProperty(bn,"__esModule",{value:!0}),bn.default=void 0;var ml={id:"auto-start/hold",install:function(a){var d=a.defaults;a.usePlugin(vi.default),d.perAction.hold=0,d.perAction.delay=0},listeners:{"interactions:new":function(a){a.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(a){var d=a.interaction,g=br(d);g>0&&(d.autoStartHoldTimer=setTimeout(function(){d.start(d.prepared,d.interactable,d.element)},g))},"interactions:move":function(a){var d=a.interaction,g=a.duplicate;d.autoStartHoldTimer&&d.pointerWasMoved&&!g&&(clearTimeout(d.autoStartHoldTimer),d.autoStartHoldTimer=null)},"autoStart:before-start":function(a){var d=a.interaction;br(d)>0&&(d.prepared.name=null)}},getHoldDuration:br},yl=ml;bn.default=yl;var Ri={};Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.default=void 0;var bl={id:"auto-start",install:function(a){a.usePlugin(vi.default),a.usePlugin(bn.default),a.usePlugin(yn.default)}};Ri.default=bl;var $e={};function _l(a){return/^(always|never|auto)$/.test(a)?(this.options.preventDefault=a,this):h.default.bool(a)?(this.options.preventDefault=a?"always":"never",this):this.options.preventDefault}function xl(a){var d=a.interaction,g=a.event;d.interactable&&d.interactable.checkAndPreventDefault(g)}function Uo(a){var d=a.Interactable;d.prototype.preventDefault=_l,d.prototype.checkAndPreventDefault=function(g){return function(v,b,w){var E=v.options.preventDefault;if(E!=="never")if(E!=="always"){if(b.events.supportsPassive&&/^touch(start|move)$/.test(w.type)){var S=(0,C.getWindow)(w.target).document,P=b.getDocOptions(S);if(!P||!P.events||P.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(w.type)||h.default.element(w.target)&&(0,X.matchesSelector)(w.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||w.preventDefault()}else w.preventDefault()}(this,a,g)},a.interactions.docEvents.push({type:"dragstart",listener:function(g){for(var v=0;v<a.interactions.list.length;v++){var b=a.interactions.list[v];if(b.element&&(b.element===g.target||(0,X.nodeContains)(b.element,g.target)))return void b.interactable.checkAndPreventDefault(g)}}})}Object.defineProperty($e,"__esModule",{value:!0}),$e.default=void 0,$e.install=Uo;var Cl={id:"core/interactablePreventDefault",install:Uo,listeners:["down","move","up","cancel"].reduce(function(a,d){return a["interactions:".concat(d)]=xl,a},{})};$e.default=Cl;var _r={};Object.defineProperty(_r,"__esModule",{value:!0}),_r.default=void 0,_r.default={};var Li,_n={};Object.defineProperty(_n,"__esModule",{value:!0}),_n.default=void 0,function(a){a.touchAction="touchAction",a.boxSizing="boxSizing",a.noListeners="noListeners"}(Li||(Li={})),Li.touchAction,Li.boxSizing,Li.noListeners;var wl={id:"dev-tools",install:function(){}};_n.default=wl;var ti={};Object.defineProperty(ti,"__esModule",{value:!0}),ti.default=function a(d){var g={};for(var v in d){var b=d[v];h.default.plainObject(b)?g[v]=a(b):h.default.array(b)?g[v]=Y.from(b):g[v]=b}return g};var ei={};function No(a,d){return function(g){if(Array.isArray(g))return g}(a)||function(g,v){var b=g==null?null:typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(b!=null){var w,E,S=[],P=!0,L=!1;try{for(b=b.call(g);!(P=(w=b.next()).done)&&(S.push(w.value),!v||S.length!==v);P=!0);}catch(W){L=!0,E=W}finally{try{P||b.return==null||b.return()}finally{if(L)throw E}}return S}}(a,d)||function(g,v){if(g){if(typeof g=="string")return Vo(g,v);var b=Object.prototype.toString.call(g).slice(8,-1);return b==="Object"&&g.constructor&&(b=g.constructor.name),b==="Map"||b==="Set"?Array.from(g):b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?Vo(g,v):void 0}}(a,d)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Vo(a,d){(d==null||d>a.length)&&(d=a.length);for(var g=0,v=Array(d);g<d;g++)v[g]=a[g];return v}function Sl(a,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}function ii(a,d,g){return d in a?Object.defineProperty(a,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[d]=g,a}Object.defineProperty(ei,"__esModule",{value:!0}),ei.default=void 0,ei.getRectOffset=Go;var Tl=function(){function a(v){(function(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")})(this,a),ii(this,"states",[]),ii(this,"startOffset",{left:0,right:0,top:0,bottom:0}),ii(this,"startDelta",void 0),ii(this,"result",void 0),ii(this,"endResult",void 0),ii(this,"edges",void 0),ii(this,"interaction",void 0),this.interaction=v,this.result=xn()}var d,g;return d=a,(g=[{key:"start",value:function(v,b){var w=v.phase,E=this.interaction,S=function(L){var W=L.interactable.options[L.prepared.name],K=W.modifiers;return K&&K.length?K:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(rt){var ut=W[rt];return ut&&ut.enabled&&{options:ut,methods:ut._methods}}).filter(function(rt){return!!rt})}(E);this.prepareStates(S),this.edges=(0,ot.default)({},E.edges),this.startOffset=Go(E.rect,b),this.startDelta={x:0,y:0};var P=this.fillArg({phase:w,pageCoords:b,preEnd:!1});return this.result=xn(),this.startAll(P),this.result=this.setAll(P)}},{key:"fillArg",value:function(v){var b=this.interaction;return v.interaction=b,v.interactable=b.interactable,v.element=b.element,v.rect=v.rect||b.rect,v.edges=this.edges,v.startOffset=this.startOffset,v}},{key:"startAll",value:function(v){for(var b=0;b<this.states.length;b++){var w=this.states[b];w.methods.start&&(v.state=w,w.methods.start(v))}}},{key:"setAll",value:function(v){var b=v.phase,w=v.preEnd,E=v.skipModifiers,S=v.rect;v.coords=(0,ot.default)({},v.pageCoords),v.rect=(0,ot.default)({},S);for(var P=E?this.states.slice(E):this.states,L=xn(v.coords,v.rect),W=0;W<P.length;W++){var K,rt=P[W],ut=rt.options,tt=(0,ot.default)({},v.coords),mt=null;(K=rt.methods)!=null&&K.set&&this.shouldDo(ut,w,b)&&(v.state=rt,mt=rt.methods.set(v),pt.addEdges(this.interaction.edges,v.rect,{x:v.coords.x-tt.x,y:v.coords.y-tt.y})),L.eventProps.push(mt)}L.delta.x=v.coords.x-v.pageCoords.x,L.delta.y=v.coords.y-v.pageCoords.y,L.rectDelta.left=v.rect.left-S.left,L.rectDelta.right=v.rect.right-S.right,L.rectDelta.top=v.rect.top-S.top,L.rectDelta.bottom=v.rect.bottom-S.bottom;var Tt=this.result.coords,yt=this.result.rect;if(Tt&&yt){var Et=L.rect.left!==yt.left||L.rect.right!==yt.right||L.rect.top!==yt.top||L.rect.bottom!==yt.bottom;L.changed=Et||Tt.x!==L.coords.x||Tt.y!==L.coords.y}return L}},{key:"applyToInteraction",value:function(v){var b=this.interaction,w=v.phase,E=b.coords.cur,S=b.coords.start,P=this.result,L=this.startDelta,W=P.delta;w==="start"&&(0,ot.default)(this.startDelta,P.delta);for(var K=0;K<[[S,L],[E,W]].length;K++){var rt=No([[S,L],[E,W]][K],2),ut=rt[0],tt=rt[1];ut.page.x+=tt.x,ut.page.y+=tt.y,ut.client.x+=tt.x,ut.client.y+=tt.y}var mt=this.result.rectDelta,Tt=v.rect||b.rect;Tt.left+=mt.left,Tt.right+=mt.right,Tt.top+=mt.top,Tt.bottom+=mt.bottom,Tt.width=Tt.right-Tt.left,Tt.height=Tt.bottom-Tt.top}},{key:"setAndApply",value:function(v){var b=this.interaction,w=v.phase,E=v.preEnd,S=v.skipModifiers,P=this.setAll(this.fillArg({preEnd:E,phase:w,pageCoords:v.modifiedCoords||b.coords.cur.page}));if(this.result=P,!P.changed&&(!S||S<this.states.length)&&b.interacting())return!1;if(v.modifiedCoords){var L=b.coords.cur.page,W={x:v.modifiedCoords.x-L.x,y:v.modifiedCoords.y-L.y};P.coords.x+=W.x,P.coords.y+=W.y,P.delta.x+=W.x,P.delta.y+=W.y}this.applyToInteraction(v)}},{key:"beforeEnd",value:function(v){var b=v.interaction,w=v.event,E=this.states;if(E&&E.length){for(var S=!1,P=0;P<E.length;P++){var L=E[P];v.state=L;var W=L.options,K=L.methods,rt=K.beforeEnd&&K.beforeEnd(v);if(rt)return this.endResult=rt,!1;S=S||!S&&this.shouldDo(W,!0,v.phase,!0)}S&&b.move({event:w,preEnd:!0})}}},{key:"stop",value:function(v){var b=v.interaction;if(this.states&&this.states.length){var w=(0,ot.default)({states:this.states,interactable:b.interactable,element:b.element,rect:null},v);this.fillArg(w);for(var E=0;E<this.states.length;E++){var S=this.states[E];w.state=S,S.methods.stop&&S.methods.stop(w)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(v){this.states=[];for(var b=0;b<v.length;b++){var w=v[b],E=w.options,S=w.methods,P=w.name;this.states.push({options:E,methods:S,index:b,name:P})}return this.states}},{key:"restoreInteractionCoords",value:function(v){var b=v.interaction,w=b.coords,E=b.rect,S=b.modification;if(S.result){for(var P=S.startDelta,L=S.result,W=L.delta,K=L.rectDelta,rt=[[w.start,P],[w.cur,W]],ut=0;ut<rt.length;ut++){var tt=No(rt[ut],2),mt=tt[0],Tt=tt[1];mt.page.x-=Tt.x,mt.page.y-=Tt.y,mt.client.x-=Tt.x,mt.client.y-=Tt.y}E.left-=K.left,E.right-=K.right,E.top-=K.top,E.bottom-=K.bottom}}},{key:"shouldDo",value:function(v,b,w,E){return!(!v||v.enabled===!1||E&&!v.endOnly||v.endOnly&&!b||w==="start"&&!v.setStart)}},{key:"copyFrom",value:function(v){this.startOffset=v.startOffset,this.startDelta=v.startDelta,this.edges=v.edges,this.states=v.states.map(function(b){return(0,ti.default)(b)}),this.result=xn((0,ot.default)({},v.result.coords),(0,ot.default)({},v.result.rect))}},{key:"destroy",value:function(){for(var v in this)this[v]=null}}])&&Sl(d.prototype,g),Object.defineProperty(d,"prototype",{writable:!1}),a}();function xn(a,d){return{rect:d,coords:a,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function Go(a,d){return a?{left:d.x-a.left,top:d.y-a.top,right:a.right-d.x,bottom:a.bottom-d.y}:{left:0,top:0,right:0,bottom:0}}ei.default=Tl;var ee={};function Cn(a){var d=a.iEvent,g=a.interaction.modification.result;g&&(d.modifiers=g.eventProps)}Object.defineProperty(ee,"__esModule",{value:!0}),ee.addEventModifiers=Cn,ee.default=void 0,ee.makeModifier=function(a,d){var g=a.defaults,v={start:a.start,set:a.set,beforeEnd:a.beforeEnd,stop:a.stop},b=function(w){var E=w||{};for(var S in E.enabled=E.enabled!==!1,g)S in E||(E[S]=g[S]);var P={options:E,methods:v,name:d,enable:function(){return E.enabled=!0,P},disable:function(){return E.enabled=!1,P}};return P};return d&&typeof d=="string"&&(b._defaults=g,b._methods=v),b};var Ol={id:"modifiers/base",before:["actions"],install:function(a){a.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(a){var d=a.interaction;d.modification=new ei.default(d)},"interactions:before-action-start":function(a){var d=a.interaction.modification;d.start(a,a.interaction.coords.start.page),a.interaction.edges=d.edges,d.applyToInteraction(a)},"interactions:before-action-move":function(a){return a.interaction.modification.setAndApply(a)},"interactions:before-action-end":function(a){return a.interaction.modification.beforeEnd(a)},"interactions:action-start":Cn,"interactions:action-move":Cn,"interactions:action-end":Cn,"interactions:after-action-start":function(a){return a.interaction.modification.restoreInteractionCoords(a)},"interactions:after-action-move":function(a){return a.interaction.modification.restoreInteractionCoords(a)},"interactions:stop":function(a){return a.interaction.modification.stop(a)}}},Pl=Ol;ee.default=Pl;var Bi={};Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.defaults=void 0,Bi.defaults={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}};var zi={};function xr(a){return xr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},xr(a)}function El(a,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}function Cr(a,d){return Cr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,v){return g.__proto__=v,g},Cr(a,d)}function Al(a,d){if(d&&(xr(d)==="object"||typeof d=="function"))return d;if(d!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xt(a)}function Xt(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function wn(a){return wn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)},wn(a)}function Ht(a,d,g){return d in a?Object.defineProperty(a,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[d]=g,a}Object.defineProperty(zi,"__esModule",{value:!0}),zi.InteractEvent=void 0;var Ko=function(a){(function(S,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(P&&P.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),Object.defineProperty(S,"prototype",{writable:!1}),P&&Cr(S,P)})(E,a);var d,g,v,b,w=(v=E,b=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var S,P=wn(v);if(b){var L=wn(this).constructor;S=Reflect.construct(P,arguments,L)}else S=P.apply(this,arguments);return Al(this,S)});function E(S,P,L,W,K,rt,ut){var tt;(function(Wt,Rt){if(!(Wt instanceof Rt))throw new TypeError("Cannot call a class as a function")})(this,E),Ht(Xt(tt=w.call(this,S)),"relatedTarget",null),Ht(Xt(tt),"screenX",void 0),Ht(Xt(tt),"screenY",void 0),Ht(Xt(tt),"button",void 0),Ht(Xt(tt),"buttons",void 0),Ht(Xt(tt),"ctrlKey",void 0),Ht(Xt(tt),"shiftKey",void 0),Ht(Xt(tt),"altKey",void 0),Ht(Xt(tt),"metaKey",void 0),Ht(Xt(tt),"page",void 0),Ht(Xt(tt),"client",void 0),Ht(Xt(tt),"delta",void 0),Ht(Xt(tt),"rect",void 0),Ht(Xt(tt),"x0",void 0),Ht(Xt(tt),"y0",void 0),Ht(Xt(tt),"t0",void 0),Ht(Xt(tt),"dt",void 0),Ht(Xt(tt),"duration",void 0),Ht(Xt(tt),"clientX0",void 0),Ht(Xt(tt),"clientY0",void 0),Ht(Xt(tt),"velocity",void 0),Ht(Xt(tt),"speed",void 0),Ht(Xt(tt),"swipe",void 0),Ht(Xt(tt),"axes",void 0),Ht(Xt(tt),"preEnd",void 0),K=K||S.element;var mt=S.interactable,Tt=(mt&&mt.options||Bi.defaults).deltaSource,yt=(0,k.default)(mt,K,L),Et=W==="start",At=W==="end",jt=Et?Xt(tt):S.prevEvent,Bt=Et?S.coords.start:At?{page:jt.page,client:jt.client,timeStamp:S.coords.cur.timeStamp}:S.coords.cur;return tt.page=(0,ot.default)({},Bt.page),tt.client=(0,ot.default)({},Bt.client),tt.rect=(0,ot.default)({},S.rect),tt.timeStamp=Bt.timeStamp,At||(tt.page.x-=yt.x,tt.page.y-=yt.y,tt.client.x-=yt.x,tt.client.y-=yt.y),tt.ctrlKey=P.ctrlKey,tt.altKey=P.altKey,tt.shiftKey=P.shiftKey,tt.metaKey=P.metaKey,tt.button=P.button,tt.buttons=P.buttons,tt.target=K,tt.currentTarget=K,tt.preEnd=rt,tt.type=ut||L+(W||""),tt.interactable=mt,tt.t0=Et?S.pointers[S.pointers.length-1].downTime:jt.t0,tt.x0=S.coords.start.page.x-yt.x,tt.y0=S.coords.start.page.y-yt.y,tt.clientX0=S.coords.start.client.x-yt.x,tt.clientY0=S.coords.start.client.y-yt.y,tt.delta=Et||At?{x:0,y:0}:{x:tt[Tt].x-jt[Tt].x,y:tt[Tt].y-jt[Tt].y},tt.dt=S.coords.delta.timeStamp,tt.duration=tt.timeStamp-tt.t0,tt.velocity=(0,ot.default)({},S.coords.velocity[Tt]),tt.speed=(0,H.default)(tt.velocity.x,tt.velocity.y),tt.swipe=At||W==="inertiastart"?tt.getSwipe():null,tt}return d=E,(g=[{key:"getSwipe",value:function(){var S=this._interaction;if(S.prevEvent.speed<600||this.timeStamp-S.prevEvent.timeStamp>150)return null;var P=180*Math.atan2(S.prevEvent.velocityY,S.prevEvent.velocityX)/Math.PI;P<0&&(P+=360);var L=112.5<=P&&P<247.5,W=202.5<=P&&P<337.5;return{up:W,down:!W&&22.5<=P&&P<157.5,left:L,right:!L&&(292.5<=P||P<67.5),angle:P,speed:S.prevEvent.speed,velocity:{x:S.prevEvent.velocityX,y:S.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}])&&El(d.prototype,g),Object.defineProperty(d,"prototype",{writable:!1}),E}(dt.BaseEvent);zi.InteractEvent=Ko,Object.defineProperties(Ko.prototype,{pageX:{get:function(){return this.page.x},set:function(a){this.page.x=a}},pageY:{get:function(){return this.page.y},set:function(a){this.page.y=a}},clientX:{get:function(){return this.client.x},set:function(a){this.client.x=a}},clientY:{get:function(){return this.client.y},set:function(a){this.client.y=a}},dx:{get:function(){return this.delta.x},set:function(a){this.delta.x=a}},dy:{get:function(){return this.delta.y},set:function(a){this.delta.y=a}},velocityX:{get:function(){return this.velocity.x},set:function(a){this.velocity.x=a}},velocityY:{get:function(){return this.velocity.y},set:function(a){this.velocity.y=a}}});var Xi={};function qo(a,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}function Ml(a,d,g){return d&&qo(a.prototype,d),g&&qo(a,g),Object.defineProperty(a,"prototype",{writable:!1}),a}function Yi(a,d,g){return d in a?Object.defineProperty(a,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[d]=g,a}Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.PointerInfo=void 0;var kl=Ml(function a(d,g,v,b,w){(function(E,S){if(!(E instanceof S))throw new TypeError("Cannot call a class as a function")})(this,a),Yi(this,"id",void 0),Yi(this,"pointer",void 0),Yi(this,"event",void 0),Yi(this,"downTime",void 0),Yi(this,"downTarget",void 0),this.id=d,this.pointer=g,this.event=v,this.downTime=b,this.downTarget=w});Xi.PointerInfo=kl;var Sn,Tn,ue={};function Dl(a,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}function Nt(a,d,g){return d in a?Object.defineProperty(a,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[d]=g,a}Object.defineProperty(ue,"__esModule",{value:!0}),ue.Interaction=void 0,Object.defineProperty(ue,"PointerInfo",{enumerable:!0,get:function(){return Xi.PointerInfo}}),ue.default=ue._ProxyValues=ue._ProxyMethods=void 0,ue._ProxyValues=Sn,function(a){a.interactable="",a.element="",a.prepared="",a.pointerIsDown="",a.pointerWasMoved="",a._proxy=""}(Sn||(ue._ProxyValues=Sn={})),ue._ProxyMethods=Tn,function(a){a.start="",a.move="",a.end="",a.stop="",a.interacting=""}(Tn||(ue._ProxyMethods=Tn={}));var Il=0,Jo=function(){function a(v){var b=this,w=v.pointerType,E=v.scopeFire;(function(rt,ut){if(!(rt instanceof ut))throw new TypeError("Cannot call a class as a function")})(this,a),Nt(this,"interactable",null),Nt(this,"element",null),Nt(this,"rect",null),Nt(this,"_rects",void 0),Nt(this,"edges",null),Nt(this,"_scopeFire",void 0),Nt(this,"prepared",{name:null,axis:null,edges:null}),Nt(this,"pointerType",void 0),Nt(this,"pointers",[]),Nt(this,"downEvent",null),Nt(this,"downPointer",{}),Nt(this,"_latestPointer",{pointer:null,event:null,eventTarget:null}),Nt(this,"prevEvent",null),Nt(this,"pointerIsDown",!1),Nt(this,"pointerWasMoved",!1),Nt(this,"_interacting",!1),Nt(this,"_ending",!1),Nt(this,"_stopped",!0),Nt(this,"_proxy",null),Nt(this,"simulation",null),Nt(this,"doMove",(0,de.warnOnce)(function(rt){this.move(rt)},"The interaction.doMove() method has been renamed to interaction.move()")),Nt(this,"coords",{start:j.newCoords(),prev:j.newCoords(),cur:j.newCoords(),delta:j.newCoords(),velocity:j.newCoords()}),Nt(this,"_id",Il++),this._scopeFire=E,this.pointerType=w;var S=this;this._proxy={};var P=function(rt){Object.defineProperty(b._proxy,rt,{get:function(){return S[rt]}})};for(var L in Sn)P(L);var W=function(rt){Object.defineProperty(b._proxy,rt,{value:function(){return S[rt].apply(S,arguments)}})};for(var K in Tn)W(K);this._scopeFire("interactions:new",{interaction:this})}var d,g;return d=a,g=[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(v,b,w){var E=this.updatePointer(v,b,w,!0),S=this.pointers[E];this._scopeFire("interactions:down",{pointer:v,event:b,eventTarget:w,pointerIndex:E,pointerInfo:S,type:"down",interaction:this})}},{key:"start",value:function(v,b,w){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(v.name==="gesture"?2:1)||!b.options[v.name].enabled)&&((0,de.copyAction)(this.prepared,v),this.interactable=b,this.element=w,this.rect=b.getRect(w),this.edges=this.prepared.edges?(0,ot.default)({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(v,b,w){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(v,b,w,!1);var E,S,P=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(E=this.coords.cur.client.x-this.coords.start.client.x,S=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=(0,H.default)(E,S)>this.pointerMoveTolerance);var L=this.getPointerIndex(v),W={pointer:v,pointerIndex:L,pointerInfo:this.pointers[L],event:b,type:"move",eventTarget:w,dx:E,dy:S,duplicate:P,interaction:this};P||j.setCoordVelocity(this.coords.velocity,this.coords.delta),this._scopeFire("interactions:move",W),P||this.simulation||(this.interacting()&&(W.type=null,this.move(W)),this.pointerWasMoved&&j.copyCoords(this.coords.prev,this.coords.cur))}},{key:"move",value:function(v){v&&v.event||j.setZeroCoords(this.coords.delta),(v=(0,ot.default)({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},v||{})).phase="move",this._doPhase(v)}},{key:"pointerUp",value:function(v,b,w,E){var S=this.getPointerIndex(v);S===-1&&(S=this.updatePointer(v,b,w,!1));var P=/cancel$/i.test(b.type)?"cancel":"up";this._scopeFire("interactions:".concat(P),{pointer:v,pointerIndex:S,pointerInfo:this.pointers[S],event:b,eventTarget:w,type:P,curEventTarget:E,interaction:this}),this.simulation||this.end(b),this.removePointer(v,b)}},{key:"documentBlur",value:function(v){this.end(v),this._scopeFire("interactions:blur",{event:v,type:"blur",interaction:this})}},{key:"end",value:function(v){var b;this._ending=!0,v=v||this._latestPointer.event,this.interacting()&&(b=this._doPhase({event:v,interaction:this,phase:"end"})),this._ending=!1,b===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(v){var b=j.getPointerId(v);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:Y.findIndex(this.pointers,function(w){return w.id===b})}},{key:"getPointerInfo",value:function(v){return this.pointers[this.getPointerIndex(v)]}},{key:"updatePointer",value:function(v,b,w,E){var S=j.getPointerId(v),P=this.getPointerIndex(v),L=this.pointers[P];return E=E!==!1&&(E||/(down|start)$/i.test(b.type)),L?L.pointer=v:(L=new Xi.PointerInfo(S,v,b,null,null),P=this.pointers.length,this.pointers.push(L)),j.setCoords(this.coords.cur,this.pointers.map(function(W){return W.pointer}),this._now()),j.setCoordDeltas(this.coords.delta,this.coords.prev,this.coords.cur),E&&(this.pointerIsDown=!0,L.downTime=this.coords.cur.timeStamp,L.downTarget=w,j.pointerExtend(this.downPointer,v),this.interacting()||(j.copyCoords(this.coords.start,this.coords.cur),j.copyCoords(this.coords.prev,this.coords.cur),this.downEvent=b,this.pointerWasMoved=!1)),this._updateLatestPointer(v,b,w),this._scopeFire("interactions:update-pointer",{pointer:v,event:b,eventTarget:w,down:E,pointerInfo:L,pointerIndex:P,interaction:this}),P}},{key:"removePointer",value:function(v,b){var w=this.getPointerIndex(v);if(w!==-1){var E=this.pointers[w];this._scopeFire("interactions:remove-pointer",{pointer:v,event:b,eventTarget:null,pointerIndex:w,pointerInfo:E,interaction:this}),this.pointers.splice(w,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(v,b,w){this._latestPointer.pointer=v,this._latestPointer.event=b,this._latestPointer.eventTarget=w}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(v,b,w,E){return new zi.InteractEvent(this,v,this.prepared.name,b,this.element,w,E)}},{key:"_fireEvent",value:function(v){var b;(b=this.interactable)==null||b.fire(v),(!this.prevEvent||v.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=v)}},{key:"_doPhase",value:function(v){var b=v.event,w=v.phase,E=v.preEnd,S=v.type,P=this.rect;if(P&&w==="move"&&(pt.addEdges(this.edges,P,this.coords.delta[this.interactable.options.deltaSource]),P.width=P.right-P.left,P.height=P.bottom-P.top),this._scopeFire("interactions:before-action-".concat(w),v)===!1)return!1;var L=v.iEvent=this._createPreparedEvent(b,w,E,S);return this._scopeFire("interactions:action-".concat(w),v),w==="start"&&(this.prevEvent=L),this._fireEvent(L),this._scopeFire("interactions:after-action-".concat(w),v),!0}},{key:"_now",value:function(){return Date.now()}}],g&&Dl(d.prototype,g),Object.defineProperty(d,"prototype",{writable:!1}),a}();ue.Interaction=Jo;var jl=Jo;ue.default=jl;var He={};function Qo(a){a.pointerIsDown&&(Sr(a.coords.cur,a.offset.total),a.offset.pending.x=0,a.offset.pending.y=0)}function Zo(a){wr(a.interaction)}function wr(a){if(!function(g){return!(!g.offset.pending.x&&!g.offset.pending.y)}(a))return!1;var d=a.offset.pending;return Sr(a.coords.cur,d),Sr(a.coords.delta,d),pt.addEdges(a.edges,a.rect,d),d.x=0,d.y=0,!0}function Fl(a){var d=a.x,g=a.y;this.offset.pending.x+=d,this.offset.pending.y+=g,this.offset.total.x+=d,this.offset.total.y+=g}function Sr(a,d){var g=a.page,v=a.client,b=d.x,w=d.y;g.x+=b,g.y+=w,v.x+=b,v.y+=w}Object.defineProperty(He,"__esModule",{value:!0}),He.addTotal=Qo,He.applyPending=wr,He.default=void 0,ue._ProxyMethods.offsetBy="";var Rl={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(a){a.Interaction.prototype.offsetBy=Fl},listeners:{"interactions:new":function(a){a.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(a){return Qo(a.interaction)},"interactions:before-action-start":Zo,"interactions:before-action-move":Zo,"interactions:before-action-end":function(a){var d=a.interaction;if(wr(d))return d.move({offset:!0}),d.end(),!1},"interactions:stop":function(a){var d=a.interaction;d.offset.total.x=0,d.offset.total.y=0,d.offset.pending.x=0,d.offset.pending.y=0}}},Ll=Rl;He.default=Ll;var ni={};function Bl(a,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}function qt(a,d,g){return d in a?Object.defineProperty(a,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[d]=g,a}Object.defineProperty(ni,"__esModule",{value:!0}),ni.default=ni.InertiaState=void 0;var $o=function(){function a(v){(function(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")})(this,a),qt(this,"active",!1),qt(this,"isModified",!1),qt(this,"smoothEnd",!1),qt(this,"allowResume",!1),qt(this,"modification",void 0),qt(this,"modifierCount",0),qt(this,"modifierArg",void 0),qt(this,"startCoords",void 0),qt(this,"t0",0),qt(this,"v0",0),qt(this,"te",0),qt(this,"targetOffset",void 0),qt(this,"modifiedOffset",void 0),qt(this,"currentOffset",void 0),qt(this,"lambda_v0",0),qt(this,"one_ve_v0",0),qt(this,"timeout",void 0),qt(this,"interaction",void 0),this.interaction=v}var d,g;return d=a,(g=[{key:"start",value:function(v){var b=this.interaction,w=On(b);if(!w||!w.enabled)return!1;var E=b.coords.velocity.client,S=(0,H.default)(E.x,E.y),P=this.modification||(this.modification=new ei.default(b));if(P.copyFrom(b.modification),this.t0=b._now(),this.allowResume=w.allowResume,this.v0=S,this.currentOffset={x:0,y:0},this.startCoords=b.coords.cur.page,this.modifierArg=P.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-b.coords.cur.timeStamp<50&&S>w.minSpeed&&S>w.endSpeed)this.startInertia();else{if(P.result=P.setAll(this.modifierArg),!P.result.changed)return!1;this.startSmoothEnd()}return b.modification.result.rect=null,b.offsetBy(this.targetOffset),b._doPhase({interaction:b,event:v,phase:"inertiastart"}),b.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),b.modification.result.rect=null,this.active=!0,b.simulation=this,!0}},{key:"startInertia",value:function(){var v=this,b=this.interaction.coords.velocity.client,w=On(this.interaction),E=w.resistance,S=-Math.log(w.endSpeed/this.v0)/E;this.targetOffset={x:(b.x-S)/E,y:(b.y-S)/E},this.te=S,this.lambda_v0=E/this.v0,this.one_ve_v0=1-w.endSpeed/this.v0;var P=this.modification,L=this.modifierArg;L.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},P.result=P.setAll(L),P.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+P.result.delta.x,y:this.targetOffset.y+P.result.delta.y}),this.onNextFrame(function(){return v.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var v=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return v.smoothEndTick()})}},{key:"onNextFrame",value:function(v){var b=this;this.timeout=be.default.request(function(){b.active&&v()})}},{key:"inertiaTick",value:function(){var v,b,w,E,S,P=this,L=this.interaction,W=On(L).resistance,K=(L._now()-this.t0)/1e3;if(K<this.te){var rt,ut=1-(Math.exp(-W*K)-this.lambda_v0)/this.one_ve_v0;this.isModified?(v=this.targetOffset.x,b=this.targetOffset.y,w=this.modifiedOffset.x,E=this.modifiedOffset.y,rt={x:ts(S=ut,0,v,w),y:ts(S,0,b,E)}):rt={x:this.targetOffset.x*ut,y:this.targetOffset.y*ut};var tt={x:rt.x-this.currentOffset.x,y:rt.y-this.currentOffset.y};this.currentOffset.x+=tt.x,this.currentOffset.y+=tt.y,L.offsetBy(tt),L.move(),this.onNextFrame(function(){return P.inertiaTick()})}else L.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var v=this,b=this.interaction,w=b._now()-this.t0,E=On(b).smoothEndDuration;if(w<E){var S={x:es(w,0,this.targetOffset.x,E),y:es(w,0,this.targetOffset.y,E)},P={x:S.x-this.currentOffset.x,y:S.y-this.currentOffset.y};this.currentOffset.x+=P.x,this.currentOffset.y+=P.y,b.offsetBy(P),b.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return v.smoothEndTick()})}else b.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(v){var b=v.pointer,w=v.event,E=v.eventTarget,S=this.interaction;S.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),S.updatePointer(b,w,E,!0),S._doPhase({interaction:S,event:w,phase:"resume"}),(0,j.copyCoords)(S.coords.prev,S.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,be.default.cancel(this.timeout)}}])&&Bl(d.prototype,g),Object.defineProperty(d,"prototype",{writable:!1}),a}();function On(a){var d=a.interactable,g=a.prepared;return d&&d.options&&g.name&&d.options[g.name].inertia}ni.InertiaState=$o;var zl={id:"inertia",before:["modifiers","actions"],install:function(a){var d=a.defaults;a.usePlugin(He.default),a.usePlugin(ee.default),a.actions.phases.inertiastart=!0,a.actions.phases.resume=!0,d.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(a){var d=a.interaction;d.inertia=new $o(d)},"interactions:before-action-end":function(a){var d=a.interaction,g=a.event;return(!d._interacting||d.simulation||!d.inertia.start(g))&&null},"interactions:down":function(a){var d=a.interaction,g=a.eventTarget,v=d.inertia;if(v.active)for(var b=g;h.default.element(b);){if(b===d.element){v.resume(a);break}b=X.parentNode(b)}},"interactions:stop":function(a){var d=a.interaction.inertia;d.active&&d.stop()},"interactions:before-action-resume":function(a){var d=a.interaction.modification;d.stop(a),d.start(a,a.interaction.coords.cur.page),d.applyToInteraction(a)},"interactions:before-action-inertiastart":function(a){return a.interaction.modification.setAndApply(a)},"interactions:action-resume":ee.addEventModifiers,"interactions:action-inertiastart":ee.addEventModifiers,"interactions:after-action-inertiastart":function(a){return a.interaction.modification.restoreInteractionCoords(a)},"interactions:after-action-resume":function(a){return a.interaction.modification.restoreInteractionCoords(a)}}};function ts(a,d,g,v){var b=1-a;return b*b*d+2*b*a*g+a*a*v}function es(a,d,g,v){return-g*(a/=v)*(a-2)+d}var Xl=zl;ni.default=Xl;var Wi={};function Yl(a,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}function Hi(a,d,g){return d in a?Object.defineProperty(a,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[d]=g,a}function is(a,d){for(var g=0;g<d.length;g++){var v=d[g];if(a.immediatePropagationStopped)break;v(a)}}Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.Eventable=void 0;var Wl=function(){function a(v){(function(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")})(this,a),Hi(this,"options",void 0),Hi(this,"types",{}),Hi(this,"propagationStopped",!1),Hi(this,"immediatePropagationStopped",!1),Hi(this,"global",void 0),this.options=(0,ot.default)({},v||{})}var d,g;return d=a,(g=[{key:"fire",value:function(v){var b,w=this.global;(b=this.types[v.type])&&is(v,b),!v.propagationStopped&&w&&(b=w[v.type])&&is(v,b)}},{key:"on",value:function(v,b){var w=(0,U.default)(v,b);for(v in w)this.types[v]=Y.merge(this.types[v]||[],w[v])}},{key:"off",value:function(v,b){var w=(0,U.default)(v,b);for(v in w){var E=this.types[v];if(E&&E.length)for(var S=0;S<w[v].length;S++){var P=w[v][S],L=E.indexOf(P);L!==-1&&E.splice(L,1)}}}},{key:"getRect",value:function(v){return null}}])&&Yl(d.prototype,g),Object.defineProperty(d,"prototype",{writable:!1}),a}();Wi.Eventable=Wl;var Ui={};Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.default=function(a,d){if(d.phaselessTypes[a])return!0;for(var g in d.map)if(a.indexOf(g)===0&&a.substr(g.length)in d.phases)return!0;return!1};var Tr={};Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.createInteractStatic=function(a){var d=function g(v,b){var w=a.interactables.get(v,b);return w||((w=a.interactables.new(v,b)).events.global=g.globalEvents),w};return d.getPointerAverage=j.pointerAverage,d.getTouchBBox=j.touchBBox,d.getTouchDistance=j.touchDistance,d.getTouchAngle=j.touchAngle,d.getElementRect=X.getElementRect,d.getElementClientRect=X.getElementClientRect,d.matchesSelector=X.matchesSelector,d.closest=X.closest,d.globalEvents={},d.version="1.10.17",d.scope=a,d.use=function(g,v){return this.scope.usePlugin(g,v),this},d.isSet=function(g,v){return!!this.scope.interactables.get(g,v&&v.context)},d.on=(0,de.warnOnce)(function(g,v,b){if(h.default.string(g)&&g.search(" ")!==-1&&(g=g.trim().split(/ +/)),h.default.array(g)){for(var w=0;w<g.length;w++){var E=g[w];this.on(E,v,b)}return this}if(h.default.object(g)){for(var S in g)this.on(S,g[S],v);return this}return(0,Ui.default)(g,this.scope.actions)?this.globalEvents[g]?this.globalEvents[g].push(v):this.globalEvents[g]=[v]:this.scope.events.add(this.scope.document,g,v,{options:b}),this},"The interact.on() method is being deprecated"),d.off=(0,de.warnOnce)(function(g,v,b){if(h.default.string(g)&&g.search(" ")!==-1&&(g=g.trim().split(/ +/)),h.default.array(g)){for(var w=0;w<g.length;w++){var E=g[w];this.off(E,v,b)}return this}if(h.default.object(g)){for(var S in g)this.off(S,g[S],v);return this}var P;return(0,Ui.default)(g,this.scope.actions)?g in this.globalEvents&&(P=this.globalEvents[g].indexOf(v))!==-1&&this.globalEvents[g].splice(P,1):this.scope.events.remove(this.scope.document,g,v,b),this},"The interact.off() method is being deprecated"),d.debug=function(){return this.scope},d.supportsTouch=function(){return T.default.supportsTouch},d.supportsPointerEvent=function(){return T.default.supportsPointerEvent},d.stop=function(){for(var g=0;g<this.scope.interactions.list.length;g++)this.scope.interactions.list[g].stop();return this},d.pointerMoveTolerance=function(g){return h.default.number(g)?(this.scope.interactions.pointerMoveTolerance=g,this):this.scope.interactions.pointerMoveTolerance},d.addDocument=function(g,v){this.scope.addDocument(g,v)},d.removeDocument=function(g){this.scope.removeDocument(g)},d};var Pn={};function Hl(a,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}function Re(a,d,g){return d in a?Object.defineProperty(a,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[d]=g,a}Object.defineProperty(Pn,"__esModule",{value:!0}),Pn.Interactable=void 0;var Ul=function(){function a(v,b,w,E){(function(S,P){if(!(S instanceof P))throw new TypeError("Cannot call a class as a function")})(this,a),Re(this,"options",void 0),Re(this,"_actions",void 0),Re(this,"target",void 0),Re(this,"events",new Wi.Eventable),Re(this,"_context",void 0),Re(this,"_win",void 0),Re(this,"_doc",void 0),Re(this,"_scopeEvents",void 0),Re(this,"_rectChecker",void 0),this._actions=b.actions,this.target=v,this._context=b.context||w,this._win=(0,C.getWindow)((0,X.trySelector)(v)?this._context:v),this._doc=this._win.document,this._scopeEvents=E,this.set(b)}var d,g;return d=a,(g=[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(v,b){return h.default.func(b.onstart)&&this.on("".concat(v,"start"),b.onstart),h.default.func(b.onmove)&&this.on("".concat(v,"move"),b.onmove),h.default.func(b.onend)&&this.on("".concat(v,"end"),b.onend),h.default.func(b.oninertiastart)&&this.on("".concat(v,"inertiastart"),b.oninertiastart),this}},{key:"updatePerActionListeners",value:function(v,b,w){(h.default.array(b)||h.default.object(b))&&this.off(v,b),(h.default.array(w)||h.default.object(w))&&this.on(v,w)}},{key:"setPerAction",value:function(v,b){var w=this._defaults;for(var E in b){var S=E,P=this.options[v],L=b[S];S==="listeners"&&this.updatePerActionListeners(v,P.listeners,L),h.default.array(L)?P[S]=Y.from(L):h.default.plainObject(L)?(P[S]=(0,ot.default)(P[S]||{},(0,ti.default)(L)),h.default.object(w.perAction[S])&&"enabled"in w.perAction[S]&&(P[S].enabled=L.enabled!==!1)):h.default.bool(L)&&h.default.object(w.perAction[S])?P[S].enabled=L:P[S]=L}}},{key:"getRect",value:function(v){return v=v||(h.default.element(this.target)?this.target:null),h.default.string(this.target)&&(v=v||this._context.querySelector(this.target)),(0,X.getElementRect)(v)}},{key:"rectChecker",value:function(v){var b=this;return h.default.func(v)?(this._rectChecker=v,this.getRect=function(w){var E=(0,ot.default)({},b._rectChecker(w));return"width"in E||(E.width=E.right-E.left,E.height=E.bottom-E.top),E},this):v===null?(delete this.getRect,delete this._rectChecker,this):this.getRect}},{key:"_backCompatOption",value:function(v,b){if((0,X.trySelector)(b)||h.default.object(b)){for(var w in this.options[v]=b,this._actions.map)this.options[w][v]=b;return this}return this.options[v]}},{key:"origin",value:function(v){return this._backCompatOption("origin",v)}},{key:"deltaSource",value:function(v){return v==="page"||v==="client"?(this.options.deltaSource=v,this):this.options.deltaSource}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(v){return this._context===v.ownerDocument||(0,X.nodeContains)(this._context,v)}},{key:"testIgnoreAllow",value:function(v,b,w){return!this.testIgnore(v.ignoreFrom,b,w)&&this.testAllow(v.allowFrom,b,w)}},{key:"testAllow",value:function(v,b,w){return!v||!!h.default.element(w)&&(h.default.string(v)?(0,X.matchesUpTo)(w,v,b):!!h.default.element(v)&&(0,X.nodeContains)(v,w))}},{key:"testIgnore",value:function(v,b,w){return!(!v||!h.default.element(w))&&(h.default.string(v)?(0,X.matchesUpTo)(w,v,b):!!h.default.element(v)&&(0,X.nodeContains)(v,w))}},{key:"fire",value:function(v){return this.events.fire(v),this}},{key:"_onOff",value:function(v,b,w,E){h.default.object(b)&&!h.default.array(b)&&(E=w,w=null);var S=v==="on"?"add":"remove",P=(0,U.default)(b,w);for(var L in P){L==="wheel"&&(L=T.default.wheelEvent);for(var W=0;W<P[L].length;W++){var K=P[L][W];(0,Ui.default)(L,this._actions)?this.events[v](L,K):h.default.string(this.target)?this._scopeEvents["".concat(S,"Delegate")](this.target,this._context,L,K,E):this._scopeEvents[S](this.target,L,K,E)}}return this}},{key:"on",value:function(v,b,w){return this._onOff("on",v,b,w)}},{key:"off",value:function(v,b,w){return this._onOff("off",v,b,w)}},{key:"set",value:function(v){var b=this._defaults;for(var w in h.default.object(v)||(v={}),this.options=(0,ti.default)(b.base),this._actions.methodDict){var E=w,S=this._actions.methodDict[E];this.options[E]={},this.setPerAction(E,(0,ot.default)((0,ot.default)({},b.perAction),b.actions[E])),this[S](v[E])}for(var P in v)h.default.func(this[P])&&this[P](v[P]);return this}},{key:"unset",value:function(){if(h.default.string(this.target))for(var v in this._scopeEvents.delegatedEvents)for(var b=this._scopeEvents.delegatedEvents[v],w=b.length-1;w>=0;w--){var E=b[w],S=E.selector,P=E.context,L=E.listeners;S===this.target&&P===this._context&&b.splice(w,1);for(var W=L.length-1;W>=0;W--)this._scopeEvents.removeDelegate(this.target,this._context,v,L[W][0],L[W][1])}else this._scopeEvents.remove(this.target,"all")}}])&&Hl(d.prototype,g),Object.defineProperty(d,"prototype",{writable:!1}),a}();Pn.Interactable=Ul;var En={};function Nl(a,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}function Or(a,d,g){return d in a?Object.defineProperty(a,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[d]=g,a}Object.defineProperty(En,"__esModule",{value:!0}),En.InteractableSet=void 0;var Vl=function(){function a(v){var b=this;(function(w,E){if(!(w instanceof E))throw new TypeError("Cannot call a class as a function")})(this,a),Or(this,"list",[]),Or(this,"selectorMap",{}),Or(this,"scope",void 0),this.scope=v,v.addListeners({"interactable:unset":function(w){var E=w.interactable,S=E.target,P=E._context,L=h.default.string(S)?b.selectorMap[S]:S[b.scope.id],W=Y.findIndex(L,function(K){return K.context===P});L[W]&&(L[W].context=null,L[W].interactable=null),L.splice(W,1)}})}var d,g;return d=a,(g=[{key:"new",value:function(v,b){b=(0,ot.default)(b||{},{actions:this.scope.actions});var w=new this.scope.Interactable(v,b,this.scope.document,this.scope.events),E={context:w._context,interactable:w};return this.scope.addDocument(w._doc),this.list.push(w),h.default.string(v)?(this.selectorMap[v]||(this.selectorMap[v]=[]),this.selectorMap[v].push(E)):(w.target[this.scope.id]||Object.defineProperty(v,this.scope.id,{value:[],configurable:!0}),v[this.scope.id].push(E)),this.scope.fire("interactable:new",{target:v,options:b,interactable:w,win:this.scope._win}),w}},{key:"get",value:function(v,b){var w=b&&b.context||this.scope.document,E=h.default.string(v),S=E?this.selectorMap[v]:v[this.scope.id];if(!S)return null;var P=Y.find(S,function(L){return L.context===w&&(E||L.interactable.inContext(v))});return P&&P.interactable}},{key:"forEachMatch",value:function(v,b){for(var w=0;w<this.list.length;w++){var E=this.list[w],S=void 0;if((h.default.string(E.target)?h.default.element(v)&&X.matchesSelector(v,E.target):v===E.target)&&E.inContext(v)&&(S=b(E)),S!==void 0)return S}}}])&&Nl(d.prototype,g),Object.defineProperty(d,"prototype",{writable:!1}),a}();En.InteractableSet=Vl;var An={};function Gl(a,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}function Pr(a,d,g){return d in a?Object.defineProperty(a,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[d]=g,a}function Er(a,d){return function(g){if(Array.isArray(g))return g}(a)||function(g,v){var b=g==null?null:typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(b!=null){var w,E,S=[],P=!0,L=!1;try{for(b=b.call(g);!(P=(w=b.next()).done)&&(S.push(w.value),!v||S.length!==v);P=!0);}catch(W){L=!0,E=W}finally{try{P||b.return==null||b.return()}finally{if(L)throw E}}return S}}(a,d)||function(g,v){if(g){if(typeof g=="string")return ns(g,v);var b=Object.prototype.toString.call(g).slice(8,-1);return b==="Object"&&g.constructor&&(b=g.constructor.name),b==="Map"||b==="Set"?Array.from(g):b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?ns(g,v):void 0}}(a,d)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ns(a,d){(d==null||d>a.length)&&(d=a.length);for(var g=0,v=Array(d);g<d;g++)v[g]=a[g];return v}Object.defineProperty(An,"__esModule",{value:!0}),An.default=void 0;var Kl=function(){function a(v){(function(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")})(this,a),Pr(this,"currentTarget",void 0),Pr(this,"originalEvent",void 0),Pr(this,"type",void 0),this.originalEvent=v,(0,nt.default)(this,v)}var d,g;return d=a,(g=[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}])&&Gl(d.prototype,g),Object.defineProperty(d,"prototype",{writable:!1}),a}();function Ni(a){if(!h.default.object(a))return{capture:!!a,passive:!1};var d=(0,ot.default)({},a);return d.capture=!!a.capture,d.passive=!!a.passive,d}var ql={id:"events",install:function(a){var d,g=[],v={},b=[],w={add:E,remove:S,addDelegate:function(W,K,rt,ut,tt){var mt=Ni(tt);if(!v[rt]){v[rt]=[];for(var Tt=0;Tt<b.length;Tt++){var yt=b[Tt];E(yt,rt,P),E(yt,rt,L,!0)}}var Et=v[rt],At=Y.find(Et,function(jt){return jt.selector===W&&jt.context===K});At||(At={selector:W,context:K,listeners:[]},Et.push(At)),At.listeners.push([ut,mt])},removeDelegate:function(W,K,rt,ut,tt){var mt,Tt=Ni(tt),yt=v[rt],Et=!1;if(yt)for(mt=yt.length-1;mt>=0;mt--){var At=yt[mt];if(At.selector===W&&At.context===K){for(var jt=At.listeners,Bt=jt.length-1;Bt>=0;Bt--){var Wt=Er(jt[Bt],2),Rt=Wt[0],Yt=Wt[1],ve=Yt.capture,Be=Yt.passive;if(Rt===ut&&ve===Tt.capture&&Be===Tt.passive){jt.splice(Bt,1),jt.length||(yt.splice(mt,1),S(K,rt,P),S(K,rt,L,!0)),Et=!0;break}}if(Et)break}}},delegateListener:P,delegateUseCapture:L,delegatedEvents:v,documents:b,targets:g,supportsOptions:!1,supportsPassive:!1};function E(W,K,rt,ut){var tt=Ni(ut),mt=Y.find(g,function(Tt){return Tt.eventTarget===W});mt||(mt={eventTarget:W,events:{}},g.push(mt)),mt.events[K]||(mt.events[K]=[]),W.addEventListener&&!Y.contains(mt.events[K],rt)&&(W.addEventListener(K,rt,w.supportsOptions?tt:tt.capture),mt.events[K].push(rt))}function S(W,K,rt,ut){var tt=Ni(ut),mt=Y.findIndex(g,function(Bt){return Bt.eventTarget===W}),Tt=g[mt];if(Tt&&Tt.events)if(K!=="all"){var yt=!1,Et=Tt.events[K];if(Et){if(rt==="all"){for(var At=Et.length-1;At>=0;At--)S(W,K,Et[At],tt);return}for(var jt=0;jt<Et.length;jt++)if(Et[jt]===rt){W.removeEventListener(K,rt,w.supportsOptions?tt:tt.capture),Et.splice(jt,1),Et.length===0&&(delete Tt.events[K],yt=!0);break}}yt&&!Object.keys(Tt.events).length&&g.splice(mt,1)}else for(K in Tt.events)Tt.events.hasOwnProperty(K)&&S(W,K,"all")}function P(W,K){for(var rt=Ni(K),ut=new Kl(W),tt=v[W.type],mt=Er(j.getEventTargets(W),1)[0],Tt=mt;h.default.element(Tt);){for(var yt=0;yt<tt.length;yt++){var Et=tt[yt],At=Et.selector,jt=Et.context;if(X.matchesSelector(Tt,At)&&X.nodeContains(jt,mt)&&X.nodeContains(jt,Tt)){var Bt=Et.listeners;ut.currentTarget=Tt;for(var Wt=0;Wt<Bt.length;Wt++){var Rt=Er(Bt[Wt],2),Yt=Rt[0],ve=Rt[1],Be=ve.capture,Gr=ve.passive;Be===rt.capture&&Gr===rt.passive&&Yt(ut)}}}Tt=X.parentNode(Tt)}}function L(W){return P(W,!0)}return(d=a.document)==null||d.createElement("div").addEventListener("test",null,{get capture(){return w.supportsOptions=!0},get passive(){return w.supportsPassive=!0}}),a.events=w,w}};An.default=ql;var Mn={};Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.default=void 0;var kn={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(a){for(var d=0;d<kn.methodOrder.length;d++){var g;g=kn.methodOrder[d];var v=kn[g](a);if(v)return v}return null},simulationResume:function(a){var d=a.pointerType,g=a.eventType,v=a.eventTarget,b=a.scope;if(!/down|start/i.test(g))return null;for(var w=0;w<b.interactions.list.length;w++){var E=b.interactions.list[w],S=v;if(E.simulation&&E.simulation.allowResume&&E.pointerType===d)for(;S;){if(S===E.element)return E;S=X.parentNode(S)}}return null},mouseOrPen:function(a){var d,g=a.pointerId,v=a.pointerType,b=a.eventType,w=a.scope;if(v!=="mouse"&&v!=="pen")return null;for(var E=0;E<w.interactions.list.length;E++){var S=w.interactions.list[E];if(S.pointerType===v){if(S.simulation&&!rs(S,g))continue;if(S.interacting())return S;d||(d=S)}}if(d)return d;for(var P=0;P<w.interactions.list.length;P++){var L=w.interactions.list[P];if(!(L.pointerType!==v||/down/i.test(b)&&L.simulation))return L}return null},hasPointer:function(a){for(var d=a.pointerId,g=a.scope,v=0;v<g.interactions.list.length;v++){var b=g.interactions.list[v];if(rs(b,d))return b}return null},idle:function(a){for(var d=a.pointerType,g=a.scope,v=0;v<g.interactions.list.length;v++){var b=g.interactions.list[v];if(b.pointers.length===1){var w=b.interactable;if(w&&(!w.options.gesture||!w.options.gesture.enabled))continue}else if(b.pointers.length>=2)continue;if(!b.interacting()&&d===b.pointerType)return b}return null}};function rs(a,d){return a.pointers.some(function(g){return g.id===d})}var Jl=kn;Mn.default=Jl;var Dn={};function Ar(a){return Ar=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},Ar(a)}function os(a,d){return function(g){if(Array.isArray(g))return g}(a)||function(g,v){var b=g==null?null:typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(b!=null){var w,E,S=[],P=!0,L=!1;try{for(b=b.call(g);!(P=(w=b.next()).done)&&(S.push(w.value),!v||S.length!==v);P=!0);}catch(W){L=!0,E=W}finally{try{P||b.return==null||b.return()}finally{if(L)throw E}}return S}}(a,d)||function(g,v){if(g){if(typeof g=="string")return ss(g,v);var b=Object.prototype.toString.call(g).slice(8,-1);return b==="Object"&&g.constructor&&(b=g.constructor.name),b==="Map"||b==="Set"?Array.from(g):b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?ss(g,v):void 0}}(a,d)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ss(a,d){(d==null||d>a.length)&&(d=a.length);for(var g=0,v=Array(d);g<d;g++)v[g]=a[g];return v}function Ql(a,d){if(!(a instanceof d))throw new TypeError("Cannot call a class as a function")}function Zl(a,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}function Mr(a,d){return Mr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,v){return g.__proto__=v,g},Mr(a,d)}function $l(a,d){if(d&&(Ar(d)==="object"||typeof d=="function"))return d;if(d!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(a)}function In(a){return In=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)},In(a)}Object.defineProperty(Dn,"__esModule",{value:!0}),Dn.default=void 0;var kr=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function as(a,d){return function(g){var v=d.interactions.list,b=j.getPointerType(g),w=os(j.getEventTargets(g),2),E=w[0],S=w[1],P=[];if(/^touch/.test(g.type)){d.prevTouchTime=d.now();for(var L=0;L<g.changedTouches.length;L++){var W=g.changedTouches[L],K={pointer:W,pointerId:j.getPointerId(W),pointerType:b,eventType:g.type,eventTarget:E,curEventTarget:S,scope:d},rt=ls(K);P.push([K.pointer,K.eventTarget,K.curEventTarget,rt])}}else{var ut=!1;if(!T.default.supportsPointerEvent&&/mouse/.test(g.type)){for(var tt=0;tt<v.length&&!ut;tt++)ut=v[tt].pointerType!=="mouse"&&v[tt].pointerIsDown;ut=ut||d.now()-d.prevTouchTime<500||g.timeStamp===0}if(!ut){var mt={pointer:g,pointerId:j.getPointerId(g),pointerType:b,eventType:g.type,curEventTarget:S,eventTarget:E,scope:d},Tt=ls(mt);P.push([mt.pointer,mt.eventTarget,mt.curEventTarget,Tt])}}for(var yt=0;yt<P.length;yt++){var Et=os(P[yt],4),At=Et[0],jt=Et[1],Bt=Et[2];Et[3][a](At,g,jt,Bt)}}}function ls(a){var d=a.pointerType,g=a.scope,v={interaction:Mn.default.search(a),searchDetails:a};return g.fire("interactions:find",v),v.interaction||g.interactions.new({pointerType:d})}function Dr(a,d){var g=a.doc,v=a.scope,b=a.options,w=v.interactions.docEvents,E=v.events,S=E[d];for(var P in v.browser.isIOS&&!b.events&&(b.events={passive:!1}),E.delegatedEvents)S(g,P,E.delegateListener),S(g,P,E.delegateUseCapture,!0);for(var L=b&&b.events,W=0;W<w.length;W++){var K=w[W];S(g,K.type,K.listener,L)}}var tc={id:"core/interactions",install:function(a){for(var d={},g=0;g<kr.length;g++){var v=kr[g];d[v]=as(v,a)}var b,w=T.default.pEventTypes;function E(){for(var S=0;S<a.interactions.list.length;S++){var P=a.interactions.list[S];if(P.pointerIsDown&&P.pointerType==="touch"&&!P._interacting)for(var L=function(){var K=P.pointers[W];a.documents.some(function(rt){var ut=rt.doc;return(0,X.nodeContains)(ut,K.downTarget)})||P.removePointer(K.pointer,K.event)},W=0;W<P.pointers.length;W++)L()}}(b=p.default.PointerEvent?[{type:w.down,listener:E},{type:w.down,listener:d.pointerDown},{type:w.move,listener:d.pointerMove},{type:w.up,listener:d.pointerUp},{type:w.cancel,listener:d.pointerUp}]:[{type:"mousedown",listener:d.pointerDown},{type:"mousemove",listener:d.pointerMove},{type:"mouseup",listener:d.pointerUp},{type:"touchstart",listener:E},{type:"touchstart",listener:d.pointerDown},{type:"touchmove",listener:d.pointerMove},{type:"touchend",listener:d.pointerUp},{type:"touchcancel",listener:d.pointerUp}]).push({type:"blur",listener:function(S){for(var P=0;P<a.interactions.list.length;P++)a.interactions.list[P].documentBlur(S)}}),a.prevTouchTime=0,a.Interaction=function(S){(function(tt,mt){if(typeof mt!="function"&&mt!==null)throw new TypeError("Super expression must either be null or a function");tt.prototype=Object.create(mt&&mt.prototype,{constructor:{value:tt,writable:!0,configurable:!0}}),Object.defineProperty(tt,"prototype",{writable:!1}),mt&&Mr(tt,mt)})(ut,S);var P,L,W,K,rt=(W=ut,K=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var tt,mt=In(W);if(K){var Tt=In(this).constructor;tt=Reflect.construct(mt,arguments,Tt)}else tt=mt.apply(this,arguments);return $l(this,tt)});function ut(){return Ql(this,ut),rt.apply(this,arguments)}return P=ut,(L=[{key:"pointerMoveTolerance",get:function(){return a.interactions.pointerMoveTolerance},set:function(tt){a.interactions.pointerMoveTolerance=tt}},{key:"_now",value:function(){return a.now()}}])&&Zl(P.prototype,L),Object.defineProperty(P,"prototype",{writable:!1}),ut}(ue.default),a.interactions={list:[],new:function(S){S.scopeFire=function(L,W){return a.fire(L,W)};var P=new a.Interaction(S);return a.interactions.list.push(P),P},listeners:d,docEvents:b,pointerMoveTolerance:1},a.usePlugin($e.default)},listeners:{"scope:add-document":function(a){return Dr(a,"add")},"scope:remove-document":function(a){return Dr(a,"remove")},"interactable:unset":function(a,d){for(var g=a.interactable,v=d.interactions.list.length-1;v>=0;v--){var b=d.interactions.list[v];b.interactable===g&&(b.stop(),d.fire("interactions:destroy",{interaction:b}),b.destroy(),d.interactions.list.length>2&&d.interactions.list.splice(v,1))}}},onDocSignal:Dr,doOnInteractions:as,methodNames:kr},ec=tc;Dn.default=ec;var Vi={};function Ir(a){return Ir=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},Ir(a)}function Gi(){return Gi=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(a,d,g){var v=ic(a,d);if(v){var b=Object.getOwnPropertyDescriptor(v,d);return b.get?b.get.call(arguments.length<3?a:g):b.value}},Gi.apply(this,arguments)}function ic(a,d){for(;!Object.prototype.hasOwnProperty.call(a,d)&&(a=Ue(a))!==null;);return a}function jr(a,d){return jr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,v){return g.__proto__=v,g},jr(a,d)}function nc(a,d){if(d&&(Ir(d)==="object"||typeof d=="function"))return d;if(d!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(a)}function Ue(a){return Ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)},Ue(a)}function cs(a,d){if(!(a instanceof d))throw new TypeError("Cannot call a class as a function")}function us(a,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}function fs(a,d,g){return d&&us(a.prototype,d),g&&us(a,g),Object.defineProperty(a,"prototype",{writable:!1}),a}function ie(a,d,g){return d in a?Object.defineProperty(a,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[d]=g,a}Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.Scope=void 0,Vi.initScope=hs;var rc=function(){function a(){var d=this;cs(this,a),ie(this,"id","__interact_scope_".concat(Math.floor(100*Math.random()))),ie(this,"isInitialized",!1),ie(this,"listenerMaps",[]),ie(this,"browser",T.default),ie(this,"defaults",(0,ti.default)(Bi.defaults)),ie(this,"Eventable",Wi.Eventable),ie(this,"actions",{map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}}),ie(this,"interactStatic",(0,Tr.createInteractStatic)(this)),ie(this,"InteractEvent",zi.InteractEvent),ie(this,"Interactable",void 0),ie(this,"interactables",new En.InteractableSet(this)),ie(this,"_win",void 0),ie(this,"document",void 0),ie(this,"window",void 0),ie(this,"documents",[]),ie(this,"_plugins",{list:[],map:{}}),ie(this,"onWindowUnload",function(v){return d.removeDocument(v.target)});var g=this;this.Interactable=function(v){(function(P,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(L&&L.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),Object.defineProperty(P,"prototype",{writable:!1}),L&&jr(P,L)})(S,v);var b,w,E=(b=S,w=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var P,L=Ue(b);if(w){var W=Ue(this).constructor;P=Reflect.construct(L,arguments,W)}else P=L.apply(this,arguments);return nc(this,P)});function S(){return cs(this,S),E.apply(this,arguments)}return fs(S,[{key:"_defaults",get:function(){return g.defaults}},{key:"set",value:function(P){return Gi(Ue(S.prototype),"set",this).call(this,P),g.fire("interactable:set",{options:P,interactable:this}),this}},{key:"unset",value:function(){Gi(Ue(S.prototype),"unset",this).call(this);var P=g.interactables.list.indexOf(this);P<0||(Gi(Ue(S.prototype),"unset",this).call(this),g.interactables.list.splice(P,1),g.fire("interactable:unset",{interactable:this}))}}]),S}(Pn.Interactable)}return fs(a,[{key:"addListeners",value:function(d,g){this.listenerMaps.push({id:g,map:d})}},{key:"fire",value:function(d,g){for(var v=0;v<this.listenerMaps.length;v++){var b=this.listenerMaps[v].map[d];if(b&&b(g,this,d)===!1)return!1}}},{key:"init",value:function(d){return this.isInitialized?this:hs(this,d)}},{key:"pluginIsInstalled",value:function(d){return this._plugins.map[d.id]||this._plugins.list.indexOf(d)!==-1}},{key:"usePlugin",value:function(d,g){if(!this.isInitialized)return this;if(this.pluginIsInstalled(d))return this;if(d.id&&(this._plugins.map[d.id]=d),this._plugins.list.push(d),d.install&&d.install(this,g),d.listeners&&d.before){for(var v=0,b=this.listenerMaps.length,w=d.before.reduce(function(S,P){return S[P]=!0,S[ds(P)]=!0,S},{});v<b;v++){var E=this.listenerMaps[v].id;if(w[E]||w[ds(E)])break}this.listenerMaps.splice(v,0,{id:d.id,map:d.listeners})}else d.listeners&&this.listenerMaps.push({id:d.id,map:d.listeners});return this}},{key:"addDocument",value:function(d,g){if(this.getDocIndex(d)!==-1)return!1;var v=C.getWindow(d);g=g?(0,ot.default)({},g):{},this.documents.push({doc:d,options:g}),this.events.documents.push(d),d!==this.document&&this.events.add(v,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:d,window:v,scope:this,options:g})}},{key:"removeDocument",value:function(d){var g=this.getDocIndex(d),v=C.getWindow(d),b=this.documents[g].options;this.events.remove(v,"unload",this.onWindowUnload),this.documents.splice(g,1),this.events.documents.splice(g,1),this.fire("scope:remove-document",{doc:d,window:v,scope:this,options:b})}},{key:"getDocIndex",value:function(d){for(var g=0;g<this.documents.length;g++)if(this.documents[g].doc===d)return g;return-1}},{key:"getDocOptions",value:function(d){var g=this.getDocIndex(d);return g===-1?null:this.documents[g].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),a}();function hs(a,d){return a.isInitialized=!0,h.default.window(d)&&C.init(d),p.default.init(d),T.default.init(d),be.default.init(d),a.window=d,a.document=d.document,a.usePlugin(Dn.default),a.usePlugin(An.default),a}function ds(a){return a&&a.replace(/\/.*$/,"")}Vi.Scope=rc;var ne={};Object.defineProperty(ne,"__esModule",{value:!0}),ne.default=void 0;var ps=new Vi.Scope,oc=ps.interactStatic;ne.default=oc;var sc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:void 0;ps.init(sc);var jn={};Object.defineProperty(jn,"__esModule",{value:!0}),jn.default=void 0,jn.default=function(){};var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.default=void 0,Fn.default=function(){};var Rn={};function gs(a,d){return function(g){if(Array.isArray(g))return g}(a)||function(g,v){var b=g==null?null:typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(b!=null){var w,E,S=[],P=!0,L=!1;try{for(b=b.call(g);!(P=(w=b.next()).done)&&(S.push(w.value),!v||S.length!==v);P=!0);}catch(W){L=!0,E=W}finally{try{P||b.return==null||b.return()}finally{if(L)throw E}}return S}}(a,d)||function(g,v){if(g){if(typeof g=="string")return vs(g,v);var b=Object.prototype.toString.call(g).slice(8,-1);return b==="Object"&&g.constructor&&(b=g.constructor.name),b==="Map"||b==="Set"?Array.from(g):b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?vs(g,v):void 0}}(a,d)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function vs(a,d){(d==null||d>a.length)&&(d=a.length);for(var g=0,v=Array(d);g<d;g++)v[g]=a[g];return v}Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.default=void 0,Rn.default=function(a){var d=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(v){var b=gs(v,2),w=b[0],E=b[1];return w in a||E in a}),g=function(v,b){for(var w=a.range,E=a.limits,S=E===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:E,P=a.offset,L=P===void 0?{x:0,y:0}:P,W={range:w,grid:a,x:null,y:null},K=0;K<d.length;K++){var rt=gs(d[K],2),ut=rt[0],tt=rt[1],mt=Math.round((v-L.x)/a[ut]),Tt=Math.round((b-L.y)/a[tt]);W[ut]=Math.max(S.left,Math.min(S.right,mt*a[ut]+L.x)),W[tt]=Math.max(S.top,Math.min(S.bottom,Tt*a[tt]+L.y))}return W};return g.grid=a,g.coordFields=d,g};var Ki={};Object.defineProperty(Ki,"__esModule",{value:!0}),Object.defineProperty(Ki,"edgeTarget",{enumerable:!0,get:function(){return jn.default}}),Object.defineProperty(Ki,"elements",{enumerable:!0,get:function(){return Fn.default}}),Object.defineProperty(Ki,"grid",{enumerable:!0,get:function(){return Rn.default}});var Ln={};Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.default=void 0;var ac={id:"snappers",install:function(a){var d=a.interactStatic;d.snappers=(0,ot.default)(d.snappers||{},Ki),d.createSnapGrid=d.snappers.grid}},lc=ac;Ln.default=lc;var mi={};function ms(a,d){var g=Object.keys(a);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(a);d&&(v=v.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),g.push.apply(g,v)}return g}function Fr(a){for(var d=1;d<arguments.length;d++){var g=arguments[d]!=null?arguments[d]:{};d%2?ms(Object(g),!0).forEach(function(v){cc(a,v,g[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(g)):ms(Object(g)).forEach(function(v){Object.defineProperty(a,v,Object.getOwnPropertyDescriptor(g,v))})}return a}function cc(a,d,g){return d in a?Object.defineProperty(a,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[d]=g,a}Object.defineProperty(mi,"__esModule",{value:!0}),mi.default=mi.aspectRatio=void 0;var ys={start:function(a){var d=a.state,g=a.rect,v=a.edges,b=a.pageCoords,w=d.options.ratio,E=d.options,S=E.equalDelta,P=E.modifiers;w==="preserve"&&(w=g.width/g.height),d.startCoords=(0,ot.default)({},b),d.startRect=(0,ot.default)({},g),d.ratio=w,d.equalDelta=S;var L=d.linkedEdges={top:v.top||v.left&&!v.bottom,left:v.left||v.top&&!v.right,bottom:v.bottom||v.right&&!v.top,right:v.right||v.bottom&&!v.left};if(d.xIsPrimaryAxis=!(!v.left&&!v.right),d.equalDelta){var W=(L.left?1:-1)*(L.top?1:-1);d.edgeSign={x:W,y:W}}else d.edgeSign={x:L.left?-1:1,y:L.top?-1:1};if((0,ot.default)(a.edges,L),P&&P.length){var K=new ei.default(a.interaction);K.copyFrom(a.interaction.modification),K.prepareStates(P),d.subModification=K,K.startAll(Fr({},a))}},set:function(a){var d=a.state,g=a.rect,v=a.coords,b=(0,ot.default)({},v),w=d.equalDelta?uc:fc;if(w(d,d.xIsPrimaryAxis,v,g),!d.subModification)return null;var E=(0,ot.default)({},g);(0,pt.addEdges)(d.linkedEdges,E,{x:v.x-b.x,y:v.y-b.y});var S=d.subModification.setAll(Fr(Fr({},a),{},{rect:E,edges:d.linkedEdges,pageCoords:v,prevCoords:v,prevRect:E})),P=S.delta;return S.changed&&(w(d,Math.abs(P.x)>Math.abs(P.y),S.coords,S.rect),(0,ot.default)(v,S.coords)),S.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function uc(a,d,g){var v=a.startCoords,b=a.edgeSign;d?g.y=v.y+(g.x-v.x)*b.y:g.x=v.x+(g.y-v.y)*b.x}function fc(a,d,g,v){var b=a.startRect,w=a.startCoords,E=a.ratio,S=a.edgeSign;if(d){var P=v.width/E;g.y=w.y+(P-b.height)*S.y}else{var L=v.height*E;g.x=w.x+(L-b.width)*S.x}}mi.aspectRatio=ys;var hc=(0,ee.makeModifier)(ys,"aspectRatio");mi.default=hc;var ri={};Object.defineProperty(ri,"__esModule",{value:!0}),ri.default=void 0;var bs=function(){};bs._defaults={};var dc=bs;ri.default=dc;var Rr={};Object.defineProperty(Rr,"__esModule",{value:!0}),Object.defineProperty(Rr,"default",{enumerable:!0,get:function(){return ri.default}});var le={};function Lr(a,d,g){return h.default.func(a)?pt.resolveRectLike(a,d.interactable,d.element,[g.x,g.y,d]):pt.resolveRectLike(a,d.interactable,d.element)}Object.defineProperty(le,"__esModule",{value:!0}),le.default=void 0,le.getRestrictionRect=Lr,le.restrict=void 0;var _s={start:function(a){var d=a.rect,g=a.startOffset,v=a.state,b=a.interaction,w=a.pageCoords,E=v.options,S=E.elementRect,P=(0,ot.default)({left:0,top:0,right:0,bottom:0},E.offset||{});if(d&&S){var L=Lr(E.restriction,b,w);if(L){var W=L.right-L.left-d.width,K=L.bottom-L.top-d.height;W<0&&(P.left+=W,P.right+=W),K<0&&(P.top+=K,P.bottom+=K)}P.left+=g.left-d.width*S.left,P.top+=g.top-d.height*S.top,P.right+=g.right-d.width*(1-S.right),P.bottom+=g.bottom-d.height*(1-S.bottom)}v.offset=P},set:function(a){var d=a.coords,g=a.interaction,v=a.state,b=v.options,w=v.offset,E=Lr(b.restriction,g,d);if(E){var S=pt.xywhToTlbr(E);d.x=Math.max(Math.min(S.right-w.right,d.x),S.left+w.left),d.y=Math.max(Math.min(S.bottom-w.bottom,d.y),S.top+w.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}};le.restrict=_s;var pc=(0,ee.makeModifier)(_s,"restrict");le.default=pc;var Pe={};Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.restrictEdges=Pe.default=void 0;var xs={top:1/0,left:1/0,bottom:-1/0,right:-1/0},Cs={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function ws(a,d){for(var g=["top","left","bottom","right"],v=0;v<g.length;v++){var b=g[v];b in a||(a[b]=d[b])}return a}var Ss={noInner:xs,noOuter:Cs,start:function(a){var d,g=a.interaction,v=a.startOffset,b=a.state,w=b.options;if(w){var E=(0,le.getRestrictionRect)(w.offset,g,g.coords.start.page);d=pt.rectToXY(E)}d=d||{x:0,y:0},b.offset={top:d.y+v.top,left:d.x+v.left,bottom:d.y-v.bottom,right:d.x-v.right}},set:function(a){var d=a.coords,g=a.edges,v=a.interaction,b=a.state,w=b.offset,E=b.options;if(g){var S=(0,ot.default)({},d),P=(0,le.getRestrictionRect)(E.inner,v,S)||{},L=(0,le.getRestrictionRect)(E.outer,v,S)||{};ws(P,xs),ws(L,Cs),g.top?d.y=Math.min(Math.max(L.top+w.top,S.y),P.top+w.top):g.bottom&&(d.y=Math.max(Math.min(L.bottom+w.bottom,S.y),P.bottom+w.bottom)),g.left?d.x=Math.min(Math.max(L.left+w.left,S.x),P.left+w.left):g.right&&(d.x=Math.max(Math.min(L.right+w.right,S.x),P.right+w.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}};Pe.restrictEdges=Ss;var gc=(0,ee.makeModifier)(Ss,"restrictEdges");Pe.default=gc;var yi={};Object.defineProperty(yi,"__esModule",{value:!0}),yi.restrictRect=yi.default=void 0;var vc=(0,ot.default)({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(a){}},le.restrict.defaults),Ts={start:le.restrict.start,set:le.restrict.set,defaults:vc};yi.restrictRect=Ts;var mc=(0,ee.makeModifier)(Ts,"restrictRect");yi.default=mc;var bi={};Object.defineProperty(bi,"__esModule",{value:!0}),bi.restrictSize=bi.default=void 0;var yc={width:-1/0,height:-1/0},bc={width:1/0,height:1/0},Os={start:function(a){return Pe.restrictEdges.start(a)},set:function(a){var d=a.interaction,g=a.state,v=a.rect,b=a.edges,w=g.options;if(b){var E=pt.tlbrToXywh((0,le.getRestrictionRect)(w.min,d,a.coords))||yc,S=pt.tlbrToXywh((0,le.getRestrictionRect)(w.max,d,a.coords))||bc;g.options={endOnly:w.endOnly,inner:(0,ot.default)({},Pe.restrictEdges.noInner),outer:(0,ot.default)({},Pe.restrictEdges.noOuter)},b.top?(g.options.inner.top=v.bottom-E.height,g.options.outer.top=v.bottom-S.height):b.bottom&&(g.options.inner.bottom=v.top+E.height,g.options.outer.bottom=v.top+S.height),b.left?(g.options.inner.left=v.right-E.width,g.options.outer.left=v.right-S.width):b.right&&(g.options.inner.right=v.left+E.width,g.options.outer.right=v.left+S.width),Pe.restrictEdges.set(a),g.options=w}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}};bi.restrictSize=Os;var _c=(0,ee.makeModifier)(Os,"restrictSize");bi.default=_c;var Br={};Object.defineProperty(Br,"__esModule",{value:!0}),Object.defineProperty(Br,"default",{enumerable:!0,get:function(){return ri.default}});var Ne={};Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.snap=Ne.default=void 0;var Ps={start:function(a){var d,g=a.interaction,v=a.interactable,b=a.element,w=a.rect,E=a.state,S=a.startOffset,P=E.options,L=P.offsetWithOrigin?function(rt){var ut=rt.interaction.element;return(0,pt.rectToXY)((0,pt.resolveRectLike)(rt.state.options.origin,null,null,[ut]))||(0,k.default)(rt.interactable,ut,rt.interaction.prepared.name)}(a):{x:0,y:0};if(P.offset==="startCoords")d={x:g.coords.start.page.x,y:g.coords.start.page.y};else{var W=(0,pt.resolveRectLike)(P.offset,v,b,[g]);(d=(0,pt.rectToXY)(W)||{x:0,y:0}).x+=L.x,d.y+=L.y}var K=P.relativePoints;E.offsets=w&&K&&K.length?K.map(function(rt,ut){return{index:ut,relativePoint:rt,x:S.left-w.width*rt.x+d.x,y:S.top-w.height*rt.y+d.y}}):[{index:0,relativePoint:null,x:d.x,y:d.y}]},set:function(a){var d=a.interaction,g=a.coords,v=a.state,b=v.options,w=v.offsets,E=(0,k.default)(d.interactable,d.element,d.prepared.name),S=(0,ot.default)({},g),P=[];b.offsetWithOrigin||(S.x-=E.x,S.y-=E.y);for(var L=0;L<w.length;L++)for(var W=w[L],K=S.x-W.x,rt=S.y-W.y,ut=0,tt=b.targets.length;ut<tt;ut++){var mt,Tt=b.targets[ut];(mt=h.default.func(Tt)?Tt(K,rt,d._proxy,W,ut):Tt)&&P.push({x:(h.default.number(mt.x)?mt.x:K)+W.x,y:(h.default.number(mt.y)?mt.y:rt)+W.y,range:h.default.number(mt.range)?mt.range:b.range,source:Tt,index:ut,offset:W})}for(var yt={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},Et=0;Et<P.length;Et++){var At=P[Et],jt=At.range,Bt=At.x-S.x,Wt=At.y-S.y,Rt=(0,H.default)(Bt,Wt),Yt=Rt<=jt;jt===1/0&&yt.inRange&&yt.range!==1/0&&(Yt=!1),yt.target&&!(Yt?yt.inRange&&jt!==1/0?Rt/jt<yt.distance/yt.range:jt===1/0&&yt.range!==1/0||Rt<yt.distance:!yt.inRange&&Rt<yt.distance)||(yt.target=At,yt.distance=Rt,yt.range=jt,yt.inRange=Yt,yt.delta.x=Bt,yt.delta.y=Wt)}return yt.inRange&&(g.x=yt.target.x,g.y=yt.target.y),v.closest=yt,yt},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}};Ne.snap=Ps;var xc=(0,ee.makeModifier)(Ps,"snap");Ne.default=xc;var Le={};function Es(a,d){(d==null||d>a.length)&&(d=a.length);for(var g=0,v=Array(d);g<d;g++)v[g]=a[g];return v}Object.defineProperty(Le,"__esModule",{value:!0}),Le.snapSize=Le.default=void 0;var As={start:function(a){var d=a.state,g=a.edges,v=d.options;if(!g)return null;a.state={options:{targets:null,relativePoints:[{x:g.left?0:1,y:g.top?0:1}],offset:v.offset||"self",origin:{x:0,y:0},range:v.range}},d.targetFields=d.targetFields||[["width","height"],["x","y"]],Ne.snap.start(a),d.offsets=a.state.offsets,a.state=d},set:function(a){var d,g,v=a.interaction,b=a.state,w=a.coords,E=b.options,S=b.offsets,P={x:w.x-S[0].x,y:w.y-S[0].y};b.options=(0,ot.default)({},E),b.options.targets=[];for(var L=0;L<(E.targets||[]).length;L++){var W=(E.targets||[])[L],K=void 0;if(K=h.default.func(W)?W(P.x,P.y,v):W){for(var rt=0;rt<b.targetFields.length;rt++){var ut=(d=b.targetFields[rt],g=2,function(yt){if(Array.isArray(yt))return yt}(d)||function(yt,Et){var At=yt==null?null:typeof Symbol<"u"&&yt[Symbol.iterator]||yt["@@iterator"];if(At!=null){var jt,Bt,Wt=[],Rt=!0,Yt=!1;try{for(At=At.call(yt);!(Rt=(jt=At.next()).done)&&(Wt.push(jt.value),!Et||Wt.length!==Et);Rt=!0);}catch(ve){Yt=!0,Bt=ve}finally{try{Rt||At.return==null||At.return()}finally{if(Yt)throw Bt}}return Wt}}(d,g)||function(yt,Et){if(yt){if(typeof yt=="string")return Es(yt,Et);var At=Object.prototype.toString.call(yt).slice(8,-1);return At==="Object"&&yt.constructor&&(At=yt.constructor.name),At==="Map"||At==="Set"?Array.from(yt):At==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(At)?Es(yt,Et):void 0}}(d,g)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()),tt=ut[0],mt=ut[1];if(tt in K||mt in K){K.x=K[tt],K.y=K[mt];break}}b.options.targets.push(K)}}var Tt=Ne.snap.set(a);return b.options=E,Tt},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}};Le.snapSize=As;var Cc=(0,ee.makeModifier)(As,"snapSize");Le.default=Cc;var _i={};Object.defineProperty(_i,"__esModule",{value:!0}),_i.snapEdges=_i.default=void 0;var Ms={start:function(a){var d=a.edges;return d?(a.state.targetFields=a.state.targetFields||[[d.left?"left":"right",d.top?"top":"bottom"]],Le.snapSize.start(a)):null},set:Le.snapSize.set,defaults:(0,ot.default)((0,ti.default)(Le.snapSize.defaults),{targets:null,range:null,offset:{x:0,y:0}})};_i.snapEdges=Ms;var wc=(0,ee.makeModifier)(Ms,"snapEdges");_i.default=wc;var zr={};Object.defineProperty(zr,"__esModule",{value:!0}),Object.defineProperty(zr,"default",{enumerable:!0,get:function(){return ri.default}});var Xr={};Object.defineProperty(Xr,"__esModule",{value:!0}),Object.defineProperty(Xr,"default",{enumerable:!0,get:function(){return ri.default}});var xi={};Object.defineProperty(xi,"__esModule",{value:!0}),xi.default=void 0;var Sc={aspectRatio:mi.default,restrictEdges:Pe.default,restrict:le.default,restrictRect:yi.default,restrictSize:bi.default,snapEdges:_i.default,snap:Ne.default,snapSize:Le.default,spring:zr.default,avoid:Rr.default,transform:Xr.default,rubberband:Br.default};xi.default=Sc;var qi={};Object.defineProperty(qi,"__esModule",{value:!0}),qi.default=void 0;var Tc={id:"modifiers",install:function(a){var d=a.interactStatic;for(var g in a.usePlugin(ee.default),a.usePlugin(Ln.default),d.modifiers=xi.default,xi.default){var v=xi.default[g],b=v._defaults,w=v._methods;b._methods=w,a.defaults.perAction[g]=b}}},Oc=Tc;qi.default=Oc;var oi={};function Yr(a){return Yr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},Yr(a)}function Pc(a,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}function Wr(a,d){return Wr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,v){return g.__proto__=v,g},Wr(a,d)}function Ec(a,d){if(d&&(Yr(d)==="object"||typeof d=="function"))return d;if(d!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hr(a)}function Hr(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Bn(a){return Bn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)},Bn(a)}Object.defineProperty(oi,"__esModule",{value:!0}),oi.default=oi.PointerEvent=void 0;var Ac=function(a){(function(S,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(P&&P.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),Object.defineProperty(S,"prototype",{writable:!1}),P&&Wr(S,P)})(E,a);var d,g,v,b,w=(v=E,b=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var S,P=Bn(v);if(b){var L=Bn(this).constructor;S=Reflect.construct(P,arguments,L)}else S=P.apply(this,arguments);return Ec(this,S)});function E(S,P,L,W,K,rt){var ut;if(function(Tt,yt){if(!(Tt instanceof yt))throw new TypeError("Cannot call a class as a function")}(this,E),ut=w.call(this,K),j.pointerExtend(Hr(ut),L),L!==P&&j.pointerExtend(Hr(ut),P),ut.timeStamp=rt,ut.originalEvent=L,ut.type=S,ut.pointerId=j.getPointerId(P),ut.pointerType=j.getPointerType(P),ut.target=W,ut.currentTarget=null,S==="tap"){var tt=K.getPointerIndex(P);ut.dt=ut.timeStamp-K.pointers[tt].downTime;var mt=ut.timeStamp-K.tapTime;ut.double=!!K.prevTap&&K.prevTap.type!=="doubletap"&&K.prevTap.target===ut.target&&mt<500}else S==="doubletap"&&(ut.dt=P.timeStamp-K.tapTime,ut.double=!0);return ut}return d=E,(g=[{key:"_subtractOrigin",value:function(S){var P=S.x,L=S.y;return this.pageX-=P,this.pageY-=L,this.clientX-=P,this.clientY-=L,this}},{key:"_addOrigin",value:function(S){var P=S.x,L=S.y;return this.pageX+=P,this.pageY+=L,this.clientX+=P,this.clientY+=L,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}])&&Pc(d.prototype,g),Object.defineProperty(d,"prototype",{writable:!1}),E}(dt.BaseEvent);oi.PointerEvent=oi.default=Ac;var Ji={};Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.default=void 0;var zn={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(a){a.pointerEvents=zn,a.defaults.actions.pointerEvents=zn.defaults,(0,ot.default)(a.actions.phaselessTypes,zn.types)},listeners:{"interactions:new":function(a){var d=a.interaction;d.prevTap=null,d.tapTime=0},"interactions:update-pointer":function(a){var d=a.down,g=a.pointerInfo;!d&&g.hold||(g.hold={duration:1/0,timeout:null})},"interactions:move":function(a,d){var g=a.interaction,v=a.pointer,b=a.event,w=a.eventTarget;a.duplicate||g.pointerIsDown&&!g.pointerWasMoved||(g.pointerIsDown&&Ur(a),Ve({interaction:g,pointer:v,event:b,eventTarget:w,type:"move"},d))},"interactions:down":function(a,d){(function(g,v){for(var b=g.interaction,w=g.pointer,E=g.event,S=g.eventTarget,P=g.pointerIndex,L=b.pointers[P].hold,W=X.getPath(S),K={interaction:b,pointer:w,event:E,eventTarget:S,type:"hold",targets:[],path:W,node:null},rt=0;rt<W.length;rt++){var ut=W[rt];K.node=ut,v.fire("pointerEvents:collect-targets",K)}if(K.targets.length){for(var tt=1/0,mt=0;mt<K.targets.length;mt++){var Tt=K.targets[mt].eventable.options.holdDuration;Tt<tt&&(tt=Tt)}L.duration=tt,L.timeout=setTimeout(function(){Ve({interaction:b,eventTarget:S,pointer:w,event:E,type:"hold"},v)},tt)}})(a,d),Ve(a,d)},"interactions:up":function(a,d){Ur(a),Ve(a,d),function(g,v){var b=g.interaction,w=g.pointer,E=g.event,S=g.eventTarget;b.pointerWasMoved||Ve({interaction:b,eventTarget:S,pointer:w,event:E,type:"tap"},v)}(a,d)},"interactions:cancel":function(a,d){Ur(a),Ve(a,d)}},PointerEvent:oi.PointerEvent,fire:Ve,collectEventTargets:ks,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function Ve(a,d){var g=a.interaction,v=a.pointer,b=a.event,w=a.eventTarget,E=a.type,S=a.targets,P=S===void 0?ks(a,d):S,L=new oi.PointerEvent(E,v,b,w,g,d.now());d.fire("pointerEvents:new",{pointerEvent:L});for(var W={interaction:g,pointer:v,event:b,eventTarget:w,targets:P,type:E,pointerEvent:L},K=0;K<P.length;K++){var rt=P[K];for(var ut in rt.props||{})L[ut]=rt.props[ut];var tt=(0,k.default)(rt.eventable,rt.node);if(L._subtractOrigin(tt),L.eventable=rt.eventable,L.currentTarget=rt.node,rt.eventable.fire(L),L._addOrigin(tt),L.immediatePropagationStopped||L.propagationStopped&&K+1<P.length&&P[K+1].node!==L.currentTarget)break}if(d.fire("pointerEvents:fired",W),E==="tap"){var mt=L.double?Ve({interaction:g,pointer:v,event:b,eventTarget:w,type:"doubletap"},d):L;g.prevTap=mt,g.tapTime=mt.timeStamp}return L}function ks(a,d){var g=a.interaction,v=a.pointer,b=a.event,w=a.eventTarget,E=a.type,S=g.getPointerIndex(v),P=g.pointers[S];if(E==="tap"&&(g.pointerWasMoved||!P||P.downTarget!==w))return[];for(var L=X.getPath(w),W={interaction:g,pointer:v,event:b,eventTarget:w,type:E,path:L,targets:[],node:null},K=0;K<L.length;K++){var rt=L[K];W.node=rt,d.fire("pointerEvents:collect-targets",W)}return E==="hold"&&(W.targets=W.targets.filter(function(ut){var tt;return ut.eventable.options.holdDuration===((tt=g.pointers[S])==null?void 0:tt.hold.duration)})),W.targets}function Ur(a){var d=a.interaction,g=a.pointerIndex,v=d.pointers[g].hold;v&&v.timeout&&(clearTimeout(v.timeout),v.timeout=null)}var Mc=zn;Ji.default=Mc;var Xn={};function kc(a){var d=a.interaction;d.holdIntervalHandle&&(clearInterval(d.holdIntervalHandle),d.holdIntervalHandle=null)}Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.default=void 0;var Dc={id:"pointer-events/holdRepeat",install:function(a){a.usePlugin(Ji.default);var d=a.pointerEvents;d.defaults.holdRepeatInterval=0,d.types.holdrepeat=a.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(a,d){return a["pointerEvents:".concat(d)]=kc,a},{"pointerEvents:new":function(a){var d=a.pointerEvent;d.type==="hold"&&(d.count=(d.count||0)+1)},"pointerEvents:fired":function(a,d){var g=a.interaction,v=a.pointerEvent,b=a.eventTarget,w=a.targets;if(v.type==="hold"&&w.length){var E=w[0].eventable.options.holdRepeatInterval;E<=0||(g.holdIntervalHandle=setTimeout(function(){d.pointerEvents.fire({interaction:g,eventTarget:b,type:"hold",pointer:v,event:v},d)},E))}}})},Ic=Dc;Xn.default=Ic;var Yn={};function jc(a){return(0,ot.default)(this.events.options,a),this}Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.default=void 0;var Fc={id:"pointer-events/interactableTargets",install:function(a){var d=a.Interactable;d.prototype.pointerEvents=jc;var g=d.prototype._backCompatOption;d.prototype._backCompatOption=function(v,b){var w=g.call(this,v,b);return w===this&&(this.events.options[v]=b),w}},listeners:{"pointerEvents:collect-targets":function(a,d){var g=a.targets,v=a.node,b=a.type,w=a.eventTarget;d.interactables.forEachMatch(v,function(E){var S=E.events,P=S.options;S.types[b]&&S.types[b].length&&E.testIgnoreAllow(P,v,w)&&g.push({node:v,eventable:S,props:{interactable:E}})})},"interactable:new":function(a){var d=a.interactable;d.events.getRect=function(g){return d.getRect(g)}},"interactable:set":function(a,d){var g=a.interactable,v=a.options;(0,ot.default)(g.events.options,d.pointerEvents.defaults),(0,ot.default)(g.events.options,v.pointerEvents||{})}}},Rc=Fc;Yn.default=Rc;var Qi={};Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.default=void 0;var Lc={id:"pointer-events",install:function(a){a.usePlugin(Ji),a.usePlugin(Xn.default),a.usePlugin(Yn.default)}},Bc=Lc;Qi.default=Bc;var Ci={};function Ds(a){var d=a.Interactable;a.actions.phases.reflow=!0,d.prototype.reflow=function(g){return function(v,b,w){for(var E=h.default.string(v.target)?Y.from(v._context.querySelectorAll(v.target)):[v.target],S=w.window.Promise,P=S?[]:null,L=function(){var K=E[W],rt=v.getRect(K);if(!rt)return"break";var ut=Y.find(w.interactions.list,function(Et){return Et.interacting()&&Et.interactable===v&&Et.element===K&&Et.prepared.name===b.name}),tt=void 0;if(ut)ut.move(),P&&(tt=ut._reflowPromise||new S(function(Et){ut._reflowResolve=Et}));else{var mt=(0,pt.tlbrToXywh)(rt),Tt={page:{x:mt.x,y:mt.y},client:{x:mt.x,y:mt.y},timeStamp:w.now()},yt=j.coordsToEvent(Tt);tt=function(Et,At,jt,Bt,Wt){var Rt=Et.interactions.new({pointerType:"reflow"}),Yt={interaction:Rt,event:Wt,pointer:Wt,eventTarget:jt,phase:"reflow"};Rt.interactable=At,Rt.element=jt,Rt.prevEvent=Wt,Rt.updatePointer(Wt,Wt,jt,!0),j.setZeroCoords(Rt.coords.delta),(0,de.copyAction)(Rt.prepared,Bt),Rt._doPhase(Yt);var ve=Et.window.Promise,Be=ve?new ve(function(Gr){Rt._reflowResolve=Gr}):void 0;return Rt._reflowPromise=Be,Rt.start(Bt,At,jt),Rt._interacting?(Rt.move(Yt),Rt.end(Wt)):(Rt.stop(),Rt._reflowResolve()),Rt.removePointer(Wt,Wt),Be}(w,v,K,b,yt)}P&&P.push(tt)},W=0;W<E.length&&L()!=="break";W++);return P&&S.all(P).then(function(){return v})}(this,g,a)}}Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.default=void 0,Ci.install=Ds;var zc={id:"reflow",install:Ds,listeners:{"interactions:stop":function(a,d){var g=a.interaction;g.pointerType==="reflow"&&(g._reflowResolve&&g._reflowResolve(),Y.remove(d.interactions.list,g))}}},Xc=zc;Ci.default=Xc;var ge={exports:{}};function Nr(a){return Nr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},Nr(a)}Object.defineProperty(ge.exports,"__esModule",{value:!0}),ge.exports.default=void 0,ne.default.use($e.default),ne.default.use(He.default),ne.default.use(Qi.default),ne.default.use(ni.default),ne.default.use(qi.default),ne.default.use(Ri.default),ne.default.use(ji.default),ne.default.use(Fe.default),ne.default.use(Ci.default);var Yc=ne.default;if(ge.exports.default=Yc,Nr(ge)==="object"&&ge)try{ge.exports=ne.default}catch{}ne.default.default=ne.default,ji.default,Fe.default,Ri.default,$e.default,_n.default,ni.default,ne.default,qi.default,He.default,Qi.default,Ci.default,ge=ge.exports;var si={exports:{}};function Vr(a){return Vr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},Vr(a)}Object.defineProperty(si.exports,"__esModule",{value:!0}),si.exports.default=void 0;var Wc=ge.default;if(si.exports.default=Wc,Vr(si)==="object"&&si)try{si.exports=ge.default}catch{}return ge.default.default=ge.default,si.exports})})(il);var Dh=il.exports;const Ih=xh(Dh);function la(u,o){var x=o.x*u.a+o.y*u.c+0,C=o.x*u.b+o.y*u.d+0;return{x,y:C}}function jh(u){var o=la(u,{x:0,y:1}),x=la(u,{x:1,y:0}),C=180/Math.PI*Math.atan2(o.y,o.x)-90,O=180/Math.PI*Math.atan2(x.y,x.x);return{translateX:u.e,translateY:u.f,scaleX:Math.sqrt(u.a*u.a+u.b*u.b),scaleY:Math.sqrt(u.c*u.c+u.d*u.d),skewX:C,skewY:O,rotation:C}}const Fh={class:"photo-editor__toolbar"},Rh=["src"],Lh=["src"],Bh=Mo({__name:"PhotoEditor",props:{template:{},uploadedPhotoUrl:{}},setup(u,{expose:o}){const x=u,C=pe(),O=pe(),A=pe({}),z=pe(!1),h=pe(!0);o({photoEditorElem:C,uploadedImgElem:O,getUploadedImgCoords:e});function r(f=!0){O.value&&(O.value.style.width=`${f?O.value.clientWidth+5:O.value.clientWidth-5}px`)}function l(f=!0){if(!O.value)return;const i=new DOMMatrix(O.value.style.transform);i.rotateSelf(f?-1:1),O.value.style.transform=i.toString()}function c(){if(!O.value)return;z.value=!z.value;const f=new DOMMatrix(O.value.style.transform).flipX();O.value.style.transform=f.toString()}function e(){var i;const f=new DOMMatrix((i=O.value)==null?void 0:i.style.transform);return{x:f.e,y:f.f,rotateAngle:jh(f).rotation,flip:z.value}}const n={zoomIn(){r(!0)},zoomOut(){r(!1)},rotateLeft(){l(!0)},rotateRight(){l(!1)}};function t(f){n[f](),A.value[f]=setInterval(()=>{n[f]()},f.includes("zoom")?30:50)}function s(f){clearInterval(f)}return qn(O,()=>{O.value.style.width=`${C.value.clientWidth}px`,Ih(C.value).draggable({listeners:{move(f){const i=O.value,p=new DOMMatrix(i.style.transform);p.e+=f.dx,p.f+=f.dy,i.style.transform=p.toString()}}})}),(f,i)=>(me(),Ae("div",{class:"photo-editor",ref_key:"photoEditorElem",ref:C},[La(Vt("div",Fh,[Vt("img",{class:"photo-editor__toolbar-item",src:Oh,alt:"Zoom in",onMousedown:i[0]||(i[0]=p=>t("zoomIn")),onMouseleave:i[1]||(i[1]=p=>s(A.value.zoomIn)),onMouseup:i[2]||(i[2]=p=>s(A.value.zoomIn)),onTouchstart:i[3]||(i[3]=nn(p=>t("zoomIn"),["prevent"])),onTouchend:i[4]||(i[4]=p=>s(A.value.zoomIn))},null,32),Vt("img",{class:"photo-editor__toolbar-item",src:Ph,alt:"Zoom out",onMousedown:i[5]||(i[5]=p=>t("zoomOut")),onMouseleave:i[6]||(i[6]=p=>s(A.value.zoomOut)),onMouseup:i[7]||(i[7]=p=>s(A.value.zoomOut)),onTouchstart:i[8]||(i[8]=nn(p=>t("zoomOut"),["prevent"])),onTouchend:i[9]||(i[9]=p=>s(A.value.zoomOut))},null,32),Vt("img",{class:"photo-editor__toolbar-item",src:Eh,alt:"Rotate left",onMousedown:i[10]||(i[10]=p=>t("rotateLeft")),onMouseleave:i[11]||(i[11]=p=>s(A.value.rotateLeft)),onMouseup:i[12]||(i[12]=p=>s(A.value.rotateLeft)),onTouchstart:i[13]||(i[13]=nn(p=>t("rotateLeft"),["prevent"])),onTouchend:i[14]||(i[14]=p=>s(A.value.rotateLeft))},null,32),Vt("img",{class:"photo-editor__toolbar-item",src:Ah,alt:"Rotate right",onMousedown:i[15]||(i[15]=p=>t("rotateRight")),onMouseleave:i[16]||(i[16]=p=>s(A.value.rotateRight)),onMouseup:i[17]||(i[17]=p=>s(A.value.rotateRight)),onTouchstart:i[18]||(i[18]=nn(p=>t("rotateRight"),["prevent"])),onTouchend:i[19]||(i[19]=p=>s(A.value.rotateRight))},null,32),Vt("img",{class:"photo-editor__toolbar-item",src:Mh,alt:"Flip",onClick:c}),Vt("img",{class:"photo-editor__toolbar-item",src:kh,alt:"Eye",onClick:i[20]||(i[20]=p=>h.value=!h.value)})],512),[[el,f.uploadedPhotoUrl]]),Vt("img",{alt:"Шаблон с лицом для вставки",class:"photo-editor__template",src:x.template.url,style:ar({opacity:h.value?.6:1})},null,12,Rh),f.uploadedPhotoUrl?(me(),Ae("img",{key:0,ref_key:"uploadedImgElem",ref:O,alt:"Загруженное фото",class:"photo-editor__uploaded",src:f.uploadedPhotoUrl},null,8,Lh)):Za("",!0)],512))}});const Ro=(u,o)=>{const x=u.__vccOpts||u;for(const[C,O]of o)x[C]=O;return x},zh=Ro(Bh,[["__scopeId","data-v-2cb4a0e9"]]),Xh={class:"editor"},Yh={class:"editor__toolbar"},Wh=["disabled"],Hh=!1,Uh=Mo({__name:"AppEditor",props:{template:{}},emits:["save","exit"],setup(u,{emit:o}){const x=u,C=pe(),O=pe(),A=pe(),z=pe(),h=Fo(()=>A.value&&URL.createObjectURL(A.value));function r(e){const n=e.target;n.files&&n.files[0]&&(A.value=n.files[0])}function l(){C.value&&C.value.click()}function c(){var f,i;if(!O.value||!((f=z.value)!=null&&f.photoEditorElem)||!((i=z.value)!=null&&i.uploadedImgElem))return;const e=z.value.getUploadedImgCoords(),n=new an.fabric.StaticCanvas(O.value,{width:1333,height:2e3}),t={uploadedImage:!1,templateImage:!1},s=1333/z.value.photoEditorElem.clientWidth;an.fabric.Image.fromURL(h.value,p=>{p.scaleToWidth(z.value.uploadedImgElem.clientWidth*s),p.set({left:e.x*s,top:e.y*s}),p.flipX=e.flip,p.rotate(e.rotateAngle),n.add(p),t.uploadedImage=!0}),an.fabric.Image.fromURL(x.template.url,p=>{p.scaleToHeight(n.getHeight()),n.add(p),t.templateImage=!0}),n.on("after:render",()=>{t.uploadedImage&&t.templateImage&&o("save",n.toJSON())})}return(e,n)=>(me(),Ae("div",Xh,[La(Vt("canvas",{ref_key:"canvasElem",ref:O,class:"editor__canvas"},null,512),[[el,Hh]]),De(zh,{ref_key:"photoEditor",ref:z,template:x.template,"uploaded-photo-url":h.value},null,8,["template","uploaded-photo-url"]),Vt("div",Yh,[Vt("input",{ref_key:"fileInputElem",ref:C,type:"file",accept:"image/png, image/jpeg",hidden:"",onChange:r},null,544),Vt("button",{class:"editor__btn btn",onClick:l},"Выбрать фото"),Vt("button",{class:"editor__btn btn",onClick:c,disabled:!A.value},"Создать",8,Wh),Vt("button",{class:"editor__btn btn",onClick:n[0]||(n[0]=t=>o("exit"))},"Сменить шаблон")])]))}});const Nh=Ro(Uh,[["__scopeId","data-v-cf083386"]]),Vh=u=>(Vu("data-v-d7def800"),u=u(),Gu(),u),Gh={class:"container"},Kh={key:0,class:"page__title"},qh={key:2,class:"templates"},Jh=["onClick"],Qh=["src"],Zh=["disabled"],$h=Vh(()=>Vt("footer",{class:"footer"},[Vt("a",{class:"footer__link",href:"https://mologafest.ru/"},"Вернуться на сайт")],-1)),td=Mo({__name:"App",setup(u){const o=pe(),x=pe(!1),C=pe(),O=pe(!1),A=Fo(()=>!!x.value);function z(e){o.value=e}function h(){o.value=void 0}function r(){h(),x.value=!1}async function l(e){x.value=!0,await Ma(),new an.fabric.StaticCanvas(C.value,{width:1333,height:2e3}).loadFromJSON(e,()=>{})}function c(){C.value&&(O.value=!0,C.value.toBlob(e=>{if(!e){alert("Ошибка загрузки"),O.value=!1;return}O.value=!1;const n=document.createElement("a");n.download="filename.png",n.href=URL.createObjectURL(e),n.click()}))}return(e,n)=>(me(),Ae("div",{class:lr(["page",{"result-page":A.value}])},[Vt("div",Gh,[A.value?(me(),Ae(ye,{key:1},[Vt("canvas",{class:"result-page__canvas",ref_key:"canvasElem",ref:C},null,512),Vt("button",{class:"result-page__btn btn",disabled:O.value,onClick:c},"Скачать",8,Zh),Vt("button",{class:"result-page__btn btn",onClick:r},"Сменить шаблон")],64)):(me(),Ae(ye,{key:0},[o.value?Za("",!0):(me(),Ae("div",Kh,"Выбрать шаблон")),o.value?(me(),Ja(Nh,{key:1,class:"page__editor",template:o.value,onSave:l,onExit:h},null,8,["template"])):(me(),Ae("div",qh,[(me(!0),Ae(ye,null,vf(Pa(Th)(),t=>(me(),Ae("a",{class:"templates__item",href:"#",key:t.id,onClick:nn(s=>z(t),["prevent"])},[Vt("img",{class:"templates__img",alt:"Шаблон с лицом для вставки",src:t.url},null,8,Qh)],8,Jh))),128))]))],64)),$h])],2))}});const ed=Ro(td,[["__scopeId","data-v-d7def800"]]);new Date>=new Date(16906752e5)?alert("error"):bh(ed).mount("#app");
